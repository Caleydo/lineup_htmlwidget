{"version":3,"sources":["webpack://LineUpJS/webpack/universalModuleDefinition","webpack://LineUpJS/webpack/bootstrap","webpack://LineUpJS/./node_modules/tslib/tslib.es6.js","webpack://LineUpJS/./src/model/annotations.ts","webpack://LineUpJS/./src/model/Column.ts","webpack://LineUpJS/./src/renderer/utils.ts","webpack://LineUpJS/./src/model/INumberColumn.ts","webpack://LineUpJS/./src/model/missing.ts","webpack://LineUpJS/./src/model/ValueColumn.ts","webpack://LineUpJS/./src/styles/index.ts","webpack://LineUpJS/./src/renderer/interfaces.ts","webpack://LineUpJS/./src/internal/AEventDispatcher.ts","webpack://LineUpJS/./src/model/Ranking.ts","webpack://LineUpJS/./src/renderer/missing.ts","webpack://LineUpJS/./node_modules/d3-array/src/ascending.js","webpack://LineUpJS/./node_modules/d3-array/src/bisector.js","webpack://LineUpJS/./node_modules/d3-array/src/bisect.js","webpack://LineUpJS/./node_modules/d3-array/src/cross.js","webpack://LineUpJS/./node_modules/d3-array/src/number.js","webpack://LineUpJS/./node_modules/d3-array/src/variance.js","webpack://LineUpJS/./node_modules/d3-array/src/deviation.js","webpack://LineUpJS/./node_modules/d3-array/src/extent.js","webpack://LineUpJS/./node_modules/d3-array/src/array.js","webpack://LineUpJS/./node_modules/d3-array/src/constant.js","webpack://LineUpJS/./node_modules/d3-array/src/identity.js","webpack://LineUpJS/./node_modules/d3-array/src/range.js","webpack://LineUpJS/./node_modules/d3-array/src/ticks.js","webpack://LineUpJS/./node_modules/d3-array/src/threshold/sturges.js","webpack://LineUpJS/./node_modules/d3-array/src/histogram.js","webpack://LineUpJS/./node_modules/d3-array/src/quantile.js","webpack://LineUpJS/./node_modules/d3-array/src/max.js","webpack://LineUpJS/./node_modules/d3-array/src/mean.js","webpack://LineUpJS/./node_modules/d3-array/src/median.js","webpack://LineUpJS/./node_modules/d3-array/src/min.js","webpack://LineUpJS/./node_modules/d3-array/src/transpose.js","webpack://LineUpJS/./node_modules/popper.js/dist/esm/popper.js","webpack://LineUpJS/./src/ui/dialogs/ADialog.ts","webpack://LineUpJS/./src/internal/math.ts","webpack://LineUpJS/./src/model/NumberColumn.ts","webpack://LineUpJS/./src/model/ICategoricalColumn.ts","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/colors.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/category10.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Accent.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Dark2.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Pastel1.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Paired.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Pastel2.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Set1.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Set2.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/categorical/Set3.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/ramp.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/BrBG.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/PRGn.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/PiYG.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/PuOr.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/RdBu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/RdGy.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/diverging/Spectral.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-single/Blues.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-single/Greens.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-single/Greys.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-single/Purples.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-single/Reds.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/sinebow.js","webpack://LineUpJS/./node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js","webpack://LineUpJS/./node_modules/d3-time/src/interval.js","webpack://LineUpJS/./node_modules/d3-time/src/millisecond.js","webpack://LineUpJS/./node_modules/d3-time/src/duration.js","webpack://LineUpJS/./node_modules/d3-time/src/second.js","webpack://LineUpJS/./node_modules/d3-time/src/minute.js","webpack://LineUpJS/./node_modules/d3-time/src/hour.js","webpack://LineUpJS/./node_modules/d3-time/src/day.js","webpack://LineUpJS/./node_modules/d3-time/src/week.js","webpack://LineUpJS/./node_modules/d3-time/src/month.js","webpack://LineUpJS/./node_modules/d3-time/src/year.js","webpack://LineUpJS/./node_modules/d3-time/src/utcMinute.js","webpack://LineUpJS/./node_modules/d3-time/src/utcHour.js","webpack://LineUpJS/./node_modules/d3-time/src/utcDay.js","webpack://LineUpJS/./node_modules/d3-time/src/utcWeek.js","webpack://LineUpJS/./node_modules/d3-time/src/utcMonth.js","webpack://LineUpJS/./node_modules/d3-time/src/utcYear.js","webpack://LineUpJS/./src/provider/ADataProvider.ts","webpack://LineUpJS/./src/model/CategoricalColumn.ts","webpack://LineUpJS/./node_modules/d3-selection/src/namespaces.js","webpack://LineUpJS/./node_modules/d3-selection/src/namespace.js","webpack://LineUpJS/./node_modules/d3-selection/src/creator.js","webpack://LineUpJS/./node_modules/d3-selection/src/selector.js","webpack://LineUpJS/./node_modules/d3-selection/src/selectorAll.js","webpack://LineUpJS/./node_modules/d3-selection/src/matcher.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/sparse.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/enter.js","webpack://LineUpJS/./node_modules/d3-selection/src/constant.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/data.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/sort.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/attr.js","webpack://LineUpJS/./node_modules/d3-selection/src/window.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/classed.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/text.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/html.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/raise.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/lower.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/insert.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/remove.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/clone.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/on.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/dispatch.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/index.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/select.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/selectAll.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/filter.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/exit.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/merge.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/order.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/call.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/nodes.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/node.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/size.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/empty.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/each.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/style.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/property.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/append.js","webpack://LineUpJS/./node_modules/d3-selection/src/selection/datum.js","webpack://LineUpJS/./node_modules/d3-selection/src/select.js","webpack://LineUpJS/./node_modules/d3-selection/src/local.js","webpack://LineUpJS/./node_modules/d3-selection/src/sourceEvent.js","webpack://LineUpJS/./node_modules/d3-selection/src/point.js","webpack://LineUpJS/./node_modules/d3-selection/src/mouse.js","webpack://LineUpJS/./node_modules/d3-selection/src/selectAll.js","webpack://LineUpJS/./node_modules/d3-selection/src/touch.js","webpack://LineUpJS/./src/model/internal.ts","webpack://LineUpJS/./src/model/BooleansColumn.ts","webpack://LineUpJS/./src/model/CategoricalMapColumn.ts","webpack://LineUpJS/./src/model/CategoricalsColumn.ts","webpack://LineUpJS/./src/model/DateColumn.ts","webpack://LineUpJS/./src/model/DatesMapColumn.ts","webpack://LineUpJS/./src/model/NumberMapColumn.ts","webpack://LineUpJS/./src/model/SetColumn.ts","webpack://LineUpJS/./src/model/StringsColumn.ts","webpack://LineUpJS/./src/model/DummyColumn.ts","webpack://LineUpJS/./src/model/index.ts","webpack://LineUpJS/./node_modules/d3-color/src/define.js","webpack://LineUpJS/./node_modules/d3-color/src/color.js","webpack://LineUpJS/./node_modules/d3-color/src/math.js","webpack://LineUpJS/./node_modules/d3-color/src/lab.js","webpack://LineUpJS/./node_modules/d3-color/src/cubehelix.js","webpack://LineUpJS/./src/model/StringColumn.ts","webpack://LineUpJS/./src/model/ColorMappingFunction.ts","webpack://LineUpJS/./src/model/NumbersColumn.ts","webpack://LineUpJS/./node_modules/lineupengine/build/lineupengine.js","webpack://LineUpJS/./src/ui/missing.ts","webpack://LineUpJS/./node_modules/d3-format/src/formatDecimal.js","webpack://LineUpJS/./node_modules/d3-format/src/exponent.js","webpack://LineUpJS/./node_modules/d3-format/src/formatSpecifier.js","webpack://LineUpJS/./node_modules/d3-format/src/formatTrim.js","webpack://LineUpJS/./node_modules/d3-format/src/formatPrefixAuto.js","webpack://LineUpJS/./node_modules/d3-format/src/defaultLocale.js","webpack://LineUpJS/./node_modules/d3-format/src/formatRounded.js","webpack://LineUpJS/./node_modules/d3-format/src/formatTypes.js","webpack://LineUpJS/./node_modules/d3-format/src/identity.js","webpack://LineUpJS/./node_modules/d3-format/src/locale.js","webpack://LineUpJS/./node_modules/d3-format/src/formatGroup.js","webpack://LineUpJS/./node_modules/d3-format/src/formatNumerals.js","webpack://LineUpJS/./node_modules/d3-format/src/precisionFixed.js","webpack://LineUpJS/./node_modules/d3-format/src/precisionPrefix.js","webpack://LineUpJS/./node_modules/d3-format/src/precisionRound.js","webpack://LineUpJS/./src/ui/dialogs/utils.ts","webpack://LineUpJS/./src/model/MappingFunction.ts","webpack://LineUpJS/./src/model/CompositeColumn.ts","webpack://LineUpJS/./src/model/BoxPlotColumn.ts","webpack://LineUpJS/./src/model/ArrayColumn.ts","webpack://LineUpJS/./src/model/HierarchyColumn.ts","webpack://LineUpJS/./src/model/MapColumn.ts","webpack://LineUpJS/./src/model/CompositeNumberColumn.ts","webpack://LineUpJS/./src/config.ts","webpack://LineUpJS/./src/interfaces.ts","webpack://LineUpJS/./src/model/AggregateGroupColumn.ts","webpack://LineUpJS/./src/model/RankColumn.ts","webpack://LineUpJS/./src/ui/LineUp.ts","webpack://LineUpJS/./src/ui/dialogs/ChangeRendererDialog.ts","webpack://LineUpJS/./src/ui/dialogs/MoreColumnOptionsDialog.ts","webpack://LineUpJS/./src/ui/dialogs/RenameDialog.ts","webpack://LineUpJS/./src/ui/dialogs/BooleanFilterDialog.ts","webpack://LineUpJS/./src/ui/dialogs/CategoricalFilterDialog.ts","webpack://LineUpJS/./src/ui/dialogs/CategoricalMappingFilterDialog.ts","webpack://LineUpJS/./src/ui/dialogs/CompositeChildrenDialog.ts","webpack://LineUpJS/./src/ui/dialogs/CutOffHierarchyDialog.ts","webpack://LineUpJS/./src/ui/dialogs/EditPatternDialog.ts","webpack://LineUpJS/./src/ui/dialogs/MappingLineDialog.ts","webpack://LineUpJS/./src/ui/dialogs/MappingsFilterDialog.ts","webpack://LineUpJS/./src/ui/dialogs/ReduceDialog.ts","webpack://LineUpJS/./src/ui/dialogs/ScriptEditDialog.ts","webpack://LineUpJS/./src/ui/dialogs/SearchDialog.ts","webpack://LineUpJS/./src/ui/dialogs/StringFilterDialog.ts","webpack://LineUpJS/./src/ui/dialogs/WeightsEditDialog.ts","webpack://LineUpJS/./src/ui/dialogs/GroupDialog.ts","webpack://LineUpJS/./src/ui/dialogs/SortDialog.ts","webpack://LineUpJS/./src/ui/dialogs/ColorMappingDialog.ts","webpack://LineUpJS/./src/ui/toolbar.ts","webpack://LineUpJS/./src/ui/dialogs/groupNumber.ts","webpack://LineUpJS/./src/ui/panel/SearchBox.ts","webpack://LineUpJS/./src/model/ActionColumn.ts","webpack://LineUpJS/./src/model/GroupColumn.ts","webpack://LineUpJS/./src/model/ImpositionBoxPlotColumn.ts","webpack://LineUpJS/./src/model/ImpositionCompositeColumn.ts","webpack://LineUpJS/./src/model/ImpositionCompositesColumn.ts","webpack://LineUpJS/./src/model/StackColumn.ts","webpack://LineUpJS/./src/provider/utils.ts","webpack://LineUpJS/./src/model/Group.ts","webpack://LineUpJS/./src/model/OrdinalColumn.ts","webpack://LineUpJS/./src/model/ReduceColumn.ts","webpack://LineUpJS/./src/model/ScriptColumn.ts","webpack://LineUpJS/./src/model/SelectionColumn.ts","webpack://LineUpJS/./src/provider/LocalDataProvider.ts","webpack://LineUpJS/./src/internal/dnd.ts","webpack://LineUpJS/./src/ui/header.ts","webpack://LineUpJS/./node_modules/d3-interpolate/src/basis.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/basisClosed.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/constant.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/color.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/rgb.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/array.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/date.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/number.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/object.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/string.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/transform/parse.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/value.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/round.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/transform/decompose.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/transform/index.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/zoom.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/hsl.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/hcl.js","webpack://LineUpJS/./node_modules/d3-interpolate/src/cubehelix.js","webpack://LineUpJS/./src/model/IArrayColumn.ts","webpack://LineUpJS/./src/model/NestedColumn.ts","webpack://LineUpJS/./node_modules/d3-time-format/src/locale.js","webpack://LineUpJS/./node_modules/d3-time-format/src/defaultLocale.js","webpack://LineUpJS/./node_modules/d3-time-format/src/isoFormat.js","webpack://LineUpJS/./node_modules/d3-time-format/src/isoParse.js","webpack://LineUpJS/./src/ui/animation.ts","webpack://LineUpJS/./src/ui/RenderColumn.ts","webpack://LineUpJS/./src/ui/MultiLevelRenderColumn.ts","webpack://LineUpJS/./src/ui/SelectionManager.ts","webpack://LineUpJS/./src/ui/EngineRanking.ts","webpack://LineUpJS/./src/model/interfaces.ts","webpack://LineUpJS/./src/internal/utils.ts","webpack://LineUpJS/./src/internal/debounce.ts","webpack://LineUpJS/./src/renderer/ActionRenderer.ts","webpack://LineUpJS/./src/renderer/AggregateGroupRenderer.ts","webpack://LineUpJS/./src/renderer/StringCellRenderer.ts","webpack://LineUpJS/./src/renderer/AnnotationRenderer.ts","webpack://LineUpJS/./src/renderer/impose.ts","webpack://LineUpJS/./src/renderer/BarCellRenderer.ts","webpack://LineUpJS/./src/renderer/DefaultCellRenderer.ts","webpack://LineUpJS/./src/renderer/BooleanCellRenderer.ts","webpack://LineUpJS/./src/renderer/BoxplotCellRenderer.ts","webpack://LineUpJS/./src/renderer/BrightnessCellRenderer.ts","webpack://LineUpJS/./src/renderer/CategoricalCellRenderer.ts","webpack://LineUpJS/./src/renderer/UpSetCellRenderer.ts","webpack://LineUpJS/./src/renderer/CategoricalHeatmapCellRenderer.ts","webpack://LineUpJS/./src/renderer/CategoricalStackedDistributionlCellRenderer.ts","webpack://LineUpJS/./src/renderer/CircleCellRenderer.ts","webpack://LineUpJS/./src/renderer/DotCellRenderer.ts","webpack://LineUpJS/./src/renderer/GroupCellRenderer.ts","webpack://LineUpJS/./src/renderer/ANumbersCellRenderer.ts","webpack://LineUpJS/./src/renderer/HeatmapCellRenderer.ts","webpack://LineUpJS/./src/ui/dialogs/InputNumberDialog.ts","webpack://LineUpJS/./src/renderer/HistogramCellRenderer.ts","webpack://LineUpJS/./src/renderer/ImageCellRenderer.ts","webpack://LineUpJS/./src/renderer/InterleavingCellRenderer.ts","webpack://LineUpJS/./src/renderer/LinkCellRenderer.ts","webpack://LineUpJS/./src/renderer/TableCellRenderer.ts","webpack://LineUpJS/./src/renderer/LinkMapCellRenderer.ts","webpack://LineUpJS/./src/renderer/LoadingCellRenderer.ts","webpack://LineUpJS/./src/renderer/MapBarCellRenderer.ts","webpack://LineUpJS/./src/renderer/RankCellRenderer.ts","webpack://LineUpJS/./src/renderer/SparklineCellRenderer.ts","webpack://LineUpJS/./src/renderer/VerticalBarCellRenderer.ts","webpack://LineUpJS/./src/renderer/index.ts","webpack://LineUpJS/./src/renderer/AAggregatedGroupRenderer.ts","webpack://LineUpJS/./src/renderer/MultiLevelCellRenderer.ts","webpack://LineUpJS/./node_modules/d3-collection/src/map.js","webpack://LineUpJS/./node_modules/d3-collection/src/set.js","webpack://LineUpJS/./node_modules/d3-scale/src/array.js","webpack://LineUpJS/./node_modules/d3-scale/src/ordinal.js","webpack://LineUpJS/./node_modules/d3-scale/src/constant.js","webpack://LineUpJS/./node_modules/d3-scale/src/number.js","webpack://LineUpJS/./node_modules/d3-scale/src/continuous.js","webpack://LineUpJS/./node_modules/d3-scale/src/tickFormat.js","webpack://LineUpJS/./node_modules/d3-scale/src/linear.js","webpack://LineUpJS/./node_modules/d3-scale/src/nice.js","webpack://LineUpJS/./node_modules/d3-scale/src/log.js","webpack://LineUpJS/./node_modules/d3-scale/src/pow.js","webpack://LineUpJS/./src/model/BooleanColumn.ts","webpack://LineUpJS/./src/model/StringMapColumn.ts","webpack://LineUpJS/./src/ui/dialogs/DialogManager.ts","webpack://LineUpJS/./src/ui/EngineRenderer.ts","webpack://LineUpJS/./src/ui/dialogs/AddonDialog.ts","webpack://LineUpJS/./src/ui/panel/Hierarchy.ts","webpack://LineUpJS/./src/ui/panel/SidePanelEntryVis.ts","webpack://LineUpJS/./src/ui/dialogs/RenameRankingDialog.ts","webpack://LineUpJS/./src/ui/dialogs/MoreRankingOptionsDialog.ts","webpack://LineUpJS/./src/ui/panel/SidePanelRanking.ts","webpack://LineUpJS/./src/ui/dialogs/ChooseRankingDialog.ts","webpack://LineUpJS/./src/ui/panel/SidePanel.ts","webpack://LineUpJS/./src/ui/SlopeGraph.ts","webpack://LineUpJS/./src/model/AnnotateColumn.ts","webpack://LineUpJS/./src/ui/taggle/Taggle.ts","webpack://LineUpJS/./src/internal/merge.ts","webpack://LineUpJS/./src/browser.ts","webpack://LineUpJS/./src/ui/ALineUp.ts","webpack://LineUpJS/./src/provider/RemoteDataProvider.ts","webpack://LineUpJS/./src/model/MultiLevelCompositeColumn.ts","webpack://LineUpJS/./src/ui/taggle/TaggleRenderer.ts","webpack://LineUpJS/./src/ui/taggle/spaceFillingRule.ts","webpack://LineUpJS/./src/internal/OrderedSet.ts","webpack://LineUpJS/./src/model/DatesColumn.ts","webpack://LineUpJS/./src/provider/ACommonDataProvider.ts","webpack://LineUpJS/./src/renderer/SelectionRenderer.ts","webpack://LineUpJS/./node_modules/d3-drag/src/noevent.js","webpack://LineUpJS/./node_modules/d3-drag/src/nodrag.js","webpack://LineUpJS/./node_modules/d3-drag/src/constant.js","webpack://LineUpJS/./node_modules/d3-drag/src/event.js","webpack://LineUpJS/./node_modules/d3-drag/src/drag.js","webpack://LineUpJS/./node_modules/d3-dispatch/src/dispatch.js","webpack://LineUpJS/./src/builder/column/ColumnBuilder.ts","webpack://LineUpJS/./src/builder/LineUpBuilder.ts","webpack://LineUpJS/./src/builder/RankingBuilder.ts","webpack://LineUpJS/./src/builder/DataBuilder.ts","webpack://LineUpJS/./src/builder/column/CategoricalColumnBuilder.ts","webpack://LineUpJS/./src/builder/column/NumberColumnBuilder.ts","webpack://LineUpJS/./src/builder/column/StringColumnBuilder.ts","webpack://LineUpJS/./src/builder/column/DateColumnBuilder.ts","webpack://LineUpJS/./src/builder/column/HierarchyColumnBuilder.ts","webpack://LineUpJS/./src/builder/column/ActionsColumnBuilder.ts","webpack://LineUpJS/./src/builder/adapter/column.ts","webpack://LineUpJS/./src/builder/adapter/ranking.ts","webpack://LineUpJS/./src/builder/adapter/utils.ts","webpack://LineUpJS/./src/builder/adapter/lineup.ts","webpack://LineUpJS/./src/builder/adapter/index.ts","webpack://LineUpJS/./src/builder/index.ts","webpack://LineUpJS/./node_modules/fast-deep-equal/index.js","webpack://LineUpJS/./node_modules/detect-browser/index.js","webpack://LineUpJS/./src/index.ts","webpack://LineUpJS/./node_modules/reflect-metadata/Reflect.js","webpack://LineUpJS/./src/styles/_vars.scss"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","extendStatics","b","setPrototypeOf","__proto__","Array","__extends","__","this","constructor","__assign","assign","arguments","length","apply","__decorate","decorators","target","desc","getOwnPropertyDescriptor","Reflect","decorate","supportType","for","category","SupportType","metadata","SortByDefault","order","isSortingAscByDefault","col","clazz","hasMetadata","Categories","string","label","categorical","number","date","array","map","composite","support","other","categories","Category","cat","toolbar","keys","_i","dialogAddons","cache","Map","isSupportType","categoryOf","getMetadata","_Column__WEBPACK_IMPORTED_MODULE_1__","getPrototypeOf","categoryOfDesc","models","type","getAllToolbarActions","has","actions","obj","toolbarIcon","getOwnMetadata","push","set","getAllToolbarDialogAddons","cacheKey","symbol","Column","_super","id","_this","width","parent","uid","_internal_utils__WEBPACK_IMPORTED_MODULE_3__","renderer","groupRenderer","summaryRenderer","visible","description","color","DEFAULT_COLOR","tslib__WEBPACK_IMPORTED_MODULE_0__","Boolean","fixed","frozen","assignNewId","idGenerator","fqid","fqpath","indexOf","createEventList","concat","EVENT_WIDTH_CHANGED","EVENT_LABEL_CHANGED","EVENT_METADATA_CHANGED","EVENT_VISIBILITY_CHANGED","EVENT_SUMMARY_RENDERER_TYPE_CHANGED","EVENT_RENDERER_TYPE_CHANGED","EVENT_GROUP_RENDERER_TYPE_CHANGED","EVENT_DIRTY","EVENT_DIRTY_HEADER","EVENT_DIRTY_VALUES","on","listener","getWidth","hide","setVisible","show","isVisible","getVisible","fire","flatten","offset","_levelsToGo","_padding","w","setWidth","_internal_math__WEBPACK_IMPORTED_MODULE_2__","setWidthImpl","setMetaData","events","bak","getMetaData","sortByMe","ascending","priority","_annotations__WEBPACK_IMPORTED_MODULE_6__","findMyRanker","sortBy","groupByMe","toggleGrouping","isGroupedBy","getGroupCriteria","toggleMySorting","toggleSorting","isSortedByMeImpl","selector","ranker","asc","undefined","criterias","index","findIndex","isSortedByMe","getSortCriteria","groupSortByMe","groupSortBy","toggleMyGroupSorting","toggleGroupSorting","isGroupSortedByMe","getGroupSortCriteria","removeMe","remove","insertAfterMe","insertAfter","dump","toDescRef","getRenderer","getGroupRenderer","getSummaryRenderer","restore","_factory","rendererType","getLabel","row","String","getValue","_row","getColor","isMissing","_missing__WEBPACK_IMPORTED_MODULE_5__","compare","_a","_b","group","_Group__WEBPACK_IMPORTED_MODULE_4__","groupCompare","a","toLowerCase","localeCompare","isFiltered","filter","setRenderer","setDefaultRenderer","setGroupRenderer","setDefaultGroupRenderer","setSummaryRenderer","setDefaultSummaryRenderer","setDefaultWidth","FLAT_ALL_COLUMNS","_internal_AEventDispatcher__WEBPACK_IMPORTED_MODULE_1__","attr","node","attrs","styles","text","forEach","v","getAttribute","setAttribute","style","getPropertyValue","setProperty","setText","noop","noRenderer","template","update","render","textContent","callback","from","querySelectorAll","forEachChild","children","matchColumns","columns","childElementCount","every","dataset","columnId","column","rendererId","idsAndRenderer","Set","idAndRenderer","removeChild","cnode","querySelector","insertAdjacentHTML","lastElementChild","appendChild","innerHTML","join","children_1","wideEnough","labels","_config__WEBPACK_IMPORTED_MODULE_0__","adaptTextColorToBgColor","bgColor","d3_color__WEBPACK_IMPORTED_MODULE_1__","adaptDynamicColorToBgColor","title","adapt","innerText","span","ownerDocument","createElement","classList","add","uniqueId","idCounter","prefix","toString","ESortMethod","EAdvancedSortMethod","DEFAULT_FORMATTER","d3_format__WEBPACK_IMPORTED_MODULE_0__","isNumberColumn","_Column__WEBPACK_IMPORTED_MODULE_2__","getNumber","match","compareBoxPlot","aVal","getBoxPlotData","bVal","_missing__WEBPACK_IMPORTED_MODULE_3__","method","getSortMethod","numberCompare","getBoxPlotNumber","data","getRawBoxPlotData","NaN","isBoxPlotColumn","isNumbersColumn","getNumbers","aMissing","bMissing","isNaN","noNumberFilter","min","Infinity","max","filterMissing","isEqualNumberFilter","_internal__WEBPACK_IMPORTED_MODULE_1__","isNumberIncluded","isFinite","isMissingValue","isArray","isUnknown","FIRST_IS_NAN","FIRST_IS_MISSING","missingGroup","ValueColumn","accessor","loaded","lazyLoaded","EVENT_DATA_LOADED","isLoaded","getRaw","setLoaded","RENDERER_LOADING","raw_loader_vars_scss__WEBPACK_IMPORTED_MODULE_0__","getStyle","defaultValue","slice","COLUMN_PADDING","parseInt","DASH","height","UPSET","circle","inactive","parseFloat","stroke","DOT","size","opacity","BOX_PLOT","box","sort","outlier","AGGREGATE","strokeWidth","SLOPEGRAPH_WIDTH","CANVAS_HEIGHT","ERenderMode","suffix","AEventDispatcher","listenerEvents","listeners","d3_dispatch__WEBPACK_IMPORTED_MODULE_0__","that","forwarder","args","fireImpl","primaryType","origin","split","listenersChanged","_type","_active","context","source","forward","types","unforward","Ranking","maxSortCriteria","maxGroupColumns","sortCriteria","groupSortCriteria","groupColumns","comparator","groupComparator","grouper","g","_Group__WEBPACK_IMPORTED_MODULE_5__","groups","gi","_internal__WEBPACK_IMPORTED_MODULE_6__","dirtyOrder","EVENT_DIRTY_ORDER","startsWith","EVENT_FILTER_CHANGED","EVENT_GROUPS_CHANGED","EVENT_ADD_COLUMN","EVENT_REMOVE_COLUMN","EVENT_GROUP_CRITERIA_CHANGED","EVENT_MOVE_COLUMN","EVENT_GROUP_SORT_CRITERIA_CHANGED","EVENT_COLUMN_VISIBILITY_CHANGED","EVENT_SORT_CRITERIA_CHANGED","EVENT_ORDER_CHANGED","setLabel","setOrder","setGroups","old","getOrder","oldGroups","getGroups","clear","child","sortColumn","help","find","groupBy","restoreSortCriteria","dumped","setSortCriteria","setGroupSortCriteria","levelsToGo","padding","acc","_Column__WEBPACK_IMPORTED_MODULE_4__","getPrimarySortCriteria","toggleSortingLogic","newSort","current","defaultAsc","_annotations__WEBPACK_IMPORTED_MODULE_3__","splice","newGroupings","setGroupCriteria","hierarchyLogic","entries","entry","Math","values","equalCriteria","_NumberColumn__WEBPACK_IMPORTED_MODULE_7__","EVENT_SORTMETHOD_CHANGED","triggerResort","cols","groupColumn","_internal_AEventDispatcher__WEBPACK_IMPORTED_MODULE_2__","EVENT_GROUPING_CHANGED","setMaxSortCriteria","getMaxSortCriteria","setMaxGroupColumns","getMaxGroupColumns","triggerGroupResort","sortCriterias","bakMulti","insert","oldValue","newValue","move","console","error","moveAfter","reference","findByPath","indices","Number","shift","at","ref","isSortCriteria","sortCriteriaChanged","isGroupSortCriteria","groupSortCriteriaChanged","newGrouping","isGroupColumn","removed","idOrFilter","r_1","flatColumns","some","_CompositeColumn__WEBPACK_IMPORTED_MODULE_8__","ai","bi","renderMissingValue","ctx","x","y","dashX","_styles__WEBPACK_IMPORTED_MODULE_0__","dashY","fillStyle","fillRect","renderMissingDOM","missing","toggle","renderMissingCanvas","bisector","f","ascendingComparator","left","lo","hi","mid","right","ascendingBisect","bisectRight","bisect","variance","valueof","delta","mean","sum","deviation","sqrt","extent","array_array","constant","identity","range","start","stop","step","ceil","e10","e5","e2","ticks","count","reverse","tickIncrement","floor","power","log","LN10","pow","tickStep","step0","abs","step1","sturges","LN2","src_histogram","domain","threshold","histogram","xz","x0","x1","tz","pop","bin","bins","_","thresholds","quantile","i0","value0","src_max","src_mean","median","numbers","src_min","src_transpose","matrix","transpose_length","transpose","j","isBrowser","document","longerTimeoutBrowsers","timeoutDuration","navigator","userAgent","debounce","Promise","fn","called","resolve","then","scheduled","setTimeout","isFunction","functionToCheck","getStyleComputedProperty","element","nodeType","css","getComputedStyle","getParentNode","nodeName","parentNode","host","getScrollParent","body","_getStyleComputedProp","overflow","overflowX","overflowY","test","isIE11","MSInputMethodContext","documentMode","isIE10","isIE","version","getOffsetParent","documentElement","noOffsetParent","offsetParent","nextElementSibling","getRoot","findCommonOffsetParent","element1","element2","compareDocumentPosition","Node","DOCUMENT_POSITION_FOLLOWING","end","createRange","setStart","setEnd","commonAncestorContainer","contains","firstElementChild","isOffsetContainer","element1root","getScroll","upperSide","html","scrollingElement","getBordersSize","axis","sideA","sideB","getSize","computedStyle","getWindowSizes","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","props","descriptor","configurable","writable","protoProps","staticProps","_extends","getClientRect","offsets","bottom","top","getBoundingClientRect","rect","scrollTop","scrollLeft","e","result","sizes","clientWidth","clientHeight","horizScrollbar","offsetWidth","vertScrollbar","offsetHeight","getOffsetRectRelativeToArbitraryNode","fixedPosition","isHTML","childrenRect","parentRect","scrollParent","borderTopWidth","borderLeftWidth","marginTop","marginLeft","subtract","modifier","includeScroll","getFixedPositionOffsetParent","parentElement","el","getBoundaries","popper","boundariesElement","boundaries","excludeScroll","relativeOffset","innerWidth","innerHeight","getViewportOffsetRectRelativeToArtbitraryNode","boundariesNode","isFixed","_getWindowSizes","isPaddingNumber","computeAutoPlacement","placement","refRect","rects","sortedAreas","area","_ref","getArea","filteredAreas","_ref2","computedPlacement","variation","getReferenceOffsets","state","getOuterSizes","marginBottom","marginRight","getOppositePlacement","hash","replace","matched","getPopperOffsets","referenceOffsets","popperRect","popperOffsets","isHoriz","mainSide","secondarySide","measurement","secondaryMeasurement","arr","check","runModifiers","modifiers","ends","prop","cur","warn","enabled","isModifierEnabled","modifierName","getSupportedPropertyName","prefixes","upperProp","charAt","toUpperCase","toCheck","getWindow","defaultView","setupEventListeners","options","updateBound","addEventListener","passive","scrollElement","attachToScrollParents","event","scrollParents","isBody","eventsEnabled","disableEventListeners","cancelAnimationFrame","scheduleUpdate","removeEventListener","removeEventListeners","isNumeric","setStyles","unit","isModifierRequired","requestingName","requestedName","requesting","isRequired","_requesting","requested","placements","validPlacements","clockwise","counter","BEHAVIORS","FLIP","CLOCKWISE","COUNTERCLOCKWISE","parseOffset","basePlacement","useHeight","fragments","frag","trim","divider","search","splitRegex","ops","op","mergeWithPrevious","reduce","str","toValue","index2","Defaults","positionFixed","removeOnDestroy","onCreate","onUpdate","shiftvariation","_data$offsets","isVertical","side","shiftOffsets","preventOverflow","transformProp","popperStyles","transform","primary","escapeWithReference","secondary","keepTogether","opSide","arrow","_data$offsets$arrow","arrowElement","len","sideCapitalized","altSide","arrowElementSize","center","popperMarginSide","popperBorderSide","sideValue","round","flip","flipped","originalPlacement","placementOpposite","flipOrder","behavior","refOffsets","overlapsRef","overflowsLeft","overflowsRight","overflowsTop","overflowsBottom","overflowsBoundaries","flippedVariation","flipVariations","getOppositeVariation","inner","subtractLength","bound","attributes","computeStyle","legacyGpuAccelerationOption","gpuAcceleration","offsetParentRect","position","prefixedProperty","willChange","invertTop","invertLeft","x-placement","arrowStyles","applyStyle","removeAttribute","setAttributes","onLoad","modifierOptions","Popper","requestAnimationFrame","isDestroyed","isCreated","jquery","enableEventListeners","Utils","global","PopperUtils","ADialog_ADialog","ADialog","dialog","fullDialog","resetPossible","toggleDialog","attachment","level","equals","open","manager","removeLike","build","closest","merge","auto","self","focus","reset","onclick","evt","stopPropagation","preventDefault","onsubmit","checkValidity","submit","destroy","cancel","findInput","__webpack_exports__","getNumberOfBins","LazyBoxPlotData","scale","histGen","_model__WEBPACK_IMPORTED_MODULE_2__","d3_array__WEBPACK_IMPORTED_MODULE_1__","hist","sorted","q1","q3","iqr","_target","propertyKey","computeStats","maxBin","computeHist","missingCount","k","precision","similar","NumberColumn","currentFilter","_INumberColumn__WEBPACK_IMPORTED_MODULE_6__","numberFormat","d3_format__WEBPACK_IMPORTED_MODULE_1__","currentGroupThresholds","groupSortMethod","mapping","_MappingFunction__WEBPACK_IMPORTED_MODULE_7__","original","clone","colorMapping","_ColorMappingFunction__WEBPACK_IMPORTED_MODULE_10__","missingValue","_internal__WEBPACK_IMPORTED_MODULE_5__","stratifyThreshholds","stratifyThresholds","NumberColumn_1","EVENT_MAPPING_CHANGED","EVENT_COLOR_MAPPING_CHANGED","raw","getRawValue","getRange","_missing__WEBPACK_IMPORTED_MODULE_8__","getRawNumber","rows","getOriginalMapping","getMapping","setMapping","eq","getColorMapping","setColorMapping","getFilter","setFilter","getGroupThresholds","setGroupThresholds","_internal__WEBPACK_IMPORTED_MODULE_2__","treshholdIndex","setSortMethod","sortMethod","_ValueColumn__WEBPACK_IMPORTED_MODULE_9__","isSetColumn","_IArrayColumn__WEBPACK_IMPORTED_MODULE_1__","toCategory","nextColor","_Column__WEBPACK_IMPORTED_MODULE_0__","compareCategory","aNull","bNull","toCategories","isCategoricalColumn","getCategory","isEmptyFilter","isEqualCategoricalFilter","al","bl","arrayEquals","isCategoryIncluded","filterObj","includes","RegExp","colors","specifier","category10","Accent","Dark2","Pastel1","Pastel2","Set1","Set2","Set3","ramp","scheme","d3_interpolate","BrBG","PRGn","PiYG","PuOr","RdBu","RdGy","RdYlBu","RdYlGn","Spectral","BuGn","BuPu","GnBu","OrRd","PuBuGn","PuBu","PuRd","RdPu","YlGnBu","YlGn","YlOrBr","YlOrRd","Blues","Greens","Greys","Purples","Reds","Oranges","cubehelix","d3_color","warm","cool","rainbow","ts","h","PI","viridis_ramp","magma","inferno","plasma","t0","Date","t1","newInterval","floori","offseti","field","interval","d0","d1","previous","setTime","millisecond","src_millisecond","durationMinute","durationWeek","second","getUTCSeconds","minute","getMinutes","hour","getTimezoneOffset","getHours","src_hour","day","setHours","setDate","getDate","src_day","weekday","getDay","sunday","monday","tuesday","wednesday","thursday","friday","saturday","month","setMonth","getMonth","getFullYear","src_month","year","setFullYear","src_year","utcMinute","setUTCSeconds","getUTCMinutes","src_utcMinute","utcHour","setUTCMinutes","getUTCHours","src_utcHour","utcDay","setUTCHours","setUTCDate","getUTCDate","utcWeekday","getUTCDay","utcSunday","utcMonday","utcTuesday","utcWednesday","utcThursday","utcFriday","utcSaturday","utcMonth","setUTCMonth","getUTCMonth","getUTCFullYear","src_utcMonth","utcYear","setUTCFullYear","src_utcYear","ADataProvider","rankings","selection","_internal_OrderedSet__WEBPACK_IMPORTED_MODULE_3__","aggregations","createHelper","fromDescRef","fixDesc","columnTypes","_model__WEBPACK_IMPORTED_MODULE_4__","multiSelections","multiSelection","EVENT_ADD_RANKING","EVENT_REMOVE_RANKING","EVENT_SELECTION_CHANGED","EVENT_ADD_DESC","EVENT_CLEAR_DESC","EVENT_JUMP_TO_NEAREST","EVENT_GROUP_AGGREGATION_CHANGED","pushRanking","existing","cloneRanking","insertRanking","takeSnapshot","ranking","hasString","hasColumn","toClone","_model_annotations__WEBPACK_IMPORTED_MODULE_14__","_model_Ranking__WEBPACK_IMPORTED_MODULE_12__","_internal_debounce__WEBPACK_IMPORTED_MODULE_2__","triggerReorder","_model_internal__WEBPACK_IMPORTED_MODULE_11__","removeRanking","cleanUpRanking","clearRankings","getRankings","getFirstRanking","getLastRanking","ensureOneRanking","_model__WEBPACK_IMPORTED_MODULE_5__","_ranking","nextId","rankAccessor","isSelected","setter","select","deselect","setterAll","selectAll","deselectAll","isAggregated","setAggregated","dumpColumn","restoreColumn","getSelection","descRef","restoreRanking","layout","deriveRanking","bundle","toCol","_model__WEBPACK_IMPORTED_MODULE_6__","_model__WEBPACK_IMPORTED_MODULE_7__","_model__WEBPACK_IMPORTED_MODULE_8__","_model__WEBPACK_IMPORTED_MODULE_9__","stacked_1","_model__WEBPACK_IMPORTED_MODULE_10__","findDesc","unaggregateParents","delete","aggregateAllOf","aggregateAll","jumpToNearest","selectAllOf","setSelection","clearSelection","toggleSelection","additional","selectedRows","view","exportTable","_utils__WEBPACK_IMPORTED_MODULE_13__","EVENT_AGGREGATE","CategoricalColumn","lookup","_ICategoricalColumn__WEBPACK_IMPORTED_MODULE_4__","missingCategory","CategoricalColumn_1","vs","getValues","getLabels","getMap","cats","getMapLabel","getSet","_annotations__WEBPACK_IMPORTED_MODULE_1__","_ValueColumn__WEBPACK_IMPORTED_MODULE_3__","xhtml","namespaces","svg","xlink","xml","xmlns","namespace","space","local","creator","fullname","createElementNS","uri","namespaceURI","none","src_selector","empty","selectorAll","matcher","matches","matcher_element","vendorMatches","webkitMatchesSelector","msMatchesSelector","mozMatchesSelector","oMatchesSelector","src_matcher","sparse","EnterNode","datum","_next","_parent","__data__","insertBefore","next","keyPrefix","bindIndex","enter","exit","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","src_window","classArray","ClassList","_node","_names","classedAdd","names","list","classedRemove","textRemove","htmlRemove","raise","nextSibling","lower","previousSibling","firstChild","constantNull","selection_cloneShallow","cloneNode","selection_cloneDeep","filterEvents","on_event","mouseenter","mouseleave","filterContextListener","contextListener","related","relatedTarget","event1","event0","onRemove","typename","__on","capture","onAdd","wrap","customEvent","sourceEvent","dispatchEvent","params","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","Selection","parents","_groups","_parents","selection_selection","subgroups","subnode","subgroup","each","enterGroup","updateGroup","i1","_enter","_exit","groups0","groups1","m0","m1","merges","group0","group1","compareNode","sortgroups","sortgroup","nodes","getAttributeNS","removeAttributeNS","setAttributeNS","removeProperty","styleValue","classed","append","before","deep","typenames","parseTypenames","dispatch","src_select","Local","point","ownerSVGElement","createSVGPoint","clientX","clientY","matrixTransform","getScreenCTM","inverse","clientLeft","clientTop","mouse","changedTouches","src_selectAll","src_touch","touches","identifier","touch","patternFunction","pattern","Function","isDummyNumberFilter","restoreFilter","joinGroups","assert","subGroups","toGroupID","unifyParents","colorPool","act","medianIndex","_INumberColumn__WEBPACK_IMPORTED_MODULE_1__","va","_internal__WEBPACK_IMPORTED_MODULE_0__","vb","BooleansColumn","tslib_es6","ICategoricalColumn","ArrayColumn","CategoricalMapColumn","parseValue","getCategories","MapColumn","CategoricalsColumn","DateColumn","format","d3_time_format","dateFormat","parse","dateParse","av","bv","getTime","annotations","DatesMapColumn","NumberMapColumn","INumberColumn","MappingFunction","ColorMappingFunction","math","NumberMapColumn_1","internal","SetColumn","separator","normalize","sv","StringsColumn","alignment","StringColumn","escape","patternTemplates","setPattern","getPattern","StringsColumn_1","EVENT_PATTERN_CHANGED","DummyColumn","defineColumn","functions","CustomColumn","init","ActionColumn","aggregate","AggregateGroupColumn","annotate","AnnotateColumn","boolean","BooleanColumn","booleans","model_BooleansColumn","boxplot","BoxPlotColumn","categoricalMap","model_CategoricalMapColumn","categoricals","model_CategoricalsColumn","model_DateColumn","dateMap","model_DatesMapColumn","dates","DatesColumn","GroupColumn","hierarchy","HierarchyColumn","imposition","ImpositionCompositeColumn","impositionBoxPlot","ImpositionBoxPlotColumn","impositions","ImpositionCompositesColumn","ReduceColumn","nested","NestedColumn","NumbersColumn","numberMap","model_NumberMapColumn","ordinal","OrdinalColumn","rank","RankColumn","script","ScriptColumn","SelectionColumn","model_SetColumn","stack","StackColumn","stringMap","StringMapColumn","strings","model_StringsColumn","extend","definition","Color","reI","reN","reP","reHex3","reHex6","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","exec","Rgb","rgbn","rgba","hsla","rgbConvert","rgb","hex","Hsl","hsl","hslConvert","hsl2rgb","m2","displayable","brighter","darker","deg2rad","rad2deg","Xn","Yn","Zn","t2","t3","labConvert","Lab","Hcl","cos","sin","z","rgb2lrgb","xyz2lab","lab","lab2xyz","lrgb2rgb","hclConvert","atan2","hcl","A","B","C","D","E","ED","EB","BC_DA","Cubehelix","cubehelixConvert","cosh","sinh","EAlignment","StringColumn_1","_internal__WEBPACK_IMPORTED_MODULE_3__","FILTER_MISSING","aValue","bValue","_missing__WEBPACK_IMPORTED_MODULE_4__","_ValueColumn__WEBPACK_IMPORTED_MODULE_5__","InterpolatingColorFunction","SolidColorFunction","QuantizedColorFunction","base","steps","perStep","quantize","CustomColorMappingFunction","d3_scale__WEBPACK_IMPORTED_MODULE_3__","clamp","_internal_utils__WEBPACK_IMPORTED_MODULE_2__","asColorFunction","DEFAULT_COLOR_FUNCTION","sequentialColors","divergentColors","lookupInterpolatingColor","sequential","interpolateBlues","d3_scale_chromatic__WEBPACK_IMPORTED_MODULE_0__","interpolateGreens","interpolateGreys","interpolateOranges","interpolatePurples","interpolateReds","interpolateCool","interpolateCubehelixDefault","interpolateWarm","interpolatePlasma","interpolateMagma","interpolateViridis","interpolateInferno","interpolateYlOrRd","interpolateYlOrBr","interpolateBuGn","interpolateBuPu","interpolateGnBu","interpolateOrRd","interpolatePuBuGn","interpolatePuBu","interpolatePuRd","interpolateRdPu","interpolateYlGnBu","interpolateYlGn","interpolateRainbow","divergent","interpolateBrBG","interpolatePRGn","interpolatePiYG","interpolatePuOr","interpolateRdBu","interpolateRdGy","interpolateRdYlBu","interpolateRdYlGn","interpolateSpectral","_c","_d","sequentialColors_1","_e","divergentColors_1","createColorMappingFunction","restoreColorMapping","getRawNumbers","NumbersColumn_1","_NumberColumn__WEBPACK_IMPORTED_MODULE_9__","CENTER","_annotations__WEBPACK_IMPORTED_MODULE_2__","_ArrayColumn__WEBPACK_IMPORTED_MODULE_3__","default","race","abort","catch","lastFilled","key2index","exceptions","findValidStart","posByKey","pos","fillCacheTillKey","defaultRowHeight","fillCache","heightOf","exceptionsLookup","exceptionHeightOf","numberOfRows","positions","UPDATE","UPDATE_CREATE","UPDATE_REMOVE","SHOW","HIDE","nodeY","u","delay","animation","totalHeight","now","first","last","firstRowPos","endPos","y2","R","added","common","NONE","ALL","SOME","SOME_BOTTOM","SOME_TOP","handlers","animationWaiting","immediateTimeout","timersWaiting","prevs","handle","handleAnimation","handleImmediate","handleTimeouts","asInfo","setImmediate","__le_scroller__","pool","loadingPool","loading","forcedFirst","forcedLast","visibleFirstRowPos","scrollListener","abortAnimation","async","minScrollDelta","mixins","scrollingHint","batchSize","adapter","createAdapter","fragment","createDocumentFragment","addMixin","addAtBeginning","addAtBottom","removeFromBeginning","removeFromBottom","updateOffset","scroller","bodyScroller","tagName","onScrolledVertically","recreate","cleanUp","updateRow","createRow","item","selectProxy","recycle","proxy","replaceChild","removeAll","forEachRow","lastChild","updateSizer","toFixed","bodySizer","recreateAnimated","recreatePure","clearPool","previousKey","currentKey","nodeYCurrentHeight","animate","phases","offsetTop","endsWith","clearTimeout","revalidate","onScrolledImpl","onScrolled","shiftLast","shiftFirst","O","S","rules","updateRules","addRule","updateRule","deleteRule","P","H","M","scrollWidth","hashedId","tableIds","header","updateColumns","ruleNames","F","tableId","cellPool","visibleColumns","visibleFirstColumnPos","columnAdapter","createColumnAdapter","columnMixins","columnFragment","leftShift","addColumnMixin","addColumnAtStart","addColumnAtEnd","removeColumnFromStart","removeColumnFromEnd","updateColumnOffset","headerScroller","syncFrozen","onScrolledHorizontally","onScrolledHorizontallyImpl","removeCellFromStart","recycleCell","removeCellFromEnd","removeFrozenCells","removeFrozenColumns","removeAllColumns","removeAllCells","selectCell","updateCell","createCell","addCellAtStart","insertFrozenCells","insertFrozenColumns","addCellAtEnd","verifyRows","T","updateHeaders","updateHeader","createHeader","mergeColumns","cell","updateColumnWidths","L","prefetchTimeout","cleanupTimeout","prefetchRows","cleanUpRows","prefetchDown","prefetchUp","triggerPrefetch","cleanUpTop","cleanUpBottom","triggerCleanUp","hidden","onVisibilityChanged","I","sections","columnPadding","main","pushTable","doc","pushSeparator","widthChanged","IColumn","filterMissingText","filterMissingMarkup","bakMissing","idPrefix","_dialogs_utils__WEBPACK_IMPORTED_MODULE_0__","filterMissingNumberMarkup","findFilterMissing","previousElementSibling","updateFilterMissingNumberMarkup","checked","disabled","formatDecimal","toExponential","coefficient","src_exponent","re","formatSpecifier","FormatSpecifier","Error","fill","align","sign","zero","comma","prefixExponent","defaultLocale_locale","defaultLocale_format","defaultLocale_formatPrefix","formatTrim","out","formatRounded","exponent","formatTypes","%","toPrecision","X","src_locale","locale","grouping","thousands","substring","formatGroup","currency","decimal","numerals","formatNumerals","percent","newFormat","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","charCodeAt","formatPrefix","defaultLocale","precisionFixed","precisionPrefix","precisionRound","updateFilterState","filtered","active","sortMethods","methods","_renderer_utils__WEBPACK_IMPORTED_MODULE_0__","toScale","d3_scale__WEBPACK_IMPORTED_MODULE_0__","isMapAbleColumn","isSame","fixDomain","ScaleMappingFunction","invert","ScriptMappingFunction","_code","code","value_min","value_max","value_range","value_domain","linear","mi","ma","createMappingFunction","restoreMapping","isMultiLevelColumn","CompositeColumn","_children","CompositeColumn_1","_INumberColumn__WEBPACK_IMPORTED_MODULE_4__","canJustAddNumbers","insertImpl","moveImpl","oldIndex","removeImpl","_ColorMappingFunction__WEBPACK_IMPORTED_MODULE_9__","BoxPlotColumn_1","_Column__WEBPACK_IMPORTED_MODULE_3__","_NumberColumn__WEBPACK_IMPORTED_MODULE_8__","_ValueColumn__WEBPACK_IMPORTED_MODULE_4__","_dataLength","originalLabels","d3_array__WEBPACK_IMPORTED_MODULE_4__","splicer","setSplicer","ArrayColumn_1","EVENT_SPLICE_CHANGED","getSplicer","currentMaxDepth","currentLeaves","currentLeavesNameCache","currentLeavesPathCache","hierarchySeparator","initHierarchy","currentNode","computeLeaves","updateCaches","_internal__WEBPACK_IMPORTED_MODULE_4__","path_1","path","HierarchyColumn_1","EVENT_CUTOFF_CHANGED","getCutOff","maxDepth","setCutOff","_CategoricalColumn__WEBPACK_IMPORTED_MODULE_2__","leaves","visit","depth","resolveInnerNodes","queue","isHierarchical","deriveHierarchy","byKey","toKeyValue","CompositeNumberColumn","compute","_NumberColumn__WEBPACK_IMPORTED_MODULE_4__","_annotations__WEBPACK_IMPORTED_MODULE_5__","_CompositeColumn__WEBPACK_IMPORTED_MODULE_2__","defaultOptions","_ui__WEBPACK_IMPORTED_MODULE_1__","renderers","_renderer__WEBPACK_IMPORTED_MODULE_0__","labelRotation","summaryHeader","animated","expandLineOnHover","sidePanel","sidePanelCollapsed","hierarchyIndicator","defaultSlopeGraphMode","overviewMode","rowHeight","groupHeight","groupPadding","rowPadding","levelOfDetail","customRowUpdate","dynamicHeight","flags","disableFrozenColumns","ignoreUnsupportedBrowser","DENSE_HISTOGRAM","MIN_LABEL_WIDTH","HOVER_DELAY_SHOW_DETAIL","createAggregateDesc","AggregateGroupColumn_1","createRankDesc","LineUp","_config__WEBPACK_IMPORTED_MODULE_1__","_internal_merge__WEBPACK_IMPORTED_MODULE_2__","isBrowserSupported","_EngineRenderer__WEBPACK_IMPORTED_MODULE_4__","panel","_panel_SidePanel__WEBPACK_IMPORTED_MODULE_5__","collapseable","pushUpdateAble","EVENT_HIGHLIGHT_CHANGED","setDataProvider","setHighlight","dataIndex","scrollIntoView","getHighlight","enableHighlightListening","enable","_ALineUp__WEBPACK_IMPORTED_MODULE_3__","ChangeRendererDialog","currentGroup","currentSummary","getPossibleRenderer","summary","utils","MoreColumnOptionsDialog","RenameDialog","d3_scale_chromatic","newColor","newDescription","BooleanFilterDialog","updateFilter","dialogs_utils","isTrue","isFalse","CategoricalFilterDialog","onchange","input","noFilter","CategoricalMappingFilterDialog","joint","oninput","items","CompositeChildrenDialog","random","substr","createChildren","mergeDropAble","resizeable","className","summaryNode","statsOf","CutOffHierarchyDialog","innerNodes","innerNodePaths","setCustomValidity","newNode","newNodeIndex","maxDepthText","EditPatternDialog","templates","MappingLineDialog_MappingLineDialog","MappingLineDialog","line","unnormalizeRaw","normalizeRaw","MappingLineDialog_MappingLine","MappingLine","beforeDomain_1","beforeRange_1","shiftDomain_1","shiftRange_1","$select","d3_selection","d3_drag","container","button","shiftKey","updated","destroyed","MappingsFilterDialog","mappingLines","loadedData","mappingAdapter","updateLines","computeScale","rawDomain","provider","mappingSample","scaleType","others","interactive","elem","currentTarget","bb","createMappings_1","textarea_1","copyMapping","scaleType_1","selectedIndex","applyMapping","updateSummary","model_missing","newScale","ReduceDialog","wrapper","getReduce","setReduce","ScriptEditDialog","getScript","setScript","SearchDialog","checkbox","searchAndJump","StringFilterDialog","isRegex","valid","WeightsEditDialog","weights","getWeights","setWeights","weight","GroupDialog","addons","getToolbarDialogAddons","addon","updateDisabled","disable","trigger","priority_1","sortOrder","SortDialog","SortDialog_sortOrder","ColorMappingDialog","refColor_1","colorsets_1","internal_utils","gradient","isCustom","continuouos","quantized","toggles","updateGradients","toggles_2","toggles_1","customs","custom","customs_1","s0","s1","dm1","toColor","background","stepSize","half","steppedGradient","interpolate","ui","onClick","dialogContext","dialogManager","uiDialog","dialogClass","extraArgs","uiSortMethod","removeAboveLevel","ctrlKey","isAscByDefault","shortcut","dialogs_SortDialog","sortGroupBy","rename","dialogs_RenameDialog","vis","dialogs_ChangeRendererDialog","_evt","more","dialogs_MoreColumnOptionsDialog","toolbar_group","dialogs_GroupDialog","collapse","mcol","setCollapsed","getCollapsed","toolbarAddons","sortNumber","sortNumbers","sortBoxPlot","sortDates","sortGroup","groupNumber","isThreshold","toolbarActions","dialogs_SearchDialog","filterMapped","dialogs_MappingsFilterDialog","filterString","dialogs_StringFilterDialog","filterCategorical","dialogs_CategoricalFilterDialog","filterOrdinal","dialogs_CategoricalMappingFilterDialog","filterBoolean","dialogs_BooleanFilterDialog","colorMapped","dialogs_ColorMappingDialog","dialogs_ScriptEditDialog","dialogs_ReduceDialog","cutoff","dialogs_CutOffHierarchyDialog","editPattern","dialogs_EditPatternDialog","editWeights","dialogs_WeightsEditDialog","compositeContained","dialogs_CompositeChildrenDialog","splitCombined","invertSelection","ss","cacheAddon","getToolbar","icons","possible","isSortAble","isGroupAble","SearchBox","formatItem","placeholder","onfocus","onblur","blur","onkeydown","handleKey","buildDialog","isItem","span_1","onmousedown","onmouseenter","highlighted","onmouseleave","ul","KEYS","which","click","highlightPrevious","highlightNext","filterResults","EVENT_SELECT","allChildrenHidden","createActionDesc","groupActions","EGroupSortMethod","createGroupDesc","GroupColumn_1","createImpositionBoxPlotDesc","ImpositionBoxPlotColumn_1","_MappingFunction__WEBPACK_IMPORTED_MODULE_6__","_INumberColumn__WEBPACK_IMPORTED_MODULE_5__","_ColorMappingFunction__WEBPACK_IMPORTED_MODULE_8__","_BoxPlotColumn__WEBPACK_IMPORTED_MODULE_3__","_NumbersColumn__WEBPACK_IMPORTED_MODULE_7__","_CompositeColumn__WEBPACK_IMPORTED_MODULE_4__","createImpositionDesc","ImpositionCompositeColumn_1","_NumberColumn__WEBPACK_IMPORTED_MODULE_5__","_CompositeColumn__WEBPACK_IMPORTED_MODULE_3__","createImpositionsDesc","ImpositionCompositesColumn_1","_MappingFunction__WEBPACK_IMPORTED_MODULE_5__","_ColorMappingFunction__WEBPACK_IMPORTED_MODULE_7__","_NumbersColumn__WEBPACK_IMPORTED_MODULE_6__","createStackDesc","collapsed","adaptChange","adaptWidthChange","StackColumn_1","EVENT_COLLAPSE_CHANGED","EVENT_WEIGHTS_CHANGED","EVENT_MULTI_LEVEL_CHANGED","full","oldWeight","factor","widths","guess","COLLAPSED_RENDERER","_CompositeNumberColumn__WEBPACK_IMPORTED_MODULE_4__","deriveType","d3_array__WEBPACK_IMPORTED_MODULE_0__","categoricalThreshold","deriveColumnDescriptions","config","deriveColors","_model_internal__WEBPACK_IMPORTED_MODULE_4__","_model_Column__WEBPACK_IMPORTED_MODULE_3__","exportRanking","opts","newline","quote","quoteChar","_model__WEBPACK_IMPORTED_MODULE_1__","verboseColumnHeaders","defaultGroup","_ICategoricalColumn__WEBPACK_IMPORTED_MODULE_6__","OrdinalColumn_1","_CategoricalColumn__WEBPACK_IMPORTED_MODULE_4__","_Column__WEBPACK_IMPORTED_MODULE_5__","createReduceDesc","selected","ReduceColumn_1","EVENT_REDUCE_CHANGED","DEFAULT_SCRIPT","createScriptDesc","ColumnWrapper","ColumnContext","allFactory","_all","byName","byID","byIndex","ScriptColumn_1","EVENT_SCRIPT_CHANGED","clean","wrapWithContext","raws","_CompositeNumberColumn__WEBPACK_IMPORTED_MODULE_3__","createSelectionDesc","SelectionColumn_1","setValue","setImpl","setValues","toggleValue","SELECTED_GROUP","NOT_SELECTED_GROUP","LocalDataProvider","_data","filterGlobally","jumpToSearchResult","maxNestedSortingCriteria","_dataRows","toRows","reorderAll","getTotalNumberOfRows","getMaxNestedSortingCriteria","setData","clearData","appendData","sortImpl","helper","filtered_1","_model__WEBPACK_IMPORTED_MODULE_3__","group_1","ga","gb","rowGroup","viewRaw","viewRawRows","fetch","orders","stats","getD","hasDnDType","typesToCheck","available","dataTransfer","dndTransferStorage","isEdgeDnD","updateDropEffect","dT","effectAllowed","copyDnD","dropEffect","dropAble","mimeTypes","onDrop","onDragOver","effect","getData","data_1","mime","dragAble","rearrangeAble","interfaces","createToolbar","toggleToolbarIcons","dragAbleColumn","resolveDrop","copy","MIMETYPE_PREFIX","alternative","JSON","pushChild","mergeImpl","mergeWith","all","numberish","draginfo","toInsertParent","rearrangeDropAble","ueberElement","mouseMove","mouseUp","dragWidth","colId","typeCat","updateIconState","groupedBy","addIconDOM","showLabel","setHighlightColumn","addIcon","createShortcutMenuItems","createToolbarMenuItems","defaultVisibleClientWidth","rotated","toggleRotatedHeader","moreIcon","availableWidth","toggableIcons","icon","currentWidth","realWidth","onDragStart","draggable","payload","over","stringify","text/plain","IArrayColumn","basis","v0","v1","v2","v3","src_basis","basisClosed","color_hue","gamma","nogamma","exponential","rgbGamma","rgbSpline","spline","rgbBasis","nb","na","src_value","reA","reB","cssNode","cssRoot","cssView","svgNode","am","bm","bs","lastIndex","q","one","src_rgb","valueOf","degrees","translateX","translateY","rotate","skewX","scaleX","scaleY","decompose","atan","interpolateTransform","pxComma","pxParen","degParen","xa","ya","xb","yb","translate","baseVal","consolidate","SQRT2","hue","cubehelix_cubehelix","cubehelixGamma","cubehelixLong","isMapColumn","isArrayColumn","createNestedDesc","c_1","ciResult","localDate","utcDate","UTC","newYear","formatLocale","locale_dateTime","dateTime","locale_date","locale_time","time","locale_periods","periods","locale_weekdays","days","locale_shortWeekdays","shortDays","locale_months","months","locale_shortMonths","shortMonths","periodRe","formatRe","periodLookup","formatLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","formatDayOfMonth","formatMicroseconds","formatHour24","formatHour12","formatDayOfYear","formatMilliseconds","formatMonthNumber","formatMinutes","Q","formatUnixTimestamp","formatUnixTimestampSeconds","formatSeconds","formatWeekdayNumberMonday","U","formatWeekNumberSunday","V","formatWeekNumberISO","formatWeekdayNumberSunday","W","formatWeekNumberMonday","formatYear","Y","formatFullYear","Z","formatZone","formatLiteralPercent","utcFormats","formatUTCDayOfMonth","formatUTCMicroseconds","formatUTCHour24","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","formatUTCMonthNumber","formatUTCMinutes","formatUTCSeconds","formatUTCWeekdayNumberMonday","formatUTCWeekNumberSunday","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCFullYear","formatUTCZone","parses","parseSpecifier","parseDayOfMonth","parseMicroseconds","parseHour24","parseDayOfYear","parseMilliseconds","parseMonthNumber","parseMinutes","parseUnixTimestamp","parseUnixTimestampSeconds","parseSeconds","parseWeekdayNumberMonday","parseWeekNumberSunday","parseWeekNumberISO","parseWeekdayNumberSunday","parseWeekNumberMonday","parseYear","parseFullYear","parseZone","parseLiteralPercent","pad","pads","newParse","newDate","week","d3_time","utcFormat","utcParse","timeFormat","timeParse","-","0","numberRe","percentRe","requoteRe","requote","getMilliseconds","getSeconds","getUTCMilliseconds","dow","toISOString","toGroupLookup","item2groupIndex","group2firstItemIndex","model_interfaces","relativeIndex","toKey","lineupAnimation","previousData","currentData","prevHelper","currHelper","lineupengine","previousFinder","currentRowIndex","referenceIndex","appearPosition","_previousFinder","currentFinder","previousRowIndex","removePosition","RenderColumn","singleRenderer","single","singleTemplate","asElement","singleId","groupTemplate","groupId","summaryTemplate","summaryId","ui_header","isGroup","oldRenderer","currentRenderer","oldGroup","getGroup","getRow","renderCell","MultiLevelRenderColumn","summaries","mc","MultiLevelCellRenderer","cc","gridColumnStart","updateNested","updateWidthRule","sub","ui_RenderColumn","SelectionManager","hr","showHint","startNode","elementFromPoint","endNode","xShift","yShift","EVENT_SELECT_RANGE","startIndex","endIndex","sy","ey","MIN_DISTANCE","relIndex","SelectionRenderer","selectRange","OrderedSet","updateState","selectedDataIndices","EngineRanking_RankingEvents","RankingEvents","EVENT_UPDATE_DATA","EVENT_UPDATE_HIST","EngineRanking_EngineRanking","EngineRanking","roptions","highlight","canvasPool","canvasMouseHandler","timer","leave","updateHoveredRow","isCanvasRenderedRow","highlightHandler","delayedUpdate","updateBody","delayedUpdateAll","updateAll","delayedUpdateColumnWidths","createCol","reindex","updateHist","disableListener","_oldValue","ui_SelectionManager","to","renderCtx","_context","ui_MultiLevelRenderColumn","createRenderer","_document","selectCanvas","rowFlags","rowany","__lu__","renderRow","canvas","getContext","imageSmoothingEnabled","clearRect","save","updateCanvasCell","rowIndex","updateHeaderOf","agg","meta","lod","forcedLod","computedLod","wasLod","wasGroup","canvas2","hover","inplace","updateSelection","updateColumn","after","groupData","toMeta","rowContext","totalNumberOfRows","findNearest","dataIndices","lookFor","firstBeforePos","firstAfterPos","nearestPos","regular","posOf","scrollHeight","found","debounceUpdate","equal","fast_deep_equal__WEBPACK_IMPORTED_MODULE_0__","findOption","equalArrays","fixCSS","timeToDelay","choose","tm","ActionRenderer","canRender","SUMMARY","ni","action","createGroup","createSummary","AggregateGroupRenderer","colWidth","StringCellRenderer","renderer_missing","exampleText","examples","rows_1","_group","interactiveSummary","form","ui_missing","actCol","StringCellRenderer_toString","AnnotationRenderer","renderer_StringCellRenderer","colorOf","imposer","valueHint","BarCellRenderer","renderValue","CELL","_hist","bar","backgroundColor","DefaultCellRenderer_DefaultCellRenderer","DefaultCellRenderer","groupTitle","summaryTitle","_col","_mode","BooleanCellRenderer","BoxplotCellRenderer","sortedByMe","renderDOMBoxPlot","topPadding","strokeStyle","beginPath","bottomPos","middlePos","moveTo","lineTo","renderBoxPlot","createAggregatedBoxPlot","_comtext","_interactive","computeLabel","whiskers","leftWhisker","rightWhisker","outliers","toHeatMapColor","valueColor","BrightnessCellRenderer","CategoricalCellRenderer","globalHist","CategoricalCellRenderer_hist","filterUpdate","interactiveHist","staticSummary","showLabels","src_interfaces","without","contained","UpSetCellRenderer","calculateSetPath","cellDimension","catindexes","createDOMContext","templateRows","categories_1","templateRow","display","hasTrueValues","posx","globalAlpha","union","CategoricalHeatmapCellRenderer","visibility","categories_2","CategoricalStackedDistributionlCellRenderer","stackedBar","CategoricalStackedDistributionlCellRenderer_interactiveSummary","CategoricalStackedDistributionlCellRenderer_staticSummary","total","flexGrow","CircleCellRenderer","DotCellRenderer","getDOMRenderer","dots","tmp","tmp_1","background-color","vi","_v","GroupCellRenderer","ANumbersCellRenderer_ANumbersCellRenderer","ANumbersCellRenderer","normalized","boxRaw","createContext","HeatmapCellRenderer","class","labels_1","InputNumberDialog","ioptions","HistogramCellRenderer","getHistDOMRenderer","guessedBins","createHist","range_1","HistogramCellRenderer_staticSummary","HistogramCellRenderer_filter","filterMin","filterMax","minHint","maxHint","minValue","unpercent","maxValue","dialogCtx","dialogs_InputNumberDialog","px","initFilter","HistogramCellRenderer_interactiveSummary","ImageCellRenderer","backgroundImage","InterleavingCellRenderer","GROUP","grouped","dummyBin","groupedHist","LinkCellRenderer","href","TableCellRenderer","createFixed","example","createFixedGroup","groupByKey","vs_1","LinkMapCellRenderer","arr_1","link","LoadingCellRenderer","MapBarCellRenderer","RankCellRenderer","fromTSpan","toTSpan","moveNext","SparklineCellRenderer","yPos","repeat","matchRows","VerticalBarCellRenderer","xpos","defaultCellRenderer","renderer_renderers","renderer_ActionRenderer","renderer_AggregateGroupRenderer","renderer_AnnotationRenderer","renderer_BooleanCellRenderer","renderer_BoxplotCellRenderer","brightness","renderer_BrightnessCellRenderer","catdistributionbar","renderer_CategoricalStackedDistributionlCellRenderer","renderer_CategoricalCellRenderer","renderer_CircleCellRenderer","dot","renderer_DotCellRenderer","renderer_GroupCellRenderer","heatmap","renderer_HeatmapCellRenderer","catheatmap","renderer_CategoricalHeatmapCellRenderer","renderer_HistogramCellRenderer","image","renderer_ImageCellRenderer","interleaving","renderer_InterleavingCellRenderer","renderer_LinkCellRenderer","linkMap","renderer_LinkMapCellRenderer","renderer_LoadingCellRenderer","renderer_BarCellRenderer","mapbars","renderer_MapBarCellRenderer","renderer_RankCellRenderer","sparkline","renderer_SparklineCellRenderer","table","renderer_TableCellRenderer","upset","renderer_UpSetCellRenderer","verticalbar","renderer_VerticalBarCellRenderer","chooseRenderer","chooseGroupRenderer","chooseSummaryRenderer","possibleRenderer","possibleGroupRenderer","possibleSummaryRenderer","AAggregatedGroupRenderer_AAggregatedGroupRenderer","AAggregatedGroupRenderer","aggregatedIndex","gridClass","createData","stacked","MultiLevelCellRenderer_MultiLevelCellRenderer","useGrid","option","missingWeight","ci","stackShift","src_map","proto","array_map","implicit","unknown","deinterpolateLinear","bimap","deinterpolate","reinterpolate","r0","r1","polymap","d3_array","continuous","piecewise","output","rescale","deinterpolateClamp","reinterpolateClamp","rangeRound","src_tickFormat","d3_format","linearish","tickFormat","nice","log_deinterpolate","log_reinterpolate","pow10","powp","exp","logp","log10","log2","reflect","logs","pows","trueMarker","BooleanColumn_1","GROUP_TRUE","GROUP_FALSE","_StringColumn__WEBPACK_IMPORTED_MODULE_4__","replacePattern","_MapColumn__WEBPACK_IMPORTED_MODULE_3__","DialogManager","escKeyListener","removeLast","openDialogs","mask","clipPath","clearHighlight","takeDown","setUp","EngineRenderer_EngineRenderer","EngineRenderer","histCache","slopeGraphs","updateAbles","zoomFactor","enabledHighlightListening","dialogs_DialogManager","useGridLayout","initProvider","zoomOut","updateZoomFactor","zoomIn","fontSize","updateAble","takeDownProvider","addRanking","setHighlightToNearest","histo","SlopeGraph","BAND","ITEM","updateRotatedHeaderState","section","slope","localData","round2","impl_1","f_1","defaultHeight","heightsFor","updateSlopeGraphs","leftRanking","rightRanking","rebuild","nearest","AddonDialog","Hierarchy","groupAdder","sortAdder","renderGroups","renderSorting","toColumn","extras","addonKey","onChange","prevent","customize","addGroupAdder","addSortAdder","addAdder","adder","onSelect","used","dialogs_AddonDialog","SidePanelEntryVis","RenameRankingDialog","MoreRankingOptionsDialog","dialogs_RenameRankingDialog","SidePanelRanking","dropdown","dialogs_MoreRankingOptionsDialog","panel_Hierarchy","updateHierarchy","updateList","panel_SidePanelEntryVis","ChooseRankingDialog","isWrapper","SidePanel_SidePanel","SidePanel","additionalDescs","chooser","descs","dialogs_ChooseRankingDialog","initChooser","changeDataStorage","wrapDesc","getColumns","updateChooser","updateStats","createEntry","makeActive","panel_SidePanelRanking","updateRanking","insertAdjacentElement","groupByType","EMode","ItemSlope","GroupSlope","leftSlopes","rightSlopes","_styles__WEBPACK_IMPORTED_MODULE_2__","initHeader","scroll","leftContext","rightContext","was","prepareRightSlopes","computeSlopes","fakeGroups","padded","slopes","gr","heightPerRow","fakeGroup","createFakeGroup","free","intersection","p_1","ri","lineupengine__WEBPACK_IMPORTED_MODULE_0__","leftVisibleFirst","leftVisibleLast","rightVisibleFirst","rightVisibleLast","paths","matchLength","selectionLookup","this_1","ids","EVENT_VALUE_CHANGED","Taggle","violationChanged","_rule","violation","setViolation","spaceFilling","_TaggleRenderer__WEBPACK_IMPORTED_MODULE_6__","_panel_SidePanel__WEBPACK_IMPORTED_MODULE_4__","spaceFilling_1","_spaceFillingRule__WEBPACK_IMPORTED_MODULE_5__","switchRule","TYPE_OBJECT","args_1","toMerge","keys_1","keyName","SUPPORTED_FIREFOX_VERSION","SUPPORTED_CHROME_VERSION","SUPPORTED_EDGE_VERSION","getUnsupportedBrowserError","info","detect_browser","fVersion","ALineUp_ALineUp","ALineUp","ignoreIncompatibleBrowser","highlightListeners","_enable","RemoteDataProvider","server","maxCacheSize","Group","loadFromServer","computeMissing","unionAdd","loadInCache","_m","toLoad","MultiLevelCompositeColumn","MultiLevelCompositeColumn_1","_StackColumn__WEBPACK_IMPORTED_MODULE_6__","_internal_math__WEBPACK_IMPORTED_MODULE_1__","TaggleRenderer","isDynamicLeafHeight","rule","resizeListener","_EngineRenderer__WEBPACK_IMPORTED_MODULE_5__","_provider_ADataProvider__WEBPACK_IMPORTED_MODULE_4__","availableHeight","spaceFillingRule","visibleHeight","_model__WEBPACK_IMPORTED_MODULE_0__","lastItems","unselected","groupSeparators","itemHeight","addAll","deleteAll","callbackfn","thisArg","iterator","EDateSort","d3_time_format__WEBPACK_IMPORTED_MODULE_1__","_ArrayColumn__WEBPACK_IMPORTED_MODULE_4__","DatesColumn_1","d3_array__WEBPACK_IMPORTED_MODULE_2__","rowGetter","_id","isComplexAccessor","resolveComplex","ACommonDataProvider","rankingIndex","ranks","_desc","groups_1","nextRankingId","_model_Ranking__WEBPACK_IMPORTED_MODULE_5__","pushDesc","_ADataProvider__WEBPACK_IMPORTED_MODULE_6__","clearColumns","deriveDefault","addSupportType","_model_SelectionColumn__WEBPACK_IMPORTED_MODULE_0__","rangeSelection","_utils__WEBPACK_IMPORTED_MODULE_1__","rankingId","distance","nopropagation","stopImmediatePropagation","noevent","nodrag","__noselect","MozUserSelect","yesdrag","noclick","DragEvent","subject","dx","dy","defaultFilter","defaultContainer","defaultSubject","defaultTouchable","src_drag","mousedownx","mousedowny","mousemoving","touchending","touchable","gestures","d3_dispatch","clickDistance2","drag","mousedowned","touchstarted","touchmoved","touchended","gesture","beforestart","mousemoved","mouseupped","sublisteners","p0","clickDistance","Dispatch","src_dispatch","ColumnBuilder","asArray","asMap","buildColumn","LineUpBuilder","rotation","registerRenderer","registerToolbarAction","registerToolbarDialogAddon","groupRowHeight","RankingBuilder_RankingBuilder","RankingBuilder","supportTypes","allColumns","impose","categoricalColumn","scripted","mixed_1","weightedSum","numberColumn","numberColumn1","weight1","numberColumn2","weight2","numberColumnAndWeights","post","operation","numberColumns","ALL_MAGIC_FLAG","addColumn","sorts_1","buildRanking","DataBuilder_DataBuilder","DataBuilder","providerOptions","rankBuilders","_deriveColors","singleSelection","noCriteriaLimits","limitCriteria","sortingCritera","groupingCriteria","deriveColumns","registerColumnType","column_ColumnBuilder","defaultRanking","addSupportTypes","builder","builder_RankingBuilder","buildData","buildTaggle","builder_LineUpBuilder","DataBuilder_builder","CategoricalColumnBuilder_CategoricalColumnBuilder","CategoricalColumnBuilder","asOrdinal","asSet","derive","isSet","val","buildCategoricalColumn","NumberColumnBuilder_NumberColumnBuilder","NumberColumnBuilder","asBoxPlot","extra","ext","buildNumberColumn","StringColumnBuilder_StringColumnBuilder","StringColumnBuilder","editable","buildStringColumn","DateColumnBuilder_DateColumnBuilder","DateColumnBuilder","buildDateColumn","HierarchyColumnBuilder_HierarchyColumnBuilder","HierarchyColumnBuilder","buildHierarchicalColumn","ActionsColumnBuilder_ActionsColumnBuilder","ActionsColumnBuilder","groupAction","buildActionsColumn","ranking_buildRanking","si","pick","changed","lineupOptions","lineup_Adapter","Adapter","prevRankings","prevColumns","prevHighlight","onSelectionChanged","onHighlightChanged","componentDidMount","buildProvider","createInstance","resolveColumnDescs","columnDescs","deriveColumnNames","resolveRankings","builders","rankingBuilders","buildColumns","buildRankings","updateLineUp","changeDetector","providerChanged","changedLineUpOptions","updateProvider","columnsChanged","componentDidUpdate","componentWillUnmount","builderAdapter","buildString","buildNumber","buildHierarchy","buildDate","buildCategorical","buildActions","buildGeneric","buildWeightedSumRanking","buildSupportRanking","buildScriptRanking","buildReduceRanking","buildNestedRanking","buildImposeRanking","buildAllColumnsRanking","isTypeInstance","superClass","asTaggle","asLineUp","keyList","hasProp","arrA","arrB","dateA","dateB","regexpA","regexpB","detectOS","userAgentString","detected","buildRules","os","getNodeVersion","process","platform","parseUserAgent","browsers","browser","bot","ruleTuples","tuple","detect","buildId","license","createLocalDataProvider","_provider_LocalDataProvider__WEBPACK_IMPORTED_MODULE_1__","createLineUp","_ui_LineUp__WEBPACK_IMPORTED_MODULE_2__","createTaggle","_ui_taggle__WEBPACK_IMPORTED_MODULE_3__","exporter","makeExporter","hasOwn","supportsSymbol","toPrimitiveSymbol","toPrimitive","iteratorSymbol","supportsCreate","supportsProto","downLevel","HashMap","MakeDictionary","functionPrototype","usePolyfill","env","_Map","cacheSentinel","arraySentinel","MapIterator","_index","_keys","_values","_selector","done","throw","return","_cacheKey","_cacheIndex","_find","getKey","getEntry","CreateMapPolyfill","_Set","_map","Metadata","WeakMap","UUID_SIZE","rootKey","CreateUniqueKey","_key","GetOrCreateWeakMapTable","CreateUUID","FillRandomBytes","buffer","Uint8Array","crypto","getRandomValues","msCrypto","GenRandomBytes","byte","CreateWeakMapPolyfill","GetOrCreateMetadataMap","Create","targetMetadata","IsUndefined","metadataMap","OrdinaryHasOwnMetadata","MetadataKey","argument","ToBoolean","OrdinaryGetOwnMetadata","OrdinaryDefineOwnMetadata","MetadataValue","OrdinaryOwnMetadataKeys","keysObj","GetMethod","IsCallable","IsObject","GetIterator","IteratorStep","nextValue","IteratorValue","IteratorClose","Type","IsNull","ToPrimitive","PreferredType","hint","exoticToPrim","toString_1","toString_2","OrdinaryToPrimitive","ToPropertyKey","IsSymbol","ToString","IsArray","IsConstructor","func","iterResult","OrdinaryGetPrototypeOf","prototypeProto","decorator","decorated","DecorateConstructor","DecorateProperty","metadataKey","metadataValue","IsPropertyKey","OrdinaryHasMetadata","OrdinaryGetMetadata","OrdinaryMetadataKeys","ownKeys","parentKeys","ownKeys_1","hasKey","parentKeys_1"],"mappings":"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","file":"LineUpJS.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"LineUpJS\"] = factory();\n\telse\n\t\troot[\"LineUpJS\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 100);\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import 'reflect-metadata';\r\nimport Column from './Column';\r\nimport {IColumnDesc} from './interfaces';\r\n\r\nconst supportType = Symbol.for('SupportType');\r\nconst category = Symbol.for('Category');\r\n\r\nexport function SupportType() {\r\n  return Reflect.metadata(supportType, true);\r\n}\r\n\r\nexport function SortByDefault(order: 'ascending'|'descending' = 'ascending') {\r\n  if (order === 'descending') {\r\n    return Reflect.metadata(Symbol.for('sortDescendingByDefault'), true);\r\n  }\r\n  return (d: any) => d;\r\n}\r\n\r\nexport function isSortingAscByDefault(col: Column) {\r\n  const clazz = (<any>col).constructor;\r\n  return !Reflect.hasMetadata(Symbol.for('sortDescendingByDefault'), clazz);\r\n}\r\n\r\nexport class Categories {\r\n  readonly string = {label: 'label', order: 1, name: 'string'};\r\n  readonly categorical = {label: 'categorical', order: 2, name: 'categorical'};\r\n  readonly number = {label: 'numerical', order: 3, name: 'number'};\r\n  readonly date = {label: 'date', order: 4, name: 'date'};\r\n  readonly array = {label: 'matrix', order: 5, name: 'array'};\r\n  readonly map = {label: 'map', order: 6, name: 'map'};\r\n  readonly composite = {label: 'combined', order: 7, name: 'composite'};\r\n  readonly support = {label: 'support', order: 8, name: 'support'};\r\n  readonly other = {label: 'others', order: 9, name: 'other'};\r\n}\r\n\r\nexport const categories = new Categories();\r\n\r\nexport function Category(cat: keyof Categories) {\r\n  return Reflect.metadata(category, cat);\r\n}\r\n\r\nexport function toolbar(...keys: string[]) {\r\n  return Reflect.metadata(Symbol.for('toolbarIcon'), keys);\r\n}\r\n\r\nexport function dialogAddons(key: string, ...keys: string[]) {\r\n  return Reflect.metadata(Symbol.for(`toolbarDialogAddon${key}`), keys);\r\n}\r\n\r\nconst cache = new Map<string, string[]>();\r\n\r\nexport function isSupportType(col: Column) {\r\n  const clazz = (<any>col).constructor;\r\n  return Reflect.hasMetadata(supportType, clazz);\r\n}\r\n\r\nexport function categoryOf(col: (typeof Column) | Column) {\r\n  const cat = <keyof Categories>Reflect.getMetadata(category, col instanceof Column ? Object.getPrototypeOf(col).constructor : col) || 'other';\r\n  return categories[cat] || categories.other;\r\n}\r\n\r\nexport function categoryOfDesc(col: IColumnDesc | string, models: { [key: string]: typeof Column }) {\r\n  const type = typeof col === 'string' ? col : col.type;\r\n  const clazz = models[type];\r\n  return clazz ? categoryOf(clazz) : categories.other;\r\n}\r\n\r\nexport function getAllToolbarActions(col: Column) {\r\n  if (cache.has(col.desc.type)) {\r\n    return cache.get(col.desc.type)!;\r\n  }\r\n  const actions = <string[]>[];\r\n\r\n  // walk up the prototype chain\r\n  let obj = <any>col;\r\n  const toolbarIcon = Symbol.for('toolbarIcon');\r\n  do {\r\n    const m = <string[]>Reflect.getOwnMetadata(toolbarIcon, obj.constructor);\r\n    if (m) {\r\n      actions.push(...m);\r\n    }\r\n    obj = Object.getPrototypeOf(obj);\r\n  } while (obj);\r\n  cache.set(col.desc.type, actions);\r\n  return actions;\r\n}\r\n\r\n\r\nexport function getAllToolbarDialogAddons(col: Column, key: string) {\r\n  const cacheKey = `${col.desc.type}@${key}`;\r\n  if (cache.has(cacheKey)) {\r\n    return cache.get(cacheKey)!;\r\n  }\r\n  const actions = <string[]>[];\r\n\r\n  // walk up the prototype chain\r\n  let obj = <any>col;\r\n  const symbol = Symbol.for(`toolbarDialogAddon${key}`);\r\n  do {\r\n    const m = <string[]>Reflect.getOwnMetadata(symbol, obj.constructor);\r\n    if (m) {\r\n      actions.push(...m);\r\n    }\r\n    obj = Object.getPrototypeOf(obj);\r\n  } while (obj);\r\n  cache.set(cacheKey, actions);\r\n  return actions;\r\n}\r\n","import AEventDispatcher from '../internal/AEventDispatcher';\r\nimport {similar} from '../internal/math';\r\nimport {fixCSS} from '../internal/utils';\r\nimport {defaultGroup} from './Group';\r\nimport {IColumnDesc, IDataRow, IGroup, IGroupData} from './interfaces';\r\nimport {isMissingValue} from './missing';\r\nimport Ranking, {ISortCriteria} from './Ranking';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\nimport {isSortingAscByDefault} from './annotations';\r\n\r\nexport {IColumnDesc} from './interfaces';\r\n\r\nexport interface IFlatColumn {\r\n  readonly col: Column;\r\n  readonly offset: number;\r\n  readonly width: number;\r\n}\r\n\r\nexport interface IColumnParent {\r\n  remove(col: Column): boolean;\r\n\r\n  insert(col: Column, index?: number): Column | null;\r\n\r\n  insertAfter(col: Column, reference: Column): Column | null;\r\n\r\n  move(col: Column, index?: number): Column | null;\r\n\r\n  moveAfter(col: Column, reference: Column): Column | null;\r\n\r\n  findMyRanker(): Ranking | null;\r\n\r\n  readonly fqid: string;\r\n\r\n  indexOf(col: Column): number;\r\n\r\n  at(index: number): Column;\r\n\r\n  readonly fqpath: string;\r\n\r\n}\r\n\r\n\r\nexport interface IColumnMetaData {\r\n  label: string;\r\n  description: string;\r\n  color: string | null;\r\n}\r\n\r\n\r\n/**\r\n * emitted when the width property changes\r\n * @asMemberOf Column\r\n * @event\r\n */\r\nexport declare function widthChanged(previous: number, current: number): void;\r\n\r\n/**\r\n * emitted when the label property changes\r\n * @asMemberOf Column\r\n * @event\r\n */\r\nexport declare function labelChanged(previous: string, current: string): void;\r\n\r\n/**\r\n * emitted when the meta data property changes\r\n * @asMemberOf Column\r\n * @event\r\n */\r\nexport declare function metaDataChanged(previous: IColumnMetaData, current: IColumnMetaData): void;\r\n\r\n/**\r\n * emitted when state of the column is dirty\r\n * @asMemberOf Column\r\n * @event\r\n */\r\nexport declare function dirty(): void;\r\n\r\n/**\r\n * emitted when state of the column related to its header is dirty\r\n * @asMemberOf Column\r\n * @event\r\n */\r\nexport declare function dirtyHeader(): void;\r\n\r\n/**\r\n * emitted when state of the column related to its values is dirty\r\n * @asMemberOf Column\r\n * @event\r\n */\r\nexport declare function dirtyValues(): void;\r\n\r\n/**\r\n * emitted when the renderer type property changes\r\n * @asMemberOf Column\r\n * @event\r\n */\r\nexport declare function rendererTypeChanged(previous: string, current: string): void;\r\n\r\n/**\r\n * emitted when the group renderer property changes\r\n * @asMemberOf Column\r\n * @event\r\n */\r\nexport declare function groupRendererChanged(previous: string, current: string): void;\r\n\r\n/**\r\n * emitted when the pattern property changes\r\n * @asMemberOf Column\r\n * @event\r\n */\r\nexport declare function summaryRendererChanged(previous: string, current: string): void;\r\n\r\n/**\r\n * emitted when the visibility of this column changes\r\n * @asMemberOf Column\r\n * @event\r\n */\r\nexport declare function visibilityChanged(previous: boolean, current: boolean): void;\r\n\r\n\r\n/**\r\n * a column in LineUp\r\n */\r\nexport default class Column extends AEventDispatcher {\r\n  /**\r\n   * default color that should be used\r\n   * @type {string}\r\n   */\r\n  static readonly DEFAULT_COLOR = '#C1C1C1';\r\n  /**\r\n   * magic variable for showing all columns\r\n   * @type {number}\r\n   */\r\n  static readonly FLAT_ALL_COLUMNS = -1;\r\n\r\n  static readonly EVENT_WIDTH_CHANGED = 'widthChanged';\r\n  static readonly EVENT_LABEL_CHANGED = 'labelChanged';\r\n  static readonly EVENT_METADATA_CHANGED = 'metaDataChanged';\r\n  static readonly EVENT_DIRTY = 'dirty';\r\n  static readonly EVENT_DIRTY_HEADER = 'dirtyHeader';\r\n  static readonly EVENT_DIRTY_VALUES = 'dirtyValues';\r\n  static readonly EVENT_RENDERER_TYPE_CHANGED = 'rendererTypeChanged';\r\n  static readonly EVENT_GROUP_RENDERER_TYPE_CHANGED = 'groupRendererChanged';\r\n  static readonly EVENT_SUMMARY_RENDERER_TYPE_CHANGED = 'summaryRendererChanged';\r\n  static readonly EVENT_VISIBILITY_CHANGED = 'visibilityChanged';\r\n\r\n  /**\r\n   * the id of this column\r\n   */\r\n  private uid: string;\r\n\r\n  /**\r\n   * width of the column\r\n   * @type {number}\r\n   * @private\r\n   */\r\n  private width: number = 100;\r\n\r\n  /**\r\n   * parent column of this column, set when added to a ranking or combined column\r\n   */\r\n  parent: Readonly<IColumnParent> | null = null;\r\n\r\n  private metadata: Readonly<IColumnMetaData>;\r\n  private renderer: string;\r\n  private groupRenderer: string;\r\n  private summaryRenderer: string;\r\n  private visible: boolean;\r\n\r\n  constructor(id: string, public readonly desc: Readonly<IColumnDesc>) {\r\n    super();\r\n    this.uid = fixCSS(id);\r\n    this.renderer = this.desc.renderer || this.desc.type;\r\n    this.groupRenderer = this.desc.groupRenderer || this.desc.type;\r\n    this.summaryRenderer = this.desc.summaryRenderer || this.desc.type;\r\n    this.width = this.desc.width != null && this.desc.width > 0 ? this.desc.width : 100;\r\n    this.visible = this.desc.visible !== false;\r\n\r\n    this.metadata = {\r\n      label: desc.label || this.id,\r\n      description: desc.description || '',\r\n      color: desc.color || Column.DEFAULT_COLOR\r\n    };\r\n  }\r\n\r\n  get fixed() {\r\n    return Boolean(this.desc.fixed);\r\n  }\r\n\r\n  get frozen() {\r\n    return Boolean(this.desc.frozen);\r\n  }\r\n\r\n  get id() {\r\n    return this.uid;\r\n  }\r\n\r\n  assignNewId(idGenerator: () => string) {\r\n    this.uid = fixCSS(idGenerator());\r\n  }\r\n\r\n  get label() {\r\n    return this.metadata.label;\r\n  }\r\n\r\n  get description() {\r\n    return this.metadata.description;\r\n  }\r\n\r\n  get color() {\r\n    return this.metadata.color;\r\n  }\r\n\r\n  /**\r\n   * returns the fully qualified id i.e. path the parent\r\n   * @returns {string}\r\n   */\r\n  get fqid() {\r\n    return this.parent ? `${this.parent.fqid}_${this.id}` : this.id;\r\n  }\r\n\r\n  get fqpath() {\r\n    return this.parent ? `${this.parent.fqpath}@${this.parent.indexOf(this)}` : '';\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([Column.EVENT_WIDTH_CHANGED,\r\n      Column.EVENT_LABEL_CHANGED, Column.EVENT_METADATA_CHANGED, Column.EVENT_VISIBILITY_CHANGED, Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED,\r\n      Column.EVENT_RENDERER_TYPE_CHANGED, Column.EVENT_GROUP_RENDERER_TYPE_CHANGED,\r\n      Column.EVENT_DIRTY, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES]);\r\n  }\r\n\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(type, listener);\r\n  }\r\n\r\n  getWidth() {\r\n    return this.width;\r\n  }\r\n\r\n  hide() {\r\n    this.setVisible(false);\r\n  }\r\n\r\n  show() {\r\n    this.setVisible(true);\r\n  }\r\n\r\n  isVisible() {\r\n    return this.visible;\r\n  }\r\n\r\n  getVisible() {\r\n    return this.isVisible();\r\n  }\r\n\r\n  setVisible(value: boolean) {\r\n    if (this.visible === value) {\r\n      return;\r\n    }\r\n    this.fire([Column.EVENT_VISIBILITY_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.visible, this.visible = value);\r\n  }\r\n\r\n  /**\r\n   * visitor pattern for flattening the columns\r\n   * @param {IFlatColumn} r the result array\r\n   * @param {number} offset left offset\r\n   * @param {number} _levelsToGo how many levels down\r\n   * @param {number} _padding padding between columns\r\n   * @returns {number} the used width by this column\r\n   */\r\n  flatten(r: IFlatColumn[], offset: number, _levelsToGo = 0, _padding = 0): number {\r\n    const w = this.getWidth();\r\n    r.push({col: this, offset, width: w});\r\n    return w;\r\n  }\r\n\r\n  setWidth(value: number) {\r\n    if (similar(this.width, value, 0.5)) {\r\n      return;\r\n    }\r\n    this.fire([Column.EVENT_WIDTH_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.width, this.width = value);\r\n  }\r\n\r\n  setWidthImpl(value: number) {\r\n    this.width = value;\r\n  }\r\n\r\n  setMetaData(value: Readonly<IColumnMetaData>) {\r\n    if (value.label === this.label && this.color === value.color && this.description === value.description) {\r\n      return;\r\n    }\r\n    const events = this.color === value.color ?\r\n      [Column.EVENT_LABEL_CHANGED, Column.EVENT_METADATA_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY] :\r\n      [Column.EVENT_LABEL_CHANGED, Column.EVENT_METADATA_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY];\r\n    const bak = this.getMetaData();\r\n    //copy to avoid reference\r\n    this.metadata = {\r\n      label: value.label,\r\n      color: value.color,\r\n      description: value.description\r\n    };\r\n\r\n    this.fire(events, bak, this.getMetaData());\r\n  }\r\n\r\n  getMetaData(): Readonly<IColumnMetaData> {\r\n    return Object.assign({}, this.metadata);\r\n  }\r\n\r\n  /**\r\n   * triggers that the ranking is sorted by this column\r\n   * @param ascending ascending order?\r\n   * @param priority sorting priority\r\n   * @returns {boolean} was successful\r\n   */\r\n  sortByMe(ascending = isSortingAscByDefault(this), priority = 0) {\r\n    const r = this.findMyRanker();\r\n    if (r) {\r\n      return r.sortBy(this, ascending, priority);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  groupByMe(): boolean {\r\n    const r = this.findMyRanker();\r\n    if (r) {\r\n      return r.toggleGrouping(this);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @return {number}\r\n   */\r\n  isGroupedBy(): number {\r\n    const r = this.findMyRanker();\r\n    if (!r) {\r\n      return -1;\r\n    }\r\n    return r.getGroupCriteria().indexOf(this);\r\n  }\r\n\r\n  /**\r\n   * toggles the sorting order of this column in the ranking\r\n   * @returns {boolean} was successful\r\n   */\r\n  toggleMySorting() {\r\n    const r = this.findMyRanker();\r\n    if (r) {\r\n      return r.toggleSorting(this);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private isSortedByMeImpl(selector: ((r: Ranking) => ISortCriteria[])): { asc: 'asc' | 'desc' | undefined, priority: number | undefined } {\r\n    const ranker = this.findMyRanker();\r\n    if (!ranker) {\r\n      return {asc: undefined, priority: undefined};\r\n    }\r\n    const criterias = selector(ranker);\r\n    const index = criterias.findIndex((c) => c.col === this);\r\n    if (index < 0) {\r\n      return {asc: undefined, priority: undefined};\r\n    }\r\n    return {\r\n      asc: criterias[index].asc ? 'asc' : 'desc',\r\n      priority: index\r\n    };\r\n  }\r\n\r\n  isSortedByMe() {\r\n    return this.isSortedByMeImpl((r) => r.getSortCriteria());\r\n  }\r\n\r\n  groupSortByMe(ascending = isSortingAscByDefault(this), priority = 0) {\r\n    const r = this.findMyRanker();\r\n    if (r) {\r\n      return r.groupSortBy(this, ascending, priority);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  toggleMyGroupSorting() {\r\n    const r = this.findMyRanker();\r\n    if (r) {\r\n      return r.toggleGroupSorting(this);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  isGroupSortedByMe() {\r\n    return this.isSortedByMeImpl((r) => r.getGroupSortCriteria());\r\n  }\r\n\r\n  /**\r\n   * removes the column from the ranking\r\n   * @returns {boolean} was successful\r\n   */\r\n  removeMe() {\r\n    if (this.fixed) {\r\n      return false;\r\n    }\r\n    if (this.parent) {\r\n      return this.parent.remove(this);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * inserts the given column after itself\r\n   * @param col the column to insert\r\n   * @returns {boolean} was successful\r\n   */\r\n  insertAfterMe(col: Column) {\r\n    if (this.parent) {\r\n      return this.parent.insertAfter(col, this) != null;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * finds the underlying ranking column\r\n   * @returns {Ranking|null} my current ranking\r\n   */\r\n  findMyRanker(): Ranking | null {\r\n    if (this.parent) {\r\n      return this.parent.findMyRanker();\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * dumps this column to JSON compatible format\r\n   * @param toDescRef helper mapping function\r\n   * @returns {any} dump of this column\r\n   */\r\n  dump(toDescRef: (desc: any) => any): any {\r\n    const r: any = {\r\n      id: this.id,\r\n      desc: toDescRef(this.desc),\r\n      width: this.width\r\n    };\r\n    if (this.label !== (this.desc.label || this.id)) {\r\n      r.label = this.label;\r\n    }\r\n    if (this.color !== ((<any>this.desc).color || Column.DEFAULT_COLOR) && this.color) {\r\n      r.color = this.color;\r\n    }\r\n    if (this.getRenderer() !== this.desc.type) {\r\n      r.renderer = this.getRenderer();\r\n    }\r\n    if (this.getGroupRenderer() !== this.desc.type) {\r\n      r.groupRenderer = this.getGroupRenderer();\r\n    }\r\n    if (this.getSummaryRenderer() !== this.desc.type) {\r\n      r.summaryRenderer = this.getSummaryRenderer();\r\n    }\r\n    return r;\r\n  }\r\n\r\n  /**\r\n   * restore the column content from a dump\r\n   * @param dump column dump\r\n   * @param _factory helper for creating columns\r\n   */\r\n  restore(dump: any, _factory: (dump: any) => Column | null) {\r\n    this.width = dump.width || this.width;\r\n    this.metadata = {\r\n      label: dump.label || this.label,\r\n      color: dump.color || this.color,\r\n      description: this.description\r\n    };\r\n    if (dump.renderer || dump.rendererType) {\r\n      this.renderer = dump.renderer || dump.rendererType;\r\n    }\r\n    if (dump.groupRenderer) {\r\n      this.groupRenderer = dump.groupRenderer;\r\n    }\r\n    if (dump.summaryRenderer) {\r\n      this.summaryRenderer = dump.summaryRenderer;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * return the label of a given row for the current column\r\n   * @param row the current row\r\n   * @return {string} the label of this column at the specified row\r\n   */\r\n  getLabel(row: IDataRow): string {\r\n    return String(this.getValue(row));\r\n  }\r\n\r\n  /**\r\n   * return the value of a given row for the current column\r\n   * @param _row the current row\r\n   * @return the value of this column at the specified row\r\n   */\r\n  getValue(_row: IDataRow): any {\r\n    return ''; //no value\r\n  }\r\n\r\n  getColor(_row: IDataRow) {\r\n    return this.color;\r\n  }\r\n\r\n  isMissing(row: IDataRow) {\r\n    return isMissingValue(this.getValue(row));\r\n  }\r\n\r\n  /**\r\n   * compare function used to determine the order according to the values of the current column\r\n   * @param _a first element\r\n   * @param _b second element\r\n   * @return {number}\r\n   */\r\n  compare(_a: IDataRow, _b: IDataRow) {\r\n    return 0; //can't compare\r\n  }\r\n\r\n  /**\r\n   * group the given row into a bin/group\r\n   * @param _row\r\n   * @return {IGroup}\r\n   */\r\n  group(_row: IDataRow): IGroup {\r\n    return defaultGroup;\r\n  }\r\n\r\n  /**\r\n   * compares groups\r\n   * @param {IGroupData} a\r\n   * @param {IGroupData} b\r\n   * @return {number}\r\n   */\r\n  groupCompare(a: IGroupData, b: IGroupData) {\r\n    return a.name.toLowerCase().localeCompare(b.name.toLowerCase());\r\n  }\r\n\r\n  /**\r\n   * flag whether any filter is applied\r\n   * @return {boolean}\r\n   */\r\n  isFiltered() {\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * predicate whether the current row should be included\r\n   * @param row\r\n   * @return {boolean}\r\n   */\r\n  filter(row: IDataRow) {\r\n    return row != null;\r\n  }\r\n\r\n  /**\r\n   * determines the renderer type that should be used to render this column. By default the same type as the column itself\r\n   * @return {string}\r\n   */\r\n  getRenderer(): string {\r\n    return this.renderer;\r\n  }\r\n\r\n  getGroupRenderer(): string {\r\n    return this.groupRenderer;\r\n  }\r\n\r\n  getSummaryRenderer(): string {\r\n    return this.summaryRenderer;\r\n  }\r\n\r\n  setRenderer(renderer: string) {\r\n    if (renderer === this.renderer) {\r\n      // nothing changes\r\n      return;\r\n    }\r\n    this.fire([Column.EVENT_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.renderer, this.renderer = renderer);\r\n  }\r\n\r\n  protected setDefaultRenderer(renderer: string) {\r\n    if (this.renderer !== this.desc.type || this.desc.renderer) {\r\n      return;\r\n    }\r\n    return this.setRenderer(renderer);\r\n  }\r\n\r\n  setGroupRenderer(renderer: string) {\r\n    if (renderer === this.groupRenderer) {\r\n      // nothing changes\r\n      return;\r\n    }\r\n    this.fire([Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.groupRenderer, this.groupRenderer = renderer);\r\n  }\r\n\r\n  protected setDefaultGroupRenderer(renderer: string) {\r\n    if (this.groupRenderer !== this.desc.type || this.desc.groupRenderer) {\r\n      return;\r\n    }\r\n    return this.setGroupRenderer(renderer);\r\n  }\r\n\r\n  setSummaryRenderer(renderer: string) {\r\n    if (renderer === this.summaryRenderer) {\r\n      // nothing changes\r\n      return;\r\n    }\r\n    this.fire([Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], this.summaryRenderer, this.summaryRenderer = renderer);\r\n  }\r\n\r\n  protected setDefaultSummaryRenderer(renderer: string) {\r\n    if (this.summaryRenderer !== this.desc.type || this.desc.summaryRenderer) {\r\n      return;\r\n    }\r\n    return this.setSummaryRenderer(renderer);\r\n  }\r\n\r\n  protected setDefaultWidth(width: number) {\r\n    if (this.width !== 100 || this.desc.width) {\r\n      return;\r\n    }\r\n    return this.setWidthImpl(width);\r\n  }\r\n}\r\n","import {MIN_LABEL_WIDTH} from '../config';\r\nimport Column from '../model/Column';\r\nimport {IArrayColumn} from '../model/IArrayColumn';\r\nimport {hsl} from 'd3-color';\r\n\r\n/**\r\n * utility function to sets attributes and styles in a nodes\r\n * @param node\r\n * @param attrs\r\n * @param styles\r\n * @param text\r\n * @return {T}\r\n * @internal\r\n */\r\nexport function attr<T extends (HTMLElement | SVGElement)>(node: T, attrs: {[key: string]: any} = {}, styles: {[key: string]: any} = {}, text?: string): T {\r\n  Object.keys(attrs).forEach((attr) => {\r\n    const v = String(attrs[attr]);\r\n    if (node.getAttribute(attr) !== v) {\r\n      node.setAttribute(attr, v);\r\n    }\r\n  });\r\n  Object.keys(styles).forEach((attr) => {\r\n    const v = styles[attr];\r\n    if ((<any>node).style.getPropertyValue(attr) !== v) {\r\n      (<any>node).style.setProperty(attr, v);\r\n    }\r\n  });\r\n  return setText(node, text);\r\n}\r\n\r\n/** @internal */\r\nexport function noop() {\r\n  // no op\r\n}\r\n\r\n/** @internal */\r\nexport const noRenderer = {\r\n  template: `<div></div>`,\r\n  update: noop,\r\n  render: noop\r\n};\r\n\r\n/** @internal */\r\nexport function setText<T extends Node>(node: T, text?: string): T {\r\n  if (text === undefined) {\r\n    return node;\r\n  }\r\n  //no performance boost if setting the text node directly\r\n  //const textNode = <Text>node.firstChild;\r\n  //if (textNode == null) {\r\n  //  node.appendChild(node.ownerDocument.createTextNode(text));\r\n  //} else {\r\n  //  textNode.data = text;\r\n  //}\r\n  if (node.textContent !== text) {\r\n    node.textContent = text;\r\n  }\r\n  return node;\r\n}\r\n\r\n/**\r\n * for each item matching the selector execute the callback\r\n * @param node\r\n * @param selector\r\n * @param callback\r\n * @internal\r\n */\r\nexport function forEach<T extends Element>(node: Element, selector: string, callback: (d: T, i: number) => void) {\r\n  (<T[]>Array.from(node.querySelectorAll(selector))).forEach(callback);\r\n}\r\n\r\n/** @internal */\r\nexport function forEachChild<T extends Element>(node: Element, callback: (d: T, i: number) => void) {\r\n  (<T[]>Array.from(node.children)).forEach(callback);\r\n}\r\n\r\n/**\r\n * matches the columns and the dom nodes representing them\r\n * @param {HTMLElement} node row\r\n * @param columns columns to check\r\n * @internal\r\n */\r\nexport function matchColumns(node: HTMLElement, columns: {column: Column, template: string, rendererId: string}[]) {\r\n  if (node.childElementCount === 0) {\r\n    // initial call fast method\r\n    node.innerHTML = columns.map((c) => c.template).join('');\r\n    const children = Array.from(node.children);\r\n    columns.forEach((col, i) => {\r\n      const cnode = <HTMLElement>children[i];\r\n      // set attribute for finding again\r\n      cnode.dataset.columnId = col.column.id;\r\n      // store current renderer\r\n      cnode.dataset.renderer = col.rendererId;\r\n    });\r\n    return;\r\n  }\r\n\r\n  function matches(c: {column: Column, rendererId: string}, i: number) {\r\n    //do both match?\r\n    const n = <HTMLElement>node.children[i];\r\n    return n != null && n.dataset.columnId === c.column.id && n.dataset.renderer === c.rendererId;\r\n  }\r\n\r\n  if (columns.every(matches)) {\r\n    return; //nothing to do\r\n  }\r\n\r\n  const idsAndRenderer = new Set(columns.map((c) => `${c.column.id}@${c.rendererId}`));\r\n  //remove all that are not existing anymore\r\n  forEachChild(node, (n: HTMLElement) => {\r\n    const id = n.dataset.columnId;\r\n    const renderer = n.dataset.renderer;\r\n    const idAndRenderer = `${id}@${renderer}`;\r\n    if (!idsAndRenderer.has(idAndRenderer)) {\r\n      node.removeChild(n);\r\n    }\r\n  });\r\n  columns.forEach((col) => {\r\n    let cnode = <HTMLElement>node.querySelector(`[data-column-id=\"${col.column.id}\"]`);\r\n    if (!cnode) {\r\n      node.insertAdjacentHTML('beforeend', col.template);\r\n      cnode = <HTMLElement>node.lastElementChild!;\r\n      cnode.dataset.columnId = col.column.id;\r\n      cnode.dataset.renderer = col.rendererId;\r\n    }\r\n    node.appendChild(cnode);\r\n  });\r\n}\r\n\r\n/** @internal */\r\nexport function wideEnough(col: IArrayColumn<any>, length: number = col.labels.length) {\r\n  const w = col.getWidth();\r\n  return w / length > MIN_LABEL_WIDTH; // at least 30 pixel\r\n}\r\n\r\n\r\n/**\r\n * Adapts the text color for a given background color\r\n * @param {string} bgColor as `#ff0000`\r\n * @returns {string} returns `black` or `white` for best contrast\r\n * @internal\r\n */\r\nexport function adaptTextColorToBgColor(bgColor: string): string {\r\n  return hsl(bgColor).l > 0.5 ? 'black' : 'white';\r\n}\r\n\r\n\r\n/**\r\n *\r\n * Adapts the text color for a given background color\r\n * @param {HTMLElement} node the node containing the text\r\n * @param {string} bgColor as `#ff0000`\r\n * @param {string} title the title to render\r\n * @param {number} width for which percentages of the cell this background applies (0..1)\r\n */\r\nexport function adaptDynamicColorToBgColor(node: HTMLElement, bgColor: string, title: string, width: number) {\r\n  const adapt = adaptTextColorToBgColor(bgColor);\r\n  if ((width <= 0.05 || adapt === 'black') || width > 0.9) { // almost empty or full\r\n    node.style.color = adapt === 'black' || width <= 0.05 ? null : adapt; // null = black\r\n    // node.classList.remove('lu-gradient-text');\r\n    // node.style.backgroundImage = null;\r\n    return;\r\n  }\r\n\r\n  node.style.color = null;\r\n  node.innerText = title;\r\n\r\n  const span = node.ownerDocument.createElement('span');\r\n  span.classList.add('lu-gradient-text');\r\n  span.style.color = adapt;\r\n  span.innerText = title;\r\n  node.appendChild(span);\r\n}\r\n\r\n\r\n\r\nexport const uniqueId: (prefix: string)=>string = (function() {\r\n  // side effect but just within the function itself, so good for the library\r\n  let idCounter = 0;\r\n  return (prefix: string) => `${prefix}${(idCounter++).toString(36)}`;\r\n})();\r\n","import {format} from 'd3-format';\r\nimport {IAdvancedBoxPlotData, IBoxPlotData, similar} from '../internal';\r\nimport Column from './Column';\r\nimport {IArrayColumn} from './IArrayColumn';\r\nimport {IColumnDesc, IDataRow} from './interfaces';\r\nimport {IMapAbleColumn, IMappingFunction} from './MappingFunction';\r\nimport {FIRST_IS_NAN} from './missing';\r\n\r\nexport {} from '../internal';\r\n\r\n\r\nexport interface INumberColumn extends Column {\r\n  getNumber(row: IDataRow): number;\r\n\r\n  getRawNumber(row: IDataRow): number;\r\n}\r\n\r\n\r\nexport const DEFAULT_FORMATTER = format('.3n');\r\n\r\nexport default INumberColumn;\r\n\r\n\r\nexport interface INumberDesc {\r\n  /**\r\n   * dump of mapping function\r\n   */\r\n  map?: any;\r\n  /**\r\n   * either map or domain should be available\r\n   */\r\n  domain?: [number, number];\r\n  /**\r\n   * @default [0,1]\r\n   */\r\n  range?: [number, number];\r\n  /**\r\n   * d3 formatting option\r\n   * @default .3n\r\n   */\r\n  numberFormat?: string;\r\n\r\n  /**\r\n   * missing value to use\r\n   * @default 0\r\n   */\r\n  missingValue?: number;\r\n}\r\n\r\n/**\r\n * checks whether the given column or description is a number column, i.e. the value is a number\r\n * @param col\r\n * @returns {boolean}\r\n */\r\nexport function isNumberColumn(col: Column): col is INumberColumn;\r\nexport function isNumberColumn(col: IColumnDesc): col is INumberDesc & IColumnDesc;\r\nexport function isNumberColumn(col: Column | IColumnDesc) {\r\n  return (col instanceof Column && typeof (<INumberColumn>col).getNumber === 'function' || (!(col instanceof Column) && (<IColumnDesc>col).type.match(/(number|stack|ordinal)/) != null));\r\n}\r\n\r\nexport function compareBoxPlot(col: IBoxPlotColumn, a: IDataRow, b: IDataRow) {\r\n  const aVal = col.getBoxPlotData(a);\r\n  const bVal = col.getBoxPlotData(b);\r\n  if (aVal == null) {\r\n    return bVal == null ? 0 : FIRST_IS_NAN;\r\n  }\r\n  if (bVal == null) {\r\n    return FIRST_IS_NAN * -1;\r\n  }\r\n  const method = <keyof IBoxPlotData>col.getSortMethod();\r\n  return numberCompare(<number>aVal[method], <number>bVal[method]);\r\n}\r\n\r\nexport function getBoxPlotNumber(col: IBoxPlotColumn, row: IDataRow, mode: 'raw' | 'normalized'): number {\r\n  const data = mode === 'normalized' ? col.getBoxPlotData(row) : col.getRawBoxPlotData(row);\r\n  if (data == null) {\r\n    return NaN;\r\n  }\r\n  return <number>data[<keyof IBoxPlotData>col.getSortMethod()];\r\n}\r\n\r\nexport enum ESortMethod {\r\n  min = 'min',\r\n  max = 'max',\r\n  median = 'median',\r\n  q1 = 'q1',\r\n  q3 = 'q3'\r\n}\r\n\r\nexport interface IBoxPlotColumn extends INumberColumn, IMapAbleColumn {\r\n  getBoxPlotData(row: IDataRow): IBoxPlotData | null;\r\n\r\n  getMapping(): IMappingFunction;\r\n\r\n  getRawBoxPlotData(row: IDataRow): IBoxPlotData | null;\r\n\r\n  getSortMethod(): string;\r\n\r\n  setSortMethod(sortMethod: string): void;\r\n}\r\n\r\nexport function isBoxPlotColumn(col: Column): col is IBoxPlotColumn {\r\n  return typeof (<IBoxPlotColumn>col).getBoxPlotData === 'function';\r\n}\r\n\r\nexport enum EAdvancedSortMethod {\r\n  min = 'min',\r\n  max = 'max',\r\n  median = 'median',\r\n  q1 = 'q1',\r\n  q3 = 'q3',\r\n  mean = 'mean'\r\n}\r\n\r\nexport interface IAdvancedBoxPlotColumn extends IBoxPlotColumn {\r\n  getBoxPlotData(row: IDataRow): IAdvancedBoxPlotData | null;\r\n\r\n  getRawBoxPlotData(row: IDataRow): IAdvancedBoxPlotData | null;\r\n}\r\n\r\nexport interface INumbersColumn extends IAdvancedBoxPlotColumn, IArrayColumn<number> {\r\n  getNumbers(row: IDataRow): number[];\r\n\r\n  getRawNumbers(row: IDataRow): number[];\r\n}\r\n\r\nexport function isNumbersColumn(col: Column): col is INumbersColumn {\r\n  return isBoxPlotColumn(col) && typeof (<INumbersColumn>col).getNumbers === 'function';\r\n}\r\n\r\n/**\r\n * save number comparison\r\n * @param a\r\n * @param b\r\n * @param aMissing\r\n * @param bMissing\r\n * @return {number}\r\n */\r\nexport function numberCompare(a: number | null, b: number | null, aMissing = false, bMissing = false) {\r\n  aMissing = aMissing || a == null || isNaN(a);\r\n  bMissing = bMissing || b == null || isNaN(b);\r\n  if (aMissing) { //NaN are smaller\r\n    return bMissing ? 0 : FIRST_IS_NAN;\r\n  }\r\n  if (bMissing) {\r\n    return FIRST_IS_NAN * -1;\r\n  }\r\n  return a! - b!;\r\n}\r\n\r\nexport interface INumberFilter {\r\n  min: number;\r\n  max: number;\r\n  filterMissing: boolean;\r\n}\r\n\r\nexport function noNumberFilter() {\r\n  return ({min: -Infinity, max: Infinity, filterMissing: false});\r\n}\r\n\r\nexport function isEqualNumberFilter(a: INumberFilter, b: INumberFilter) {\r\n  return similar(a.min, b.min, 0.001) && similar(a.max, b.max, 0.001) && a.filterMissing === b.filterMissing;\r\n}\r\n\r\nexport function isNumberIncluded(filter: INumberFilter | null, value: number) {\r\n  if (!filter) {\r\n    return true;\r\n  }\r\n  if (isNaN(value)) {\r\n    return !filter.filterMissing;\r\n  }\r\n  return !((isFinite(filter.min) && value < filter.min) || (isFinite(filter.max) && value > filter.max));\r\n}\r\n","import {IGroup} from './interfaces';\r\n\r\n\r\nexport function isMissingValue(v: any): boolean {\r\n  return typeof(v) === 'undefined' || v == null || (typeof v === 'number' && isNaN(v)) || v === '' || v === 'NA' || v === 'NaN' || (typeof(v) === 'string' && (v.toLowerCase() === 'na') || (Array.isArray(v) && v.every((v) => isMissingValue(v))));\r\n}\r\n\r\nexport function isUnknown(v?: number | null) {\r\n  return v == null || v === undefined || isNaN(v);\r\n}\r\n\r\nexport const FIRST_IS_NAN = -1;\r\nexport const FIRST_IS_MISSING = 1;\r\n\r\n\r\nexport const missingGroup: IGroup = {\r\n  name: 'Missing values',\r\n  color: 'gray'\r\n};\r\n","import Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport {IColumnDesc, IDataRow} from './interfaces';\r\nimport Ranking from './Ranking';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\n\r\nexport interface IValueColumnDesc<T> extends IColumnDesc {\r\n  /**\r\n   * is the data lazy loaded and not yet available\r\n   * @default false\r\n   */\r\n  lazyLoaded?: boolean;\r\n\r\n  /**\r\n   * value accessor of this column\r\n   * @param row the current row\r\n   * @param id the id of this column\r\n   * @param desc the description of this column\r\n   * @param ranking the ranking of this column\r\n   */\r\n  accessor?(row: IDataRow, id: string, desc: any, ranking: Ranking | null): T;\r\n}\r\n\r\n/**\r\n * emitted when the data of this column has been loaded\r\n * @asMemberOf ValueColumn\r\n * @event\r\n */\r\nexport declare function dataLoaded(previous: boolean, current: boolean): void;\r\n\r\n/**\r\n * a column having an accessor to get the cell value\r\n */\r\nexport default class ValueColumn<T> extends Column {\r\n  static readonly EVENT_DATA_LOADED = 'dataLoaded';\r\n\r\n  static readonly RENDERER_LOADING = 'loading';\r\n\r\n  private readonly accessor: (row: IDataRow, id: string, desc: any, ranking: Ranking | null) => T;\r\n\r\n  /**\r\n   * is the data available\r\n   * @type {boolean}\r\n   */\r\n  private loaded: boolean;\r\n\r\n  constructor(id: string, desc: Readonly<IValueColumnDesc<T>>) {\r\n    super(id, desc);\r\n    //find accessor\r\n    this.accessor = desc.accessor! || (() => null);\r\n    this.loaded = desc.lazyLoaded !== true;\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([ValueColumn.EVENT_DATA_LOADED]);\r\n  }\r\n\r\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(<any>type, listener);\r\n  }\r\n\r\n\r\n  getLabel(row: IDataRow) {\r\n    if (!this.isLoaded()) {\r\n      return '';\r\n    }\r\n    return String(this.getValue(row));\r\n  }\r\n\r\n  getRaw(row: IDataRow) {\r\n    if (!this.isLoaded()) {\r\n      return null;\r\n    }\r\n    return this.accessor(row, this.id, this.desc, this.findMyRanker());\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    return this.getRaw(row);\r\n  }\r\n\r\n  isLoaded() {\r\n    return this.loaded;\r\n  }\r\n\r\n  setLoaded(loaded: boolean) {\r\n    if (this.loaded === loaded) {\r\n      return;\r\n    }\r\n    this.fire([ValueColumn.EVENT_DATA_LOADED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.loaded, this.loaded = loaded);\r\n  }\r\n\r\n  getRenderer(): string {\r\n    if (!this.isLoaded()) {\r\n      return ValueColumn.RENDERER_LOADING;\r\n    }\r\n    return super.getRenderer();\r\n  }\r\n\r\n\r\n  /**\r\n   * patch the dump such that the loaded attribute is defined (for lazy loading columns)\r\n   * @param toDescRef\r\n   * @returns {any}\r\n   */\r\n  dump(toDescRef: (desc: any) => any): any {\r\n    const r = super.dump(toDescRef);\r\n    r.loaded = this.loaded;\r\n\r\n    if (!this.loaded && r.rendererType === ValueColumn.RENDERER_LOADING) {\r\n      delete r.rendererType;\r\n    }\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    if (dump.loaded !== undefined) {\r\n      this.loaded = dump.loaded;\r\n    }\r\n    super.restore(dump, factory);\r\n  }\r\n}\r\n","import * as vars from 'raw-loader!./_vars.scss';\r\n\r\nconst styles = new Map<string, string>();\r\n{\r\n  const r = /^[$]([\\w]+): ([\\w #.()'\\/,-]+)( !default)?;/gmi;\r\n  const s = String(vars);\r\n\r\n  let m: RegExpMatchArray | null = s.match(r);\r\n  while (m != null) {\r\n    styles.set(m[1], m[2]);\r\n    m = s.match(r);\r\n  }\r\n}\r\n\r\nexport default function getStyle(key: string, defaultValue = '') {\r\n  if (key[0] === '$') {\r\n    key = key.slice(1);\r\n  }\r\n  if (styles.has(key)) {\r\n    return styles.get(key)!;\r\n  }\r\n  return defaultValue;\r\n}\r\n\r\n\r\nexport const COLUMN_PADDING = parseInt(getStyle('lu_engine_grip_gap', '5px'), 10);\r\n\r\nexport const DASH = {\r\n  width: parseInt(getStyle('lu_missing_dash_width', '3px'), 10),\r\n  height: parseInt(getStyle('lu_missing_dash_height', '10px'), 10),\r\n  color: getStyle('lu_missing_dash_color', 'gray')\r\n};\r\n\r\nexport const UPSET = {\r\n  circle: getStyle('lu_renderer_upset_circle_color'),\r\n  inactive: parseFloat(getStyle('lu_renderer_upset_inactive_opacity', '0.1')),\r\n  stroke: getStyle('lu_renderer_upset_stroke')\r\n};\r\n\r\nexport const DOT = {\r\n  color: getStyle('lu_renderer_dot_color', 'gray'),\r\n  size: parseInt(getStyle('lu_renderer_dot_size', '5px'), 10),\r\n  opacity: parseFloat(getStyle('lu_renderer_dot_opacity', '0.7'))\r\n};\r\n\r\nexport const BOX_PLOT = {\r\n  box: getStyle('lu_renderer_boxplot_box', '#e0e0e0'),\r\n  stroke: getStyle('lu_renderer_boxplot_stroke', 'black'),\r\n  sort: getStyle('lu_renderer_boxplot_sort_indicator', '#ffa500'),\r\n  outlier: getStyle('lu_renderer_boxplot_outlier', '#e0e0e0')\r\n};\r\n\r\nexport const AGGREGATE = {\r\n  width: parseInt(getStyle('lu_aggregate_square_bracket_width', '4px'), 10),\r\n  strokeWidth: parseInt(getStyle('lu_aggregate_square_bracket_stroke_width', '1px'), 10),\r\n  color: getStyle('lu_aggregate_square_bracket_stroke_color', '#000')\r\n};\r\n\r\nexport const SLOPEGRAPH_WIDTH = parseInt(getStyle('lu_slopw_width', '200px'), 10);\r\nexport const CANVAS_HEIGHT = 4;\r\n","import {ICategoricalStatistics, IStatistics} from '../internal/math';\r\nimport {ICategoricalColumn, IDataRow, IGroup, INumberColumn} from '../model';\r\nimport Column from '../model/Column';\r\nimport {IDataProvider} from '../provider/ADataProvider';\r\nimport DialogManager from '../ui/dialogs/DialogManager';\r\n\r\nexport interface IImposer {\r\n  color?(row: IDataRow | null, valueHint?: number): string | null;\r\n}\r\n\r\n\r\n/**\r\n * a cell renderer for rendering a cell of specific column\r\n */\r\nexport interface ICellRenderer {\r\n  /**\r\n   * template as a basis for the update\r\n   */\r\n  readonly template: string;\r\n\r\n  /**\r\n   * update a given node (create using the template) with the given data\r\n   * @param node the node to update\r\n   * @param d the data item\r\n   * @param i the order relative index\r\n   * @param group the group this row is part of\r\n   */\r\n  update(node: HTMLElement, d: IDataRow, i: number, group: IGroup): void;\r\n\r\n  render(ctx: CanvasRenderingContext2D, d: IDataRow, i: number, group: IGroup): void;\r\n}\r\n\r\n/**\r\n * a cell renderer for rendering a cell of specific column\r\n */\r\nexport interface IGroupCellRenderer {\r\n  /**\r\n   * template as a basis for the update\r\n   */\r\n  readonly template: string;\r\n\r\n  /**\r\n   * update a given node (create using the template) with the given data\r\n   * @param node the node to update\r\n   * @param group the group to render\r\n   * @param rows the data items\r\n   */\r\n  update(node: HTMLElement, group: IGroup, rows: IDataRow[]): void;\r\n}\r\n\r\nexport interface ISummaryRenderer {\r\n  /**\r\n   * template as a basis for the update\r\n   */\r\n  readonly template: string;\r\n\r\n  update(node: HTMLElement, hist: IStatistics | ICategoricalStatistics | null): void;\r\n}\r\n\r\n\r\n/**\r\n * context for rendering, wrapped as an object for easy extensibility\r\n */\r\nexport interface IRenderContext {\r\n  /**\r\n   * render a column\r\n   * @param col\r\n   */\r\n  renderer(col: Column, imposer?: IImposer): ICellRenderer;\r\n\r\n  /**\r\n   * render a column\r\n   * @param col\r\n   */\r\n  groupRenderer(col: Column, imposer?: IImposer): IGroupCellRenderer;\r\n\r\n  summaryRenderer(co: Column, interactive: boolean, imposer?: IImposer): ISummaryRenderer;\r\n\r\n  statsOf(col: (INumberColumn | ICategoricalColumn) & Column): ICategoricalStatistics | IStatistics | null;\r\n\r\n  /**\r\n   * prefix used for all generated id names\r\n   */\r\n  readonly idPrefix: string;\r\n\r\n  /**\r\n   * lookup custom options by key\r\n   * @param key key to lookup\r\n   * @param defaultValue default value\r\n   */\r\n  option<T>(key: string, defaultValue: T): T;\r\n\r\n  readonly totalNumberOfRows: number;\r\n\r\n  colWidth(col: Column): number;\r\n\r\n  readonly provider: IDataProvider;\r\n  readonly dialogManager: DialogManager;\r\n}\r\n\r\nexport enum ERenderMode {\r\n  CELL, GROUP, SUMMARY\r\n}\r\n\r\n\r\nexport interface ICellRendererFactory {\r\n  readonly title: string;\r\n  readonly groupTitle?: string;\r\n  readonly summaryTitle?: string;\r\n\r\n  canRender(col: Column, mode: ERenderMode): boolean;\r\n\r\n  create(col: Column, context: IRenderContext, hist: IStatistics | ICategoricalStatistics | null, imposer?: IImposer): ICellRenderer;\r\n\r\n  createGroup(col: Column, context: IRenderContext, hist: IStatistics | ICategoricalStatistics | null, imposer?: IImposer): IGroupCellRenderer;\r\n\r\n  createSummary(col: Column, context: IRenderContext, interactive: boolean, imposer?: IImposer): ISummaryRenderer;\r\n}\r\n\r\n\r\nexport default IRenderContext;\r\n","import {dispatch, Dispatch} from 'd3-dispatch';\r\n\r\n/** @internal */\r\nexport function suffix(suffix: string, ...prefix: string[]) {\r\n  return prefix.map((p) => `${p}${suffix}`);\r\n}\r\n\r\nexport interface IEventContext {\r\n  /**\r\n   * who is sending this event\r\n   */\r\n  readonly source: AEventDispatcher;\r\n\r\n  readonly origin: AEventDispatcher;\r\n  /**\r\n   * the event type\r\n   */\r\n  readonly type: string;\r\n  /**\r\n   * in case of multi propagation the 'main' event type\r\n   */\r\n  readonly primaryType: string;\r\n  /**\r\n   * the arguments to the listener\r\n   */\r\n  readonly args: any[];\r\n}\r\n\r\nexport interface IEventListener {\r\n  (this: IEventContext, ...args: any[]): any;\r\n}\r\n\r\nexport interface IEventHandler {\r\n  on(type: string | string[], listener: IEventListener | null): this;\r\n}\r\n\r\ndeclare const __DEBUG__: boolean;\r\n\r\n/**\r\n * base class for event dispatching using d3 event mechanism\r\n */\r\nexport default class AEventDispatcher implements IEventHandler {\r\n  private readonly listeners: Dispatch<any>;\r\n  private readonly listenerEvents: Set<string>;\r\n  private readonly forwarder: (...args: any[]) => void;\r\n\r\n  constructor() {\r\n    const events = this.createEventList();\r\n    this.listenerEvents = new Set(events);\r\n    this.listeners = dispatch(...events);\r\n\r\n    const that = this;\r\n    this.forwarder = function (this: IEventContext, ...args: any[]) {\r\n      that.fireImpl(this.type, this.primaryType, this.origin, ...args);\r\n    };\r\n  }\r\n\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    if (Array.isArray(type)) {\r\n      type.forEach((d) => {\r\n        if (this.listenerEvents.has(d.split('.')[0])) {\r\n          this.listenersChanged(d, Boolean(listener!));\r\n          this.listeners.on(d, listener!);\r\n        } else if (__DEBUG__ && !d.includes('.')) {\r\n           console.warn(this, 'invalid event type', d);\r\n        }\r\n      });\r\n    } else if (this.listenerEvents.has((<string>type).split('.')[0])) {\r\n      this.listenersChanged(<string>type, Boolean(listener!));\r\n      this.listeners.on(<string>type, listener!);\r\n    } else if (__DEBUG__ && !type.includes('.')) {\r\n      console.warn(this, 'invalid event type', type);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  protected listenersChanged(_type: string, _active: boolean) {\r\n    // hook\r\n  }\r\n\r\n  /**\r\n   * return the list of events to be able to dispatch\r\n   * @return {Array} by default no events\r\n   */\r\n  protected createEventList(): string[] {\r\n    return [];\r\n  }\r\n\r\n  protected fire(type: string | string[], ...args: any[]) {\r\n    const primaryType = Array.isArray(type) ? type[0] : type;\r\n    this.fireImpl(type, primaryType, this, ...args);\r\n  }\r\n\r\n  private fireImpl(type: string | string[], primaryType: string, origin: AEventDispatcher, ...args: any[]) {\r\n    const fireImpl = (t: string) => {\r\n      if (!this.listenerEvents.has(t)) {\r\n        if (__DEBUG__) {\r\n          console.warn(this, 'invalid event type', t);\r\n        }\r\n        return;\r\n      }\r\n      //local context per event, set a this argument\r\n      const context: IEventContext = {\r\n        source: this, //who is sending this event,\r\n        origin,\r\n        type: t, //the event type\r\n        primaryType, //in case of multi propagation the 'main' event type\r\n        args //the arguments to the listener\r\n      };\r\n      this.listeners.apply(t, context, args);\r\n    };\r\n    if (Array.isArray(type)) {\r\n      type.forEach(fireImpl.bind(this));\r\n    } else {\r\n      fireImpl(<string>type);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * forwards one or more events from a given dispatcher to the current one\r\n   * i.e. when one of the given events is fired in 'from' it will be forwarded to all my listeners\r\n   * @param {IEventHandler} from the event dispatcher to forward from\r\n   * @param {string[]} types the event types to forward\r\n   */\r\n  protected forward(from: IEventHandler, ...types: string[]) {\r\n    from.on(types, this.forwarder);\r\n  }\r\n\r\n  /**\r\n   * removes the forwarding declarations\r\n   * @param {IEventHandler} from the originated dispatcher\r\n   * @param {string[]} types event types to forward\r\n   */\r\n  protected unforward(from: IEventHandler, ...types: string[]) {\r\n    from.on(types, null);\r\n  }\r\n}\r\n","import {equalArrays, fixCSS} from '../internal';\r\nimport AEventDispatcher, {suffix} from '../internal/AEventDispatcher';\r\nimport {isSortingAscByDefault} from './annotations';\r\nimport Column, {IColumnParent, IFlatColumn, visibilityChanged, dirtyValues, dirtyHeader, labelChanged, widthChanged, dirty} from './Column';\r\nimport {defaultGroup, IOrderedGroup} from './Group';\r\nimport {IDataRow, IGroup, IGroupData} from './interfaces';\r\nimport {joinGroups} from './internal';\r\nimport NumberColumn, {filterChanged} from './NumberColumn';\r\nimport CompositeColumn from './CompositeColumn';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\nexport interface ISortCriteria {\r\n  readonly col: Column;\r\n  readonly asc: boolean;\r\n}\r\n\r\n\r\n/**\r\n * emitted when a column has been added\r\n * @asMemberOf Ranking\r\n * @event\r\n */\r\nexport declare function addColumn(col: Column, index: number): void;\r\n\r\n/**\r\n * emitted when a column has been moved within this composite columm\r\n * @asMemberOf Ranking\r\n * @event\r\n */\r\nexport declare function moveColumn(col: Column, index: number, oldIndex: number): void;\r\n\r\n/**\r\n * emitted when a column has been removed\r\n * @asMemberOf Ranking\r\n * @event\r\n */\r\nexport declare function removeColumn(col: Column, index: number): void;\r\n/**\r\n * emitted when the sort criteria propery changes\r\n * @asMemberOf Ranking\r\n * @event\r\n */\r\nexport declare function sortCriteriaChanged(previous: ISortCriteria[], current: ISortCriteria[]): void;\r\n/**\r\n * emitted when the sort criteria propery changes\r\n * @asMemberOf Ranking\r\n * @event\r\n */\r\nexport declare function groupCriteriaChanged(previous: Column[], current: Column[]): void;\r\n/**\r\n * emitted when the sort criteria propery changes\r\n * @asMemberOf Ranking\r\n * @event\r\n */\r\nexport declare function groupSortCriteriaChanged(previous: ISortCriteria[], current: ISortCriteria[]): void;\r\n/**\r\n * emitted when the sort criteria propery changes\r\n * @asMemberOf Ranking\r\n * @event\r\n */\r\nexport declare function dirtyOrder(): void;\r\n/**\r\n * @asMemberOf Ranking\r\n * @event\r\n */\r\nexport declare function orderChanged(previous: number[], current: number[], previousGroups: IOrderedGroup[], currentGroups: IOrderedGroup[]): void;\r\n/**\r\n * @asMemberOf Ranking\r\n * @event\r\n */\r\nexport declare function groupsChanged(previous: number[], current: number[], previousGroups: IOrderedGroup[], currentGroups: IOrderedGroup[]): void;\r\n\r\n/**\r\n * a ranking\r\n */\r\nexport default class Ranking extends AEventDispatcher implements IColumnParent {\r\n  static readonly EVENT_WIDTH_CHANGED = Column.EVENT_WIDTH_CHANGED;\r\n  static readonly EVENT_FILTER_CHANGED = NumberColumn.EVENT_FILTER_CHANGED;\r\n  static readonly EVENT_LABEL_CHANGED = Column.EVENT_LABEL_CHANGED;\r\n  static readonly EVENT_ADD_COLUMN = CompositeColumn.EVENT_ADD_COLUMN;\r\n  static readonly EVENT_MOVE_COLUMN = CompositeColumn.EVENT_MOVE_COLUMN;\r\n  static readonly EVENT_REMOVE_COLUMN = CompositeColumn.EVENT_REMOVE_COLUMN;\r\n  static readonly EVENT_DIRTY = Column.EVENT_DIRTY;\r\n  static readonly EVENT_DIRTY_HEADER = Column.EVENT_DIRTY_HEADER;\r\n  static readonly EVENT_DIRTY_VALUES = Column.EVENT_DIRTY_VALUES;\r\n  static readonly EVENT_COLUMN_VISIBILITY_CHANGED = Column.EVENT_VISIBILITY_CHANGED;\r\n  static readonly EVENT_SORT_CRITERIA_CHANGED = 'sortCriteriaChanged';\r\n  static readonly EVENT_GROUP_CRITERIA_CHANGED = 'groupCriteriaChanged';\r\n  static readonly EVENT_GROUP_SORT_CRITERIA_CHANGED = 'groupSortCriteriaChanged';\r\n  static readonly EVENT_DIRTY_ORDER = 'dirtyOrder';\r\n  static readonly EVENT_ORDER_CHANGED = 'orderChanged';\r\n  static readonly EVENT_GROUPS_CHANGED = 'groupsChanged';\r\n\r\n\r\n  private label: string;\r\n  /**\r\n   * the list of sort criteria\r\n   * @type {Array}\r\n   */\r\n  private readonly sortCriteria: ISortCriteria[] = [];\r\n  private readonly groupSortCriteria: ISortCriteria[] = [];\r\n\r\n  private readonly groupColumns: Column[] = [];\r\n\r\n  /**\r\n   * columns of this ranking\r\n   * @type {Array}\r\n   * @private\r\n   */\r\n  private readonly columns: Column[] = [];\r\n\r\n  readonly comparator = (a: IDataRow, b: IDataRow) => {\r\n    if (this.sortCriteria.length === 0) {\r\n      return a.i - b.i;\r\n    }\r\n    for (const sort of this.sortCriteria) {\r\n      const r = sort.col!.compare(a, b);\r\n      if (r !== 0) {\r\n        return sort.asc ? r : -r;\r\n      }\r\n    }\r\n    return a.i - b.i; //to have a deterministic order\r\n  };\r\n\r\n  readonly groupComparator = (a: IGroupData, b: IGroupData) => {\r\n    if (this.groupSortCriteria.length === 0) {\r\n      return a.name.toLowerCase().localeCompare(b.name.toLowerCase());\r\n    }\r\n    for (const sort of this.groupSortCriteria) {\r\n      const r = sort.col!.groupCompare(a, b);\r\n      if (r !== 0) {\r\n        return sort.asc ? r : -r;\r\n      }\r\n    }\r\n    return a.name.localeCompare(b.name);\r\n  };\r\n\r\n  readonly grouper = (row: IDataRow): IGroup => {\r\n    const g = this.groupColumns;\r\n    switch (g.length) {\r\n      case 0:\r\n        return defaultGroup;\r\n      case 1:\r\n        return g[0].group(row);\r\n      default:\r\n        const groups = g.map((gi) => gi.group(row));\r\n        return joinGroups(groups);\r\n    }\r\n  };\r\n\r\n  readonly dirtyOrder = () => {\r\n    this.fire([Ranking.EVENT_DIRTY_ORDER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], this.getSortCriteria(), this.getGroupSortCriteria(), this.getGroupCriteria());\r\n  };\r\n\r\n  /**\r\n   * the current ordering as an sorted array of indices\r\n   * @type {Array}\r\n   */\r\n  private groups: IOrderedGroup[] = [Object.assign({order: <number[]>[]}, defaultGroup)];\r\n\r\n  constructor(public id: string, private maxSortCriteria = 2, private maxGroupColumns = 1) {\r\n    super();\r\n    this.id = fixCSS(id);\r\n    this.label = `Ranking ${id.startsWith('rank') ? id.slice(4) : id}`;\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([\r\n      Ranking.EVENT_WIDTH_CHANGED, Ranking.EVENT_FILTER_CHANGED,\r\n      Ranking.EVENT_LABEL_CHANGED, Ranking.EVENT_GROUPS_CHANGED,\r\n      Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_GROUP_CRITERIA_CHANGED, Ranking.EVENT_MOVE_COLUMN,\r\n      Ranking.EVENT_DIRTY, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES,\r\n      Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED, Ranking.EVENT_COLUMN_VISIBILITY_CHANGED,\r\n      Ranking.EVENT_SORT_CRITERIA_CHANGED, Ranking.EVENT_DIRTY_ORDER, Ranking.EVENT_ORDER_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof Ranking.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Ranking.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\r\n  on(type: typeof Ranking.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Ranking.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\r\n  on(type: typeof Ranking.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\r\n  on(type: typeof Ranking.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\r\n  on(type: typeof Ranking.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Ranking.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Ranking.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Ranking.EVENT_COLUMN_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: typeof Ranking.EVENT_SORT_CRITERIA_CHANGED, listener: typeof sortCriteriaChanged | null): this;\r\n  on(type: typeof Ranking.EVENT_GROUP_CRITERIA_CHANGED, listener: typeof groupCriteriaChanged | null): this;\r\n  on(type: typeof Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED, listener: typeof groupSortCriteriaChanged | null): this;\r\n  on(type: typeof Ranking.EVENT_DIRTY_ORDER, listener: typeof dirtyOrder | null): this;\r\n  on(type: typeof Ranking.EVENT_ORDER_CHANGED, listener: typeof orderChanged | null): this;\r\n  on(type: typeof Ranking.EVENT_GROUPS_CHANGED, listener: typeof groupsChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(type, listener);\r\n  }\r\n\r\n  assignNewId(idGenerator: () => string) {\r\n    this.id = fixCSS(idGenerator());\r\n    this.columns.forEach((c) => c.assignNewId(idGenerator));\r\n  }\r\n\r\n  getLabel() {\r\n    return this.label;\r\n  }\r\n\r\n  setLabel(value: string) {\r\n    if (value === this.label) {\r\n      return;\r\n    }\r\n    this.fire(Ranking.EVENT_LABEL_CHANGED, this.label, this.label = value);\r\n  }\r\n\r\n  setOrder(order: number[]) {\r\n    this.setGroups([Object.assign({order}, defaultGroup)]);\r\n  }\r\n\r\n  setGroups(groups: IOrderedGroup[]) {\r\n    const old = this.getOrder();\r\n    const oldGroups = this.groups;\r\n    this.groups = groups;\r\n    this.fire([Ranking.EVENT_ORDER_CHANGED, Ranking.EVENT_GROUPS_CHANGED, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], old, this.getOrder(), oldGroups, groups);\r\n  }\r\n\r\n  getOrder() {\r\n    switch (this.groups.length) {\r\n      case 0:\r\n        return [];\r\n      case 1:\r\n        return this.groups[0].order;\r\n      default:\r\n        return (<number[]>[]).concat(...this.groups.map((g) => g.order));\r\n    }\r\n  }\r\n\r\n  getGroups() {\r\n    return this.groups.slice();\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any) {\r\n    const r: any = {};\r\n    r.columns = this.columns.map((d) => d.dump(toDescRef));\r\n    r.sortCriteria = this.sortCriteria.map((s) => ({asc: s.asc, sortBy: s.col!.id}));\r\n    r.groupSortCriteria = this.groupSortCriteria.map((s) => ({asc: s.asc, sortBy: s.col!.id}));\r\n    r.groupColumns = this.groupColumns.map((d) => d.id);\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    this.clear();\r\n    dump.columns.map((child: any) => {\r\n      const c = factory(child);\r\n      if (c) {\r\n        this.push(c);\r\n      }\r\n    });\r\n    // compatibility case\r\n    if (dump.sortColumn && dump.sortColumn.sortBy) {\r\n      const help = this.columns.find((d) => d.id === dump.sortColumn.sortBy);\r\n      if (help) {\r\n        this.sortBy(help, dump.sortColumn.asc);\r\n      }\r\n    }\r\n    if (dump.groupColumns) {\r\n      const groupColumns = dump.groupColumns.map((id: string) => this.columns.find((d) => d.id === id));\r\n      this.groupBy(groupColumns);\r\n    }\r\n\r\n    const restoreSortCriteria = (dumped: any) => {\r\n      return dumped.map((s: { asc: boolean, sortBy: string }) => {\r\n        return {\r\n          asc: s.asc,\r\n          col: this.columns.find((d) => d.id === s.sortBy) || null\r\n        };\r\n      }).filter((s: any) => s.col);\r\n    };\r\n\r\n    if (dump.sortCriteria) {\r\n      this.setSortCriteria(restoreSortCriteria(dump.sortCriteria));\r\n    }\r\n\r\n    if (dump.groupSortCriteria) {\r\n      this.setGroupSortCriteria(restoreSortCriteria(dump.groupSortCriteria));\r\n    }\r\n  }\r\n\r\n  flatten(r: IFlatColumn[], offset: number, levelsToGo = 0, padding = 0) {\r\n    let acc = offset; // + this.getWidth() + padding;\r\n    if (levelsToGo > 0 || levelsToGo <= Column.FLAT_ALL_COLUMNS) {\r\n      this.columns.forEach((c) => {\r\n        if (c.getVisible() && levelsToGo <= Column.FLAT_ALL_COLUMNS) {\r\n          acc += c.flatten(r, acc, levelsToGo - 1, padding) + padding;\r\n        }\r\n      });\r\n    }\r\n    return acc - offset;\r\n  }\r\n\r\n  getPrimarySortCriteria(): ISortCriteria | null {\r\n    if (this.sortCriteria.length === 0) {\r\n      return null;\r\n    }\r\n    return this.sortCriteria[0];\r\n  }\r\n\r\n  getSortCriteria(): ISortCriteria[] {\r\n    return this.sortCriteria.map((d) => Object.assign({}, d));\r\n  }\r\n\r\n  getGroupSortCriteria(): ISortCriteria[] {\r\n    return this.groupSortCriteria.map((d) => Object.assign({}, d));\r\n  }\r\n\r\n  toggleSorting(col: Column) {\r\n    return this.setSortCriteria(this.toggleSortingLogic(col, this.sortCriteria));\r\n  }\r\n\r\n  private toggleSortingLogic(col: Column, sortCriteria: ISortCriteria[]) {\r\n    const newSort = sortCriteria.slice();\r\n    const current = newSort.findIndex((d) => d.col === col);\r\n    const defaultAsc = isSortingAscByDefault(col);\r\n\r\n    if (current < 0) {\r\n      newSort.splice(0, newSort.length, {col, asc: defaultAsc});\r\n    } else if (newSort[current].asc === defaultAsc) {\r\n      // asc -> desc, or desc -> asc\r\n      newSort.splice(current, 1, {col, asc: !defaultAsc});\r\n    } else {\r\n      // remove\r\n      newSort.splice(current, 1);\r\n    }\r\n    return newSort;\r\n  }\r\n\r\n  toggleGrouping(col: Column) {\r\n    const old = this.groupColumns.indexOf(col);\r\n    if (old >= 0) {\r\n      const newGroupings = this.groupColumns.slice();\r\n      newGroupings.splice(old, 1);\r\n      return this.setGroupCriteria(newGroupings);\r\n    }\r\n    return this.setGroupCriteria([col]);\r\n  }\r\n\r\n  getGroupCriteria() {\r\n    return this.groupColumns.slice();\r\n  }\r\n\r\n  /**\r\n   * replaces, moves, or remove the given column in the sorting hierarchy\r\n   * @param col {Column}\r\n   * @param priority {number} when priority < 0 remove the column only else replace at the given priority\r\n   */\r\n  sortBy(col: Column, ascending: boolean = false, priority: number = 0) {\r\n    if (col.findMyRanker() !== this) {\r\n      return false; //not one of mine\r\n    }\r\n    return this.setSortCriteria(this.hierarchyLogic(this.sortCriteria, this.sortCriteria.findIndex((d) => d.col === col), {col, asc: ascending}, priority));\r\n  }\r\n\r\n  /**\r\n   * replaces, moves, or remove the given column in the group sorting hierarchy\r\n   * @param col {Column}\r\n   * @param priority {number} when priority < 0 remove the column only else replace at the given priority\r\n   */\r\n  groupSortBy(col: Column, ascending: boolean = false, priority: number = 0) {\r\n    if (col.findMyRanker() !== this) {\r\n      return false; //not one of mine\r\n    }\r\n    return this.setGroupSortCriteria(this.hierarchyLogic(this.groupSortCriteria, this.groupSortCriteria.findIndex((d) => d.col === col), {col, asc: ascending}, priority));\r\n  }\r\n\r\n  private hierarchyLogic<T>(entries: T[], index: number, entry: T, priority: number) {\r\n    entries = entries.slice();\r\n    if (index >= 0) {\r\n      // move at the other position\r\n      entries.splice(index, 1);\r\n      if (priority >= 0) {\r\n        entries.splice(Math.min(priority, entries.length), 0, entry);\r\n      }\r\n    } else if (priority >= 0) {\r\n      entries[Math.min(priority, entries.length)] = entry;\r\n    }\r\n    return entries;\r\n  }\r\n\r\n  /**\r\n   * replaces, moves, or remove the given column in the grouping hierarchy\r\n   * @param col {Column}\r\n   * @param priority {number} when priority < 0 remove the column only else replace at the given priority\r\n   */\r\n  groupBy(col: Column, priority: number = 0): boolean {\r\n    if (col.findMyRanker() !== this) {\r\n      return false; //not one of mine\r\n    }\r\n    return this.setGroupCriteria(this.hierarchyLogic(this.groupColumns, this.groupColumns.indexOf(col), col, priority));\r\n  }\r\n\r\n  setSortCriteria(value: ISortCriteria | ISortCriteria[]) {\r\n    const values = Array.isArray(value) ? value.slice() : [value];\r\n    // trim\r\n    if (values.length > this.maxSortCriteria) {\r\n      values.splice(this.maxSortCriteria, values.length - this.maxSortCriteria);\r\n    }\r\n    const bak = this.sortCriteria.slice();\r\n\r\n    if (equalCriteria(values, bak)) {\r\n      return false;\r\n    }\r\n\r\n    // update listener\r\n    bak.forEach((d) => {\r\n      d.col.on(`${Column.EVENT_DIRTY_VALUES}.order`, null!);\r\n      d.col.on(`${NumberColumn.EVENT_SORTMETHOD_CHANGED}.order`, null!);\r\n    });\r\n\r\n    values.forEach((d) => {\r\n      d.col.on(`${Column.EVENT_DIRTY_VALUES}.order`, this.dirtyOrder);\r\n      d.col.on(`${NumberColumn.EVENT_SORTMETHOD_CHANGED}.order`, this.dirtyOrder);\r\n    });\r\n    this.sortCriteria.splice(0, this.sortCriteria.length, ...values.slice());\r\n    this.triggerResort(bak);\r\n    return true;\r\n  }\r\n\r\n  setGroupCriteria(column: Column[]|Column) {\r\n    let cols = Array.isArray(column) ? column : [column];\r\n\r\n    // trim\r\n    if (cols.length > this.maxGroupColumns) {\r\n      cols = cols.slice(0, this.maxGroupColumns);\r\n    }\r\n\r\n    if (equalArrays(this.groupColumns, cols)) {\r\n      return true; //same\r\n    }\r\n    this.groupColumns.forEach((groupColumn) => {\r\n      groupColumn.on(suffix('.group', Column.EVENT_DIRTY_VALUES, NumberColumn.EVENT_SORTMETHOD_CHANGED, NumberColumn.EVENT_GROUPING_CHANGED), null);\r\n    });\r\n\r\n    const bak = this.groupColumns.slice();\r\n    this.groupColumns.splice(0, this.groupColumns.length, ...cols);\r\n\r\n    this.groupColumns.forEach((groupColumn) => {\r\n      groupColumn.on(suffix('.group', Column.EVENT_DIRTY_VALUES, NumberColumn.EVENT_SORTMETHOD_CHANGED, NumberColumn.EVENT_GROUPING_CHANGED), this.dirtyOrder);\r\n    });\r\n\r\n    this.fire([Ranking.EVENT_GROUP_CRITERIA_CHANGED, Ranking.EVENT_DIRTY_ORDER, Ranking.EVENT_DIRTY_HEADER,\r\n      Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], bak, this.getGroupCriteria());\r\n    return true;\r\n  }\r\n\r\n  toggleGroupSorting(col: Column) {\r\n    return this.setGroupSortCriteria(this.toggleSortingLogic(col, this.groupSortCriteria));\r\n  }\r\n\r\n  setMaxSortCriteria(maxSortCriteria: number) {\r\n    const old = this.maxSortCriteria;\r\n    if (old === maxSortCriteria) {\r\n      return;\r\n    }\r\n    this.maxSortCriteria = maxSortCriteria;\r\n    if (old < maxSortCriteria || this.sortCriteria.length < maxSortCriteria) {\r\n      return;\r\n    }\r\n    // check if we have to slice\r\n    this.setSortCriteria(this.sortCriteria.slice(0, maxSortCriteria));\r\n  }\r\n\r\n  getMaxSortCriteria() {\r\n    return this.maxSortCriteria;\r\n  }\r\n\r\n  setMaxGroupColumns(maxGroupColumns: number) {\r\n    const old = this.maxGroupColumns;\r\n    if (old === maxGroupColumns) {\r\n      return;\r\n    }\r\n    this.maxGroupColumns = maxGroupColumns;\r\n    if (old < maxGroupColumns || this.groupColumns.length < maxGroupColumns) {\r\n      return;\r\n    }\r\n    // check if we have to slice\r\n    this.setGroupCriteria(this.groupColumns.slice(0, maxGroupColumns));\r\n  }\r\n\r\n  getMaxGroupColumns() {\r\n    return this.maxGroupColumns;\r\n  }\r\n\r\n  setGroupSortCriteria(value: ISortCriteria | ISortCriteria[]) {\r\n    const values = Array.isArray(value) ? value.slice() : [value];\r\n    // trim\r\n    if (values.length > this.maxSortCriteria) {\r\n      values.splice(this.maxSortCriteria, values.length - this.maxSortCriteria);\r\n    }\r\n\r\n    const bak = this.groupSortCriteria.slice();\r\n\r\n    if (equalCriteria(values, bak)) {\r\n      return false;\r\n    }\r\n\r\n    bak.forEach((d) => {\r\n      d.col.on(`${Column.EVENT_DIRTY_VALUES}.groupOrder`, null!);\r\n      d.col.on(`${NumberColumn.EVENT_SORTMETHOD_CHANGED}.groupOrder`, null!);\r\n    });\r\n\r\n    values.forEach((d) => {\r\n      d.col.on(`${Column.EVENT_DIRTY_VALUES}.groupOrder`, this.dirtyOrder);\r\n      d.col.on(`${NumberColumn.EVENT_SORTMETHOD_CHANGED}.groupOrder`, this.dirtyOrder);\r\n    });\r\n    this.groupSortCriteria.splice(0, this.groupSortCriteria.length, ...values.slice());\r\n    this.triggerGroupResort(bak);\r\n    return true;\r\n  }\r\n\r\n  private triggerGroupResort(bak: ISortCriteria | ISortCriteria[] | null) {\r\n    const sortCriterias = this.getGroupSortCriteria();\r\n    const bakMulti = Array.isArray(bak) ? bak : sortCriterias;\r\n    this.fire([Ranking.EVENT_GROUP_SORT_CRITERIA_CHANGED, Ranking.EVENT_DIRTY_ORDER, Ranking.EVENT_DIRTY_HEADER,\r\n      Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], bakMulti, sortCriterias);\r\n  }\r\n\r\n  private triggerResort(bak: ISortCriteria | ISortCriteria[] | null) {\r\n    const sortCriterias = this.getSortCriteria();\r\n    const bakMulti = Array.isArray(bak) ? bak : sortCriterias;\r\n    this.fire([Ranking.EVENT_SORT_CRITERIA_CHANGED, Ranking.EVENT_DIRTY_ORDER, Ranking.EVENT_DIRTY_HEADER,\r\n      Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], bakMulti, sortCriterias);\r\n  }\r\n\r\n  get children() {\r\n    return this.columns.slice();\r\n  }\r\n\r\n  get length() {\r\n    return this.columns.length;\r\n  }\r\n\r\n  insert(col: Column, index: number = this.columns.length) {\r\n    this.columns.splice(index, 0, col);\r\n    col.parent = this;\r\n    this.forward(col, ...suffix('.ranking', Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY, NumberColumn.EVENT_FILTER_CHANGED));\r\n    col.on(`${Ranking.EVENT_FILTER_CHANGED}.order`, this.dirtyOrder);\r\n\r\n    col.on(`${Column.EVENT_VISIBILITY_CHANGED}.ranking`, (oldValue, newValue) => this.fire([Ranking.EVENT_COLUMN_VISIBILITY_CHANGED, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], col, oldValue, newValue));\r\n\r\n    this.fire([Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], col, index);\r\n    return col;\r\n  }\r\n\r\n  move(col: Column, index: number = this.columns.length) {\r\n    if (col.parent !== this) {\r\n      // not a move operation!\r\n      console.error('invalid move operation: ', col);\r\n      return null;\r\n    }\r\n    const old = this.columns.indexOf(col);\r\n    if (index === old) {\r\n      // no move needed\r\n      return col;\r\n    }\r\n    //delete first\r\n    this.columns.splice(old, 1);\r\n    // adapt target index based on previous index, i.e shift by one\r\n    this.columns.splice(old < index ? index - 1 : index, 0, col);\r\n\r\n    this.fire([Ranking.EVENT_MOVE_COLUMN, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], col, index, old);\r\n    return col;\r\n  }\r\n\r\n  moveAfter(col: Column, reference: Column) {\r\n    const i = this.columns.indexOf(reference);\r\n    if (i < 0) {\r\n      return null;\r\n    }\r\n    return this.move(col, i + 1);\r\n  }\r\n\r\n  get fqpath() {\r\n    return '';\r\n  }\r\n\r\n  findByPath(fqpath: string): Column {\r\n    let p: IColumnParent | Column = <any>this;\r\n    const indices = fqpath.split('@').map(Number).slice(1); //ignore the first entry = ranking\r\n    while (indices.length > 0) {\r\n      const i = indices.shift()!;\r\n      p = (<IColumnParent>p).at(i);\r\n    }\r\n    return <Column>p;\r\n  }\r\n\r\n  indexOf(col: Column) {\r\n    return this.columns.indexOf(col);\r\n  }\r\n\r\n  at(index: number) {\r\n    return this.columns[index];\r\n  }\r\n\r\n  insertAfter(col: Column, ref: Column) {\r\n    const i = this.columns.indexOf(ref);\r\n    if (i < 0) {\r\n      return null;\r\n    }\r\n    return this.insert(col, i + 1);\r\n  }\r\n\r\n  push(col: Column) {\r\n    return this.insert(col);\r\n  }\r\n\r\n  remove(col: Column) {\r\n    const i = this.columns.indexOf(col);\r\n    if (i < 0) {\r\n      return false;\r\n    }\r\n\r\n    this.unforward(col, ...suffix('.ranking', Column.EVENT_VISIBILITY_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY, NumberColumn.EVENT_FILTER_CHANGED));\r\n\r\n    const isSortCriteria = this.sortCriteria.findIndex((d) => d.col === col);\r\n    const sortCriteriaChanged = isSortCriteria >= 0;\r\n    if (sortCriteriaChanged) {\r\n      this.sortCriteria.splice(isSortCriteria, 1);\r\n    }\r\n\r\n    const isGroupSortCriteria = this.groupSortCriteria.findIndex((d) => d.col === col);\r\n    const groupSortCriteriaChanged = isGroupSortCriteria >= 0;\r\n    if (groupSortCriteriaChanged) {\r\n      this.groupSortCriteria.splice(isGroupSortCriteria, 1);\r\n    }\r\n\r\n    let newGrouping: Column[]|null = null;\r\n    const isGroupColumn = this.groupColumns.indexOf(col);\r\n    if (isGroupColumn >= 0) { // was my grouping criteria\r\n      newGrouping = this.groupColumns.slice();\r\n      newGrouping.splice(isGroupColumn, 1);\r\n    }\r\n\r\n    col.parent = null;\r\n    this.columns.splice(i, 1);\r\n\r\n    this.fire([Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], col, i);\r\n\r\n    if (newGrouping) {\r\n      this.setGroupCriteria(newGrouping);\r\n    } else if (sortCriteriaChanged) {\r\n      this.triggerResort(null);\r\n    } else if (groupSortCriteriaChanged) {\r\n      this.triggerGroupResort(null);\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  clear() {\r\n    if (this.columns.length === 0) {\r\n      return;\r\n    }\r\n    this.sortCriteria.splice(0, this.sortCriteria.length);\r\n    this.groupSortCriteria.splice(0, this.groupSortCriteria.length);\r\n\r\n    this.groupColumns.forEach((groupColumn) => {\r\n      groupColumn.on(`${Column.EVENT_DIRTY_VALUES}.group`, null);\r\n      groupColumn.on(`${NumberColumn.EVENT_SORTMETHOD_CHANGED}.group`, null);\r\n    });\r\n    this.groupColumns.splice(0, this.groupColumns.length);\r\n\r\n    this.columns.forEach((col) => {\r\n      this.unforward(col, ...suffix('.ranking', Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY, NumberColumn.EVENT_FILTER_CHANGED));\r\n      col.parent = null;\r\n    });\r\n    const removed = this.columns.splice(0, this.columns.length);\r\n    this.fire([Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_DIRTY_HEADER, Ranking.EVENT_DIRTY_VALUES, Ranking.EVENT_DIRTY], removed);\r\n  }\r\n\r\n  get flatColumns(): Column[] {\r\n    const r: IFlatColumn[] = [];\r\n    this.flatten(r, 0, Column.FLAT_ALL_COLUMNS);\r\n    return r.map((d) => d.col);\r\n  }\r\n\r\n  find(idOrFilter: string | ((col: Column) => boolean)) {\r\n    const filter = typeof(idOrFilter) === 'string' ? (col: Column) => col.id === idOrFilter : idOrFilter;\r\n    const r = this.flatColumns;\r\n    for (const v of r) {\r\n      if (filter(v)) {\r\n        return v;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  isFiltered() {\r\n    return this.columns.some((d) => d.isFiltered());\r\n  }\r\n\r\n  filter(row: IDataRow) {\r\n    return this.columns.every((d) => d.filter(row));\r\n  }\r\n\r\n  findMyRanker() {\r\n    return this;\r\n  }\r\n\r\n  get fqid() {\r\n    return this.id;\r\n  }\r\n}\r\n\r\nfunction equalCriteria(a: ISortCriteria[], b: ISortCriteria[]) {\r\n  if (a.length !== b.length) {\r\n    return false;\r\n  }\r\n  return a.every((ai, i) => {\r\n    const bi = b[i];\r\n    return ai.col === bi.col && ai.asc === bi.asc;\r\n  });\r\n}\r\n","import {IDataRow} from '../model';\r\nimport Column from '../model/Column';\r\nimport {CANVAS_HEIGHT, DASH} from '../styles';\r\n\r\nexport function renderMissingValue(ctx: CanvasRenderingContext2D, width: number, height: number, x = 0, y = 0) {\r\n\r\n  const dashX = Math.max(0, (width - x - DASH.width) / 2); // center horizontally\r\n  const dashY = Math.max(0, (height - y - DASH.height) / 2); // center vertically\r\n  ctx.fillStyle = DASH.color;\r\n  ctx.fillRect(dashX, dashY, Math.min(width, DASH.width), Math.min(height, DASH.height));\r\n}\r\n\r\nexport function renderMissingDOM(node: HTMLElement, col: Column, d: IDataRow) {\r\n  const missing = col.isMissing(d);\r\n  node.classList.toggle('lu-missing', missing);\r\n  return missing;\r\n}\r\n\r\nexport function renderMissingCanvas(ctx: CanvasRenderingContext2D, col: Column, d: IDataRow, width: number, x = 0, y = 0) {\r\n  const missing = col.isMissing(d);\r\n  if (missing) {\r\n    renderMissingValue(ctx, width, CANVAS_HEIGHT, x, y);\r\n  }\r\n  return missing;\r\n}\r\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","import {pair} from \"./pairs\";\n\nexport default function(values0, values1, reduce) {\n  var n0 = values0.length,\n      n1 = values1.length,\n      values = new Array(n0 * n1),\n      i0,\n      i1,\n      i,\n      value0;\n\n  if (reduce == null) reduce = pair;\n\n  for (i0 = i = 0; i0 < n0; ++i0) {\n    for (value0 = values0[i0], i1 = 0; i1 < n1; ++i1, ++i) {\n      values[i] = reduce(value0, values1[i1]);\n    }\n  }\n\n  return values;\n}\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n","import number from \"./number\";\n\nexport default function(values, valueof) {\n  var n = values.length,\n      m = 0,\n      i = -1,\n      mean = 0,\n      value,\n      delta,\n      sum = 0;\n\n  if (valueof == null) {\n    while (++i < n) {\n      if (!isNaN(value = number(values[i]))) {\n        delta = value - mean;\n        mean += delta / ++m;\n        sum += delta * (value - mean);\n      }\n    }\n  }\n\n  else {\n    while (++i < n) {\n      if (!isNaN(value = number(valueof(values[i], i, values)))) {\n        delta = value - mean;\n        mean += delta / ++m;\n        sum += delta * (value - mean);\n      }\n    }\n  }\n\n  if (m > 1) return sum / (m - 1);\n}\n","import variance from \"./variance\";\n\nexport default function(array, f) {\n  var v = variance(array, f);\n  return v ? Math.sqrt(v) : v;\n}\n","export default function(values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      min,\n      max;\n\n  if (valueof == null) {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        min = max = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = values[i]) != null) {\n            if (min > value) min = value;\n            if (max < value) max = value;\n          }\n        }\n      }\n    }\n  }\n\n  else {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        min = max = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null) {\n            if (min > value) min = value;\n            if (max < value) max = value;\n          }\n        }\n      }\n    }\n  }\n\n  return [min, max];\n}\n","var array = Array.prototype;\n\nexport var slice = array.slice;\nexport var map = array.map;\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return x;\n}\n","export default function(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n    while (++i < n) ticks[i] = (start - i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export default function(values) {\n  return Math.ceil(Math.log(values.length) / Math.LN2) + 1;\n}\n","import {slice} from \"./array\";\nimport bisect from \"./bisect\";\nimport constant from \"./constant\";\nimport extent from \"./extent\";\nimport identity from \"./identity\";\nimport range from \"./range\";\nimport {tickStep} from \"./ticks\";\nimport sturges from \"./threshold/sturges\";\n\nexport default function() {\n  var value = identity,\n      domain = extent,\n      threshold = sturges;\n\n  function histogram(data) {\n    var i,\n        n = data.length,\n        x,\n        values = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      values[i] = value(data[i], i, data);\n    }\n\n    var xz = domain(values),\n        x0 = xz[0],\n        x1 = xz[1],\n        tz = threshold(values, x0, x1);\n\n    // Convert number of thresholds into uniform thresholds.\n    if (!Array.isArray(tz)) {\n      tz = tickStep(x0, x1, tz);\n      tz = range(Math.ceil(x0 / tz) * tz, Math.floor(x1 / tz) * tz, tz); // exclusive\n    }\n\n    // Remove any thresholds outside the domain.\n    var m = tz.length;\n    while (tz[0] <= x0) tz.shift(), --m;\n    while (tz[m - 1] > x1) tz.pop(), --m;\n\n    var bins = new Array(m + 1),\n        bin;\n\n    // Initialize bins.\n    for (i = 0; i <= m; ++i) {\n      bin = bins[i] = [];\n      bin.x0 = i > 0 ? tz[i - 1] : x0;\n      bin.x1 = i < m ? tz[i] : x1;\n    }\n\n    // Assign data to bins by value, ignoring any outside the domain.\n    for (i = 0; i < n; ++i) {\n      x = values[i];\n      if (x0 <= x && x <= x1) {\n        bins[bisect(tz, x, 0, m)].push(data[i]);\n      }\n    }\n\n    return bins;\n  }\n\n  histogram.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(_), histogram) : value;\n  };\n\n  histogram.domain = function(_) {\n    return arguments.length ? (domain = typeof _ === \"function\" ? _ : constant([_[0], _[1]]), histogram) : domain;\n  };\n\n  histogram.thresholds = function(_) {\n    return arguments.length ? (threshold = typeof _ === \"function\" ? _ : Array.isArray(_) ? constant(slice.call(_)) : constant(_), histogram) : threshold;\n  };\n\n  return histogram;\n}\n","import number from \"./number\";\n\nexport default function(values, p, valueof) {\n  if (valueof == null) valueof = number;\n  if (!(n = values.length)) return;\n  if ((p = +p) <= 0 || n < 2) return +valueof(values[0], 0, values);\n  if (p >= 1) return +valueof(values[n - 1], n - 1, values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = +valueof(values[i0], i0, values),\n      value1 = +valueof(values[i0 + 1], i0 + 1, values);\n  return value0 + (value1 - value0) * (i - i0);\n}\n","export default function(values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      max;\n\n  if (valueof == null) {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        max = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = values[i]) != null && value > max) {\n            max = value;\n          }\n        }\n      }\n    }\n  }\n\n  else {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        max = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null && value > max) {\n            max = value;\n          }\n        }\n      }\n    }\n  }\n\n  return max;\n}\n","import number from \"./number\";\n\nexport default function(values, valueof) {\n  var n = values.length,\n      m = n,\n      i = -1,\n      value,\n      sum = 0;\n\n  if (valueof == null) {\n    while (++i < n) {\n      if (!isNaN(value = number(values[i]))) sum += value;\n      else --m;\n    }\n  }\n\n  else {\n    while (++i < n) {\n      if (!isNaN(value = number(valueof(values[i], i, values)))) sum += value;\n      else --m;\n    }\n  }\n\n  if (m) return sum / m;\n}\n","import ascending from \"./ascending\";\nimport number from \"./number\";\nimport quantile from \"./quantile\";\n\nexport default function(values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      numbers = [];\n\n  if (valueof == null) {\n    while (++i < n) {\n      if (!isNaN(value = number(values[i]))) {\n        numbers.push(value);\n      }\n    }\n  }\n\n  else {\n    while (++i < n) {\n      if (!isNaN(value = number(valueof(values[i], i, values)))) {\n        numbers.push(value);\n      }\n    }\n  }\n\n  return quantile(numbers.sort(ascending), 0.5);\n}\n","export default function(values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      min;\n\n  if (valueof == null) {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        min = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = values[i]) != null && min > value) {\n            min = value;\n          }\n        }\n      }\n    }\n  }\n\n  else {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        min = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null && min > value) {\n            min = value;\n          }\n        }\n      }\n    }\n  }\n\n  return min;\n}\n","import min from \"./min\";\n\nexport default function(matrix) {\n  if (!(n = matrix.length)) return [];\n  for (var i = -1, m = min(matrix, length), transpose = new Array(m); ++i < m;) {\n    for (var j = -1, n, row = transpose[i] = new Array(n); ++j < n;) {\n      row[j] = matrix[j][i];\n    }\n  }\n  return transpose;\n}\n\nfunction length(d) {\n  return d.length;\n}\n","/**!\n * @fileOverview Kickass library to create and place poppers near their reference elements.\n * @version 1.14.4\n * @license\n * Copyright (c) 2016 Federico Zivolo and contributors\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nvar isBrowser = typeof window !== 'undefined' && typeof document !== 'undefined';\n\nvar longerTimeoutBrowsers = ['Edge', 'Trident', 'Firefox'];\nvar timeoutDuration = 0;\nfor (var i = 0; i < longerTimeoutBrowsers.length; i += 1) {\n  if (isBrowser && navigator.userAgent.indexOf(longerTimeoutBrowsers[i]) >= 0) {\n    timeoutDuration = 1;\n    break;\n  }\n}\n\nfunction microtaskDebounce(fn) {\n  var called = false;\n  return function () {\n    if (called) {\n      return;\n    }\n    called = true;\n    window.Promise.resolve().then(function () {\n      called = false;\n      fn();\n    });\n  };\n}\n\nfunction taskDebounce(fn) {\n  var scheduled = false;\n  return function () {\n    if (!scheduled) {\n      scheduled = true;\n      setTimeout(function () {\n        scheduled = false;\n        fn();\n      }, timeoutDuration);\n    }\n  };\n}\n\nvar supportsMicroTasks = isBrowser && window.Promise;\n\n/**\n* Create a debounced version of a method, that's asynchronously deferred\n* but called in the minimum time possible.\n*\n* @method\n* @memberof Popper.Utils\n* @argument {Function} fn\n* @returns {Function}\n*/\nvar debounce = supportsMicroTasks ? microtaskDebounce : taskDebounce;\n\n/**\n * Check if the given variable is a function\n * @method\n * @memberof Popper.Utils\n * @argument {Any} functionToCheck - variable to check\n * @returns {Boolean} answer to: is a function?\n */\nfunction isFunction(functionToCheck) {\n  var getType = {};\n  return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n}\n\n/**\n * Get CSS computed property of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Eement} element\n * @argument {String} property\n */\nfunction getStyleComputedProperty(element, property) {\n  if (element.nodeType !== 1) {\n    return [];\n  }\n  // NOTE: 1 DOM access here\n  var css = getComputedStyle(element, null);\n  return property ? css[property] : css;\n}\n\n/**\n * Returns the parentNode or the host of the element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} parent\n */\nfunction getParentNode(element) {\n  if (element.nodeName === 'HTML') {\n    return element;\n  }\n  return element.parentNode || element.host;\n}\n\n/**\n * Returns the scrolling parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} scroll parent\n */\nfunction getScrollParent(element) {\n  // Return body, `getScroll` will take care to get the correct `scrollTop` from it\n  if (!element) {\n    return document.body;\n  }\n\n  switch (element.nodeName) {\n    case 'HTML':\n    case 'BODY':\n      return element.ownerDocument.body;\n    case '#document':\n      return element.body;\n  }\n\n  // Firefox want us to check `-x` and `-y` variations as well\n\n  var _getStyleComputedProp = getStyleComputedProperty(element),\n      overflow = _getStyleComputedProp.overflow,\n      overflowX = _getStyleComputedProp.overflowX,\n      overflowY = _getStyleComputedProp.overflowY;\n\n  if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n    return element;\n  }\n\n  return getScrollParent(getParentNode(element));\n}\n\nvar isIE11 = isBrowser && !!(window.MSInputMethodContext && document.documentMode);\nvar isIE10 = isBrowser && /MSIE 10/.test(navigator.userAgent);\n\n/**\n * Determines if the browser is Internet Explorer\n * @method\n * @memberof Popper.Utils\n * @param {Number} version to check\n * @returns {Boolean} isIE\n */\nfunction isIE(version) {\n  if (version === 11) {\n    return isIE11;\n  }\n  if (version === 10) {\n    return isIE10;\n  }\n  return isIE11 || isIE10;\n}\n\n/**\n * Returns the offset parent of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} offset parent\n */\nfunction getOffsetParent(element) {\n  if (!element) {\n    return document.documentElement;\n  }\n\n  var noOffsetParent = isIE(10) ? document.body : null;\n\n  // NOTE: 1 DOM access here\n  var offsetParent = element.offsetParent;\n  // Skip hidden elements which don't have an offsetParent\n  while (offsetParent === noOffsetParent && element.nextElementSibling) {\n    offsetParent = (element = element.nextElementSibling).offsetParent;\n  }\n\n  var nodeName = offsetParent && offsetParent.nodeName;\n\n  if (!nodeName || nodeName === 'BODY' || nodeName === 'HTML') {\n    return element ? element.ownerDocument.documentElement : document.documentElement;\n  }\n\n  // .offsetParent will return the closest TD or TABLE in case\n  // no offsetParent is present, I hate this job...\n  if (['TD', 'TABLE'].indexOf(offsetParent.nodeName) !== -1 && getStyleComputedProperty(offsetParent, 'position') === 'static') {\n    return getOffsetParent(offsetParent);\n  }\n\n  return offsetParent;\n}\n\nfunction isOffsetContainer(element) {\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY') {\n    return false;\n  }\n  return nodeName === 'HTML' || getOffsetParent(element.firstElementChild) === element;\n}\n\n/**\n * Finds the root node (document, shadowDOM root) of the given element\n * @method\n * @memberof Popper.Utils\n * @argument {Element} node\n * @returns {Element} root node\n */\nfunction getRoot(node) {\n  if (node.parentNode !== null) {\n    return getRoot(node.parentNode);\n  }\n\n  return node;\n}\n\n/**\n * Finds the offset parent common to the two provided nodes\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element1\n * @argument {Element} element2\n * @returns {Element} common offset parent\n */\nfunction findCommonOffsetParent(element1, element2) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element1 || !element1.nodeType || !element2 || !element2.nodeType) {\n    return document.documentElement;\n  }\n\n  // Here we make sure to give as \"start\" the element that comes first in the DOM\n  var order = element1.compareDocumentPosition(element2) & Node.DOCUMENT_POSITION_FOLLOWING;\n  var start = order ? element1 : element2;\n  var end = order ? element2 : element1;\n\n  // Get common ancestor container\n  var range = document.createRange();\n  range.setStart(start, 0);\n  range.setEnd(end, 0);\n  var commonAncestorContainer = range.commonAncestorContainer;\n\n  // Both nodes are inside #document\n\n  if (element1 !== commonAncestorContainer && element2 !== commonAncestorContainer || start.contains(end)) {\n    if (isOffsetContainer(commonAncestorContainer)) {\n      return commonAncestorContainer;\n    }\n\n    return getOffsetParent(commonAncestorContainer);\n  }\n\n  // one of the nodes is inside shadowDOM, find which one\n  var element1root = getRoot(element1);\n  if (element1root.host) {\n    return findCommonOffsetParent(element1root.host, element2);\n  } else {\n    return findCommonOffsetParent(element1, getRoot(element2).host);\n  }\n}\n\n/**\n * Gets the scroll value of the given element in the given side (top and left)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {String} side `top` or `left`\n * @returns {number} amount of scrolled pixels\n */\nfunction getScroll(element) {\n  var side = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'top';\n\n  var upperSide = side === 'top' ? 'scrollTop' : 'scrollLeft';\n  var nodeName = element.nodeName;\n\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    var html = element.ownerDocument.documentElement;\n    var scrollingElement = element.ownerDocument.scrollingElement || html;\n    return scrollingElement[upperSide];\n  }\n\n  return element[upperSide];\n}\n\n/*\n * Sum or subtract the element scroll values (left and top) from a given rect object\n * @method\n * @memberof Popper.Utils\n * @param {Object} rect - Rect object you want to change\n * @param {HTMLElement} element - The element from the function reads the scroll values\n * @param {Boolean} subtract - set to true if you want to subtract the scroll values\n * @return {Object} rect - The modifier rect object\n */\nfunction includeScroll(rect, element) {\n  var subtract = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var scrollTop = getScroll(element, 'top');\n  var scrollLeft = getScroll(element, 'left');\n  var modifier = subtract ? -1 : 1;\n  rect.top += scrollTop * modifier;\n  rect.bottom += scrollTop * modifier;\n  rect.left += scrollLeft * modifier;\n  rect.right += scrollLeft * modifier;\n  return rect;\n}\n\n/*\n * Helper to detect borders of a given element\n * @method\n * @memberof Popper.Utils\n * @param {CSSStyleDeclaration} styles\n * Result of `getStyleComputedProperty` on the given element\n * @param {String} axis - `x` or `y`\n * @return {number} borders - The borders size of the given axis\n */\n\nfunction getBordersSize(styles, axis) {\n  var sideA = axis === 'x' ? 'Left' : 'Top';\n  var sideB = sideA === 'Left' ? 'Right' : 'Bottom';\n\n  return parseFloat(styles['border' + sideA + 'Width'], 10) + parseFloat(styles['border' + sideB + 'Width'], 10);\n}\n\nfunction getSize(axis, body, html, computedStyle) {\n  return Math.max(body['offset' + axis], body['scroll' + axis], html['client' + axis], html['offset' + axis], html['scroll' + axis], isIE(10) ? parseInt(html['offset' + axis]) + parseInt(computedStyle['margin' + (axis === 'Height' ? 'Top' : 'Left')]) + parseInt(computedStyle['margin' + (axis === 'Height' ? 'Bottom' : 'Right')]) : 0);\n}\n\nfunction getWindowSizes(document) {\n  var body = document.body;\n  var html = document.documentElement;\n  var computedStyle = isIE(10) && getComputedStyle(html);\n\n  return {\n    height: getSize('Height', body, html, computedStyle),\n    width: getSize('Width', body, html, computedStyle)\n  };\n}\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\nvar defineProperty = function (obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/**\n * Given element offsets, generate an output similar to getBoundingClientRect\n * @method\n * @memberof Popper.Utils\n * @argument {Object} offsets\n * @returns {Object} ClientRect like output\n */\nfunction getClientRect(offsets) {\n  return _extends({}, offsets, {\n    right: offsets.left + offsets.width,\n    bottom: offsets.top + offsets.height\n  });\n}\n\n/**\n * Get bounding client rect of given element\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} element\n * @return {Object} client rect\n */\nfunction getBoundingClientRect(element) {\n  var rect = {};\n\n  // IE10 10 FIX: Please, don't ask, the element isn't\n  // considered in DOM in some circumstances...\n  // This isn't reproducible in IE10 compatibility mode of IE11\n  try {\n    if (isIE(10)) {\n      rect = element.getBoundingClientRect();\n      var scrollTop = getScroll(element, 'top');\n      var scrollLeft = getScroll(element, 'left');\n      rect.top += scrollTop;\n      rect.left += scrollLeft;\n      rect.bottom += scrollTop;\n      rect.right += scrollLeft;\n    } else {\n      rect = element.getBoundingClientRect();\n    }\n  } catch (e) {}\n\n  var result = {\n    left: rect.left,\n    top: rect.top,\n    width: rect.right - rect.left,\n    height: rect.bottom - rect.top\n  };\n\n  // subtract scrollbar size from sizes\n  var sizes = element.nodeName === 'HTML' ? getWindowSizes(element.ownerDocument) : {};\n  var width = sizes.width || element.clientWidth || result.right - result.left;\n  var height = sizes.height || element.clientHeight || result.bottom - result.top;\n\n  var horizScrollbar = element.offsetWidth - width;\n  var vertScrollbar = element.offsetHeight - height;\n\n  // if an hypothetical scrollbar is detected, we must be sure it's not a `border`\n  // we make this check conditional for performance reasons\n  if (horizScrollbar || vertScrollbar) {\n    var styles = getStyleComputedProperty(element);\n    horizScrollbar -= getBordersSize(styles, 'x');\n    vertScrollbar -= getBordersSize(styles, 'y');\n\n    result.width -= horizScrollbar;\n    result.height -= vertScrollbar;\n  }\n\n  return getClientRect(result);\n}\n\nfunction getOffsetRectRelativeToArbitraryNode(children, parent) {\n  var fixedPosition = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  var isIE10 = isIE(10);\n  var isHTML = parent.nodeName === 'HTML';\n  var childrenRect = getBoundingClientRect(children);\n  var parentRect = getBoundingClientRect(parent);\n  var scrollParent = getScrollParent(children);\n\n  var styles = getStyleComputedProperty(parent);\n  var borderTopWidth = parseFloat(styles.borderTopWidth, 10);\n  var borderLeftWidth = parseFloat(styles.borderLeftWidth, 10);\n\n  // In cases where the parent is fixed, we must ignore negative scroll in offset calc\n  if (fixedPosition && isHTML) {\n    parentRect.top = Math.max(parentRect.top, 0);\n    parentRect.left = Math.max(parentRect.left, 0);\n  }\n  var offsets = getClientRect({\n    top: childrenRect.top - parentRect.top - borderTopWidth,\n    left: childrenRect.left - parentRect.left - borderLeftWidth,\n    width: childrenRect.width,\n    height: childrenRect.height\n  });\n  offsets.marginTop = 0;\n  offsets.marginLeft = 0;\n\n  // Subtract margins of documentElement in case it's being used as parent\n  // we do this only on HTML because it's the only element that behaves\n  // differently when margins are applied to it. The margins are included in\n  // the box of the documentElement, in the other cases not.\n  if (!isIE10 && isHTML) {\n    var marginTop = parseFloat(styles.marginTop, 10);\n    var marginLeft = parseFloat(styles.marginLeft, 10);\n\n    offsets.top -= borderTopWidth - marginTop;\n    offsets.bottom -= borderTopWidth - marginTop;\n    offsets.left -= borderLeftWidth - marginLeft;\n    offsets.right -= borderLeftWidth - marginLeft;\n\n    // Attach marginTop and marginLeft because in some circumstances we may need them\n    offsets.marginTop = marginTop;\n    offsets.marginLeft = marginLeft;\n  }\n\n  if (isIE10 && !fixedPosition ? parent.contains(scrollParent) : parent === scrollParent && scrollParent.nodeName !== 'BODY') {\n    offsets = includeScroll(offsets, parent);\n  }\n\n  return offsets;\n}\n\nfunction getViewportOffsetRectRelativeToArtbitraryNode(element) {\n  var excludeScroll = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var html = element.ownerDocument.documentElement;\n  var relativeOffset = getOffsetRectRelativeToArbitraryNode(element, html);\n  var width = Math.max(html.clientWidth, window.innerWidth || 0);\n  var height = Math.max(html.clientHeight, window.innerHeight || 0);\n\n  var scrollTop = !excludeScroll ? getScroll(html) : 0;\n  var scrollLeft = !excludeScroll ? getScroll(html, 'left') : 0;\n\n  var offset = {\n    top: scrollTop - relativeOffset.top + relativeOffset.marginTop,\n    left: scrollLeft - relativeOffset.left + relativeOffset.marginLeft,\n    width: width,\n    height: height\n  };\n\n  return getClientRect(offset);\n}\n\n/**\n * Check if the given element is fixed or is inside a fixed parent\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @argument {Element} customContainer\n * @returns {Boolean} answer to \"isFixed?\"\n */\nfunction isFixed(element) {\n  var nodeName = element.nodeName;\n  if (nodeName === 'BODY' || nodeName === 'HTML') {\n    return false;\n  }\n  if (getStyleComputedProperty(element, 'position') === 'fixed') {\n    return true;\n  }\n  return isFixed(getParentNode(element));\n}\n\n/**\n * Finds the first parent of an element that has a transformed property defined\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Element} first transformed parent or documentElement\n */\n\nfunction getFixedPositionOffsetParent(element) {\n  // This check is needed to avoid errors in case one of the elements isn't defined for any reason\n  if (!element || !element.parentElement || isIE()) {\n    return document.documentElement;\n  }\n  var el = element.parentElement;\n  while (el && getStyleComputedProperty(el, 'transform') === 'none') {\n    el = el.parentElement;\n  }\n  return el || document.documentElement;\n}\n\n/**\n * Computed the boundaries limits and return them\n * @method\n * @memberof Popper.Utils\n * @param {HTMLElement} popper\n * @param {HTMLElement} reference\n * @param {number} padding\n * @param {HTMLElement} boundariesElement - Element used to define the boundaries\n * @param {Boolean} fixedPosition - Is in fixed position mode\n * @returns {Object} Coordinates of the boundaries\n */\nfunction getBoundaries(popper, reference, padding, boundariesElement) {\n  var fixedPosition = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n\n  // NOTE: 1 DOM access here\n\n  var boundaries = { top: 0, left: 0 };\n  var offsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);\n\n  // Handle viewport case\n  if (boundariesElement === 'viewport') {\n    boundaries = getViewportOffsetRectRelativeToArtbitraryNode(offsetParent, fixedPosition);\n  } else {\n    // Handle other cases based on DOM element used as boundaries\n    var boundariesNode = void 0;\n    if (boundariesElement === 'scrollParent') {\n      boundariesNode = getScrollParent(getParentNode(reference));\n      if (boundariesNode.nodeName === 'BODY') {\n        boundariesNode = popper.ownerDocument.documentElement;\n      }\n    } else if (boundariesElement === 'window') {\n      boundariesNode = popper.ownerDocument.documentElement;\n    } else {\n      boundariesNode = boundariesElement;\n    }\n\n    var offsets = getOffsetRectRelativeToArbitraryNode(boundariesNode, offsetParent, fixedPosition);\n\n    // In case of HTML, we need a different computation\n    if (boundariesNode.nodeName === 'HTML' && !isFixed(offsetParent)) {\n      var _getWindowSizes = getWindowSizes(popper.ownerDocument),\n          height = _getWindowSizes.height,\n          width = _getWindowSizes.width;\n\n      boundaries.top += offsets.top - offsets.marginTop;\n      boundaries.bottom = height + offsets.top;\n      boundaries.left += offsets.left - offsets.marginLeft;\n      boundaries.right = width + offsets.left;\n    } else {\n      // for all the other DOM elements, this one is good\n      boundaries = offsets;\n    }\n  }\n\n  // Add paddings\n  padding = padding || 0;\n  var isPaddingNumber = typeof padding === 'number';\n  boundaries.left += isPaddingNumber ? padding : padding.left || 0;\n  boundaries.top += isPaddingNumber ? padding : padding.top || 0;\n  boundaries.right -= isPaddingNumber ? padding : padding.right || 0;\n  boundaries.bottom -= isPaddingNumber ? padding : padding.bottom || 0;\n\n  return boundaries;\n}\n\nfunction getArea(_ref) {\n  var width = _ref.width,\n      height = _ref.height;\n\n  return width * height;\n}\n\n/**\n * Utility used to transform the `auto` placement to the placement with more\n * available space.\n * @method\n * @memberof Popper.Utils\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeAutoPlacement(placement, refRect, popper, reference, boundariesElement) {\n  var padding = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n\n  if (placement.indexOf('auto') === -1) {\n    return placement;\n  }\n\n  var boundaries = getBoundaries(popper, reference, padding, boundariesElement);\n\n  var rects = {\n    top: {\n      width: boundaries.width,\n      height: refRect.top - boundaries.top\n    },\n    right: {\n      width: boundaries.right - refRect.right,\n      height: boundaries.height\n    },\n    bottom: {\n      width: boundaries.width,\n      height: boundaries.bottom - refRect.bottom\n    },\n    left: {\n      width: refRect.left - boundaries.left,\n      height: boundaries.height\n    }\n  };\n\n  var sortedAreas = Object.keys(rects).map(function (key) {\n    return _extends({\n      key: key\n    }, rects[key], {\n      area: getArea(rects[key])\n    });\n  }).sort(function (a, b) {\n    return b.area - a.area;\n  });\n\n  var filteredAreas = sortedAreas.filter(function (_ref2) {\n    var width = _ref2.width,\n        height = _ref2.height;\n    return width >= popper.clientWidth && height >= popper.clientHeight;\n  });\n\n  var computedPlacement = filteredAreas.length > 0 ? filteredAreas[0].key : sortedAreas[0].key;\n\n  var variation = placement.split('-')[1];\n\n  return computedPlacement + (variation ? '-' + variation : '');\n}\n\n/**\n * Get offsets to the reference element\n * @method\n * @memberof Popper.Utils\n * @param {Object} state\n * @param {Element} popper - the popper element\n * @param {Element} reference - the reference element (the popper will be relative to this)\n * @param {Element} fixedPosition - is in fixed position mode\n * @returns {Object} An object containing the offsets which will be applied to the popper\n */\nfunction getReferenceOffsets(state, popper, reference) {\n  var fixedPosition = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n  var commonOffsetParent = fixedPosition ? getFixedPositionOffsetParent(popper) : findCommonOffsetParent(popper, reference);\n  return getOffsetRectRelativeToArbitraryNode(reference, commonOffsetParent, fixedPosition);\n}\n\n/**\n * Get the outer sizes of the given element (offset size + margins)\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element\n * @returns {Object} object containing width and height properties\n */\nfunction getOuterSizes(element) {\n  var styles = getComputedStyle(element);\n  var x = parseFloat(styles.marginTop) + parseFloat(styles.marginBottom);\n  var y = parseFloat(styles.marginLeft) + parseFloat(styles.marginRight);\n  var result = {\n    width: element.offsetWidth + y,\n    height: element.offsetHeight + x\n  };\n  return result;\n}\n\n/**\n * Get the opposite placement of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement\n * @returns {String} flipped placement\n */\nfunction getOppositePlacement(placement) {\n  var hash = { left: 'right', right: 'left', bottom: 'top', top: 'bottom' };\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}\n\n/**\n * Get offsets to the popper\n * @method\n * @memberof Popper.Utils\n * @param {Object} position - CSS position the Popper will get applied\n * @param {HTMLElement} popper - the popper element\n * @param {Object} referenceOffsets - the reference offsets (the popper will be relative to this)\n * @param {String} placement - one of the valid placement options\n * @returns {Object} popperOffsets - An object containing the offsets which will be applied to the popper\n */\nfunction getPopperOffsets(popper, referenceOffsets, placement) {\n  placement = placement.split('-')[0];\n\n  // Get popper node sizes\n  var popperRect = getOuterSizes(popper);\n\n  // Add position, width and height to our offsets object\n  var popperOffsets = {\n    width: popperRect.width,\n    height: popperRect.height\n  };\n\n  // depending by the popper placement we have to compute its offsets slightly differently\n  var isHoriz = ['right', 'left'].indexOf(placement) !== -1;\n  var mainSide = isHoriz ? 'top' : 'left';\n  var secondarySide = isHoriz ? 'left' : 'top';\n  var measurement = isHoriz ? 'height' : 'width';\n  var secondaryMeasurement = !isHoriz ? 'height' : 'width';\n\n  popperOffsets[mainSide] = referenceOffsets[mainSide] + referenceOffsets[measurement] / 2 - popperRect[measurement] / 2;\n  if (placement === secondarySide) {\n    popperOffsets[secondarySide] = referenceOffsets[secondarySide] - popperRect[secondaryMeasurement];\n  } else {\n    popperOffsets[secondarySide] = referenceOffsets[getOppositePlacement(secondarySide)];\n  }\n\n  return popperOffsets;\n}\n\n/**\n * Mimics the `find` method of Array\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction find(arr, check) {\n  // use native find if supported\n  if (Array.prototype.find) {\n    return arr.find(check);\n  }\n\n  // use `filter` to obtain the same behavior of `find`\n  return arr.filter(check)[0];\n}\n\n/**\n * Return the index of the matching object\n * @method\n * @memberof Popper.Utils\n * @argument {Array} arr\n * @argument prop\n * @argument value\n * @returns index or -1\n */\nfunction findIndex(arr, prop, value) {\n  // use native findIndex if supported\n  if (Array.prototype.findIndex) {\n    return arr.findIndex(function (cur) {\n      return cur[prop] === value;\n    });\n  }\n\n  // use `find` + `indexOf` if `findIndex` isn't supported\n  var match = find(arr, function (obj) {\n    return obj[prop] === value;\n  });\n  return arr.indexOf(match);\n}\n\n/**\n * Loop trough the list of modifiers and run them in order,\n * each of them will then edit the data object.\n * @method\n * @memberof Popper.Utils\n * @param {dataObject} data\n * @param {Array} modifiers\n * @param {String} ends - Optional modifier name used as stopper\n * @returns {dataObject}\n */\nfunction runModifiers(modifiers, data, ends) {\n  var modifiersToRun = ends === undefined ? modifiers : modifiers.slice(0, findIndex(modifiers, 'name', ends));\n\n  modifiersToRun.forEach(function (modifier) {\n    if (modifier['function']) {\n      // eslint-disable-line dot-notation\n      console.warn('`modifier.function` is deprecated, use `modifier.fn`!');\n    }\n    var fn = modifier['function'] || modifier.fn; // eslint-disable-line dot-notation\n    if (modifier.enabled && isFunction(fn)) {\n      // Add properties to offsets to make them a complete clientRect object\n      // we do this before each modifier to make sure the previous one doesn't\n      // mess with these values\n      data.offsets.popper = getClientRect(data.offsets.popper);\n      data.offsets.reference = getClientRect(data.offsets.reference);\n\n      data = fn(data, modifier);\n    }\n  });\n\n  return data;\n}\n\n/**\n * Updates the position of the popper, computing the new offsets and applying\n * the new style.<br />\n * Prefer `scheduleUpdate` over `update` because of performance reasons.\n * @method\n * @memberof Popper\n */\nfunction update() {\n  // if popper is destroyed, don't perform any further update\n  if (this.state.isDestroyed) {\n    return;\n  }\n\n  var data = {\n    instance: this,\n    styles: {},\n    arrowStyles: {},\n    attributes: {},\n    flipped: false,\n    offsets: {}\n  };\n\n  // compute reference element offsets\n  data.offsets.reference = getReferenceOffsets(this.state, this.popper, this.reference, this.options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  data.placement = computeAutoPlacement(this.options.placement, data.offsets.reference, this.popper, this.reference, this.options.modifiers.flip.boundariesElement, this.options.modifiers.flip.padding);\n\n  // store the computed placement inside `originalPlacement`\n  data.originalPlacement = data.placement;\n\n  data.positionFixed = this.options.positionFixed;\n\n  // compute the popper offsets\n  data.offsets.popper = getPopperOffsets(this.popper, data.offsets.reference, data.placement);\n\n  data.offsets.popper.position = this.options.positionFixed ? 'fixed' : 'absolute';\n\n  // run the modifiers\n  data = runModifiers(this.modifiers, data);\n\n  // the first `update` will call `onCreate` callback\n  // the other ones will call `onUpdate` callback\n  if (!this.state.isCreated) {\n    this.state.isCreated = true;\n    this.options.onCreate(data);\n  } else {\n    this.options.onUpdate(data);\n  }\n}\n\n/**\n * Helper used to know if the given modifier is enabled.\n * @method\n * @memberof Popper.Utils\n * @returns {Boolean}\n */\nfunction isModifierEnabled(modifiers, modifierName) {\n  return modifiers.some(function (_ref) {\n    var name = _ref.name,\n        enabled = _ref.enabled;\n    return enabled && name === modifierName;\n  });\n}\n\n/**\n * Get the prefixed supported property name\n * @method\n * @memberof Popper.Utils\n * @argument {String} property (camelCase)\n * @returns {String} prefixed property (camelCase or PascalCase, depending on the vendor prefix)\n */\nfunction getSupportedPropertyName(property) {\n  var prefixes = [false, 'ms', 'Webkit', 'Moz', 'O'];\n  var upperProp = property.charAt(0).toUpperCase() + property.slice(1);\n\n  for (var i = 0; i < prefixes.length; i++) {\n    var prefix = prefixes[i];\n    var toCheck = prefix ? '' + prefix + upperProp : property;\n    if (typeof document.body.style[toCheck] !== 'undefined') {\n      return toCheck;\n    }\n  }\n  return null;\n}\n\n/**\n * Destroys the popper.\n * @method\n * @memberof Popper\n */\nfunction destroy() {\n  this.state.isDestroyed = true;\n\n  // touch DOM only if `applyStyle` modifier is enabled\n  if (isModifierEnabled(this.modifiers, 'applyStyle')) {\n    this.popper.removeAttribute('x-placement');\n    this.popper.style.position = '';\n    this.popper.style.top = '';\n    this.popper.style.left = '';\n    this.popper.style.right = '';\n    this.popper.style.bottom = '';\n    this.popper.style.willChange = '';\n    this.popper.style[getSupportedPropertyName('transform')] = '';\n  }\n\n  this.disableEventListeners();\n\n  // remove the popper if user explicity asked for the deletion on destroy\n  // do not use `remove` because IE11 doesn't support it\n  if (this.options.removeOnDestroy) {\n    this.popper.parentNode.removeChild(this.popper);\n  }\n  return this;\n}\n\n/**\n * Get the window associated with the element\n * @argument {Element} element\n * @returns {Window}\n */\nfunction getWindow(element) {\n  var ownerDocument = element.ownerDocument;\n  return ownerDocument ? ownerDocument.defaultView : window;\n}\n\nfunction attachToScrollParents(scrollParent, event, callback, scrollParents) {\n  var isBody = scrollParent.nodeName === 'BODY';\n  var target = isBody ? scrollParent.ownerDocument.defaultView : scrollParent;\n  target.addEventListener(event, callback, { passive: true });\n\n  if (!isBody) {\n    attachToScrollParents(getScrollParent(target.parentNode), event, callback, scrollParents);\n  }\n  scrollParents.push(target);\n}\n\n/**\n * Setup needed event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction setupEventListeners(reference, options, state, updateBound) {\n  // Resize event listener on window\n  state.updateBound = updateBound;\n  getWindow(reference).addEventListener('resize', state.updateBound, { passive: true });\n\n  // Scroll event listener on scroll parents\n  var scrollElement = getScrollParent(reference);\n  attachToScrollParents(scrollElement, 'scroll', state.updateBound, state.scrollParents);\n  state.scrollElement = scrollElement;\n  state.eventsEnabled = true;\n\n  return state;\n}\n\n/**\n * It will add resize/scroll events and start recalculating\n * position of the popper element when they are triggered.\n * @method\n * @memberof Popper\n */\nfunction enableEventListeners() {\n  if (!this.state.eventsEnabled) {\n    this.state = setupEventListeners(this.reference, this.options, this.state, this.scheduleUpdate);\n  }\n}\n\n/**\n * Remove event listeners used to update the popper position\n * @method\n * @memberof Popper.Utils\n * @private\n */\nfunction removeEventListeners(reference, state) {\n  // Remove resize event listener on window\n  getWindow(reference).removeEventListener('resize', state.updateBound);\n\n  // Remove scroll event listener on scroll parents\n  state.scrollParents.forEach(function (target) {\n    target.removeEventListener('scroll', state.updateBound);\n  });\n\n  // Reset state\n  state.updateBound = null;\n  state.scrollParents = [];\n  state.scrollElement = null;\n  state.eventsEnabled = false;\n  return state;\n}\n\n/**\n * It will remove resize/scroll events and won't recalculate popper position\n * when they are triggered. It also won't trigger `onUpdate` callback anymore,\n * unless you call `update` method manually.\n * @method\n * @memberof Popper\n */\nfunction disableEventListeners() {\n  if (this.state.eventsEnabled) {\n    cancelAnimationFrame(this.scheduleUpdate);\n    this.state = removeEventListeners(this.reference, this.state);\n  }\n}\n\n/**\n * Tells if a given input is a number\n * @method\n * @memberof Popper.Utils\n * @param {*} input to check\n * @return {Boolean}\n */\nfunction isNumeric(n) {\n  return n !== '' && !isNaN(parseFloat(n)) && isFinite(n);\n}\n\n/**\n * Set the style to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the style to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setStyles(element, styles) {\n  Object.keys(styles).forEach(function (prop) {\n    var unit = '';\n    // add unit if the value is numeric and is one of the following\n    if (['width', 'height', 'top', 'right', 'bottom', 'left'].indexOf(prop) !== -1 && isNumeric(styles[prop])) {\n      unit = 'px';\n    }\n    element.style[prop] = styles[prop] + unit;\n  });\n}\n\n/**\n * Set the attributes to the given popper\n * @method\n * @memberof Popper.Utils\n * @argument {Element} element - Element to apply the attributes to\n * @argument {Object} styles\n * Object with a list of properties and values which will be applied to the element\n */\nfunction setAttributes(element, attributes) {\n  Object.keys(attributes).forEach(function (prop) {\n    var value = attributes[prop];\n    if (value !== false) {\n      element.setAttribute(prop, attributes[prop]);\n    } else {\n      element.removeAttribute(prop);\n    }\n  });\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} data.styles - List of style properties - values to apply to popper element\n * @argument {Object} data.attributes - List of attribute properties - values to apply to popper element\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The same data object\n */\nfunction applyStyle(data) {\n  // any property present in `data.styles` will be applied to the popper,\n  // in this way we can make the 3rd party modifiers add custom styles to it\n  // Be aware, modifiers could override the properties defined in the previous\n  // lines of this modifier!\n  setStyles(data.instance.popper, data.styles);\n\n  // any property present in `data.attributes` will be applied to the popper,\n  // they will be set as HTML attributes of the element\n  setAttributes(data.instance.popper, data.attributes);\n\n  // if arrowElement is defined and arrowStyles has some properties\n  if (data.arrowElement && Object.keys(data.arrowStyles).length) {\n    setStyles(data.arrowElement, data.arrowStyles);\n  }\n\n  return data;\n}\n\n/**\n * Set the x-placement attribute before everything else because it could be used\n * to add margins to the popper margins needs to be calculated to get the\n * correct popper offsets.\n * @method\n * @memberof Popper.modifiers\n * @param {HTMLElement} reference - The reference element used to position the popper\n * @param {HTMLElement} popper - The HTML element used as popper\n * @param {Object} options - Popper.js options\n */\nfunction applyStyleOnLoad(reference, popper, options, modifierOptions, state) {\n  // compute reference element offsets\n  var referenceOffsets = getReferenceOffsets(state, popper, reference, options.positionFixed);\n\n  // compute auto placement, store placement inside the data object,\n  // modifiers will be able to edit `placement` if needed\n  // and refer to originalPlacement to know the original value\n  var placement = computeAutoPlacement(options.placement, referenceOffsets, popper, reference, options.modifiers.flip.boundariesElement, options.modifiers.flip.padding);\n\n  popper.setAttribute('x-placement', placement);\n\n  // Apply `position` to popper before anything else because\n  // without the position applied we can't guarantee correct computations\n  setStyles(popper, { position: options.positionFixed ? 'fixed' : 'absolute' });\n\n  return options;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction computeStyle(data, options) {\n  var x = options.x,\n      y = options.y;\n  var popper = data.offsets.popper;\n\n  // Remove this legacy support in Popper.js v2\n\n  var legacyGpuAccelerationOption = find(data.instance.modifiers, function (modifier) {\n    return modifier.name === 'applyStyle';\n  }).gpuAcceleration;\n  if (legacyGpuAccelerationOption !== undefined) {\n    console.warn('WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!');\n  }\n  var gpuAcceleration = legacyGpuAccelerationOption !== undefined ? legacyGpuAccelerationOption : options.gpuAcceleration;\n\n  var offsetParent = getOffsetParent(data.instance.popper);\n  var offsetParentRect = getBoundingClientRect(offsetParent);\n\n  // Styles\n  var styles = {\n    position: popper.position\n  };\n\n  // Avoid blurry text by using full pixel integers.\n  // For pixel-perfect positioning, top/bottom prefers rounded\n  // values, while left/right prefers floored values.\n  var offsets = {\n    left: Math.floor(popper.left),\n    top: Math.round(popper.top),\n    bottom: Math.round(popper.bottom),\n    right: Math.floor(popper.right)\n  };\n\n  var sideA = x === 'bottom' ? 'top' : 'bottom';\n  var sideB = y === 'right' ? 'left' : 'right';\n\n  // if gpuAcceleration is set to `true` and transform is supported,\n  //  we use `translate3d` to apply the position to the popper we\n  // automatically use the supported prefixed version if needed\n  var prefixedProperty = getSupportedPropertyName('transform');\n\n  // now, let's make a step back and look at this code closely (wtf?)\n  // If the content of the popper grows once it's been positioned, it\n  // may happen that the popper gets misplaced because of the new content\n  // overflowing its reference element\n  // To avoid this problem, we provide two options (x and y), which allow\n  // the consumer to define the offset origin.\n  // If we position a popper on top of a reference element, we can set\n  // `x` to `top` to make the popper grow towards its top instead of\n  // its bottom.\n  var left = void 0,\n      top = void 0;\n  if (sideA === 'bottom') {\n    // when offsetParent is <html> the positioning is relative to the bottom of the screen (excluding the scrollbar)\n    // and not the bottom of the html element\n    if (offsetParent.nodeName === 'HTML') {\n      top = -offsetParent.clientHeight + offsets.bottom;\n    } else {\n      top = -offsetParentRect.height + offsets.bottom;\n    }\n  } else {\n    top = offsets.top;\n  }\n  if (sideB === 'right') {\n    if (offsetParent.nodeName === 'HTML') {\n      left = -offsetParent.clientWidth + offsets.right;\n    } else {\n      left = -offsetParentRect.width + offsets.right;\n    }\n  } else {\n    left = offsets.left;\n  }\n  if (gpuAcceleration && prefixedProperty) {\n    styles[prefixedProperty] = 'translate3d(' + left + 'px, ' + top + 'px, 0)';\n    styles[sideA] = 0;\n    styles[sideB] = 0;\n    styles.willChange = 'transform';\n  } else {\n    // othwerise, we use the standard `top`, `left`, `bottom` and `right` properties\n    var invertTop = sideA === 'bottom' ? -1 : 1;\n    var invertLeft = sideB === 'right' ? -1 : 1;\n    styles[sideA] = top * invertTop;\n    styles[sideB] = left * invertLeft;\n    styles.willChange = sideA + ', ' + sideB;\n  }\n\n  // Attributes\n  var attributes = {\n    'x-placement': data.placement\n  };\n\n  // Update `data` attributes, styles and arrowStyles\n  data.attributes = _extends({}, attributes, data.attributes);\n  data.styles = _extends({}, styles, data.styles);\n  data.arrowStyles = _extends({}, data.offsets.arrow, data.arrowStyles);\n\n  return data;\n}\n\n/**\n * Helper used to know if the given modifier depends from another one.<br />\n * It checks if the needed modifier is listed and enabled.\n * @method\n * @memberof Popper.Utils\n * @param {Array} modifiers - list of modifiers\n * @param {String} requestingName - name of requesting modifier\n * @param {String} requestedName - name of requested modifier\n * @returns {Boolean}\n */\nfunction isModifierRequired(modifiers, requestingName, requestedName) {\n  var requesting = find(modifiers, function (_ref) {\n    var name = _ref.name;\n    return name === requestingName;\n  });\n\n  var isRequired = !!requesting && modifiers.some(function (modifier) {\n    return modifier.name === requestedName && modifier.enabled && modifier.order < requesting.order;\n  });\n\n  if (!isRequired) {\n    var _requesting = '`' + requestingName + '`';\n    var requested = '`' + requestedName + '`';\n    console.warn(requested + ' modifier is required by ' + _requesting + ' modifier in order to work, be sure to include it before ' + _requesting + '!');\n  }\n  return isRequired;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction arrow(data, options) {\n  var _data$offsets$arrow;\n\n  // arrow depends on keepTogether in order to work\n  if (!isModifierRequired(data.instance.modifiers, 'arrow', 'keepTogether')) {\n    return data;\n  }\n\n  var arrowElement = options.element;\n\n  // if arrowElement is a string, suppose it's a CSS selector\n  if (typeof arrowElement === 'string') {\n    arrowElement = data.instance.popper.querySelector(arrowElement);\n\n    // if arrowElement is not found, don't run the modifier\n    if (!arrowElement) {\n      return data;\n    }\n  } else {\n    // if the arrowElement isn't a query selector we must check that the\n    // provided DOM node is child of its popper node\n    if (!data.instance.popper.contains(arrowElement)) {\n      console.warn('WARNING: `arrow.element` must be child of its popper element!');\n      return data;\n    }\n  }\n\n  var placement = data.placement.split('-')[0];\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var isVertical = ['left', 'right'].indexOf(placement) !== -1;\n\n  var len = isVertical ? 'height' : 'width';\n  var sideCapitalized = isVertical ? 'Top' : 'Left';\n  var side = sideCapitalized.toLowerCase();\n  var altSide = isVertical ? 'left' : 'top';\n  var opSide = isVertical ? 'bottom' : 'right';\n  var arrowElementSize = getOuterSizes(arrowElement)[len];\n\n  //\n  // extends keepTogether behavior making sure the popper and its\n  // reference have enough pixels in conjunction\n  //\n\n  // top/left side\n  if (reference[opSide] - arrowElementSize < popper[side]) {\n    data.offsets.popper[side] -= popper[side] - (reference[opSide] - arrowElementSize);\n  }\n  // bottom/right side\n  if (reference[side] + arrowElementSize > popper[opSide]) {\n    data.offsets.popper[side] += reference[side] + arrowElementSize - popper[opSide];\n  }\n  data.offsets.popper = getClientRect(data.offsets.popper);\n\n  // compute center of the popper\n  var center = reference[side] + reference[len] / 2 - arrowElementSize / 2;\n\n  // Compute the sideValue using the updated popper offsets\n  // take popper margin in account because we don't have this info available\n  var css = getStyleComputedProperty(data.instance.popper);\n  var popperMarginSide = parseFloat(css['margin' + sideCapitalized], 10);\n  var popperBorderSide = parseFloat(css['border' + sideCapitalized + 'Width'], 10);\n  var sideValue = center - data.offsets.popper[side] - popperMarginSide - popperBorderSide;\n\n  // prevent arrowElement from being placed not contiguously to its popper\n  sideValue = Math.max(Math.min(popper[len] - arrowElementSize, sideValue), 0);\n\n  data.arrowElement = arrowElement;\n  data.offsets.arrow = (_data$offsets$arrow = {}, defineProperty(_data$offsets$arrow, side, Math.round(sideValue)), defineProperty(_data$offsets$arrow, altSide, ''), _data$offsets$arrow);\n\n  return data;\n}\n\n/**\n * Get the opposite placement variation of the given one\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement variation\n * @returns {String} flipped placement variation\n */\nfunction getOppositeVariation(variation) {\n  if (variation === 'end') {\n    return 'start';\n  } else if (variation === 'start') {\n    return 'end';\n  }\n  return variation;\n}\n\n/**\n * List of accepted placements to use as values of the `placement` option.<br />\n * Valid placements are:\n * - `auto`\n * - `top`\n * - `right`\n * - `bottom`\n * - `left`\n *\n * Each placement can have a variation from this list:\n * - `-start`\n * - `-end`\n *\n * Variations are interpreted easily if you think of them as the left to right\n * written languages. Horizontally (`top` and `bottom`), `start` is left and `end`\n * is right.<br />\n * Vertically (`left` and `right`), `start` is top and `end` is bottom.\n *\n * Some valid examples are:\n * - `top-end` (on top of reference, right aligned)\n * - `right-start` (on right of reference, top aligned)\n * - `bottom` (on bottom, centered)\n * - `auto-end` (on the side with more space available, alignment depends by placement)\n *\n * @static\n * @type {Array}\n * @enum {String}\n * @readonly\n * @method placements\n * @memberof Popper\n */\nvar placements = ['auto-start', 'auto', 'auto-end', 'top-start', 'top', 'top-end', 'right-start', 'right', 'right-end', 'bottom-end', 'bottom', 'bottom-start', 'left-end', 'left', 'left-start'];\n\n// Get rid of `auto` `auto-start` and `auto-end`\nvar validPlacements = placements.slice(3);\n\n/**\n * Given an initial placement, returns all the subsequent placements\n * clockwise (or counter-clockwise).\n *\n * @method\n * @memberof Popper.Utils\n * @argument {String} placement - A valid placement (it accepts variations)\n * @argument {Boolean} counter - Set to true to walk the placements counterclockwise\n * @returns {Array} placements including their variations\n */\nfunction clockwise(placement) {\n  var counter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n  var index = validPlacements.indexOf(placement);\n  var arr = validPlacements.slice(index + 1).concat(validPlacements.slice(0, index));\n  return counter ? arr.reverse() : arr;\n}\n\nvar BEHAVIORS = {\n  FLIP: 'flip',\n  CLOCKWISE: 'clockwise',\n  COUNTERCLOCKWISE: 'counterclockwise'\n};\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction flip(data, options) {\n  // if `inner` modifier is enabled, we can't use the `flip` modifier\n  if (isModifierEnabled(data.instance.modifiers, 'inner')) {\n    return data;\n  }\n\n  if (data.flipped && data.placement === data.originalPlacement) {\n    // seems like flip is trying to loop, probably there's not enough space on any of the flippable sides\n    return data;\n  }\n\n  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, options.boundariesElement, data.positionFixed);\n\n  var placement = data.placement.split('-')[0];\n  var placementOpposite = getOppositePlacement(placement);\n  var variation = data.placement.split('-')[1] || '';\n\n  var flipOrder = [];\n\n  switch (options.behavior) {\n    case BEHAVIORS.FLIP:\n      flipOrder = [placement, placementOpposite];\n      break;\n    case BEHAVIORS.CLOCKWISE:\n      flipOrder = clockwise(placement);\n      break;\n    case BEHAVIORS.COUNTERCLOCKWISE:\n      flipOrder = clockwise(placement, true);\n      break;\n    default:\n      flipOrder = options.behavior;\n  }\n\n  flipOrder.forEach(function (step, index) {\n    if (placement !== step || flipOrder.length === index + 1) {\n      return data;\n    }\n\n    placement = data.placement.split('-')[0];\n    placementOpposite = getOppositePlacement(placement);\n\n    var popperOffsets = data.offsets.popper;\n    var refOffsets = data.offsets.reference;\n\n    // using floor because the reference offsets may contain decimals we are not going to consider here\n    var floor = Math.floor;\n    var overlapsRef = placement === 'left' && floor(popperOffsets.right) > floor(refOffsets.left) || placement === 'right' && floor(popperOffsets.left) < floor(refOffsets.right) || placement === 'top' && floor(popperOffsets.bottom) > floor(refOffsets.top) || placement === 'bottom' && floor(popperOffsets.top) < floor(refOffsets.bottom);\n\n    var overflowsLeft = floor(popperOffsets.left) < floor(boundaries.left);\n    var overflowsRight = floor(popperOffsets.right) > floor(boundaries.right);\n    var overflowsTop = floor(popperOffsets.top) < floor(boundaries.top);\n    var overflowsBottom = floor(popperOffsets.bottom) > floor(boundaries.bottom);\n\n    var overflowsBoundaries = placement === 'left' && overflowsLeft || placement === 'right' && overflowsRight || placement === 'top' && overflowsTop || placement === 'bottom' && overflowsBottom;\n\n    // flip the variation if required\n    var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n    var flippedVariation = !!options.flipVariations && (isVertical && variation === 'start' && overflowsLeft || isVertical && variation === 'end' && overflowsRight || !isVertical && variation === 'start' && overflowsTop || !isVertical && variation === 'end' && overflowsBottom);\n\n    if (overlapsRef || overflowsBoundaries || flippedVariation) {\n      // this boolean to detect any flip loop\n      data.flipped = true;\n\n      if (overlapsRef || overflowsBoundaries) {\n        placement = flipOrder[index + 1];\n      }\n\n      if (flippedVariation) {\n        variation = getOppositeVariation(variation);\n      }\n\n      data.placement = placement + (variation ? '-' + variation : '');\n\n      // this object contains `position`, we want to preserve it along with\n      // any additional property we may add in the future\n      data.offsets.popper = _extends({}, data.offsets.popper, getPopperOffsets(data.instance.popper, data.offsets.reference, data.placement));\n\n      data = runModifiers(data.instance.modifiers, data, 'flip');\n    }\n  });\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction keepTogether(data) {\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var placement = data.placement.split('-')[0];\n  var floor = Math.floor;\n  var isVertical = ['top', 'bottom'].indexOf(placement) !== -1;\n  var side = isVertical ? 'right' : 'bottom';\n  var opSide = isVertical ? 'left' : 'top';\n  var measurement = isVertical ? 'width' : 'height';\n\n  if (popper[side] < floor(reference[opSide])) {\n    data.offsets.popper[opSide] = floor(reference[opSide]) - popper[measurement];\n  }\n  if (popper[opSide] > floor(reference[side])) {\n    data.offsets.popper[opSide] = floor(reference[side]);\n  }\n\n  return data;\n}\n\n/**\n * Converts a string containing value + unit into a px value number\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} str - Value + unit string\n * @argument {String} measurement - `height` or `width`\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @returns {Number|String}\n * Value in pixels, or original string if no values were extracted\n */\nfunction toValue(str, measurement, popperOffsets, referenceOffsets) {\n  // separate value from unit\n  var split = str.match(/((?:\\-|\\+)?\\d*\\.?\\d*)(.*)/);\n  var value = +split[1];\n  var unit = split[2];\n\n  // If it's not a number it's an operator, I guess\n  if (!value) {\n    return str;\n  }\n\n  if (unit.indexOf('%') === 0) {\n    var element = void 0;\n    switch (unit) {\n      case '%p':\n        element = popperOffsets;\n        break;\n      case '%':\n      case '%r':\n      default:\n        element = referenceOffsets;\n    }\n\n    var rect = getClientRect(element);\n    return rect[measurement] / 100 * value;\n  } else if (unit === 'vh' || unit === 'vw') {\n    // if is a vh or vw, we calculate the size based on the viewport\n    var size = void 0;\n    if (unit === 'vh') {\n      size = Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n    } else {\n      size = Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n    }\n    return size / 100 * value;\n  } else {\n    // if is an explicit pixel unit, we get rid of the unit and keep the value\n    // if is an implicit unit, it's px, and we return just the value\n    return value;\n  }\n}\n\n/**\n * Parse an `offset` string to extrapolate `x` and `y` numeric offsets.\n * @function\n * @memberof {modifiers~offset}\n * @private\n * @argument {String} offset\n * @argument {Object} popperOffsets\n * @argument {Object} referenceOffsets\n * @argument {String} basePlacement\n * @returns {Array} a two cells array with x and y offsets in numbers\n */\nfunction parseOffset(offset, popperOffsets, referenceOffsets, basePlacement) {\n  var offsets = [0, 0];\n\n  // Use height if placement is left or right and index is 0 otherwise use width\n  // in this way the first offset will use an axis and the second one\n  // will use the other one\n  var useHeight = ['right', 'left'].indexOf(basePlacement) !== -1;\n\n  // Split the offset string to obtain a list of values and operands\n  // The regex addresses values with the plus or minus sign in front (+10, -20, etc)\n  var fragments = offset.split(/(\\+|\\-)/).map(function (frag) {\n    return frag.trim();\n  });\n\n  // Detect if the offset string contains a pair of values or a single one\n  // they could be separated by comma or space\n  var divider = fragments.indexOf(find(fragments, function (frag) {\n    return frag.search(/,|\\s/) !== -1;\n  }));\n\n  if (fragments[divider] && fragments[divider].indexOf(',') === -1) {\n    console.warn('Offsets separated by white space(s) are deprecated, use a comma (,) instead.');\n  }\n\n  // If divider is found, we divide the list of values and operands to divide\n  // them by ofset X and Y.\n  var splitRegex = /\\s*,\\s*|\\s+/;\n  var ops = divider !== -1 ? [fragments.slice(0, divider).concat([fragments[divider].split(splitRegex)[0]]), [fragments[divider].split(splitRegex)[1]].concat(fragments.slice(divider + 1))] : [fragments];\n\n  // Convert the values with units to absolute pixels to allow our computations\n  ops = ops.map(function (op, index) {\n    // Most of the units rely on the orientation of the popper\n    var measurement = (index === 1 ? !useHeight : useHeight) ? 'height' : 'width';\n    var mergeWithPrevious = false;\n    return op\n    // This aggregates any `+` or `-` sign that aren't considered operators\n    // e.g.: 10 + +5 => [10, +, +5]\n    .reduce(function (a, b) {\n      if (a[a.length - 1] === '' && ['+', '-'].indexOf(b) !== -1) {\n        a[a.length - 1] = b;\n        mergeWithPrevious = true;\n        return a;\n      } else if (mergeWithPrevious) {\n        a[a.length - 1] += b;\n        mergeWithPrevious = false;\n        return a;\n      } else {\n        return a.concat(b);\n      }\n    }, [])\n    // Here we convert the string values into number values (in px)\n    .map(function (str) {\n      return toValue(str, measurement, popperOffsets, referenceOffsets);\n    });\n  });\n\n  // Loop trough the offsets arrays and execute the operations\n  ops.forEach(function (op, index) {\n    op.forEach(function (frag, index2) {\n      if (isNumeric(frag)) {\n        offsets[index] += frag * (op[index2 - 1] === '-' ? -1 : 1);\n      }\n    });\n  });\n  return offsets;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @argument {Number|String} options.offset=0\n * The offset value as described in the modifier description\n * @returns {Object} The data object, properly modified\n */\nfunction offset(data, _ref) {\n  var offset = _ref.offset;\n  var placement = data.placement,\n      _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var basePlacement = placement.split('-')[0];\n\n  var offsets = void 0;\n  if (isNumeric(+offset)) {\n    offsets = [+offset, 0];\n  } else {\n    offsets = parseOffset(offset, popper, reference, basePlacement);\n  }\n\n  if (basePlacement === 'left') {\n    popper.top += offsets[0];\n    popper.left -= offsets[1];\n  } else if (basePlacement === 'right') {\n    popper.top += offsets[0];\n    popper.left += offsets[1];\n  } else if (basePlacement === 'top') {\n    popper.left += offsets[0];\n    popper.top -= offsets[1];\n  } else if (basePlacement === 'bottom') {\n    popper.left += offsets[0];\n    popper.top += offsets[1];\n  }\n\n  data.popper = popper;\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction preventOverflow(data, options) {\n  var boundariesElement = options.boundariesElement || getOffsetParent(data.instance.popper);\n\n  // If offsetParent is the reference element, we really want to\n  // go one step up and use the next offsetParent as reference to\n  // avoid to make this modifier completely useless and look like broken\n  if (data.instance.reference === boundariesElement) {\n    boundariesElement = getOffsetParent(boundariesElement);\n  }\n\n  // NOTE: DOM access here\n  // resets the popper's position so that the document size can be calculated excluding\n  // the size of the popper element itself\n  var transformProp = getSupportedPropertyName('transform');\n  var popperStyles = data.instance.popper.style; // assignment to help minification\n  var top = popperStyles.top,\n      left = popperStyles.left,\n      transform = popperStyles[transformProp];\n\n  popperStyles.top = '';\n  popperStyles.left = '';\n  popperStyles[transformProp] = '';\n\n  var boundaries = getBoundaries(data.instance.popper, data.instance.reference, options.padding, boundariesElement, data.positionFixed);\n\n  // NOTE: DOM access here\n  // restores the original style properties after the offsets have been computed\n  popperStyles.top = top;\n  popperStyles.left = left;\n  popperStyles[transformProp] = transform;\n\n  options.boundaries = boundaries;\n\n  var order = options.priority;\n  var popper = data.offsets.popper;\n\n  var check = {\n    primary: function primary(placement) {\n      var value = popper[placement];\n      if (popper[placement] < boundaries[placement] && !options.escapeWithReference) {\n        value = Math.max(popper[placement], boundaries[placement]);\n      }\n      return defineProperty({}, placement, value);\n    },\n    secondary: function secondary(placement) {\n      var mainSide = placement === 'right' ? 'left' : 'top';\n      var value = popper[mainSide];\n      if (popper[placement] > boundaries[placement] && !options.escapeWithReference) {\n        value = Math.min(popper[mainSide], boundaries[placement] - (placement === 'right' ? popper.width : popper.height));\n      }\n      return defineProperty({}, mainSide, value);\n    }\n  };\n\n  order.forEach(function (placement) {\n    var side = ['left', 'top'].indexOf(placement) !== -1 ? 'primary' : 'secondary';\n    popper = _extends({}, popper, check[side](placement));\n  });\n\n  data.offsets.popper = popper;\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction shift(data) {\n  var placement = data.placement;\n  var basePlacement = placement.split('-')[0];\n  var shiftvariation = placement.split('-')[1];\n\n  // if shift shiftvariation is specified, run the modifier\n  if (shiftvariation) {\n    var _data$offsets = data.offsets,\n        reference = _data$offsets.reference,\n        popper = _data$offsets.popper;\n\n    var isVertical = ['bottom', 'top'].indexOf(basePlacement) !== -1;\n    var side = isVertical ? 'left' : 'top';\n    var measurement = isVertical ? 'width' : 'height';\n\n    var shiftOffsets = {\n      start: defineProperty({}, side, reference[side]),\n      end: defineProperty({}, side, reference[side] + reference[measurement] - popper[measurement])\n    };\n\n    data.offsets.popper = _extends({}, popper, shiftOffsets[shiftvariation]);\n  }\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by update method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction hide(data) {\n  if (!isModifierRequired(data.instance.modifiers, 'hide', 'preventOverflow')) {\n    return data;\n  }\n\n  var refRect = data.offsets.reference;\n  var bound = find(data.instance.modifiers, function (modifier) {\n    return modifier.name === 'preventOverflow';\n  }).boundaries;\n\n  if (refRect.bottom < bound.top || refRect.left > bound.right || refRect.top > bound.bottom || refRect.right < bound.left) {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === true) {\n      return data;\n    }\n\n    data.hide = true;\n    data.attributes['x-out-of-boundaries'] = '';\n  } else {\n    // Avoid unnecessary DOM access if visibility hasn't changed\n    if (data.hide === false) {\n      return data;\n    }\n\n    data.hide = false;\n    data.attributes['x-out-of-boundaries'] = false;\n  }\n\n  return data;\n}\n\n/**\n * @function\n * @memberof Modifiers\n * @argument {Object} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {Object} The data object, properly modified\n */\nfunction inner(data) {\n  var placement = data.placement;\n  var basePlacement = placement.split('-')[0];\n  var _data$offsets = data.offsets,\n      popper = _data$offsets.popper,\n      reference = _data$offsets.reference;\n\n  var isHoriz = ['left', 'right'].indexOf(basePlacement) !== -1;\n\n  var subtractLength = ['top', 'left'].indexOf(basePlacement) === -1;\n\n  popper[isHoriz ? 'left' : 'top'] = reference[basePlacement] - (subtractLength ? popper[isHoriz ? 'width' : 'height'] : 0);\n\n  data.placement = getOppositePlacement(placement);\n  data.offsets.popper = getClientRect(popper);\n\n  return data;\n}\n\n/**\n * Modifier function, each modifier can have a function of this type assigned\n * to its `fn` property.<br />\n * These functions will be called on each update, this means that you must\n * make sure they are performant enough to avoid performance bottlenecks.\n *\n * @function ModifierFn\n * @argument {dataObject} data - The data object generated by `update` method\n * @argument {Object} options - Modifiers configuration and options\n * @returns {dataObject} The data object, properly modified\n */\n\n/**\n * Modifiers are plugins used to alter the behavior of your poppers.<br />\n * Popper.js uses a set of 9 modifiers to provide all the basic functionalities\n * needed by the library.\n *\n * Usually you don't want to override the `order`, `fn` and `onLoad` props.\n * All the other properties are configurations that could be tweaked.\n * @namespace modifiers\n */\nvar modifiers = {\n  /**\n   * Modifier used to shift the popper on the start or end of its reference\n   * element.<br />\n   * It will read the variation of the `placement` property.<br />\n   * It can be one either `-end` or `-start`.\n   * @memberof modifiers\n   * @inner\n   */\n  shift: {\n    /** @prop {number} order=100 - Index used to define the order of execution */\n    order: 100,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: shift\n  },\n\n  /**\n   * The `offset` modifier can shift your popper on both its axis.\n   *\n   * It accepts the following units:\n   * - `px` or unit-less, interpreted as pixels\n   * - `%` or `%r`, percentage relative to the length of the reference element\n   * - `%p`, percentage relative to the length of the popper element\n   * - `vw`, CSS viewport width unit\n   * - `vh`, CSS viewport height unit\n   *\n   * For length is intended the main axis relative to the placement of the popper.<br />\n   * This means that if the placement is `top` or `bottom`, the length will be the\n   * `width`. In case of `left` or `right`, it will be the `height`.\n   *\n   * You can provide a single value (as `Number` or `String`), or a pair of values\n   * as `String` divided by a comma or one (or more) white spaces.<br />\n   * The latter is a deprecated method because it leads to confusion and will be\n   * removed in v2.<br />\n   * Additionally, it accepts additions and subtractions between different units.\n   * Note that multiplications and divisions aren't supported.\n   *\n   * Valid examples are:\n   * ```\n   * 10\n   * '10%'\n   * '10, 10'\n   * '10%, 10'\n   * '10 + 10%'\n   * '10 - 5vh + 3%'\n   * '-10px + 5vh, 5px - 6%'\n   * ```\n   * > **NB**: If you desire to apply offsets to your poppers in a way that may make them overlap\n   * > with their reference element, unfortunately, you will have to disable the `flip` modifier.\n   * > You can read more on this at this [issue](https://github.com/FezVrasta/popper.js/issues/373).\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  offset: {\n    /** @prop {number} order=200 - Index used to define the order of execution */\n    order: 200,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: offset,\n    /** @prop {Number|String} offset=0\n     * The offset value as described in the modifier description\n     */\n    offset: 0\n  },\n\n  /**\n   * Modifier used to prevent the popper from being positioned outside the boundary.\n   *\n   * A scenario exists where the reference itself is not within the boundaries.<br />\n   * We can say it has \"escaped the boundaries\" — or just \"escaped\".<br />\n   * In this case we need to decide whether the popper should either:\n   *\n   * - detach from the reference and remain \"trapped\" in the boundaries, or\n   * - if it should ignore the boundary and \"escape with its reference\"\n   *\n   * When `escapeWithReference` is set to`true` and reference is completely\n   * outside its boundaries, the popper will overflow (or completely leave)\n   * the boundaries in order to remain attached to the edge of the reference.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  preventOverflow: {\n    /** @prop {number} order=300 - Index used to define the order of execution */\n    order: 300,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: preventOverflow,\n    /**\n     * @prop {Array} [priority=['left','right','top','bottom']]\n     * Popper will try to prevent overflow following these priorities by default,\n     * then, it could overflow on the left and on top of the `boundariesElement`\n     */\n    priority: ['left', 'right', 'top', 'bottom'],\n    /**\n     * @prop {number} padding=5\n     * Amount of pixel used to define a minimum distance between the boundaries\n     * and the popper. This makes sure the popper always has a little padding\n     * between the edges of its container\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='scrollParent'\n     * Boundaries used by the modifier. Can be `scrollParent`, `window`,\n     * `viewport` or any DOM element.\n     */\n    boundariesElement: 'scrollParent'\n  },\n\n  /**\n   * Modifier used to make sure the reference and its popper stay near each other\n   * without leaving any gap between the two. Especially useful when the arrow is\n   * enabled and you want to ensure that it points to its reference element.\n   * It cares only about the first axis. You can still have poppers with margin\n   * between the popper and its reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  keepTogether: {\n    /** @prop {number} order=400 - Index used to define the order of execution */\n    order: 400,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: keepTogether\n  },\n\n  /**\n   * This modifier is used to move the `arrowElement` of the popper to make\n   * sure it is positioned between the reference element and its popper element.\n   * It will read the outer size of the `arrowElement` node to detect how many\n   * pixels of conjunction are needed.\n   *\n   * It has no effect if no `arrowElement` is provided.\n   * @memberof modifiers\n   * @inner\n   */\n  arrow: {\n    /** @prop {number} order=500 - Index used to define the order of execution */\n    order: 500,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: arrow,\n    /** @prop {String|HTMLElement} element='[x-arrow]' - Selector or node used as arrow */\n    element: '[x-arrow]'\n  },\n\n  /**\n   * Modifier used to flip the popper's placement when it starts to overlap its\n   * reference element.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   *\n   * **NOTE:** this modifier will interrupt the current update cycle and will\n   * restart it if it detects the need to flip the placement.\n   * @memberof modifiers\n   * @inner\n   */\n  flip: {\n    /** @prop {number} order=600 - Index used to define the order of execution */\n    order: 600,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: flip,\n    /**\n     * @prop {String|Array} behavior='flip'\n     * The behavior used to change the popper's placement. It can be one of\n     * `flip`, `clockwise`, `counterclockwise` or an array with a list of valid\n     * placements (with optional variations)\n     */\n    behavior: 'flip',\n    /**\n     * @prop {number} padding=5\n     * The popper will flip if it hits the edges of the `boundariesElement`\n     */\n    padding: 5,\n    /**\n     * @prop {String|HTMLElement} boundariesElement='viewport'\n     * The element which will define the boundaries of the popper position.\n     * The popper will never be placed outside of the defined boundaries\n     * (except if `keepTogether` is enabled)\n     */\n    boundariesElement: 'viewport'\n  },\n\n  /**\n   * Modifier used to make the popper flow toward the inner of the reference element.\n   * By default, when this modifier is disabled, the popper will be placed outside\n   * the reference element.\n   * @memberof modifiers\n   * @inner\n   */\n  inner: {\n    /** @prop {number} order=700 - Index used to define the order of execution */\n    order: 700,\n    /** @prop {Boolean} enabled=false - Whether the modifier is enabled or not */\n    enabled: false,\n    /** @prop {ModifierFn} */\n    fn: inner\n  },\n\n  /**\n   * Modifier used to hide the popper when its reference element is outside of the\n   * popper boundaries. It will set a `x-out-of-boundaries` attribute which can\n   * be used to hide with a CSS selector the popper when its reference is\n   * out of boundaries.\n   *\n   * Requires the `preventOverflow` modifier before it in order to work.\n   * @memberof modifiers\n   * @inner\n   */\n  hide: {\n    /** @prop {number} order=800 - Index used to define the order of execution */\n    order: 800,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: hide\n  },\n\n  /**\n   * Computes the style that will be applied to the popper element to gets\n   * properly positioned.\n   *\n   * Note that this modifier will not touch the DOM, it just prepares the styles\n   * so that `applyStyle` modifier can apply it. This separation is useful\n   * in case you need to replace `applyStyle` with a custom implementation.\n   *\n   * This modifier has `850` as `order` value to maintain backward compatibility\n   * with previous versions of Popper.js. Expect the modifiers ordering method\n   * to change in future major versions of the library.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  computeStyle: {\n    /** @prop {number} order=850 - Index used to define the order of execution */\n    order: 850,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: computeStyle,\n    /**\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: true,\n    /**\n     * @prop {string} [x='bottom']\n     * Where to anchor the X axis (`bottom` or `top`). AKA X offset origin.\n     * Change this if your popper should grow in a direction different from `bottom`\n     */\n    x: 'bottom',\n    /**\n     * @prop {string} [x='left']\n     * Where to anchor the Y axis (`left` or `right`). AKA Y offset origin.\n     * Change this if your popper should grow in a direction different from `right`\n     */\n    y: 'right'\n  },\n\n  /**\n   * Applies the computed styles to the popper element.\n   *\n   * All the DOM manipulations are limited to this modifier. This is useful in case\n   * you want to integrate Popper.js inside a framework or view library and you\n   * want to delegate all the DOM manipulations to it.\n   *\n   * Note that if you disable this modifier, you must make sure the popper element\n   * has its position set to `absolute` before Popper.js can do its work!\n   *\n   * Just disable this modifier and define your own to achieve the desired effect.\n   *\n   * @memberof modifiers\n   * @inner\n   */\n  applyStyle: {\n    /** @prop {number} order=900 - Index used to define the order of execution */\n    order: 900,\n    /** @prop {Boolean} enabled=true - Whether the modifier is enabled or not */\n    enabled: true,\n    /** @prop {ModifierFn} */\n    fn: applyStyle,\n    /** @prop {Function} */\n    onLoad: applyStyleOnLoad,\n    /**\n     * @deprecated since version 1.10.0, the property moved to `computeStyle` modifier\n     * @prop {Boolean} gpuAcceleration=true\n     * If true, it uses the CSS 3D transformation to position the popper.\n     * Otherwise, it will use the `top` and `left` properties\n     */\n    gpuAcceleration: undefined\n  }\n};\n\n/**\n * The `dataObject` is an object containing all the information used by Popper.js.\n * This object is passed to modifiers and to the `onCreate` and `onUpdate` callbacks.\n * @name dataObject\n * @property {Object} data.instance The Popper.js instance\n * @property {String} data.placement Placement applied to popper\n * @property {String} data.originalPlacement Placement originally defined on init\n * @property {Boolean} data.flipped True if popper has been flipped by flip modifier\n * @property {Boolean} data.hide True if the reference element is out of boundaries, useful to know when to hide the popper\n * @property {HTMLElement} data.arrowElement Node used as arrow by arrow modifier\n * @property {Object} data.styles Any CSS property defined here will be applied to the popper. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.arrowStyles Any CSS property defined here will be applied to the popper arrow. It expects the JavaScript nomenclature (eg. `marginBottom`)\n * @property {Object} data.boundaries Offsets of the popper boundaries\n * @property {Object} data.offsets The measurements of popper, reference and arrow elements\n * @property {Object} data.offsets.popper `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.reference `top`, `left`, `width`, `height` values\n * @property {Object} data.offsets.arrow] `top` and `left` offsets, only one of them will be different from 0\n */\n\n/**\n * Default options provided to Popper.js constructor.<br />\n * These can be overridden using the `options` argument of Popper.js.<br />\n * To override an option, simply pass an object with the same\n * structure of the `options` object, as the 3rd argument. For example:\n * ```\n * new Popper(ref, pop, {\n *   modifiers: {\n *     preventOverflow: { enabled: false }\n *   }\n * })\n * ```\n * @type {Object}\n * @static\n * @memberof Popper\n */\nvar Defaults = {\n  /**\n   * Popper's placement.\n   * @prop {Popper.placements} placement='bottom'\n   */\n  placement: 'bottom',\n\n  /**\n   * Set this to true if you want popper to position it self in 'fixed' mode\n   * @prop {Boolean} positionFixed=false\n   */\n  positionFixed: false,\n\n  /**\n   * Whether events (resize, scroll) are initially enabled.\n   * @prop {Boolean} eventsEnabled=true\n   */\n  eventsEnabled: true,\n\n  /**\n   * Set to true if you want to automatically remove the popper when\n   * you call the `destroy` method.\n   * @prop {Boolean} removeOnDestroy=false\n   */\n  removeOnDestroy: false,\n\n  /**\n   * Callback called when the popper is created.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onCreate}\n   */\n  onCreate: function onCreate() {},\n\n  /**\n   * Callback called when the popper is updated. This callback is not called\n   * on the initialization/creation of the popper, but only on subsequent\n   * updates.<br />\n   * By default, it is set to no-op.<br />\n   * Access Popper.js instance with `data.instance`.\n   * @prop {onUpdate}\n   */\n  onUpdate: function onUpdate() {},\n\n  /**\n   * List of modifiers used to modify the offsets before they are applied to the popper.\n   * They provide most of the functionalities of Popper.js.\n   * @prop {modifiers}\n   */\n  modifiers: modifiers\n};\n\n/**\n * @callback onCreate\n * @param {dataObject} data\n */\n\n/**\n * @callback onUpdate\n * @param {dataObject} data\n */\n\n// Utils\n// Methods\nvar Popper = function () {\n  /**\n   * Creates a new Popper.js instance.\n   * @class Popper\n   * @param {HTMLElement|referenceObject} reference - The reference element used to position the popper\n   * @param {HTMLElement} popper - The HTML element used as the popper\n   * @param {Object} options - Your custom options to override the ones defined in [Defaults](#defaults)\n   * @return {Object} instance - The generated Popper.js instance\n   */\n  function Popper(reference, popper) {\n    var _this = this;\n\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    classCallCheck(this, Popper);\n\n    this.scheduleUpdate = function () {\n      return requestAnimationFrame(_this.update);\n    };\n\n    // make update() debounced, so that it only runs at most once-per-tick\n    this.update = debounce(this.update.bind(this));\n\n    // with {} we create a new object with the options inside it\n    this.options = _extends({}, Popper.Defaults, options);\n\n    // init state\n    this.state = {\n      isDestroyed: false,\n      isCreated: false,\n      scrollParents: []\n    };\n\n    // get reference and popper elements (allow jQuery wrappers)\n    this.reference = reference && reference.jquery ? reference[0] : reference;\n    this.popper = popper && popper.jquery ? popper[0] : popper;\n\n    // Deep merge modifiers options\n    this.options.modifiers = {};\n    Object.keys(_extends({}, Popper.Defaults.modifiers, options.modifiers)).forEach(function (name) {\n      _this.options.modifiers[name] = _extends({}, Popper.Defaults.modifiers[name] || {}, options.modifiers ? options.modifiers[name] : {});\n    });\n\n    // Refactoring modifiers' list (Object => Array)\n    this.modifiers = Object.keys(this.options.modifiers).map(function (name) {\n      return _extends({\n        name: name\n      }, _this.options.modifiers[name]);\n    })\n    // sort the modifiers by order\n    .sort(function (a, b) {\n      return a.order - b.order;\n    });\n\n    // modifiers have the ability to execute arbitrary code when Popper.js get inited\n    // such code is executed in the same order of its modifier\n    // they could add new properties to their options configuration\n    // BE AWARE: don't add options to `options.modifiers.name` but to `modifierOptions`!\n    this.modifiers.forEach(function (modifierOptions) {\n      if (modifierOptions.enabled && isFunction(modifierOptions.onLoad)) {\n        modifierOptions.onLoad(_this.reference, _this.popper, _this.options, modifierOptions, _this.state);\n      }\n    });\n\n    // fire the first update to position the popper in the right place\n    this.update();\n\n    var eventsEnabled = this.options.eventsEnabled;\n    if (eventsEnabled) {\n      // setup event listeners, they will take care of update the position in specific situations\n      this.enableEventListeners();\n    }\n\n    this.state.eventsEnabled = eventsEnabled;\n  }\n\n  // We can't use class properties because they don't get listed in the\n  // class prototype and break stuff like Sinon stubs\n\n\n  createClass(Popper, [{\n    key: 'update',\n    value: function update$$1() {\n      return update.call(this);\n    }\n  }, {\n    key: 'destroy',\n    value: function destroy$$1() {\n      return destroy.call(this);\n    }\n  }, {\n    key: 'enableEventListeners',\n    value: function enableEventListeners$$1() {\n      return enableEventListeners.call(this);\n    }\n  }, {\n    key: 'disableEventListeners',\n    value: function disableEventListeners$$1() {\n      return disableEventListeners.call(this);\n    }\n\n    /**\n     * Schedules an update. It will run on the next UI update available.\n     * @method scheduleUpdate\n     * @memberof Popper\n     */\n\n\n    /**\n     * Collection of utilities useful when writing custom modifiers.\n     * Starting from version 1.7, this method is available only if you\n     * include `popper-utils.js` before `popper.js`.\n     *\n     * **DEPRECATION**: This way to access PopperUtils is deprecated\n     * and will be removed in v2! Use the PopperUtils module directly instead.\n     * Due to the high instability of the methods contained in Utils, we can't\n     * guarantee them to follow semver. Use them at your own risk!\n     * @static\n     * @private\n     * @type {Object}\n     * @deprecated since version 1.8\n     * @member Utils\n     * @memberof Popper\n     */\n\n  }]);\n  return Popper;\n}();\n\n/**\n * The `referenceObject` is an object that provides an interface compatible with Popper.js\n * and lets you use it as replacement of a real DOM node.<br />\n * You can use this method to position a popper relatively to a set of coordinates\n * in case you don't have a DOM node to use as reference.\n *\n * ```\n * new Popper(referenceObject, popperNode);\n * ```\n *\n * NB: This feature isn't supported in Internet Explorer 10.\n * @name referenceObject\n * @property {Function} data.getBoundingClientRect\n * A function that returns a set of coordinates compatible with the native `getBoundingClientRect` method.\n * @property {number} data.clientWidth\n * An ES6 getter that will return the width of the virtual reference element.\n * @property {number} data.clientHeight\n * An ES6 getter that will return the height of the virtual reference element.\n */\n\n\nPopper.Utils = (typeof window !== 'undefined' ? window : global).PopperUtils;\nPopper.placements = placements;\nPopper.Defaults = Defaults;\n\nexport default Popper;\n//# sourceMappingURL=popper.js.map\n","import Popper from 'popper.js';\r\nimport DialogManager from './DialogManager';\r\nimport merge from '../../internal/merge';\r\n\r\nexport interface IDialogOptions {\r\n  title: string;\r\n  fullDialog: boolean;\r\n  resetPossible: boolean;\r\n\r\n  // popper options\r\n  placement?: Popper.Placement;\r\n  eventsEnabled?: boolean;\r\n  modifiers?: Popper.Modifiers;\r\n  toggleDialog: boolean;\r\n}\r\n\r\nexport interface IDialogContext {\r\n  attachment: HTMLElement;\r\n  level: number;\r\n  manager: DialogManager;\r\n  idPrefix: string;\r\n}\r\n\r\nabstract class ADialog {\r\n\r\n  private readonly options: Readonly<IDialogOptions> = {\r\n    title: '',\r\n    fullDialog: false,\r\n    resetPossible: true,\r\n    placement: 'bottom-start',\r\n    toggleDialog: true,\r\n    modifiers: {\r\n    }\r\n  };\r\n\r\n  readonly node: HTMLFormElement;\r\n  private popper: Popper | null = null;\r\n\r\n  constructor(protected readonly dialog: Readonly<IDialogContext>, options: Partial<IDialogOptions> = {}) {\r\n    Object.assign(this.options, options);\r\n    this.node = dialog.attachment.ownerDocument.createElement('form');\r\n    this.node.classList.add('lu-dialog');\r\n  }\r\n\r\n  get attachment() {\r\n    return this.dialog.attachment;\r\n  }\r\n\r\n  get level() {\r\n    return this.dialog.level;\r\n  }\r\n\r\n  protected abstract build(node: HTMLElement): boolean | void;\r\n\r\n  equals(that: ADialog) {\r\n    return this.dialog.level === that.dialog.level && this.dialog.attachment === that.dialog.attachment;\r\n  }\r\n\r\n  open() {\r\n    if (this.options.toggleDialog && this.dialog.manager.removeLike(this)) {\r\n      return;\r\n    }\r\n    if (this.build(this.node) === false) {\r\n      return;\r\n    }\r\n    const parent = <HTMLElement>this.attachment.closest('.lu')!;\r\n\r\n    if (this.options.title) {\r\n      this.node.insertAdjacentHTML('afterbegin', `<strong>${this.options.title}</strong>`);\r\n    }\r\n    if (this.options.fullDialog) {\r\n      this.node.insertAdjacentHTML('beforeend', `<div>\r\n        <button type=\"submit\" title=\"Apply\"></button>\r\n        <button type=\"button\" title=\"Cancel\"></button>\r\n        <button type=\"reset\" title=\"Reset to default values\" ${!this.options.resetPossible ? 'style=\"visibility: hidden\"': ''}></button>\r\n      </div>`);\r\n    }\r\n\r\n    parent.appendChild(this.node);\r\n    this.popper = new Popper(this.attachment, this.node, merge({\r\n      modifiers: {\r\n        preventOverflow: {\r\n          boundariesElement: parent\r\n        }\r\n      }\r\n    }, this.options));\r\n\r\n    const auto = this.find<HTMLInputElement>('input[autofocus]');\r\n    if (auto) {\r\n      // delay such that it works\r\n      self.setTimeout(() => auto.focus());\r\n    }\r\n\r\n    const reset = this.find<HTMLButtonElement>('button[type=reset]');\r\n    if (reset) {\r\n      reset.onclick = (evt) => {\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n        this.reset();\r\n      };\r\n    }\r\n    this.node.onsubmit = (evt) => {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n      if (!this.node.checkValidity()) {\r\n        return false;\r\n      }\r\n      if (this.submit()) {\r\n        this.destroy();\r\n      }\r\n      return false;\r\n    };\r\n    const cancel = this.find<HTMLButtonElement>('button[title=Cancel]');\r\n    if (cancel) {\r\n      cancel.onclick = (evt) => {\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n        this.destroy();\r\n      };\r\n    }\r\n\r\n    this.dialog.manager.push(this);\r\n  }\r\n\r\n  protected find<T extends HTMLElement>(selector: string): T {\r\n    return <T>this.node.querySelector(selector);\r\n  }\r\n\r\n  protected findInput(selector: string) {\r\n    return this.find<HTMLInputElement>(selector);\r\n  }\r\n\r\n  protected forEach<M extends Element, T>(selector: string, callback: (d: M, i: number) => T): T[] {\r\n    return (<M[]>Array.from(this.node.querySelectorAll(selector))).map(callback);\r\n  }\r\n\r\n  protected reset() {\r\n    // hook\r\n  }\r\n\r\n  protected submit(): boolean {\r\n    // hook\r\n    return true;\r\n  }\r\n\r\n  destroy() {\r\n    this.dialog.manager.remove(this);\r\n    if (this.popper) {\r\n      this.popper.destroy();\r\n    }\r\n    this.node.remove();\r\n  }\r\n}\r\n\r\nexport default ADialog;\r\n","import {ascending, histogram, HistogramGenerator, mean, median, quantile} from 'd3-array';\r\nimport {ICategory, isMissingValue} from '../model';\r\nimport {IMappingFunction} from '../model/MappingFunction';\r\n\r\nexport interface INumberBin {\r\n  x0: number;\r\n  x1: number;\r\n  length: number;\r\n}\r\n\r\nexport interface IBoxPlotData {\r\n  readonly min: number;\r\n  readonly max: number;\r\n  readonly median: number;\r\n  readonly q1: number;\r\n  readonly q3: number;\r\n  readonly outlier?: number[];\r\n}\r\n\r\nexport interface IAdvancedBoxPlotData extends IBoxPlotData {\r\n  readonly mean: number;\r\n}\r\n\r\nexport interface IStatistics extends IAdvancedBoxPlotData {\r\n  readonly count: number;\r\n  readonly maxBin: number;\r\n  readonly hist: INumberBin[];\r\n  readonly missing: number;\r\n}\r\n\r\nexport interface ICategoricalBin {\r\n  cat: string;\r\n  y: number;\r\n}\r\n\r\nexport interface ICategoricalStatistics {\r\n  readonly maxBin: number;\r\n  readonly hist: ICategoricalBin[];\r\n  readonly missing: number;\r\n}\r\n\r\n/**\r\n * @internal\r\n * @param {number} length\r\n * @returns {number}\r\n */\r\nexport function getNumberOfBins(length: number) {\r\n  // as by default used in d3 the Sturges' formula\r\n  return Math.ceil(Math.log(length) / Math.LN2) + 1;\r\n}\r\n\r\n\r\n/**\r\n * helper class to lazily compute box plotdata out of a given number array\r\n * @internal\r\n */\r\nexport class LazyBoxPlotData implements IStatistics {\r\n  private readonly values: number[];\r\n\r\n  readonly missing: number;\r\n\r\n  constructor(values: number[], private readonly scale?: Readonly<IMappingFunction>, private readonly histGen?: HistogramGenerator<number, number>) {\r\n    // filter out NaN\r\n    this.values = values.filter((d) => !isMissingValue(d));\r\n    this.missing = values.length - this.values.length;\r\n  }\r\n\r\n  get count() {\r\n    return this.values.length + this.missing;\r\n  }\r\n\r\n  /**\r\n   * lazy compute sorted array\r\n   * @returns {number[]}\r\n   */\r\n  @cached()\r\n  private get sorted(): number[] {\r\n    return this.values.slice().sort(ascending);\r\n  }\r\n\r\n  private map(v: number | undefined) {\r\n    return this.scale && v != null ? this.scale.apply(v!) : v!;\r\n  }\r\n\r\n  @cached()\r\n  get hist() {\r\n    if (!this.histGen) {\r\n      return [];\r\n    }\r\n    return this.histGen(this.values);\r\n  }\r\n\r\n  @cached()\r\n  get maxBin() {\r\n    return Math.max(...this.hist.map((d) => d.length));\r\n  }\r\n\r\n  @cached()\r\n  get min() {\r\n    return this.map(Math.min(...this.values));\r\n  }\r\n\r\n  @cached()\r\n  get max() {\r\n    return this.map(Math.max(...this.values));\r\n  }\r\n\r\n  @cached()\r\n  get median() {\r\n    return this.map(median(this.sorted));\r\n  }\r\n\r\n  @cached()\r\n  get q1() {\r\n    return this.map(quantile(this.sorted, 0.25));\r\n  }\r\n\r\n  @cached()\r\n  get q3() {\r\n    return this.map(quantile(this.sorted, 0.75));\r\n  }\r\n\r\n  @cached()\r\n  get mean() {\r\n    return this.map(mean(this.values));\r\n  }\r\n\r\n  @cached()\r\n  get outlier() {\r\n    const q1 = this.q1;\r\n    const q3 = this.q3;\r\n    const iqr = q3 - q1;\r\n    const left = q1 - 1.5 * iqr;\r\n    const right = q3 + 1.5 * iqr;\r\n    let outlier = this.sorted.filter((v) => (v < left || v > right) && !isMissingValue(v));\r\n    if (this.scale) {\r\n      outlier = outlier.map((v) => this.scale!.apply(v));\r\n    }\r\n    return outlier;\r\n  }\r\n}\r\n\r\n/**\r\n * cache the value in a hidden __ variable\r\n * @internal\r\n */\r\nfunction cached() {\r\n  return function (_target: any, propertyKey: string, descriptor: PropertyDescriptor) {\r\n    const getter = descriptor.get!;\r\n    const cacheKey = `__${propertyKey}`;\r\n    descriptor.get = function (this: any) {\r\n      if (this.hasOwnProperty(cacheKey)) {\r\n        return this[cacheKey];\r\n      }\r\n      const value = getter.call(this);\r\n      this[cacheKey] = value;\r\n      return value;\r\n    };\r\n    return descriptor;\r\n  };\r\n}\r\n\r\n\r\n/**\r\n * computes the simple statistics of an array using d3 histogram\r\n * @param arr the data array\r\n * @param acc accessor function\r\n * @param missing accessor if the value is missing\r\n * @param range the total value range\r\n * @param bins the number of bins\r\n * @returns {{min: number, max: number, count: number, hist: histogram.Bin<number>[]}}\r\n * @internal\r\n */\r\nexport function computeStats<T>(arr: T[], acc: (row: T) => number, missing: (row: T) => boolean, range?: [number, number], bins?: number): IStatistics {\r\n  if (arr.length === 0) {\r\n    return {\r\n      min: NaN,\r\n      max: NaN,\r\n      mean: NaN,\r\n      q1: NaN,\r\n      q3: NaN,\r\n      outlier: [],\r\n      median: NaN,\r\n      count: 0,\r\n      maxBin: 0,\r\n      hist: [],\r\n      missing: 0\r\n    };\r\n  }\r\n\r\n  const hist = histogram();\r\n  if (range) {\r\n    hist.domain(range);\r\n  }\r\n  if (bins) {\r\n    hist.thresholds(bins);\r\n  } else {\r\n    hist.thresholds(getNumberOfBins(arr.length));\r\n  }\r\n\r\n  const values = arr.map((v) => missing(v) ? NaN : acc(v));\r\n\r\n  return new LazyBoxPlotData(values, undefined, hist);\r\n}\r\n\r\n\r\n/**\r\n * computes a categorical histogram\r\n * @param arr the data array\r\n * @param acc the accessor\r\n * @param categories the list of known categories\r\n * @returns {{hist: {cat: string, y: number}[]}}\r\n * @internal\r\n */\r\nexport function computeHist<T>(arr: T[], acc: (row: T) => ICategory | null, categories: ICategory[]): ICategoricalStatistics {\r\n  const m = new Map<string, number>();\r\n  let missingCount = 0;\r\n  categories.forEach((cat) => m.set(cat.name, 0));\r\n\r\n  arr.forEach((a) => {\r\n    const v = acc(a);\r\n    if (v == null) {\r\n      missingCount += 1;\r\n      return;\r\n    }\r\n    m.set(v.name, (m.get(v.name) || 0) + 1);\r\n  });\r\n  const entries: { cat: string; y: number }[] = [];\r\n  m.forEach((v, k) => entries.push({cat: k, y: v}));\r\n  return {\r\n    maxBin: Math.max(...entries.map((d) => d.y)),\r\n    hist: entries,\r\n    missing: missingCount\r\n  };\r\n}\r\n\r\n/**\r\n * round to the given commas similar to d3.round\r\n * @param {number} v\r\n * @param {number} precision\r\n * @returns {number}\r\n * @internal\r\n */\r\nexport function round(v: number, precision: number = 0) {\r\n  if (precision === 0) {\r\n    return Math.round(v);\r\n  }\r\n  const scale = Math.pow(10, precision);\r\n  return Math.round(v * scale) / scale;\r\n}\r\n\r\n/**\r\n * compares two number whether they are similar up to delta\r\n * @param {number} a first numbre\r\n * @param {number} b second number\r\n * @param {number} delta\r\n * @returns {boolean} a and b are similar\r\n * @internal\r\n */\r\nexport function similar(a: number, b: number, delta = 0.5) {\r\n  if (a === b) {\r\n    return true;\r\n  }\r\n  return Math.abs(a - b) < delta;\r\n}\r\n","import {format} from 'd3-format';\r\nimport {equalArrays} from '../internal';\r\nimport {Category, toolbar, SortByDefault, dialogAddons} from './annotations';\r\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport {IDataRow, IGroup, IGroupData} from './interfaces';\r\nimport {groupCompare, isDummyNumberFilter, restoreFilter} from './internal';\r\nimport {\r\n  default as INumberColumn, EAdvancedSortMethod, INumberDesc, INumberFilter, isEqualNumberFilter,\r\n  isNumberIncluded, noNumberFilter, numberCompare\r\n} from './INumberColumn';\r\nimport {\r\n  createMappingFunction, IMapAbleColumn, IMappingFunction, restoreMapping,\r\n  ScaleMappingFunction\r\n} from './MappingFunction';\r\nimport {isMissingValue, isUnknown, missingGroup} from './missing';\r\nimport ValueColumn, {IValueColumnDesc, dataLoaded} from './ValueColumn';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\nimport {IColorMappingFunction, createColorMappingFunction, restoreColorMapping} from './ColorMappingFunction';\r\n\r\nexport {default as INumberColumn, isNumberColumn} from './INumberColumn';\r\n\r\n\r\nexport declare type INumberColumnDesc = INumberDesc & IValueColumnDesc<number>;\r\n\r\n\r\n/**\r\n * emitted when the mapping property changes\r\n * @asMemberOf NumberColumn\r\n * @event\r\n */\r\nexport declare function mappingChanged(previous: IMappingFunction, current: IMappingFunction): void;\r\n\r\n/**\r\n * emitted when the color mapping property changes\r\n * @asMemberOf NumberColumn\r\n * @event\r\n */\r\nexport declare function colorMappingChanged(previous: IColorMappingFunction, current: IColorMappingFunction): void;\r\n\r\n/**\r\n * emitted when the filter property changes\r\n * @asMemberOf NumberColumn\r\n * @event\r\n */\r\nexport declare function filterChanged(previous: INumberFilter | null, current: INumberFilter | null): void;\r\n\r\n/**\r\n * emitted when the sort method property changes\r\n * @asMemberOf NumberColumn\r\n * @event\r\n */\r\nexport declare function sortMethodChanged(previous: EAdvancedSortMethod, current: EAdvancedSortMethod): void;\r\n\r\n/**\r\n * emitted when the grouping property changes\r\n * @asMemberOf NumberColumn\r\n * @event\r\n */\r\nexport declare function groupingChanged(previous: number[], current: number[]): void;\r\n\r\n/**\r\n * a number column mapped from an original input scale to an output range\r\n */\r\n@toolbar('groupBy', 'sortGroupBy', 'filterMapped', 'colorMapped')\r\n@dialogAddons('sortGroup', 'sortNumber')\r\n@dialogAddons('group', 'groupNumber')\r\n@Category('number')\r\n@SortByDefault('descending')\r\nexport default class NumberColumn extends ValueColumn<number> implements INumberColumn, IMapAbleColumn {\r\n  static readonly EVENT_MAPPING_CHANGED = 'mappingChanged';\r\n  static readonly EVENT_COLOR_MAPPING_CHANGED = 'colorMappingChanged';\r\n  static readonly EVENT_FILTER_CHANGED = 'filterChanged';\r\n  static readonly EVENT_SORTMETHOD_CHANGED = 'sortMethodChanged';\r\n  static readonly EVENT_GROUPING_CHANGED = 'groupingChanged';\r\n\r\n  private readonly missingValue: number;\r\n\r\n  private mapping: IMappingFunction;\r\n  private colorMapping: IColorMappingFunction;\r\n  private original: IMappingFunction;\r\n\r\n  /**\r\n   * currently active filter\r\n   * @type {{min: number, max: number}}\r\n   * @private\r\n   */\r\n  private currentFilter: INumberFilter = noNumberFilter();\r\n\r\n  private numberFormat: (n: number) => string = format('.2f');\r\n\r\n  private currentGroupThresholds: number[] = [];\r\n  private groupSortMethod: EAdvancedSortMethod = EAdvancedSortMethod.median;\r\n\r\n  constructor(id: string, desc: INumberColumnDesc) {\r\n    super(id, desc);\r\n\r\n    this.mapping = restoreMapping(desc);\r\n    this.original = this.mapping.clone();\r\n    this.colorMapping = restoreColorMapping(this.color, desc);\r\n\r\n    if (desc.numberFormat) {\r\n      this.numberFormat = format(desc.numberFormat);\r\n    }\r\n    this.missingValue = desc.missingValue != null ? desc.missingValue : NaN;\r\n\r\n    this.setGroupRenderer('boxplot');\r\n    this.setDefaultSummaryRenderer('histogram');\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any) {\r\n    const r = super.dump(toDescRef);\r\n    r.map = this.mapping.dump();\r\n    r.colorMapping = this.colorMapping.dump();\r\n    r.filter = isDummyNumberFilter(this.currentFilter) ? null : this.currentFilter;\r\n    r.groupSortMethod = this.groupSortMethod;\r\n    if (this.currentGroupThresholds) {\r\n      r.stratifyThreshholds = this.currentGroupThresholds;\r\n    }\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    super.restore(dump, factory);\r\n    if (dump.map) {\r\n      this.mapping = createMappingFunction(dump.map);\r\n    } else if (dump.domain) {\r\n      this.mapping = new ScaleMappingFunction(dump.domain, 'linear', dump.range || [0, 1]);\r\n    }\r\n    if (dump.colorMapping) {\r\n      this.colorMapping = createColorMappingFunction(this.color, dump.colorMapping);\r\n    }\r\n    if (dump.groupSortMethod) {\r\n      this.groupSortMethod = dump.groupSortMethod;\r\n    }\r\n    if (dump.filter) {\r\n      this.currentFilter = restoreFilter(dump.filter);\r\n    }\r\n    if (dump.stratifyThreshholds) {\r\n      this.currentGroupThresholds = dump.stratifyThresholds;\r\n    }\r\n    if (dump.numberFormat) {\r\n      this.numberFormat = format(dump.numberFormat);\r\n    }\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([NumberColumn.EVENT_MAPPING_CHANGED, NumberColumn.EVENT_COLOR_MAPPING_CHANGED, NumberColumn.EVENT_FILTER_CHANGED, NumberColumn.EVENT_SORTMETHOD_CHANGED, NumberColumn.EVENT_GROUPING_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof NumberColumn.EVENT_MAPPING_CHANGED, listener: typeof mappingChanged | null): this;\r\n  on(type: typeof NumberColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged | null): this;\r\n  on(type: typeof NumberColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\r\n  on(type: typeof NumberColumn.EVENT_SORTMETHOD_CHANGED, listener: typeof sortMethodChanged | null): this;\r\n  on(type: typeof NumberColumn.EVENT_GROUPING_CHANGED, listener: typeof groupingChanged | null): this;\r\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(<any>type, listener);\r\n  }\r\n\r\n  getLabel(row: IDataRow) {\r\n    if ((<any>this.desc).numberFormat) {\r\n      const raw = this.getRawValue(row);\r\n      //if a dedicated format and a number use the formatter in any case\r\n      if (isNaN(raw)) {\r\n        return 'NaN';\r\n      }\r\n      if (!isFinite(raw)) {\r\n        return raw.toString();\r\n      }\r\n      return this.numberFormat(raw);\r\n    }\r\n    const v = super.getValue(row);\r\n    //keep non number if it is not a number else convert using formatter\r\n    if (typeof v === 'number') {\r\n      return this.numberFormat(+v);\r\n    }\r\n    return String(v);\r\n  }\r\n\r\n  getRange() {\r\n    return this.mapping.getRange(this.numberFormat);\r\n  }\r\n\r\n  getRawValue(row: IDataRow, missingValue = this.missingValue) {\r\n    const v: any = super.getValue(row);\r\n    if (isMissingValue(v)) {\r\n      return missingValue;\r\n    }\r\n    return +v;\r\n  }\r\n\r\n  isMissing(row: IDataRow) {\r\n    return isMissingValue(super.getValue(row));\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    const v = this.getRawValue(row);\r\n    if (isNaN(v)) {\r\n      return v;\r\n    }\r\n    return this.mapping.apply(v);\r\n  }\r\n\r\n  getNumber(row: IDataRow) {\r\n    return this.getValue(row);\r\n  }\r\n\r\n  getRawNumber(row: IDataRow, missingValue = this.missingValue) {\r\n    return this.getRawValue(row, missingValue);\r\n  }\r\n\r\n  compare(a: IDataRow, b: IDataRow) {\r\n    return numberCompare(this.getNumber(a), this.getNumber(b), this.isMissing(a), this.isMissing(b));\r\n  }\r\n\r\n  groupCompare(a: IGroupData, b: IGroupData): number {\r\n    return groupCompare(a.rows, b.rows, this, <any>this.groupSortMethod);\r\n  }\r\n\r\n  getOriginalMapping() {\r\n    return this.original.clone();\r\n  }\r\n\r\n  getMapping() {\r\n    return this.mapping.clone();\r\n  }\r\n\r\n  setMapping(mapping: IMappingFunction) {\r\n    if (this.mapping.eq(mapping)) {\r\n      return;\r\n    }\r\n    this.fire([NumberColumn.EVENT_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.mapping.clone(), this.mapping = mapping);\r\n  }\r\n\r\n  getColor(row: IDataRow) {\r\n    const v = this.getNumber(row);\r\n    if (isNaN(v)) {\r\n      return this.color;\r\n    }\r\n    return this.colorMapping.apply(v);\r\n  }\r\n\r\n  getColorMapping() {\r\n    return this.colorMapping.clone();\r\n  }\r\n\r\n  setColorMapping(mapping: IColorMappingFunction) {\r\n    if (this.colorMapping.eq(mapping)) {\r\n      return;\r\n    }\r\n    this.fire([NumberColumn.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\r\n  }\r\n\r\n  isFiltered() {\r\n    return !isDummyNumberFilter(this.currentFilter);\r\n  }\r\n\r\n  getFilter(): INumberFilter {\r\n    return Object.assign({}, this.currentFilter);\r\n  }\r\n\r\n  setFilter(value: INumberFilter = {min: -Infinity, max: +Infinity, filterMissing: false}) {\r\n    if (isEqualNumberFilter(value, this.currentFilter)) {\r\n      return;\r\n    }\r\n    const bak = this.getFilter();\r\n    this.currentFilter.min = isUnknown(value.min) ? -Infinity : value.min;\r\n    this.currentFilter.max = isUnknown(value.max) ? Infinity : value.max;\r\n    this.currentFilter.filterMissing = value.filterMissing;\r\n    this.fire([NumberColumn.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, this.getFilter());\r\n  }\r\n\r\n  /**\r\n   * filter the current row if any filter is set\r\n   * @param row\r\n   * @returns {boolean}\r\n   */\r\n  filter(row: IDataRow) {\r\n    return isNumberIncluded(this.currentFilter, this.getRawNumber(row, NaN));\r\n  }\r\n\r\n  getGroupThresholds() {\r\n    return this.currentGroupThresholds.slice();\r\n  }\r\n\r\n  setGroupThresholds(value: number[]) {\r\n    if (equalArrays(this.currentGroupThresholds, value)) {\r\n      return;\r\n    }\r\n    const bak = this.getGroupThresholds();\r\n    this.currentGroupThresholds = value.slice();\r\n    this.fire([NumberColumn.EVENT_GROUPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, value);\r\n  }\r\n\r\n\r\n  group(row: IDataRow): IGroup {\r\n    if (this.isMissing(row)) {\r\n      return missingGroup;\r\n    }\r\n\r\n    let threshold = this.currentGroupThresholds;\r\n    if (threshold.length === 0) {\r\n      // default threshold\r\n      const d = this.mapping.domain;\r\n      threshold = [(d[1] - d[0]) / 2];\r\n    }\r\n\r\n    const value = this.getRawNumber(row);\r\n    const treshholdIndex = threshold.findIndex((t) => value <= t);\r\n    // group by thresholds / bins\r\n    switch (treshholdIndex) {\r\n      case -1:\r\n        //bigger than the last threshold\r\n        return {\r\n          name: `${this.label} > ${threshold[threshold.length - 1]}`,\r\n          color: this.colorMapping.apply(1)\r\n        };\r\n      case 0:\r\n        //smallest\r\n        return {\r\n          name: `${this.label} <= ${threshold[0]}`,\r\n          color: this.colorMapping.apply(0)\r\n        };\r\n      default:\r\n        return {\r\n          name: `${threshold[treshholdIndex - 1]} <= ${this.label} <= ${threshold[treshholdIndex]}`,\r\n          color: this.colorMapping.apply(this.mapping.apply((threshold[treshholdIndex - 1] + threshold[treshholdIndex]) / 2))\r\n        };\r\n    }\r\n  }\r\n\r\n  getSortMethod() {\r\n    return this.groupSortMethod;\r\n  }\r\n\r\n  setSortMethod(sortMethod: EAdvancedSortMethod) {\r\n    if (this.groupSortMethod === sortMethod) {\r\n      return;\r\n    }\r\n    this.fire([NumberColumn.EVENT_SORTMETHOD_CHANGED], this.groupSortMethod, this.groupSortMethod = sortMethod);\r\n    // sort by me if not already sorted by me\r\n    if (!this.isGroupSortedByMe().asc) {\r\n      this.toggleMyGroupSorting();\r\n    }\r\n  }\r\n}\r\n","import Column from './Column';\r\nimport {IArrayColumn, isArrayColumn} from './IArrayColumn';\r\nimport {IColumnDesc, IDataRow} from './interfaces';\r\nimport {colorPool} from './internal';\r\nimport {FIRST_IS_MISSING} from './missing';\r\nimport {IValueColumnDesc} from './ValueColumn';\r\n\r\nexport interface ICategoricalDesc {\r\n  categories: (string | Partial<ICategory>)[];\r\n  missingCategory: (string | Partial<ICategory>);\r\n}\r\n\r\nexport declare type ICategoricalColumnDesc = IValueColumnDesc<string> & ICategoricalDesc;\r\n\r\nexport interface ISetColumn extends IArrayColumn<boolean> {\r\n  readonly categories: ICategory[];\r\n\r\n  getSet(row: IDataRow): Set<ICategory>;\r\n}\r\n\r\nexport function isSetColumn(col: Column): col is ISetColumn {\r\n  return isArrayColumn(col) && Array.isArray((<ISetColumn>col).categories);\r\n}\r\n\r\nexport interface ICategoricalColumn extends ISetColumn {\r\n  getCategory(row: IDataRow): ICategory | null;\r\n}\r\n\r\nexport interface ICategory {\r\n  readonly name: string;\r\n\r\n  /**\r\n   * optional label of this category (the one to render)\r\n   */\r\n  readonly label: string;\r\n  /**\r\n   * category color\r\n   * @default next in d3 color 10 range\r\n   */\r\n  readonly color: string;\r\n\r\n  value: number;\r\n}\r\n\r\n/** @internal */\r\nexport function toCategory(cat: (string | Partial<ICategory>), value: number, nextColor: () => string = () => Column.DEFAULT_COLOR) {\r\n  if (typeof cat === 'string') {\r\n    //just the category value\r\n    return {name: cat, label: cat, color: nextColor(), value};\r\n  }\r\n  const name = cat.name == null ? String(cat.value) : cat.name;\r\n  return {\r\n    name,\r\n    label: cat.label || name,\r\n    color: cat.color || nextColor(),\r\n    value: cat.value != null ? cat.value : value\r\n  };\r\n}\r\n\r\nexport function compareCategory(a: ICategory | null, b: ICategory | null) {\r\n  const aNull = a == null || isNaN(a.value);\r\n  const bNull = b == null || isNaN(b.value);\r\n  if (aNull || a == null) {\r\n    return bNull ? 0 : FIRST_IS_MISSING;\r\n  }\r\n  if (bNull || b == null) {\r\n    return -FIRST_IS_MISSING;\r\n  }\r\n  if (a.value === b.value) {\r\n    return a.label.toLowerCase().localeCompare(b.label.toLowerCase());\r\n  }\r\n  return a.value - b.value;\r\n}\r\n\r\nexport function toCategories(desc: ICategoricalDesc) {\r\n  if (!desc.categories) {\r\n    return [];\r\n  }\r\n  const nextColor = colorPool();\r\n  const l = desc.categories.length - 1;\r\n  const cats = desc.categories.map((cat, i) => toCategory(cat, i / l, nextColor));\r\n  return cats.sort(compareCategory);\r\n}\r\n\r\n/**\r\n * checks whether the given column or description is a categorical column, i.e. the value is a list of categories\r\n * @param col\r\n * @returns {boolean}\r\n */\r\nexport function isCategoricalColumn(col: Column): col is ICategoricalColumn;\r\nexport function isCategoricalColumn(col: IColumnDesc): col is ICategoricalColumnDesc & IColumnDesc;\r\nexport function isCategoricalColumn(col: Column | IColumnDesc) {\r\n  return (col instanceof Column && typeof (<ICategoricalColumn>col).getCategory === 'function' || (!(col instanceof Column) && (<IColumnDesc>col).type.match(/(categorical|ordinal|hierarchy)/) != null));\r\n}\r\n\r\nexport interface ICategoricalFilter {\r\n  filter: string[] | string | RegExp;\r\n  filterMissing: boolean;\r\n}\r\n\r\nfunction isEmptyFilter(f: ICategoricalFilter | null) {\r\n  return f == null || (!f.filterMissing && (f.filter == null || f.filter === ''));\r\n}\r\n\r\nexport function isEqualCategoricalFilter(a: ICategoricalFilter | null, b: ICategoricalFilter | null) {\r\n  if (a === b) {\r\n    return true;\r\n  }\r\n  if (a == null || b == null) {\r\n    return isEmptyFilter(a) === isEmptyFilter(b);\r\n  }\r\n  if (a.filterMissing !== b.filterMissing || (typeof a.filter !== typeof b.filter)) {\r\n    return false;\r\n  }\r\n  if (Array.isArray(a.filter)) {\r\n    return arrayEquals(<string[]>a.filter, <string[]>b.filter);\r\n  }\r\n  return String(a.filter) === String(b.filter);\r\n}\r\n\r\nfunction arrayEquals<T>(a: T[], b: T[]) {\r\n  const al = a != null ? a.length : 0;\r\n  const bl = b != null ? b.length : 0;\r\n  if (al !== bl) {\r\n    return false;\r\n  }\r\n  if (al === 0) {\r\n    return true;\r\n  }\r\n  return a.every((ai, i) => ai === b[i]);\r\n}\r\n\r\nexport function isCategoryIncluded(filter: ICategoricalFilter | null, category: ICategory | null) {\r\n  if (filter == null) {\r\n    return true;\r\n  }\r\n  if (category == null || isNaN(category.value)) {\r\n    return !filter.filterMissing;\r\n  }\r\n  const filterObj = filter.filter;\r\n  if (Array.isArray(filterObj)) { //array mode\r\n    return filterObj.includes(category.name);\r\n  }\r\n  if (typeof filterObj === 'string' && filterObj.length > 0) { //search mode\r\n    return category.name.toLowerCase().includes(filterObj.toLowerCase());\r\n  }\r\n  if (filterObj instanceof RegExp) { //regex match mode\r\n    return filterObj.test(category.name);\r\n  }\r\n  return true;\r\n}\r\n","export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n","import colors from \"../colors\";\n\nexport default colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n","import colors from \"../colors\";\n\nexport default colors(\"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\");\n","import colors from \"../colors\";\n\nexport default colors(\"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\");\n","import colors from \"../colors\";\n\nexport default colors(\"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\");\n","import colors from \"../colors\";\n\nexport default colors(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\");\n","import colors from \"../colors\";\n\nexport default colors(\"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\");\n","import colors from \"../colors\";\n\nexport default colors(\"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\");\n","import colors from \"../colors\";\n\nexport default colors(\"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\");\n","import colors from \"../colors\";\n\nexport default colors(\"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\");\n","import {interpolateRgbBasis} from \"d3-interpolate\";\n\nexport default function(scheme) {\n  return interpolateRgbBasis(scheme[scheme.length - 1]);\n}\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"d8b365f5f5f55ab4ac\",\n  \"a6611adfc27d80cdc1018571\",\n  \"a6611adfc27df5f5f580cdc1018571\",\n  \"8c510ad8b365f6e8c3c7eae55ab4ac01665e\",\n  \"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e\",\n  \"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e\",\n  \"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e\",\n  \"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30\",\n  \"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"af8dc3f7f7f77fbf7b\",\n  \"7b3294c2a5cfa6dba0008837\",\n  \"7b3294c2a5cff7f7f7a6dba0008837\",\n  \"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837\",\n  \"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837\",\n  \"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837\",\n  \"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837\",\n  \"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b\",\n  \"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"e9a3c9f7f7f7a1d76a\",\n  \"d01c8bf1b6dab8e1864dac26\",\n  \"d01c8bf1b6daf7f7f7b8e1864dac26\",\n  \"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221\",\n  \"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221\",\n  \"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221\",\n  \"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221\",\n  \"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419\",\n  \"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"998ec3f7f7f7f1a340\",\n  \"5e3c99b2abd2fdb863e66101\",\n  \"5e3c99b2abd2f7f7f7fdb863e66101\",\n  \"542788998ec3d8daebfee0b6f1a340b35806\",\n  \"542788998ec3d8daebf7f7f7fee0b6f1a340b35806\",\n  \"5427888073acb2abd2d8daebfee0b6fdb863e08214b35806\",\n  \"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806\",\n  \"2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08\",\n  \"2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62f7f7f767a9cf\",\n  \"ca0020f4a58292c5de0571b0\",\n  \"ca0020f4a582f7f7f792c5de0571b0\",\n  \"b2182bef8a62fddbc7d1e5f067a9cf2166ac\",\n  \"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac\",\n  \"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac\",\n  \"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac\",\n  \"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061\",\n  \"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62ffffff999999\",\n  \"ca0020f4a582bababa404040\",\n  \"ca0020f4a582ffffffbababa404040\",\n  \"b2182bef8a62fddbc7e0e0e09999994d4d4d\",\n  \"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d\",\n  \"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d\",\n  \"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d\",\n  \"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a\",\n  \"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91bfdb\",\n  \"d7191cfdae61abd9e92c7bb6\",\n  \"d7191cfdae61ffffbfabd9e92c7bb6\",\n  \"d73027fc8d59fee090e0f3f891bfdb4575b4\",\n  \"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4\",\n  \"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4\",\n  \"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4\",\n  \"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695\",\n  \"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91cf60\",\n  \"d7191cfdae61a6d96a1a9641\",\n  \"d7191cfdae61ffffbfa6d96a1a9641\",\n  \"d73027fc8d59fee08bd9ef8b91cf601a9850\",\n  \"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850\",\n  \"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850\",\n  \"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850\",\n  \"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837\",\n  \"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf99d594\",\n  \"d7191cfdae61abdda42b83ba\",\n  \"d7191cfdae61ffffbfabdda42b83ba\",\n  \"d53e4ffc8d59fee08be6f59899d5943288bd\",\n  \"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd\",\n  \"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd\",\n  \"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd\",\n  \"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2\",\n  \"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5f999d8c92ca25f\",\n  \"edf8fbb2e2e266c2a4238b45\",\n  \"edf8fbb2e2e266c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"e0ecf49ebcda8856a7\",\n  \"edf8fbb3cde38c96c688419d\",\n  \"edf8fbb3cde38c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"e0f3dba8ddb543a2ca\",\n  \"f0f9e8bae4bc7bccc42b8cbe\",\n  \"f0f9e8bae4bc7bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fee8c8fdbb84e34a33\",\n  \"fef0d9fdcc8afc8d59d7301f\",\n  \"fef0d9fdcc8afc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"ece2f0a6bddb1c9099\",\n  \"f6eff7bdc9e167a9cf02818a\",\n  \"f6eff7bdc9e167a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"ece7f2a6bddb2b8cbe\",\n  \"f1eef6bdc9e174a9cf0570b0\",\n  \"f1eef6bdc9e174a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"e7e1efc994c7dd1c77\",\n  \"f1eef6d7b5d8df65b0ce1256\",\n  \"f1eef6d7b5d8df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fde0ddfa9fb5c51b8a\",\n  \"feebe2fbb4b9f768a1ae017e\",\n  \"feebe2fbb4b9f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"edf8b17fcdbb2c7fb8\",\n  \"ffffcca1dab441b6c4225ea8\",\n  \"ffffcca1dab441b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"f7fcb9addd8e31a354\",\n  \"ffffccc2e69978c679238443\",\n  \"ffffccc2e69978c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fff7bcfec44fd95f0e\",\n  \"ffffd4fed98efe9929cc4c02\",\n  \"ffffd4fed98efe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"ffeda0feb24cf03b20\",\n  \"ffffb2fecc5cfd8d3ce31a1c\",\n  \"ffffb2fecc5cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"deebf79ecae13182bd\",\n  \"eff3ffbdd7e76baed62171b5\",\n  \"eff3ffbdd7e76baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5e0a1d99b31a354\",\n  \"edf8e9bae4b374c476238b45\",\n  \"edf8e9bae4b374c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"f0f0f0bdbdbd636363\",\n  \"f7f7f7cccccc969696525252\",\n  \"f7f7f7cccccc969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"efedf5bcbddc756bb1\",\n  \"f2f0f7cbc9e29e9ac86a51a3\",\n  \"f2f0f7cbc9e29e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fee0d2fc9272de2d26\",\n  \"fee5d9fcae91fb6a4acb181d\",\n  \"fee5d9fcae91fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors\";\nimport ramp from \"../ramp\";\n\nexport var scheme = new Array(3).concat(\n  \"fee6cefdae6be6550d\",\n  \"feeddefdbe85fd8d3cd94701\",\n  \"feeddefdbe85fd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\"\n).map(colors);\n\nexport default ramp(scheme);\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar c = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  c.h = 360 * t - 100;\n  c.s = 1.5 - 1.5 * ts;\n  c.l = 0.8 - 0.9 * ts;\n  return c + \"\";\n}\n","import {rgb} from \"d3-color\";\n\nvar c = rgb(),\n    pi_1_3 = Math.PI / 3,\n    pi_2_3 = Math.PI * 2 / 3;\n\nexport default function(t) {\n  var x;\n  t = (0.5 - t) * Math.PI;\n  c.r = 255 * (x = Math.sin(t)) * x;\n  c.g = 255 * (x = Math.sin(t + pi_1_3)) * x;\n  c.b = 255 * (x = Math.sin(t + pi_2_3)) * x;\n  return c + \"\";\n}\n","import colors from \"../colors\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = new Date(+date)), date;\n  }\n\n  interval.floor = interval;\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","export var durationSecond = 1e3;\nexport var durationMinute = 6e4;\nexport var durationHour = 36e5;\nexport var durationDay = 864e5;\nexport var durationWeek = 6048e5;\n","import interval from \"./interval\";\nimport {durationSecond} from \"./duration\";\n\nvar second = interval(function(date) {\n  date.setTime(Math.floor(date / durationSecond) * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar minute = interval(function(date) {\n  date.setTime(Math.floor(date / durationMinute) * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval\";\nimport {durationHour, durationMinute} from \"./duration\";\n\nvar hour = interval(function(date) {\n  var offset = date.getTimezoneOffset() * durationMinute % durationHour;\n  if (offset < 0) offset += durationHour;\n  date.setTime(Math.floor((+date - offset) / durationHour) * durationHour + offset);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval\";\nimport {durationDay, durationMinute} from \"./duration\";\n\nvar day = interval(function(date) {\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setDate(date.getDate() + step);\n}, function(start, end) {\n  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n}, function(date) {\n  return date.getDate() - 1;\n});\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval\";\nimport {durationMinute, durationWeek} from \"./duration\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval\";\nimport {durationMinute} from \"./duration\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import interval from \"./interval\";\nimport {durationHour} from \"./duration\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval\";\nimport {durationDay} from \"./duration\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval\";\nimport {durationWeek} from \"./duration\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import interval from \"./interval\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import {ICategoricalStatistics, IStatistics} from '../internal';\r\nimport AEventDispatcher, {suffix} from '../internal/AEventDispatcher';\r\nimport debounce from '../internal/debounce';\r\nimport OrderedSet from '../internal/OrderedSet';\r\nimport {\r\n  Column, createActionDesc, createAggregateDesc, createGroupDesc, createRankDesc, createSelectionDesc,\r\n  createStackDesc, ICategoricalColumn, IColumnDesc, IDataRow, IGroup, INumberColumn, IOrderedGroup,\r\n  ISelectionColumnDesc, IValueColumnDesc, models\r\n} from '../model';\r\nimport {dirty, dirtyHeader, dirtyValues} from '../model/Column';\r\nimport AggregateGroupColumn, {IAggregateGroupColumnDesc} from '../model/AggregateGroupColumn';\r\nimport {toGroupID, unifyParents} from '../model/internal';\r\nimport RankColumn from '../model/RankColumn';\r\nimport Ranking, {orderChanged, addColumn, removeColumn} from '../model/Ranking';\r\nimport StackColumn from '../model/StackColumn';\r\nimport {exportRanking, IExportOptions} from './utils';\r\nimport {isSupportType} from '../model/annotations';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\nexport {IExportOptions} from './utils';\r\n\r\nexport interface IStatsBuilder {\r\n  stats(col: INumberColumn): Promise<IStatistics> | IStatistics;\r\n\r\n  hist(col: ICategoricalColumn): Promise<ICategoricalStatistics> | ICategoricalStatistics;\r\n}\r\n\r\nexport interface IDataProviderOptions {\r\n  columnTypes: { [columnType: string]: typeof Column };\r\n\r\n  /**\r\n   * allow multiple selected rows\r\n   * default: true\r\n   */\r\n  multiSelection: boolean;\r\n}\r\n\r\nexport interface IDataProvider extends AEventDispatcher {\r\n  readonly columnTypes: { [columnType: string]: typeof Column };\r\n\r\n  getTotalNumberOfRows(): number;\r\n\r\n  takeSnapshot(col: Column): void;\r\n\r\n  selectAllOf(ranking: Ranking): void;\r\n\r\n  getSelection(): number[];\r\n\r\n  setSelection(dataIndices: number[]): void;\r\n\r\n  toggleSelection(i: number, additional?: boolean): boolean;\r\n\r\n  isSelected(i: number): boolean;\r\n\r\n  removeRanking(ranking: Ranking): void;\r\n\r\n  ensureOneRanking(): void;\r\n\r\n  find(id: string): Column | null;\r\n\r\n  clone(col: Column): Column;\r\n\r\n  create(desc: IColumnDesc): Column | null;\r\n\r\n  toDescRef(desc: IColumnDesc): any;\r\n\r\n  fromDescRef(ref: any): IColumnDesc;\r\n\r\n  mappingSample(col: Column): Promise<number[]> | number[];\r\n\r\n  searchAndJump(search: string | RegExp, col: Column): void;\r\n\r\n  getRankings(): Ranking[];\r\n\r\n  getFirstRanking(): Ranking | null;\r\n  getLastRanking(): Ranking;\r\n\r\n  getColumns(): IColumnDesc[];\r\n\r\n  isAggregated(ranking: Ranking, group: IGroup): boolean;\r\n\r\n  aggregateAllOf(ranking: Ranking, aggregateAll: boolean): void;\r\n}\r\n\r\n/**\r\n * emitted when the selection changes\r\n * @asMemberOf ADataProvider\r\n * @param dataIndices the selected data indices\r\n * @event\r\n */\r\nexport declare function selectionChanged(dataIndices: number[]): void;\r\n/**\r\n * @asMemberOf ADataProvider\r\n * @event\r\n */\r\nexport declare function addRanking(ranking: Ranking, index: number): void;\r\n/**\r\n * @asMemberOf ADataProvider\r\n * @param ranking if null all rankings are removed else just the specific one\r\n * @event\r\n */\r\nexport declare function removeRanking(ranking: Ranking | null, index: number): void;\r\n/**\r\n * emitted when the selection changes\r\n * @asMemberOf ADataProvider\r\n * @param dataIndices the selected data indices\r\n * @event\r\n */\r\nexport declare function orderchanged(dataIndices: number[]): void;\r\n/**\r\n * @asMemberOf ADataProvider\r\n * @event\r\n */\r\nexport declare function addDesc(desc: IColumnDesc): void;\r\n/**\r\n * @asMemberOf ADataProvider\r\n * @event\r\n */\r\nexport declare function clearDesc(): void;\r\n/**\r\n * emitted when the selection changes\r\n * @asMemberOf ADataProvider\r\n * @param dataIndices the selected data indices\r\n * @event\r\n */\r\nexport declare function jumpToNearest(dataIndices: number[]): void;\r\n/**\r\n * @asMemberOf ADataProvider\r\n * @event\r\n */\r\nexport declare function aggregate(ranking: Ranking, group: IGroup|IGroup[], value: boolean): void;\r\n\r\n/**\r\n * a basic data provider holding the data and rankings\r\n */\r\nabstract class ADataProvider extends AEventDispatcher implements IDataProvider {\r\n  static readonly EVENT_SELECTION_CHANGED = 'selectionChanged';\r\n  static readonly EVENT_ADD_COLUMN = Ranking.EVENT_ADD_COLUMN;\r\n  static readonly EVENT_REMOVE_COLUMN = Ranking.EVENT_REMOVE_COLUMN;\r\n  static readonly EVENT_ADD_RANKING = 'addRanking';\r\n  static readonly EVENT_REMOVE_RANKING = 'removeRanking';\r\n  static readonly EVENT_DIRTY = Ranking.EVENT_DIRTY;\r\n  static readonly EVENT_DIRTY_HEADER = Ranking.EVENT_DIRTY_HEADER;\r\n  static readonly EVENT_DIRTY_VALUES = Ranking.EVENT_DIRTY_VALUES;\r\n  static readonly EVENT_ORDER_CHANGED = Ranking.EVENT_ORDER_CHANGED;\r\n  static readonly EVENT_ADD_DESC = 'addDesc';\r\n  static readonly EVENT_CLEAR_DESC = 'clearDesc';\r\n  static readonly EVENT_JUMP_TO_NEAREST = 'jumpToNearest';\r\n  static readonly EVENT_GROUP_AGGREGATION_CHANGED = AggregateGroupColumn.EVENT_AGGREGATE;\r\n\r\n  /**\r\n   * all rankings\r\n   * @type {Array}\r\n   * @private\r\n   */\r\n  private rankings: Ranking[] = [];\r\n  /**\r\n   * the current selected indices\r\n   * @type {OrderedSet}\r\n   */\r\n  private readonly selection = new OrderedSet<number>();\r\n\r\n  //ranking.id@group.name\r\n  private aggregations = new Set<string>();\r\n\r\n  private uid = 0;\r\n\r\n  /**\r\n   * lookup map of a column type to its column implementation\r\n   */\r\n  readonly columnTypes: { [columnType: string]: typeof Column };\r\n\r\n  protected readonly multiSelections: boolean;\r\n\r\n  constructor(options: Partial<IDataProviderOptions> = {}) {\r\n    super();\r\n    this.columnTypes = Object.assign(models(), options.columnTypes || {});\r\n    this.multiSelections = options.multiSelection !== false;\r\n  }\r\n\r\n  /**\r\n   * events:\r\n   *  * column changes: addColumn, removeColumn\r\n   *  * ranking changes: addRanking, removeRanking\r\n   *  * dirty: dirty, dirtyHeder, dirtyValues\r\n   *  * selectionChanged\r\n   * @returns {string[]}\r\n   */\r\n  protected createEventList() {\r\n    return super.createEventList().concat([\r\n      ADataProvider.EVENT_ADD_COLUMN, ADataProvider.EVENT_REMOVE_COLUMN,\r\n      ADataProvider.EVENT_ADD_RANKING, ADataProvider.EVENT_REMOVE_RANKING,\r\n      ADataProvider.EVENT_DIRTY, ADataProvider.EVENT_DIRTY_HEADER, ADataProvider.EVENT_DIRTY_VALUES,\r\n      ADataProvider.EVENT_ORDER_CHANGED, ADataProvider.EVENT_SELECTION_CHANGED,\r\n      ADataProvider.EVENT_ADD_DESC, ADataProvider.EVENT_CLEAR_DESC,\r\n      ADataProvider.EVENT_JUMP_TO_NEAREST, ADataProvider.EVENT_GROUP_AGGREGATION_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof ADataProvider.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\r\n  on(type: typeof ADataProvider.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\r\n  on(type: typeof ADataProvider.EVENT_ADD_RANKING, listener: typeof addRanking | null): this;\r\n  on(type: typeof ADataProvider.EVENT_REMOVE_RANKING, listener: typeof removeRanking | null): this;\r\n  on(type: typeof ADataProvider.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof ADataProvider.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof ADataProvider.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof ADataProvider.EVENT_ORDER_CHANGED, listener: typeof orderChanged | null): this;\r\n  on(type: typeof ADataProvider.EVENT_ADD_DESC, listener: typeof addDesc | null): this;\r\n  on(type: typeof ADataProvider.EVENT_CLEAR_DESC, listener: typeof clearDesc | null): this;\r\n  on(type: typeof ADataProvider.EVENT_JUMP_TO_NEAREST, listener: typeof jumpToNearest | null): this;\r\n  on(type: typeof ADataProvider.EVENT_GROUP_AGGREGATION_CHANGED, listener: typeof aggregate | null): this;\r\n  on(type: typeof ADataProvider.EVENT_SELECTION_CHANGED, listener: typeof selectionChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(type, listener);\r\n  }\r\n\r\n  abstract getTotalNumberOfRows(): number;\r\n\r\n  /**\r\n   * returns a list of all known column descriptions\r\n   * @returns {Array}\r\n   */\r\n  abstract getColumns(): IColumnDesc[];\r\n\r\n  /**\r\n   * adds a new ranking\r\n   * @param existing an optional existing ranking to clone\r\n   * @return the new ranking\r\n   */\r\n  pushRanking(existing?: Ranking): Ranking {\r\n    const r = this.cloneRanking(existing);\r\n\r\n    this.insertRanking(r);\r\n    return r;\r\n  }\r\n\r\n  takeSnapshot(col: Column): Ranking {\r\n    const r = this.cloneRanking();\r\n    const ranking = col.findMyRanker();\r\n    // by convention copy all support types and the first string column\r\n    let hasString = col.desc.type === 'string';\r\n    let hasColumn = false;\r\n    const toClone = !ranking ? [col] : ranking.children.filter((c) => {\r\n      if (c === col) {\r\n        hasColumn = false;\r\n        return true;\r\n      }\r\n      if (!hasString && c.desc.type === 'string') {\r\n        hasString = true;\r\n        return true;\r\n      }\r\n      return isSupportType(c);\r\n    });\r\n\r\n    if (!hasColumn) {\r\n      // maybe a nested one thus not in the top level\r\n      toClone.push(col);\r\n    }\r\n\r\n    toClone.forEach((c) => {\r\n      const clone = this.clone(c);\r\n      r.push(clone);\r\n      if (c === col) {\r\n        clone.sortByMe();\r\n      }\r\n    });\r\n    this.insertRanking(r);\r\n    return r;\r\n  }\r\n\r\n  insertRanking(r: Ranking, index = this.rankings.length) {\r\n    this.rankings.splice(index, 0, r);\r\n    this.forward(r, ...suffix('.provider', Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_REMOVE_COLUMN,\r\n      Ranking.EVENT_DIRTY, Ranking.EVENT_DIRTY_HEADER,\r\n      Ranking.EVENT_ORDER_CHANGED, Ranking.EVENT_DIRTY_VALUES));\r\n    const that = this;\r\n    //delayed reordering per ranking\r\n    r.on(`${Ranking.EVENT_DIRTY_ORDER}.provider`, debounce(function (this: { source: Ranking }) {\r\n      that.triggerReorder(this.source);\r\n    }, 100));\r\n    this.fire([ADataProvider.EVENT_ADD_RANKING, ADataProvider.EVENT_DIRTY_HEADER, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], r, index);\r\n    this.triggerReorder(r);\r\n  }\r\n\r\n  protected triggerReorder(ranking: Ranking) {\r\n    Promise.resolve(this.sort(ranking)).then((order) => {\r\n      unifyParents(order);\r\n      ranking.setGroups(order);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * removes a ranking from this data provider\r\n   * @param ranking\r\n   * @returns {boolean}\r\n   */\r\n  removeRanking(ranking: Ranking) {\r\n    const i = this.rankings.indexOf(ranking);\r\n    if (i < 0) {\r\n      return false;\r\n    }\r\n    this.unforward(ranking, ...suffix('.provider', Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_REMOVE_COLUMN,\r\n      Ranking.EVENT_DIRTY, Ranking.EVENT_DIRTY_HEADER,\r\n      Ranking.EVENT_ORDER_CHANGED, Ranking.EVENT_DIRTY_VALUES));\r\n    this.rankings.splice(i, 1);\r\n    ranking.on(`${Ranking.EVENT_DIRTY_ORDER}.provider`, null);\r\n    this.cleanUpRanking(ranking);\r\n    this.fire([ADataProvider.EVENT_REMOVE_RANKING, ADataProvider.EVENT_DIRTY_HEADER, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], ranking, i);\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * removes all rankings\r\n   */\r\n  clearRankings() {\r\n    this.rankings.forEach((ranking) => {\r\n      this.unforward(ranking, ...suffix('.provider', Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_REMOVE_COLUMN,\r\n        Ranking.EVENT_DIRTY, Ranking.EVENT_DIRTY_HEADER,\r\n        Ranking.EVENT_ORDER_CHANGED, Ranking.EVENT_DIRTY_VALUES));\r\n      ranking.on(`${Ranking.EVENT_DIRTY_ORDER}.provider`, null);\r\n      this.cleanUpRanking(ranking);\r\n    });\r\n    this.rankings = [];\r\n    this.fire([ADataProvider.EVENT_REMOVE_RANKING, ADataProvider.EVENT_DIRTY_HEADER, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], null, -1);\r\n  }\r\n\r\n  /**\r\n   * returns a list of all current rankings\r\n   * @returns {Ranking[]}\r\n   */\r\n  getRankings() {\r\n    return this.rankings.slice();\r\n  }\r\n\r\n  /**\r\n   * returns the last ranking for quicker access\r\n   * @returns {Ranking}\r\n   */\r\n  getFirstRanking() {\r\n    return this.rankings[0] || null;\r\n  }\r\n\r\n  /**\r\n   * returns the last ranking for quicker access\r\n   * @returns {Ranking}\r\n   */\r\n  getLastRanking() {\r\n    return this.rankings[this.rankings.length - 1];\r\n  }\r\n\r\n  ensureOneRanking() {\r\n    if (this.rankings.length === 0) {\r\n      const r = this.pushRanking();\r\n      this.push(r, createRankDesc());\r\n    }\r\n  }\r\n\r\n  /**\r\n   * hook method for cleaning up a ranking\r\n   * @param _ranking\r\n   */\r\n  cleanUpRanking(_ranking: Ranking) {\r\n    //nothing to do\r\n  }\r\n\r\n  /**\r\n   * abstract method for cloning a ranking\r\n   * @param existing\r\n   * @returns {null}\r\n   */\r\n  abstract cloneRanking(existing?: Ranking): Ranking;\r\n\r\n  /**\r\n   * adds a column to a ranking described by its column description\r\n   * @param ranking the ranking to add the column to\r\n   * @param desc the description of the column\r\n   * @return {Column} the newly created column or null\r\n   */\r\n  push(ranking: Ranking, desc: IColumnDesc): Column | null {\r\n    const r = this.create(desc);\r\n    if (r) {\r\n      ranking.push(r);\r\n      return r;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * adds a column to a ranking described by its column description\r\n   * @param ranking the ranking to add the column to\r\n   * @param index the position to insert the column\r\n   * @param desc the description of the column\r\n   * @return {Column} the newly created column or null\r\n   */\r\n  insert(ranking: Ranking, index: number, desc: IColumnDesc) {\r\n    const r = this.create(desc);\r\n    if (r) {\r\n      ranking.insert(r, index);\r\n      return r;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * creates a new unique id for a column\r\n   * @returns {string}\r\n   */\r\n  private nextId() {\r\n    return `col${this.uid++}`;\r\n  }\r\n\r\n  protected abstract rankAccessor(row: IDataRow, id: string, desc: IColumnDesc, ranking: Ranking): number;\r\n\r\n  private fixDesc(desc: IColumnDesc) {\r\n    //hacks for provider dependent descriptors\r\n    if (desc.type === 'rank') {\r\n      (<IValueColumnDesc<number>>desc).accessor = this.rankAccessor.bind(this);\r\n    } else if (desc.type === 'selection') {\r\n      (<ISelectionColumnDesc>desc).accessor = (row: IDataRow) => this.isSelected(row.i);\r\n      (<ISelectionColumnDesc>desc).setter = (row: IDataRow, value: boolean) => value ? this.select(row.i) : this.deselect(row.i);\r\n      (<ISelectionColumnDesc>desc).setterAll = (rows: IDataRow[], value: boolean) => value ? this.selectAll(rows.map((d) => d.i)) : this.deselectAll(rows.map((d) => d.i));\r\n    } else if (desc.type === 'aggregate') {\r\n      (<IAggregateGroupColumnDesc>desc).isAggregated = (ranking: Ranking, group: IGroup) => this.isAggregated(ranking, group);\r\n      (<IAggregateGroupColumnDesc>desc).setAggregated = (ranking: Ranking, group: IGroup, value: boolean) => this.setAggregated(ranking, group, value);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * creates an internal column model out of the given column description\r\n   * @param desc\r\n   * @returns {Column} the new column or null if it can't be created\r\n   */\r\n  create(desc: IColumnDesc): Column | null {\r\n    this.fixDesc(desc);\r\n    //find by type and instantiate\r\n    const type = this.columnTypes[desc.type];\r\n    if (type) {\r\n      return new type(this.nextId(), desc);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * clones a column by dumping and restoring\r\n   * @param col\r\n   * @returns {Column}\r\n   */\r\n  clone(col: Column) {\r\n    const dump = this.dumpColumn(col);\r\n    return this.restoreColumn(dump);\r\n  }\r\n\r\n  /**\r\n   * restores a column from a dump\r\n   * @param dump\r\n   * @returns {Column}\r\n   */\r\n  restoreColumn(dump: any): Column {\r\n    const create = (d: any) => {\r\n      const desc = this.fromDescRef(d.desc);\r\n      const type = this.columnTypes[desc.type];\r\n      this.fixDesc(desc);\r\n      const c = new type('', desc);\r\n      c.restore(d, create);\r\n      c.assignNewId(this.nextId.bind(this));\r\n      return c;\r\n    };\r\n    return create(dump);\r\n  }\r\n\r\n  /**\r\n   * finds a column in all rankings returning the first match\r\n   * @param idOrFilter by id or by a filter function\r\n   * @returns {Column}\r\n   */\r\n  find(idOrFilter: string | ((col: Column) => boolean)): Column | null {\r\n    //convert to function\r\n    const filter = typeof(idOrFilter) === 'string' ? (col: Column) => col.id === idOrFilter : idOrFilter;\r\n\r\n    for (const ranking of this.rankings) {\r\n      const r = ranking.find(filter);\r\n      if (r) {\r\n        return r;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n  /**\r\n   * dumps this whole provider including selection and the rankings\r\n   * @returns {{uid: number, selection: number[], rankings: *[]}}\r\n   */\r\n  dump(): any {\r\n    return {\r\n      uid: this.uid,\r\n      selection: this.getSelection(),\r\n      aggregations: Array.from(this.aggregations),\r\n      rankings: this.rankings.map((r) => r.dump(this.toDescRef))\r\n    };\r\n  }\r\n\r\n  /**\r\n   * dumps a specific column\r\n   */\r\n  dumpColumn(col: Column) {\r\n    return col.dump(this.toDescRef);\r\n  }\r\n\r\n  /**\r\n   * for better dumping describe reference, by default just return the description\r\n   */\r\n  toDescRef(desc: any): any {\r\n    return desc;\r\n  }\r\n\r\n  /**\r\n   * inverse operation of toDescRef\r\n   */\r\n  fromDescRef(descRef: any): any {\r\n    return descRef;\r\n  }\r\n\r\n  private createHelper = (d: any) => {\r\n    //factory method for restoring a column\r\n    const desc = this.fromDescRef(d.desc);\r\n    let c = null;\r\n    if (desc && desc.type) {\r\n      this.fixDesc(d.desc);\r\n      const type = this.columnTypes[desc.type];\r\n      c = new type(d.id, desc);\r\n      c.restore(d, this.createHelper);\r\n    }\r\n    return c;\r\n  };\r\n\r\n  restoreRanking(dump: any) {\r\n    const ranking = this.cloneRanking();\r\n    ranking.restore(dump, this.createHelper);\r\n    //if no rank column add one\r\n    if (!ranking.children.some((d) => d instanceof RankColumn)) {\r\n      ranking.insert(this.create(createRankDesc())!, 0);\r\n    }\r\n    const idGenerator = this.nextId.bind(this);\r\n    ranking.children.forEach((c) => c.assignNewId(idGenerator));\r\n\r\n    return ranking;\r\n  }\r\n\r\n  restore(dump: any) {\r\n    //clean old\r\n    this.clearRankings();\r\n\r\n    //restore selection\r\n    this.uid = dump.uid || 0;\r\n    if (dump.selection) {\r\n      dump.selection.forEach((s: number) => this.selection.add(s));\r\n    }\r\n    if (dump.aggregations) {\r\n      this.aggregations.clear();\r\n      dump.aggregations.forEach((a: string) => this.aggregations.add(a));\r\n    }\r\n\r\n\r\n    //restore rankings\r\n    if (dump.rankings) {\r\n      dump.rankings.forEach((r: any) => {\r\n        const ranking = this.cloneRanking();\r\n        ranking.restore(r, this.createHelper);\r\n        //if no rank column add one\r\n        if (!ranking.children.some((d) => d instanceof RankColumn)) {\r\n          ranking.insert(this.create(createRankDesc())!, 0);\r\n        }\r\n        this.insertRanking(ranking);\r\n      });\r\n    }\r\n    if (dump.layout) { //we have the old format try to create it\r\n      Object.keys(dump.layout).forEach((key) => {\r\n        this.deriveRanking(dump.layout[key]);\r\n      });\r\n    }\r\n    //assign new ids\r\n    const idGenerator = this.nextId.bind(this);\r\n    this.rankings.forEach((r) => {\r\n      r.children.forEach((c) => c.assignNewId(idGenerator));\r\n    });\r\n  }\r\n\r\n  abstract findDesc(ref: string): IColumnDesc | null;\r\n\r\n  abstract deriveDefault(addSupporType?: boolean): Ranking;\r\n\r\n  /**\r\n   * derives a ranking from an old layout bundle format\r\n   * @param bundle\r\n   */\r\n  private deriveRanking(bundle: any[]) {\r\n    const ranking = this.cloneRanking();\r\n    ranking.clear();\r\n    const toCol = (column: any) => {\r\n      switch (column.type) {\r\n        case 'rank':\r\n          return this.create(createRankDesc());\r\n        case 'selection':\r\n          return this.create(createSelectionDesc());\r\n        case 'group':\r\n          return this.create(createGroupDesc());\r\n        case 'aggregate':\r\n          return this.create(createAggregateDesc());\r\n        case 'actions':\r\n          const actions = this.create(createActionDesc(column.label || 'actions'))!;\r\n          actions.restore(column, this.createHelper);\r\n          return actions;\r\n        case 'stacked':\r\n          //create a stacked one\r\n          const stacked = <StackColumn>this.create(createStackDesc(column.label || 'Combined'))!;\r\n          (column.children || []).forEach((col: any) => {\r\n            const c = toCol(col);\r\n            if (c) {\r\n              stacked.push(c);\r\n            }\r\n          });\r\n          return stacked;\r\n        default: {\r\n          const desc = this.findDesc(column.column);\r\n          if (desc) {\r\n            const r = this.create(desc);\r\n            column.label = column.label || desc.label || (<any>desc).column;\r\n            if (r) {\r\n              r.restore(column, this.createHelper);\r\n            }\r\n            return r;\r\n          }\r\n          return null;\r\n        }\r\n      }\r\n    };\r\n    bundle.forEach((column) => {\r\n      const col = toCol(column);\r\n      if (col) {\r\n        ranking.push(col);\r\n      }\r\n    });\r\n    //if no rank column add one\r\n    if (!ranking.children.some((d) => d instanceof RankColumn)) {\r\n      ranking.insert(this.create(createRankDesc())!, 0);\r\n    }\r\n    this.insertRanking(ranking);\r\n    return ranking;\r\n  }\r\n\r\n  isAggregated(ranking: Ranking, group: IGroup) {\r\n    let g: IGroup | undefined | null = group;\r\n    while (g) {\r\n      const key = `${ranking.id}@${toGroupID(g)}`;\r\n      if (this.aggregations.has(key)) {\r\n        // propagate to leaf\r\n        this.aggregations.add(`${ranking.id}@${toGroupID(group)}`);\r\n        return true;\r\n      }\r\n      g = g.parent;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  private unaggregateParents(ranking: Ranking, group: IGroup) {\r\n    let g: IGroup | undefined | null = group.parent;\r\n    while (g) {\r\n      this.aggregations.delete(`${ranking.id}@${toGroupID(g)}`);\r\n      g = g.parent;\r\n    }\r\n  }\r\n\r\n  setAggregated(ranking: Ranking, group: IGroup, value: boolean) {\r\n    this.unaggregateParents(ranking, group);\r\n    const key = `${ranking.id}@${toGroupID(group)}`;\r\n    const current = this.isAggregated(ranking, group);\r\n    if (current === value) {\r\n      return;\r\n    }\r\n    if (value) {\r\n      this.aggregations.add(key);\r\n    } else {\r\n      this.aggregations.delete(key);\r\n    }\r\n    this.fire([ADataProvider.EVENT_GROUP_AGGREGATION_CHANGED, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], ranking, group, value);\r\n  }\r\n\r\n  aggregateAllOf(ranking: Ranking, aggregateAll: boolean) {\r\n    const groups = ranking.getGroups();\r\n    groups.forEach((group) => {\r\n      this.unaggregateParents(ranking, group);\r\n      const current = this.isAggregated(ranking, group);\r\n      if (current === aggregateAll) {\r\n        return;\r\n      }\r\n      const key = `${ranking.id}@${toGroupID(group)}`;\r\n      if (aggregateAll) {\r\n        this.aggregations.add(key);\r\n      } else {\r\n        this.aggregations.delete(key);\r\n      }\r\n    });\r\n    this.fire([ADataProvider.EVENT_GROUP_AGGREGATION_CHANGED, ADataProvider.EVENT_DIRTY_VALUES, ADataProvider.EVENT_DIRTY], ranking, groups, aggregateAll);\r\n  }\r\n\r\n  /**\r\n   * sorts the given ranking and eventually return a ordering of the data items\r\n   * @param ranking\r\n   * @return {Promise<any>}\r\n   */\r\n  abstract sort(ranking: Ranking): Promise<IOrderedGroup[]> | IOrderedGroup[];\r\n\r\n  /**\r\n   * returns a view in the order of the given indices\r\n   * @param indices\r\n   * @return {Promise<any>}\r\n   */\r\n  abstract view(indices: number[]): Promise<any[]> | any[];\r\n\r\n  abstract fetch(orders: number[][]): (Promise<IDataRow> | IDataRow)[][];\r\n\r\n  /**\r\n   * returns a data sample used for the mapping editor\r\n   * @param col\r\n   * @return {Promise<any>}\r\n   */\r\n  abstract mappingSample(col: Column): Promise<number[]> | number[];\r\n\r\n  /**\r\n   * helper for computing statistics\r\n   * @param indices\r\n   * @returns {{stats: (function(INumberColumn): *), hist: (function(ICategoricalColumn): *)}}\r\n   */\r\n  abstract stats(indices: number[]): IStatsBuilder;\r\n\r\n  /**\r\n   * is the given row selected\r\n   * @param index\r\n   * @return {boolean}\r\n   */\r\n  isSelected(index: number) {\r\n    return this.selection.has(index);\r\n  }\r\n\r\n  /**\r\n   * also select the given row\r\n   * @param index\r\n   */\r\n  select(index: number) {\r\n    if (this.selection.has(index)) {\r\n      return; //no change\r\n    }\r\n    if (!this.multiSelections && this.selection.size > 0) {\r\n      this.selection.clear();\r\n    }\r\n    this.selection.add(index);\r\n    this.fire(ADataProvider.EVENT_SELECTION_CHANGED, this.getSelection());\r\n  }\r\n\r\n  /**\r\n   * hook for selecting elements matching the given arguments\r\n   * @param search\r\n   * @param col\r\n   */\r\n  abstract searchAndJump(search: string | RegExp, col: Column): void;\r\n\r\n  jumpToNearest(indices: number[]) {\r\n    if (indices.length === 0) {\r\n      return;\r\n    }\r\n    this.fire(ADataProvider.EVENT_JUMP_TO_NEAREST, indices);\r\n  }\r\n\r\n  /**\r\n   * also select all the given rows\r\n   * @param indices\r\n   */\r\n  selectAll(indices: number[]) {\r\n    if (indices.every((i) => this.selection.has(i))) {\r\n      return; //no change\r\n    }\r\n    if (!this.multiSelections) {\r\n      this.selection.clear();\r\n      indices = indices.slice(0, 1); //just the first one\r\n    }\r\n    indices.forEach((index) => {\r\n      this.selection.add(index);\r\n    });\r\n    this.fire(ADataProvider.EVENT_SELECTION_CHANGED, this.getSelection());\r\n  }\r\n\r\n  selectAllOf(ranking: Ranking) {\r\n    this.setSelection(ranking.getOrder());\r\n  }\r\n\r\n  /**\r\n   * set the selection to the given rows\r\n   * @param indices\r\n   */\r\n  setSelection(indices: number[]) {\r\n    if (indices.length === 0) {\r\n      return this.clearSelection();\r\n    }\r\n    if (this.selection.size === indices.length && indices.every((i) => this.selection.has(i))) {\r\n      return; //no change\r\n    }\r\n    this.selection.clear();\r\n    this.selectAll(indices);\r\n  }\r\n\r\n  /**\r\n   * toggles the selection of the given data index\r\n   * @param index\r\n   * @param additional just this element or all\r\n   * @returns {boolean} whether the index is currently selected\r\n   */\r\n  toggleSelection(index: number, additional = false) {\r\n    if (this.isSelected(index)) {\r\n      if (additional) {\r\n        this.deselect(index);\r\n      } else {\r\n        this.clearSelection();\r\n      }\r\n      return false;\r\n    }\r\n    if (additional) {\r\n      this.select(index);\r\n    } else {\r\n      this.setSelection([index]);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * deselect the given row\r\n   * @param index\r\n   */\r\n  deselect(index: number) {\r\n    if (!this.selection.has(index)) {\r\n      return; //no change\r\n    }\r\n    this.selection.delete(index);\r\n    this.fire(ADataProvider.EVENT_SELECTION_CHANGED, this.getSelection());\r\n  }\r\n\r\n  /**\r\n   * also select all the given rows\r\n   * @param indices\r\n   */\r\n  deselectAll(indices: number[]) {\r\n    if (indices.every((i) => !this.selection.has(i))) {\r\n      return; //no change\r\n    }\r\n    indices.forEach((index) => {\r\n      this.selection.delete(index);\r\n    });\r\n    this.fire(ADataProvider.EVENT_SELECTION_CHANGED, this.getSelection());\r\n  }\r\n\r\n  /**\r\n   * returns a promise containing the selected rows\r\n   * @return {Promise<any[]>}\r\n   */\r\n  selectedRows(): Promise<any[]> | any[] {\r\n    if (this.selection.size === 0) {\r\n      return [];\r\n    }\r\n    return this.view(this.getSelection());\r\n  }\r\n\r\n  /**\r\n   * returns the currently selected indices\r\n   * @returns {Array}\r\n   */\r\n  getSelection() {\r\n    return Array.from(this.selection);\r\n  }\r\n\r\n  /**\r\n   * clears the selection\r\n   */\r\n  clearSelection() {\r\n    if (this.selection.size === 0) {\r\n      return; //no change\r\n    }\r\n    this.selection.clear();\r\n    this.fire(ADataProvider.EVENT_SELECTION_CHANGED, [], false);\r\n  }\r\n\r\n  /**\r\n   * utility to export a ranking to a table with the given separator\r\n   * @param ranking\r\n   * @param options\r\n   * @returns {Promise<string>}\r\n   */\r\n  exportTable(ranking: Ranking, options: Partial<IExportOptions> = {}) {\r\n    return Promise.resolve(this.view(ranking.getOrder())).then((data) => exportRanking(ranking, data, options));\r\n  }\r\n}\r\n\r\nexport default ADataProvider;\r\n","import {Category, toolbar} from './annotations';\r\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport ValueColumn, {dataLoaded} from './ValueColumn';\r\nimport {\r\n  compareCategory,\r\n  ICategoricalColumn, ICategoricalColumnDesc, ICategoricalFilter, ICategory,\r\n  isEqualCategoricalFilter, isCategoryIncluded, toCategories, toCategory,\r\n} from './ICategoricalColumn';\r\nimport {IDataRow, IGroup} from './interfaces';\r\nimport {missingGroup} from './missing';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\n/**\r\n * emitted when the filter property changes\r\n * @asMemberOf CategoricalColumn\r\n * @event\r\n */\r\nexport declare function filterChanged(previous: ICategoricalFilter | null, current: ICategoricalFilter | null): void;\r\n\r\n/**\r\n * column for categorical values\r\n */\r\n@toolbar('group', 'groupBy', 'filterCategorical')\r\n@Category('categorical')\r\nexport default class CategoricalColumn extends ValueColumn<string> implements ICategoricalColumn {\r\n  static readonly EVENT_FILTER_CHANGED = 'filterChanged';\r\n\r\n  readonly categories: ICategory[];\r\n\r\n  private readonly missingCategory: ICategory | null;\r\n\r\n  private readonly lookup = new Map<string, Readonly<ICategory>>();\r\n  /**\r\n   * set of categories to show\r\n   * @type {null}\r\n   * @private\r\n   */\r\n  private currentFilter: ICategoricalFilter | null = null;\r\n\r\n  constructor(id: string, desc: Readonly<ICategoricalColumnDesc>) {\r\n    super(id, desc);\r\n    this.categories = toCategories(desc);\r\n    this.missingCategory = desc.missingCategory ? toCategory(desc.missingCategory, NaN) : null;\r\n    this.categories.forEach((d) => this.lookup.set(d.name, d));\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([CategoricalColumn.EVENT_FILTER_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof CategoricalColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\r\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(<any>type, listener);\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    const v = this.getCategory(row);\r\n    return v ? v.name : null;\r\n  }\r\n\r\n  getCategory(row: IDataRow) {\r\n    const v = super.getValue(row);\r\n    if (!v) {\r\n      return this.missingCategory;\r\n    }\r\n    const vs = String(v);\r\n    return this.lookup.has(vs) ? this.lookup.get(vs)! : this.missingCategory;\r\n  }\r\n\r\n  get dataLength() {\r\n    return this.categories.length;\r\n  }\r\n\r\n  get labels() {\r\n    return this.categories.map((d) => d.label);\r\n  }\r\n\r\n  getLabel(row: IDataRow) {\r\n    const v = this.getCategory(row);\r\n    return v ? v.label : '';\r\n  }\r\n\r\n  getColor(row: IDataRow) {\r\n    const v = this.getCategory(row);\r\n    return v ? v.color : this.color;\r\n  }\r\n\r\n  getValues(row: IDataRow) {\r\n    const v = this.getCategory(row);\r\n    return this.categories.map((d) => d === v);\r\n  }\r\n\r\n  getLabels(row: IDataRow) {\r\n    return this.getValues(row).map(String);\r\n  }\r\n\r\n  getMap(row: IDataRow) {\r\n    const cats = this.categories;\r\n    return this.getValues(row).map((value, i) => ({key: cats[i].label, value}));\r\n  }\r\n\r\n  getMapLabel(row: IDataRow) {\r\n    const cats = this.categories;\r\n    return this.getLabels(row).map((value, i) => ({key: cats[i].label, value}));\r\n  }\r\n\r\n  getSet(row: IDataRow) {\r\n    const cat = this.getCategory(row);\r\n    const r = new Set<ICategory>();\r\n    if (cat && cat !== this.missingCategory) {\r\n      r.add(cat);\r\n    }\r\n    return r;\r\n  }\r\n\r\n  isMissing(row: IDataRow) {\r\n    return this.getCategory(row) === this.missingCategory;\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any): any {\r\n    const r = super.dump(toDescRef);\r\n    r.filter = this.currentFilter;\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    super.restore(dump, factory);\r\n    if (!('filter' in dump)) {\r\n      this.currentFilter = null;\r\n      return;\r\n    }\r\n    const bak = dump.filter;\r\n    if (typeof bak === 'string' || Array.isArray(bak)) {\r\n      this.currentFilter = {filter: bak, filterMissing: false};\r\n    } else {\r\n      this.currentFilter = bak;\r\n    }\r\n  }\r\n\r\n  isFiltered() {\r\n    return this.currentFilter != null;\r\n  }\r\n\r\n  filter(row: IDataRow): boolean {\r\n    return isCategoryIncluded(this.currentFilter, this.getCategory(row));\r\n  }\r\n\r\n  getFilter() {\r\n    return this.currentFilter == null ? null : Object.assign({}, this.currentFilter);\r\n  }\r\n\r\n  setFilter(filter: ICategoricalFilter | null) {\r\n    if (isEqualCategoricalFilter(this.currentFilter, filter)) {\r\n      return;\r\n    }\r\n    this.fire([CategoricalColumn.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.currentFilter, this.currentFilter = filter);\r\n  }\r\n\r\n  compare(a: IDataRow, b: IDataRow) {\r\n    return compareCategory(this.getCategory(a), this.getCategory(b));\r\n  }\r\n\r\n  group(row: IDataRow): IGroup {\r\n    const cat = this.getCategory(row);\r\n    if (!cat) {\r\n      return missingGroup;\r\n    }\r\n    return {name: cat.label, color: cat.color};\r\n  }\r\n\r\n  getGroupRenderer() {\r\n    const current = super.getGroupRenderer();\r\n    if (current === this.desc.type && this.isGroupedBy() >= 0) {\r\n      // still the default and the stratification criteria\r\n      return 'catdistributionbar';\r\n    }\r\n    return current;\r\n  }\r\n}\r\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n","import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","var matcher = function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n};\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!element.matches) {\n    var vendorMatches = element.webkitMatchesSelector\n        || element.msMatchesSelector\n        || element.mozMatchesSelector\n        || element.oMatchesSelector;\n    matcher = function(selector) {\n      return function() {\n        return vendorMatches.call(this, selector);\n      };\n    };\n  }\n}\n\nexport default matcher;\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like “__proto__”.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don’t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  return this.parentNode.insertBefore(this.cloneNode(false), this.nextSibling);\n}\n\nfunction selection_cloneDeep() {\n  return this.parentNode.insertBefore(this.cloneNode(true), this.nextSibling);\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_clone from \"./clone\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n","import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && next !== node.nextSibling) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","var nextId = 0;\n\nexport default function local() {\n  return new Local;\n}\n\nfunction Local() {\n  this._ = \"@\" + (++nextId).toString(36);\n}\n\nLocal.prototype = local.prototype = {\n  constructor: Local,\n  get: function(node) {\n    var id = this._;\n    while (!(id in node)) if (!(node = node.parentNode)) return;\n    return node[id];\n  },\n  set: function(node, value) {\n    return node[this._] = value;\n  },\n  remove: function(node) {\n    return this._ in node && delete node[this._];\n  },\n  toString: function() {\n    return this._;\n  }\n};\n","import {event} from \"./selection/on\";\n\nexport default function() {\n  var current = event, source;\n  while (source = current.sourceEvent) current = source;\n  return current;\n}\n","export default function(node, event) {\n  var svg = node.ownerSVGElement || node;\n\n  if (svg.createSVGPoint) {\n    var point = svg.createSVGPoint();\n    point.x = event.clientX, point.y = event.clientY;\n    point = point.matrixTransform(node.getScreenCTM().inverse());\n    return [point.x, point.y];\n  }\n\n  var rect = node.getBoundingClientRect();\n  return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n}\n","import sourceEvent from \"./sourceEvent\";\nimport point from \"./point\";\n\nexport default function(node) {\n  var event = sourceEvent();\n  if (event.changedTouches) event = event.changedTouches[0];\n  return point(node, event);\n}\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\n      : new Selection([selector == null ? [] : selector], root);\n}\n","import sourceEvent from \"./sourceEvent\";\nimport point from \"./point\";\n\nexport default function(node, touches, identifier) {\n  if (arguments.length < 3) identifier = touches, touches = sourceEvent().changedTouches;\n\n  for (var i = 0, n = touches ? touches.length : 0, touch; i < n; ++i) {\n    if ((touch = touches[i]).identifier === identifier) {\n      return point(node, touch);\n    }\n  }\n\n  return null;\n}\n","import {LazyBoxPlotData} from '../internal';\r\nimport {IOrderedGroup} from './Group';\r\nimport {IDataRow, IGroup, IGroupParent} from './interfaces';\r\n/** @internal */\r\nimport {default as INumberColumn, INumberFilter, numberCompare} from './INumberColumn';\r\n\r\n\r\nexport function patternFunction(pattern: string, ...args: string[]) {\r\n  return new Function('value', ...args, `\r\n  const escapedValue = encodeURIComponent(String(value));\r\n  return \\`${pattern}\\`;\r\n `);\r\n}\r\n\r\n/** @internal */\r\nexport function isDummyNumberFilter(filter: INumberFilter) {\r\n  return !filter.filterMissing && !isFinite(filter.min) && !isFinite(filter.max);\r\n}\r\n\r\n/** @internal */\r\nexport function restoreFilter(v: INumberFilter): INumberFilter {\r\n  return {\r\n    min: v.min != null && isFinite(v.min) ? v.min : -Infinity,\r\n    max: v.max != null && isFinite(v.max) ? v.max : +Infinity,\r\n    filterMissing: v.filterMissing\r\n  };\r\n}\r\n\r\n\r\n/** @internal */\r\nexport function joinGroups(groups: IGroup[]): IGroup {\r\n  console.assert(groups.length > 0);\r\n  if (groups.length === 1) {\r\n    return groups[0];\r\n  }\r\n  // create a chain\r\n  const parents: IGroupParent[] = groups.map((g) => Object.assign({subGroups: []}, g));\r\n  parents.slice(1).forEach((g, i) => {\r\n    g.parent = parents[i];\r\n    parents[i].subGroups.push(g);\r\n  });\r\n  const g = {\r\n    name: parents.map((d) => d.name).join(' ∩ '),\r\n    color: parents[0].color,\r\n    parent: parents[parents.length - 1]\r\n  };\r\n  g.parent.subGroups.push(g);\r\n  return g;\r\n}\r\n\r\n/** @internal */\r\nexport function toGroupID(group: IGroup) {\r\n  return group.name;\r\n}\r\n\r\n/** @internal */\r\nexport function unifyParents<T extends IOrderedGroup>(groups: T[]) {\r\n  if (groups.length <= 1) {\r\n    return;\r\n  }\r\n  const lookup = new Map<string, IGroupParent>();\r\n\r\n  const resolve = (g: IGroupParent): { g: IGroupParent, id: string } => {\r\n    let id = g.name;\r\n    if (g.parent) {\r\n      const parent = resolve(g.parent);\r\n      g.parent = parent.g;\r\n      id = `${parent.id}.$[id}`;\r\n    }\r\n    // ensure there is only one instance per id (i.e. share common parents\r\n    if (lookup.has(id)) {\r\n      return {g: lookup.get(id)!, id};\r\n    }\r\n    if (g.parent) {\r\n      g.parent.subGroups.push(g);\r\n    }\r\n    g.subGroups = []; // clear old children\r\n    lookup.set(id, g);\r\n    return {g, id};\r\n  };\r\n  // resolve just parents\r\n  groups.forEach((g) => {\r\n    if (g.parent) {\r\n      g.parent = resolve(g.parent).g;\r\n      g.parent.subGroups.push(g);\r\n    }\r\n  });\r\n}\r\n\r\n// based on https://github.com/d3/d3-scale-chromatic#d3-scale-chromatic\r\nconst schemeCategory10 = ['#1f77b4', '#ff7f0e', '#2ca02c', '#d62728', '#9467bd', '#8c564b', '#e377c2', '#7f7f7f', '#bcbd22', '#17becf'];\r\nconst set3 = ['#8dd3c7', '#ffffb3', '#bebada', '#fb8072', '#80b1d3', '#fdb462', '#b3de69', '#fccde5', '#d9d9d9', '#bc80bd', '#ccebc5', '#ffed6f'];\r\nconst colors = schemeCategory10.concat(set3);\r\n\r\n/** @internal */\r\nexport function colorPool() {\r\n  let act = 0;\r\n  return () => colors[(act++) % colors.length];\r\n}\r\n\r\n\r\n/** @internal */\r\nexport function medianIndex(rows: IDataRow[], col: INumberColumn): number {\r\n  //return the median row\r\n  const data = rows.map((r, i) => ({i, v: col.getNumber(r), m: col.isMissing(r)}));\r\n  const sorted = data.filter((r) => !r.m).sort((a, b) => numberCompare(a.v, b.v));\r\n  const index = sorted[Math.floor(sorted.length / 2.0)];\r\n  if (index === undefined) {\r\n    return 0; //error case\r\n  }\r\n  return index.i;\r\n}\r\n\r\n/** @internal */\r\nexport function groupCompare(a: IDataRow[], b: IDataRow[], col: INumberColumn, sortMethod: keyof LazyBoxPlotData) {\r\n  const va = new LazyBoxPlotData(a.map((row) => col.getNumber(row)));\r\n  const vb = new LazyBoxPlotData(b.map((row) => col.getNumber(row)));\r\n\r\n  return numberCompare(<number>va[sortMethod], <number>vb[sortMethod]);\r\n}\r\n\r\n\r\n","import ArrayColumn, {IArrayColumnDesc} from './ArrayColumn';\r\nimport {ISetColumn, toCategory} from './ICategoricalColumn';\r\nimport {IDataRow} from './interfaces';\r\nimport {FIRST_IS_MISSING} from './missing';\r\n\r\nexport declare type IBooleansColumnDesc = IArrayColumnDesc<boolean>;\r\n\r\nexport default class BooleansColumn extends ArrayColumn<boolean> implements ISetColumn {\r\n  constructor(id: string, desc: Readonly<IBooleansColumnDesc>) {\r\n    super(id, desc);\r\n    this.setDefaultRenderer('upset');\r\n  }\r\n\r\n  get categories() {\r\n    return this.labels.map((d, i) => toCategory(d, i));\r\n  }\r\n\r\n  getSet(row: IDataRow) {\r\n    const vs = this.getValues(row);\r\n    return new Set(this.categories.filter((_, i) => vs[i]));\r\n  }\r\n\r\n  compare(a: IDataRow, b: IDataRow) {\r\n    const aVal = this.getValue(a);\r\n    const bVal = this.getValue(b);\r\n    if (aVal == null) {\r\n      return bVal == null ? 0 : FIRST_IS_MISSING;\r\n    }\r\n    if (bVal == null) {\r\n      return -FIRST_IS_MISSING;\r\n    }\r\n\r\n    const aCat = aVal.filter((x) => x).length;\r\n    const bCat = bVal.filter((x) => x).length;\r\n    return (aCat - bCat);\r\n  }\r\n}\r\n","import {ICategoricalDesc, ICategory, toCategories, toCategory} from './ICategoricalColumn';\r\nimport {IDataRow} from './interfaces';\r\nimport MapColumn, {IMapColumnDesc} from './MapColumn';\r\n\r\nexport declare type ICategoricalMapColumnDesc = ICategoricalDesc & IMapColumnDesc<string | null>;\r\n\r\nexport default class CategoricalMapColumn extends MapColumn<string | null> {\r\n  readonly categories: ICategory[];\r\n\r\n  private readonly missingCategory: ICategory | null;\r\n\r\n  private readonly lookup = new Map<string, Readonly<ICategory>>();\r\n\r\n  constructor(id: string, desc: Readonly<ICategoricalMapColumnDesc>) {\r\n    super(id, desc);\r\n    this.categories = toCategories(desc);\r\n    this.missingCategory = desc.missingCategory ? toCategory(desc.missingCategory, NaN) : null;\r\n    this.categories.forEach((d) => this.lookup.set(d.name, d));\r\n  }\r\n\r\n\r\n  private parseValue(v: any) {\r\n    if (!v) {\r\n      return this.missingCategory;\r\n    }\r\n    const vs = String(v);\r\n    return this.lookup.has(vs) ? this.lookup.get(vs)! : this.missingCategory;\r\n  }\r\n\r\n  getCategories(row: IDataRow) {\r\n    return super.getValue(row).map(({key, value}) => ({\r\n      key,\r\n      value: this.parseValue(value)\r\n    }));\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    return this.getCategories(row).map(({key, value}) => ({\r\n      key,\r\n      value: value ? value.name : null\r\n    }));\r\n  }\r\n\r\n  getLabels(row: IDataRow) {\r\n    return this.getCategories(row).map(({key, value}) => ({\r\n      key,\r\n      value: value ? value.label : ''\r\n    }));\r\n  }\r\n}\r\n","import ArrayColumn, {IArrayColumnDesc} from './ArrayColumn';\r\nimport {ICategoricalDesc, ICategory, toCategories, toCategory} from './ICategoricalColumn';\r\nimport {IDataRow} from './interfaces';\r\n\r\nexport declare type ICategoricalsColumnDesc = ICategoricalDesc & IArrayColumnDesc<string | null>;\r\n\r\n/**\r\n * a string column with optional alignment\r\n */\r\nexport default class CategoricalsColumn extends ArrayColumn<string | null> {\r\n  readonly categories: ICategory[];\r\n\r\n  private readonly missingCategory: ICategory | null;\r\n\r\n  private readonly lookup = new Map<string, Readonly<ICategory>>();\r\n\r\n  constructor(id: string, desc: Readonly<ICategoricalsColumnDesc>) {\r\n    super(id, desc);\r\n    this.categories = toCategories(desc);\r\n    this.missingCategory = desc.missingCategory ? toCategory(desc.missingCategory, NaN) : null;\r\n    this.categories.forEach((d) => this.lookup.set(d.name, d));\r\n  }\r\n\r\n  getCategories(row: IDataRow) {\r\n    return super.getValues(row).map((v) => {\r\n      if (!v) {\r\n        return this.missingCategory;\r\n      }\r\n      const vs = String(v);\r\n      return this.lookup.has(vs) ? this.lookup.get(vs)! : this.missingCategory;\r\n    });\r\n  }\r\n\r\n  getSet(row: IDataRow) {\r\n    const r = new Set(this.getCategories(row));\r\n    r.delete(this.missingCategory);\r\n    return r;\r\n  }\r\n\r\n  getValues(row: IDataRow) {\r\n    return this.getCategories(row).map((v) => v ? v.name : null);\r\n  }\r\n\r\n  getLabels(row: IDataRow) {\r\n    return this.getCategories(row).map((v) => v ? v.label : '');\r\n  }\r\n}\r\n","import {timeFormat, timeParse} from 'd3-time-format';\r\nimport {Category} from './annotations';\r\nimport {IDataRow} from './interfaces';\r\nimport {FIRST_IS_MISSING, isMissingValue} from './missing';\r\nimport ValueColumn, {IValueColumnDesc} from './ValueColumn';\r\n\r\nexport interface IDateDesc {\r\n  /**\r\n   * d3 formatting option\r\n   * @default %x\r\n   */\r\n  dateFormat?: string;\r\n\r\n  /**\r\n   * d3 formation option\r\n   * @dfeault dateFormat\r\n   */\r\n  dateParse?: string;\r\n}\r\n\r\nexport declare type IDateColumnDesc = IValueColumnDesc<Date> & IDateDesc;\r\n\r\n@Category('date')\r\nexport default class DateColumn extends ValueColumn<Date> {\r\n  private readonly format: (date: Date) => string;\r\n  private readonly parse: (date: string) => Date | null;\r\n\r\n  constructor(id: string, desc: Readonly<IDateColumnDesc>) {\r\n    super(id, desc);\r\n    this.format = timeFormat(desc.dateFormat || '%x');\r\n    this.parse = desc.dateParse ? timeParse(desc.dateParse) : timeParse(desc.dateFormat || '%x');\r\n    this.setDefaultRenderer('default');\r\n  }\r\n\r\n  getValue(row: IDataRow): Date | null {\r\n    const v = super.getValue(row);\r\n    if (isMissingValue(v)) {\r\n      return null;\r\n    }\r\n    if (v instanceof Date) {\r\n      return v;\r\n    }\r\n    return this.parse(String(v));\r\n  }\r\n\r\n  getLabel(row: IDataRow) {\r\n    const v = this.getValue(row);\r\n    if (!(v instanceof Date)) {\r\n      return '';\r\n    }\r\n    return this.format(v);\r\n  }\r\n\r\n  compare(a: IDataRow, b: IDataRow) {\r\n    const av = this.getValue(a);\r\n    const bv = this.getValue(b);\r\n    if (av === bv) {\r\n      return 0;\r\n    }\r\n    if (!(av instanceof Date)) {\r\n      return (bv instanceof Date) ? FIRST_IS_MISSING : 0;\r\n    }\r\n    if (!(bv instanceof Date)) {\r\n      return FIRST_IS_MISSING * -1;\r\n    }\r\n    return av.getTime() - bv.getTime();\r\n  }\r\n}\r\n","import {timeFormat, timeParse} from 'd3-time-format';\r\nimport {IDateDesc} from './DateColumn';\r\nimport {IKeyValue} from './IArrayColumn';\r\nimport {IDataRow} from './interfaces';\r\nimport MapColumn, {IMapColumnDesc} from './MapColumn';\r\nimport {isMissingValue} from './missing';\r\n\r\nexport declare type IDateMapColumnDesc = IDateDesc & IMapColumnDesc<Date | null>;\r\n\r\n/**\r\n * a string column with optional alignment\r\n */\r\n\r\nexport default class DatesMapColumn extends MapColumn<Date | null> {\r\n  private readonly format: (date: Date) => string;\r\n  private readonly parse: (date: string) => Date | null;\r\n\r\n  constructor(id: string, desc: Readonly<IDateMapColumnDesc>) {\r\n    super(id, desc);\r\n    this.format = timeFormat(desc.dateFormat || '%x');\r\n    this.parse = desc.dateParse ? timeParse(desc.dateParse) : timeParse(desc.dateFormat || '%x');\r\n    this.setDefaultRenderer('default');\r\n  }\r\n\r\n  private parseValue(v: any) {\r\n    if (isMissingValue(v)) {\r\n      return null;\r\n    }\r\n    if (v instanceof Date) {\r\n      return v;\r\n    }\r\n    return this.parse(String(v));\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    return super.getValue(row).map(({key, value}) => ({\r\n      key,\r\n      value: this.parseValue(value)\r\n    }));\r\n  }\r\n\r\n  getLabels(row: IDataRow): IKeyValue<string>[] {\r\n    return this.getValue(row).map(({key, value}) => ({\r\n      key,\r\n      value: (value instanceof Date) ? this.format(value) : ''\r\n    }));\r\n  }\r\n}\r\n","import {LazyBoxPlotData} from '../internal';\r\nimport {toolbar, SortByDefault, dialogAddons} from './annotations';\r\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport ValueColumn, {dataLoaded} from './ValueColumn';\r\nimport {IKeyValue} from './IArrayColumn';\r\nimport {IDataRow} from './interfaces';\r\nimport {isDummyNumberFilter, restoreFilter} from './internal';\r\nimport {\r\n  compareBoxPlot, DEFAULT_FORMATTER, EAdvancedSortMethod, getBoxPlotNumber, IAdvancedBoxPlotColumn, INumberDesc,\r\n  INumberFilter, noNumberFilter\r\n} from './INumberColumn';\r\nimport {default as MapColumn, IMapColumnDesc} from './MapColumn';\r\nimport {createMappingFunction, IMappingFunction, restoreMapping, ScaleMappingFunction} from './MappingFunction';\r\nimport {isMissingValue} from './missing';\r\nimport NumberColumn, {colorMappingChanged} from './NumberColumn';\r\nimport {IAdvancedBoxPlotData} from '../internal/math';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\nimport {IColorMappingFunction, restoreColorMapping, createColorMappingFunction} from './ColorMappingFunction';\r\n\r\n\r\nexport interface INumberMapDesc extends INumberDesc {\r\n  readonly sort?: EAdvancedSortMethod;\r\n}\r\n\r\nexport declare type INumberMapColumnDesc = INumberMapDesc & IMapColumnDesc<number>;\r\n\r\n/**\r\n * emitted when the mapping property changes\r\n * @asMemberOf NumberMapColumn\r\n * @event\r\n */\r\nexport declare function mappingChanged(previous: IMappingFunction, current: IMappingFunction): void;\r\n\r\n/**\r\n * emitted when the sort method property changes\r\n * @asMemberOf NumberMapColumn\r\n * @event\r\n */\r\nexport declare function sortMethodChanged(previous: EAdvancedSortMethod, current: EAdvancedSortMethod): void;\r\n\r\n\r\n@toolbar('filterMapped', 'colorMapped')\r\n@dialogAddons('sort', 'sortNumbers')\r\n@SortByDefault('descending')\r\nexport default class NumberMapColumn extends MapColumn<number> implements IAdvancedBoxPlotColumn {\r\n  static readonly EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\r\n  static readonly EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\r\n  static readonly EVENT_SORTMETHOD_CHANGED = NumberColumn.EVENT_SORTMETHOD_CHANGED;\r\n\r\n  private sort: EAdvancedSortMethod;\r\n  private mapping: IMappingFunction;\r\n  private original: IMappingFunction;\r\n  private colorMapping: IColorMappingFunction;\r\n  /**\r\n   * currently active filter\r\n   * @type {{min: number, max: number}}\r\n   * @private\r\n   */\r\n  private currentFilter: INumberFilter = noNumberFilter();\r\n\r\n  constructor(id: string, desc: Readonly<INumberMapColumnDesc>) {\r\n    super(id, desc);\r\n    this.mapping = restoreMapping(desc);\r\n    this.original = this.mapping.clone();\r\n    this.colorMapping = restoreColorMapping(this.color, desc);\r\n    this.sort = desc.sort || EAdvancedSortMethod.median;\r\n    this.setDefaultRenderer('mapbars');\r\n  }\r\n\r\n  compare(a: IDataRow, b: IDataRow): number {\r\n    return compareBoxPlot(this, a, b);\r\n  }\r\n\r\n  getBoxPlotData(row: IDataRow): IAdvancedBoxPlotData | null {\r\n    const data = this.getRawValue(row);\r\n    if (data == null) {\r\n      return null;\r\n    }\r\n    return new LazyBoxPlotData(data.map((d) => d.value), this.mapping);\r\n  }\r\n\r\n  getRange() {\r\n    return this.mapping.getRange(DEFAULT_FORMATTER);\r\n  }\r\n\r\n  getRawBoxPlotData(row: IDataRow): IAdvancedBoxPlotData | null {\r\n    const data = this.getRawValue(row);\r\n    if (data == null) {\r\n      return null;\r\n    }\r\n    return new LazyBoxPlotData(data.map((d) => d.value));\r\n  }\r\n\r\n  getNumber(row: IDataRow): number {\r\n    return getBoxPlotNumber(this, row, 'normalized');\r\n  }\r\n\r\n  getRawNumber(row: IDataRow): number {\r\n    return getBoxPlotNumber(this, row, 'raw');\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    const values = this.getRawValue(row);\r\n    return values.map(({key, value}) => ({key, value: isMissingValue(value) ? NaN : this.mapping.apply(value)}));\r\n  }\r\n\r\n  getRawValue(row: IDataRow): IKeyValue<number>[] {\r\n    const r = super.getValue(row);\r\n    return r == null ? [] : r;\r\n  }\r\n\r\n  getLabels(row: IDataRow) {\r\n    const v = this.getValue(row);\r\n    return v.map(({key, value}) => ({key, value: DEFAULT_FORMATTER(value)}));\r\n  }\r\n\r\n  getSortMethod() {\r\n    return this.sort;\r\n  }\r\n\r\n  setSortMethod(sort: EAdvancedSortMethod) {\r\n    if (this.sort === sort) {\r\n      return;\r\n    }\r\n    this.fire([NumberMapColumn.EVENT_SORTMETHOD_CHANGED], this.sort, this.sort = sort);\r\n    // sort by me if not already sorted by me\r\n    if (!this.isSortedByMe().asc) {\r\n      this.sortByMe();\r\n    }\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any): any {\r\n    const r = super.dump(toDescRef);\r\n    r.sortMethod = this.getSortMethod();\r\n    r.filter = !isDummyNumberFilter(this.currentFilter) ? this.currentFilter : null;\r\n    r.map = this.mapping.dump();\r\n    r.colorMapping = this.colorMapping.dump();\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    super.restore(dump, factory);\r\n    if (dump.sortMethod) {\r\n      this.sort = dump.sortMethod;\r\n    }\r\n    if (dump.filter) {\r\n      this.currentFilter = restoreFilter(dump.filter);\r\n    }\r\n    if (dump.map) {\r\n      this.mapping = createMappingFunction(dump.map);\r\n    } else if (dump.domain) {\r\n      this.mapping = new ScaleMappingFunction(dump.domain, 'linear', dump.range || [0, 1]);\r\n    }\r\n    if (dump.colorMapping) {\r\n      this.colorMapping = createColorMappingFunction(this.color, dump.colorMapping);\r\n    }\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([NumberMapColumn.EVENT_COLOR_MAPPING_CHANGED, NumberMapColumn.EVENT_MAPPING_CHANGED, NumberMapColumn.EVENT_SORTMETHOD_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof NumberMapColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged | null): this;\r\n  on(type: typeof NumberMapColumn.EVENT_MAPPING_CHANGED, listener: typeof mappingChanged | null): this;\r\n  on(type: typeof NumberMapColumn.EVENT_SORTMETHOD_CHANGED, listener: typeof sortMethodChanged | null): this;\r\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(<any>type, listener);\r\n  }\r\n\r\n  getOriginalMapping() {\r\n    return this.original.clone();\r\n  }\r\n\r\n  getMapping() {\r\n    return this.mapping.clone();\r\n  }\r\n\r\n  setMapping(mapping: IMappingFunction) {\r\n    if (this.mapping.eq(mapping)) {\r\n      return;\r\n    }\r\n    this.fire([NumberMapColumn.EVENT_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.mapping.clone(), this.mapping = mapping);\r\n  }\r\n\r\n  getColor(row: IDataRow) {\r\n    return NumberColumn.prototype.getColor.call(this, row);\r\n  }\r\n\r\n  getColorMapping() {\r\n    return this.colorMapping.clone();\r\n  }\r\n\r\n  setColorMapping(mapping: IColorMappingFunction) {\r\n    if (this.colorMapping.eq(mapping)) {\r\n      return;\r\n    }\r\n    this.fire([NumberMapColumn.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\r\n  }\r\n\r\n  isFiltered() {\r\n    return NumberColumn.prototype.isFiltered.call(this);\r\n  }\r\n\r\n  getFilter(): INumberFilter {\r\n    return NumberColumn.prototype.getFilter.call(this);\r\n  }\r\n\r\n  setFilter(value: INumberFilter = {min: -Infinity, max: +Infinity, filterMissing: false}) {\r\n    NumberColumn.prototype.setFilter.call(this, value);\r\n  }\r\n\r\n  filter(row: IDataRow) {\r\n    return NumberColumn.prototype.filter.call(this, row);\r\n  }\r\n}\r\n\r\n","import {Category, toolbar} from './annotations';\r\nimport CategoricalColumn from './CategoricalColumn';\r\nimport Column from './Column';\r\nimport {IArrayColumn} from './IArrayColumn';\r\nimport {ICategoricalDesc, ICategoricalFilter, ICategory, isCategoryIncluded, toCategories} from './ICategoricalColumn';\r\nimport {IDataRow} from './interfaces';\r\nimport {FIRST_IS_MISSING} from './missing';\r\nimport ValueColumn, {IValueColumnDesc} from './ValueColumn';\r\n\r\nexport interface ISetDesc extends ICategoricalDesc {\r\n  separator?: string;\r\n}\r\n\r\nexport declare type ISetColumnDesc = ISetDesc & IValueColumnDesc<string[]>;\r\n\r\n/**\r\n * a string column with optional alignment\r\n */\r\n@toolbar('filterCategorical')\r\n@Category('categorical')\r\nexport default class SetColumn extends ValueColumn<string[]> implements IArrayColumn<boolean> {\r\n  readonly categories: ICategory[];\r\n\r\n  private readonly separator: RegExp;\r\n\r\n  private readonly lookup = new Map<string, Readonly<ICategory>>();\r\n  /**\r\n   * set of categories to show\r\n   * @type {null}\r\n   * @private\r\n   */\r\n  private currentFilter: ICategoricalFilter | null = null;\r\n\r\n  constructor(id: string, desc: Readonly<ISetColumnDesc>) {\r\n    super(id, desc);\r\n    this.separator = new RegExp(desc.separator || ';');\r\n    this.categories = toCategories(desc);\r\n    this.categories.forEach((d) => this.lookup.set(d.name, d));\r\n    this.setDefaultRenderer('upset');\r\n    this.setDefaultGroupRenderer('upset');\r\n  }\r\n\r\n  get labels() {\r\n    return this.categories.map((d) => d.label);\r\n  }\r\n\r\n  get dataLength() {\r\n    return this.categories.length;\r\n  }\r\n\r\n  getValue(row: IDataRow): string[] {\r\n    return this.getCategories(row).map((d) => d.name);\r\n  }\r\n\r\n  getLabel(row: IDataRow) {\r\n    return `(${this.getCategories(row).map((d) => d.label).join(',')})`;\r\n  }\r\n\r\n  private normalize(v: any) {\r\n    if (typeof v === 'string') {\r\n      return v.split(this.separator).map((s) => s.trim());\r\n    }\r\n    if (Array.isArray(v)) {\r\n      return v.map((v) => String(v).trim());\r\n    }\r\n    if (v instanceof Set) {\r\n      return Array.from(v).map(String);\r\n    }\r\n    return [];\r\n  }\r\n\r\n  getSet(row: IDataRow) {\r\n    const sv = this.normalize(super.getValue(row));\r\n    const r = new Set<ICategory>();\r\n    sv.forEach((n) => {\r\n      const cat = this.lookup.get(n);\r\n      if (cat) {\r\n        r.add(cat);\r\n      }\r\n    });\r\n    return r;\r\n  }\r\n\r\n  getCategories(row: IDataRow) {\r\n    return Array.from(this.getSet(row)).sort((a, b) => a.value === b.value ? a.label.localeCompare(b.label) : a.value - b.value);\r\n  }\r\n\r\n  isMissing(row: IDataRow) {\r\n    const s = this.getSet(row);\r\n    return s.size === 0;\r\n  }\r\n\r\n  getValues(row: IDataRow) {\r\n    const s = new Set(this.getSet(row));\r\n    return this.categories.map((d) => s.has(d));\r\n  }\r\n\r\n  getLabels(row: IDataRow) {\r\n    return this.getValues(row).map(String);\r\n  }\r\n\r\n  getMap(row: IDataRow) {\r\n    return this.getCategories(row).map((d) => ({key: d.label, value: true}));\r\n  }\r\n\r\n  getMapLabel(row: IDataRow) {\r\n    return this.getCategories(row).map((d) => ({key: d.label, value: 'true'}));\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any): any {\r\n    const r = super.dump(toDescRef);\r\n    r.filter = this.currentFilter;\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    super.restore(dump, factory);\r\n    if (!('filter' in dump)) {\r\n      this.currentFilter = null;\r\n      return;\r\n    }\r\n    const bak = dump.filter;\r\n    if (typeof bak === 'string' || Array.isArray(bak)) {\r\n      this.currentFilter = {filter: bak, filterMissing: false};\r\n    } else {\r\n      this.currentFilter = bak;\r\n    }\r\n  }\r\n\r\n  isFiltered() {\r\n    return this.currentFilter != null;\r\n  }\r\n\r\n  filter(row: IDataRow): boolean {\r\n    if (!this.currentFilter) {\r\n      return true;\r\n    }\r\n    return Array.from(this.getSet(row)).some((s) => isCategoryIncluded(this.currentFilter, s));\r\n  }\r\n\r\n  getFilter() {\r\n    return CategoricalColumn.prototype.getFilter.call(this);\r\n  }\r\n\r\n  setFilter(filter: ICategoricalFilter | null) {\r\n    return CategoricalColumn.prototype.setFilter.call(this, filter);\r\n  }\r\n\r\n  compare(a: IDataRow, b: IDataRow) {\r\n    const av = this.getSet(a);\r\n    const bv = this.getSet(b);\r\n    if (av.size === 0) {\r\n      return bv.size === 0 ? 0 : FIRST_IS_MISSING;\r\n    }\r\n    if (bv.size === 0) {\r\n      return -FIRST_IS_MISSING;\r\n    }\r\n    if (av.size !== bv.size) {\r\n      return av.size - bv.size;\r\n    }\r\n    // first one having a category wins\r\n    for (const cat of this.categories) {\r\n      if (av.has(cat)) {\r\n        return -1;\r\n      }\r\n      if (bv.has(cat)) {\r\n        return +1;\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n}\r\n","import {toolbar} from './annotations';\r\nimport ArrayColumn, {IArrayColumnDesc, spliceChanged} from './ArrayColumn';\r\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport ValueColumn, {dataLoaded} from './ValueColumn';\r\nimport {IDataRow} from './interfaces';\r\nimport {patternFunction} from './internal';\r\nimport StringColumn, {EAlignment, IStringDesc, patternChanged} from './StringColumn';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\nexport declare type IStringsColumnDesc = IStringDesc & IArrayColumnDesc<string>;\r\n\r\n/**\r\n * a string column with optional alignment\r\n */\r\n@toolbar('search', 'editPattern')\r\nexport default class StringsColumn extends ArrayColumn<string> {\r\n  static readonly EVENT_PATTERN_CHANGED = StringColumn.EVENT_PATTERN_CHANGED;\r\n\r\n  readonly alignment: EAlignment;\r\n  readonly escape: boolean;\r\n  private pattern: string;\r\n  private patternFunction: Function | null = null;\r\n  readonly patternTemplates: string[];\r\n\r\n  constructor(id: string, desc: Readonly<IStringsColumnDesc>) {\r\n    super(id, desc);\r\n    this.setDefaultWidth(200); //by default 200\r\n    this.alignment = <any>desc.alignment || EAlignment.left;\r\n    this.escape = desc.escape !== false;\r\n    this.pattern = desc.pattern || '';\r\n    this.patternTemplates = desc.patternTemplates || [];\r\n  }\r\n\r\n  setPattern(pattern: string) {\r\n    return StringColumn.prototype.setPattern.call(this, pattern);\r\n  }\r\n\r\n  getPattern() {\r\n    return this.pattern;\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([StringsColumn.EVENT_PATTERN_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof StringColumn.EVENT_PATTERN_CHANGED, listener: typeof patternChanged | null): this;\r\n  on(type: typeof ArrayColumn.EVENT_SPLICE_CHANGED, listener: typeof spliceChanged | null): this;\r\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(<any>type, listener);\r\n  }\r\n\r\n  getValues(row: IDataRow) {\r\n    return super.getValues(row).map((v, i) => {\r\n      if (!this.pattern) {\r\n        return v == null ? '' : String(v);\r\n      }\r\n      if (!this.patternFunction) {\r\n        this.patternFunction = patternFunction(this.pattern, 'item', 'index');\r\n      }\r\n      return this.patternFunction.call(this, v, row.v, i);\r\n    });\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any): any {\r\n    const r = super.dump(toDescRef);\r\n    if (this.pattern !== (<any>this.desc).pattern) {\r\n      r.pattern = this.pattern;\r\n    }\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    if (dump.pattern) {\r\n      this.pattern = dump.pattern;\r\n    }\r\n    super.restore(dump, factory);\r\n  }\r\n}\r\n","import Column, {IColumnDesc} from './Column';\r\n\r\n/**\r\n * a default column with no values\r\n */\r\nexport default class DummyColumn extends Column {\r\n\r\n  constructor(id: string, desc: Readonly<IColumnDesc>) {\r\n    super(id, desc);\r\n  }\r\n\r\n  getLabel() {\r\n    return '';\r\n  }\r\n\r\n  getValue() {\r\n    return '';\r\n  }\r\n\r\n  compare() {\r\n    return 0; //can't compare\r\n  }\r\n}\r\n","import ActionColumn from './ActionColumn';\r\nimport AggregateGroupColumn from './AggregateGroupColumn';\r\nimport AnnotateColumn from './AnnotateColumn';\r\nimport BooleanColumn from './BooleanColumn';\r\nimport BooleansColumn from './BooleansColumn';\r\nimport BoxPlotColumn from './BoxPlotColumn';\r\nimport CategoricalColumn from './CategoricalColumn';\r\nimport CategoricalMapColumn from './CategoricalMapColumn';\r\nimport CategoricalsColumn from './CategoricalsColumn';\r\nimport Column from './Column';\r\nimport DateColumn from './DateColumn';\r\nimport DatesColumn from './DatesColumn';\r\nimport DatesMapColumn from './DatesMapColumn';\r\nimport GroupColumn from './GroupColumn';\r\nimport HierarchyColumn from './HierarchyColumn';\r\nimport ImpositionCompositeColumn from './ImpositionCompositeColumn';\r\nimport ImpositionCompositesColumn from './ImpositionCompositesColumn';\r\nimport NestedColumn from './NestedColumn';\r\nimport NumberColumn from './NumberColumn';\r\nimport NumberMapColumn from './NumberMapColumn';\r\nimport NumbersColumn from './NumbersColumn';\r\nimport OrdinalColumn from './OrdinalColumn';\r\nimport RankColumn from './RankColumn';\r\nimport ReduceColumn from './ReduceColumn';\r\nimport ScriptColumn from './ScriptColumn';\r\nimport SelectionColumn from './SelectionColumn';\r\nimport SetColumn from './SetColumn';\r\nimport StackColumn from './StackColumn';\r\nimport StringColumn from './StringColumn';\r\nimport StringMapColumn from './StringMapColumn';\r\nimport StringsColumn from './StringsColumn';\r\nimport ValueColumn, {IValueColumnDesc} from './ValueColumn';\r\nimport ImpositionBoxPlotColumn from './ImpositionBoxPlotColumn';\r\n\r\nexport {isSupportType, Category, SupportType, SortByDefault, Categories, toolbar, dialogAddons} from './annotations';\r\nexport {isMissingValue, isUnknown, FIRST_IS_NAN, FIRST_IS_MISSING, missingGroup} from './missing';\r\nexport * from './Group';\r\nexport * from './interfaces';\r\nexport * from './ICategoricalColumn';\r\nexport * from './INumberColumn';\r\nexport * from './IArrayColumn';\r\nexport * from './MappingFunction';\r\n\r\nexport {default as ActionColumn} from './ActionColumn';\r\nexport * from './ActionColumn';\r\nexport {default as AggregateGroupColumn, createAggregateDesc, IAggregateGroupColumnDesc} from './AggregateGroupColumn';\r\nexport {default as AnnotateColumn} from './AnnotateColumn';\r\nexport {default as ArrayColumn, IArrayColumnDesc, IArrayDesc, ISplicer} from './ArrayColumn';\r\nexport {default as BooleanColumn, IBooleanColumnDesc, IBooleanDesc} from './BooleanColumn';\r\nexport * from './BooleansColumn';\r\nexport {default as BooleansColumn} from './BooleansColumn';\r\nexport {default as BoxPlotColumn, IBoxPlotColumnDesc, IBoxPlotDesc} from './BoxPlotColumn';\r\nexport {default as CategoricalColumn} from './CategoricalColumn';\r\nexport * from './CategoricalMapColumn';\r\nexport {default as CategoricalMapColumn} from './CategoricalMapColumn';\r\nexport * from './CategoricalsColumn';\r\nexport {default as CategoricalsColumn} from './CategoricalsColumn';\r\nexport {default, default as Column, IFlatColumn, IColumnParent, IColumnMetaData, IColumnDesc} from './Column';\r\nexport {default as CompositeColumn, isMultiLevelColumn, IMultiLevelColumn} from './CompositeColumn';\r\nexport * from './CompositeNumberColumn';\r\nexport {default as CompositeNumberColumn} from './CompositeNumberColumn';\r\nexport * from './DateColumn';\r\nexport {default as DateColumn} from './DateColumn';\r\nexport * from './DatesMapColumn';\r\nexport {default as DatesMapColumn} from './DatesMapColumn';\r\nexport * from './DummyColumn';\r\nexport {default as DummyColumn} from './DummyColumn';\r\nexport {default as GroupColumn, createGroupDesc, EGroupSortMethod} from './GroupColumn';\r\nexport {default as HierarchyColumn, ICategoryNode, IPartialCategoryNode, IHierarchyColumnDesc, IHierarchyDesc, ICategoryInternalNode, ICutOffNode, resolveInnerNodes, isHierarchical, deriveHierarchy} from './HierarchyColumn';\r\nexport * from './ImpositionBoxPlotColumn';\r\nexport {default as ImpositionBoxPlotColumn} from './ImpositionBoxPlotColumn';\r\nexport * from './ImpositionCompositeColumn';\r\nexport {default as ImpositionCompositeColumn} from './ImpositionCompositeColumn';\r\nexport * from './ImpositionCompositesColumn';\r\nexport {default as ImpositionCompositesColumn} from './ImpositionCompositesColumn';\r\nexport * from './MapColumn';\r\nexport {default as MapColumn} from './MapColumn';\r\nexport {default as MultiLevelCompositeColumn} from './MultiLevelCompositeColumn';\r\nexport * from './NestedColumn';\r\nexport {default as NestedColumn} from './NestedColumn';\r\nexport {default as NumberColumn, INumberColumnDesc, INumberColumn, isNumberColumn} from './NumberColumn';\r\nexport {default as NumberMapColumn, INumberMapDesc, INumberMapColumnDesc} from './NumberMapColumn';\r\nexport {default as NumbersColumn, INumbersDesc, INumbersColumnDesc} from './NumbersColumn';\r\nexport {default as OrdinalColumn, ICategoricalNumberColumnDesc} from './OrdinalColumn';\r\nexport * from './RankColumn';\r\nexport {default as RankColumn} from './RankColumn';\r\nexport {default as Ranking, ISortCriteria} from './Ranking';\r\nexport {default as ReduceColumn, createReduceDesc, IReduceDesc, IReduceColumnDesc} from './ReduceColumn';\r\nexport {default as ScriptColumn, createScriptDesc, IScriptDesc, IScriptColumnDesc} from './ScriptColumn';\r\nexport {default as SelectionColumn, createSelectionDesc, ISelectionColumnDesc} from './SelectionColumn';\r\nexport * from './SetColumn';\r\nexport {default as SetColumn} from './SetColumn';\r\nexport {default as StackColumn, createStackDesc} from './StackColumn';\r\nexport {default as StringColumn, EAlignment, IStringDesc, IStringColumnDesc} from './StringColumn';\r\nexport * from './StringMapColumn';\r\nexport {default as StringMapColumn} from './StringMapColumn';\r\nexport * from './StringsColumn';\r\nexport {default as StringsColumn} from './StringsColumn';\r\nexport {default as ValueColumn, IValueColumnDesc} from './ValueColumn';\r\n\r\n/**\r\n * defines a new column type\r\n * @param name\r\n * @param functions\r\n * @returns {CustomColumn}\r\n */\r\nexport function defineColumn<T>(name: string, functions: any = {}): typeof Column {\r\n  class CustomColumn extends ValueColumn<T> {\r\n    constructor(id: string, desc: IValueColumnDesc<T>) {\r\n      super(id, desc);\r\n      if (typeof (this.init) === 'function') {\r\n        this.init.apply(this, [].slice.apply(arguments));\r\n      }\r\n    }\r\n\r\n    init() {\r\n      // dummy\r\n    }\r\n  }\r\n\r\n  CustomColumn.prototype.toString = () => name;\r\n  CustomColumn.prototype = Object.assign(CustomColumn.prototype, functions);\r\n\r\n  return CustomColumn;\r\n}\r\n\r\n\r\n/**\r\n * a map of all known column types\r\n */\r\nexport function models() {\r\n  return {\r\n    actions: ActionColumn,\r\n    aggregate: AggregateGroupColumn,\r\n    annotate: AnnotateColumn,\r\n    boolean: BooleanColumn,\r\n    booleans: BooleansColumn,\r\n    boxplot: BoxPlotColumn,\r\n    categorical: CategoricalColumn,\r\n    categoricalMap: CategoricalMapColumn,\r\n    categoricals: CategoricalsColumn,\r\n    date: DateColumn,\r\n    dateMap: DatesMapColumn,\r\n    dates: DatesColumn,\r\n    group: GroupColumn,\r\n    hierarchy: HierarchyColumn,\r\n    imposition: ImpositionCompositeColumn,\r\n    impositionBoxPlot: ImpositionBoxPlotColumn,\r\n    impositions: ImpositionCompositesColumn,\r\n    reduce: ReduceColumn,\r\n    nested: NestedColumn,\r\n    number: NumberColumn,\r\n    numbers: NumbersColumn,\r\n    numberMap: NumberMapColumn,\r\n    ordinal: OrdinalColumn,\r\n    rank: RankColumn,\r\n    script: ScriptColumn,\r\n    selection: SelectionColumn,\r\n    set: SetColumn,\r\n    stack: StackColumn,\r\n    string: StringColumn,\r\n    stringMap: StringMapColumn,\r\n    strings: StringsColumn\r\n  };\r\n}\r\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex3 = /^#([0-9a-f]{3})$/,\n    reHex6 = /^#([0-9a-f]{6})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: function() {\n    return this.rgb().hex();\n  },\n  toString: function() {\n    return this.rgb() + \"\";\n  }\n});\n\nexport default function color(format) {\n  var m;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00\n      : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format])\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (0 <= this.r && this.r <= 255)\n        && (0 <= this.g && this.g <= 255)\n        && (0 <= this.b && this.b <= 255)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: function() {\n    return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n  },\n  toString: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"rgb(\" : \"rgba(\")\n        + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n        + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\n// https://beta.observablehq.com/@mbostock/lab-and-rgb\nvar K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) {\n    if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n    var h = o.h * deg2rad;\n    return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n  }\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return labConvert(this).rgb();\n  }\n}));\n","import define, {extend} from \"./define\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color\";\nimport {deg2rad, rad2deg} from \"./math\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","import {Category, toolbar} from './annotations';\r\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport {IDataRow} from './interfaces';\r\nimport {patternFunction} from './internal';\r\nimport {FIRST_IS_MISSING} from './missing';\r\nimport ValueColumn, {IValueColumnDesc, dataLoaded} from './ValueColumn';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\nexport enum EAlignment {\r\n  left = 'left',\r\n  center = 'center',\r\n  right = 'right'\r\n}\r\n\r\nexport interface IStringDesc {\r\n  /**\r\n   * column alignment: left, center, right\r\n   * @default left\r\n   */\r\n  alignment?: EAlignment;\r\n\r\n  /**\r\n   * escape html tags\r\n   */\r\n  escape?: boolean;\r\n\r\n  /**\r\n   * replacement pattern, use use <code>${value}</code> for the current value, <code>${escapedValue}</code> for an url safe value and <code>${item}</code> for the whole item\r\n   */\r\n  pattern?: string;\r\n\r\n  /**\r\n   * optional list of pattern templates\r\n   */\r\n  patternTemplates?: string[];\r\n}\r\n\r\n\r\nexport declare type IStringColumnDesc = IStringDesc & IValueColumnDesc<string>;\r\n\r\n\r\n/**\r\n * emitted when the pattern property changes\r\n * @asMemberOf StringColumn\r\n * @event\r\n */\r\nexport declare function patternChanged(previous: string, current: string): void;\r\n\r\n/**\r\n * emitted when the filter property changes\r\n * @asMemberOf StringColumn\r\n * @event\r\n */\r\nexport declare function filterChanged(previous: string | RegExp | null, current: string | RegExp | null): void;\r\n\r\n\r\n/**\r\n * a string column with optional alignment\r\n */\r\n@toolbar('search', 'filterString', 'editPattern')\r\n@Category('string')\r\nexport default class StringColumn extends ValueColumn<string> {\r\n  static readonly EVENT_PATTERN_CHANGED = 'patternChanged';\r\n  static readonly EVENT_FILTER_CHANGED = 'filterChanged';\r\n\r\n  //magic key for filtering missing ones\r\n  static readonly FILTER_MISSING = '__FILTER_MISSING';\r\n  private currentFilter: string | RegExp | null = null;\r\n\r\n  readonly alignment: EAlignment;\r\n  readonly escape: boolean;\r\n  private pattern: string;\r\n  private patternFunction: Function | null = null;\r\n  readonly patternTemplates: string[];\r\n\r\n  constructor(id: string, desc: Readonly<IStringColumnDesc>) {\r\n    super(id, desc);\r\n    this.setDefaultWidth(200); //by default 200\r\n    this.alignment = <any>desc.alignment || EAlignment.left;\r\n    this.escape = desc.escape !== false;\r\n    this.pattern = desc.pattern || '';\r\n    this.patternTemplates = desc.patternTemplates || [];\r\n\r\n    if (this.pattern) {\r\n      this.setDefaultRenderer('link');\r\n      this.setDefaultGroupRenderer('link');\r\n    }\r\n  }\r\n\r\n\r\n  setPattern(pattern: string) {\r\n    if (pattern === this.pattern) {\r\n      return;\r\n    }\r\n    this.patternFunction = null; // reset cache\r\n    this.fire([StringColumn.EVENT_PATTERN_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.pattern, this.pattern = pattern);\r\n  }\r\n\r\n  getPattern() {\r\n    return this.pattern;\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([StringColumn.EVENT_PATTERN_CHANGED, StringColumn.EVENT_FILTER_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof StringColumn.EVENT_PATTERN_CHANGED, listener: typeof patternChanged | null): this;\r\n  on(type: typeof StringColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\r\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(<any>type, listener);\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    const v: any = super.getValue(row);\r\n    if (!this.pattern) {\r\n      return v == null ? '' : String(v);\r\n    }\r\n    if (!this.patternFunction) {\r\n      this.patternFunction = patternFunction(this.pattern, 'item');\r\n    }\r\n    return this.patternFunction.call(this, v, row.v);\r\n  }\r\n\r\n  getLabel(row: IDataRow) {\r\n    return this.getValue(row) || '';\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any): any {\r\n    const r = super.dump(toDescRef);\r\n    if (this.currentFilter instanceof RegExp) {\r\n      r.filter = `REGEX:${(<RegExp>this.currentFilter).source}`;\r\n    } else {\r\n      r.filter = this.currentFilter;\r\n    }\r\n    if (this.pattern !== (<any>this.desc).pattern) {\r\n      r.pattern = this.pattern;\r\n    }\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    super.restore(dump, factory);\r\n    if (dump.filter && dump.filter.slice(0, 6) === 'REGEX:') {\r\n      this.currentFilter = new RegExp(dump.filter.slice(6));\r\n    } else {\r\n      this.currentFilter = dump.filter || null;\r\n    }\r\n    if (dump.pattern) {\r\n      this.pattern = dump.pattern;\r\n    }\r\n  }\r\n\r\n  isFiltered() {\r\n    return this.currentFilter != null;\r\n  }\r\n\r\n  filter(row: IDataRow) {\r\n    if (!this.isFiltered()) {\r\n      return true;\r\n    }\r\n    const r = this.getLabel(row);\r\n    const filter = this.currentFilter;\r\n\r\n    if (filter === StringColumn.FILTER_MISSING) { //filter empty\r\n      return r != null && r.trim() !== '';\r\n    }\r\n    if (typeof filter === 'string' && filter.length > 0) {\r\n      return r !== '' && r.toLowerCase().indexOf(filter.toLowerCase()) >= 0;\r\n    }\r\n    if (filter instanceof RegExp) {\r\n      return r !== '' && filter.test(r);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  getFilter() {\r\n    return this.currentFilter;\r\n  }\r\n\r\n  setFilter(filter: string | RegExp | null) {\r\n    if (filter === '') {\r\n      filter = null;\r\n    }\r\n    if (this.currentFilter === filter) {\r\n      return;\r\n    }\r\n    this.fire([StringColumn.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.currentFilter, this.currentFilter = filter);\r\n  }\r\n\r\n  compare(a: IDataRow, b: IDataRow) {\r\n    const aValue = this.getValue(a);\r\n    const bValue = this.getValue(b);\r\n    if (aValue === '') {\r\n      return bValue === '' ? 0 : FIRST_IS_MISSING; //same = 0\r\n    }\r\n    if (bValue === '') {\r\n      return -FIRST_IS_MISSING;\r\n    }\r\n    return aValue.toLowerCase().localeCompare(bValue.toLowerCase());\r\n  }\r\n}\r\n\r\n","import {interpolateBlues, interpolateGreens, interpolateGreys, interpolateOranges, interpolatePurples, interpolateReds, interpolateCool, interpolateCubehelixDefault, interpolateWarm, interpolatePlasma, interpolateMagma, interpolateViridis, interpolateInferno, interpolateYlOrRd, interpolateYlOrBr, interpolateBuGn, interpolateBuPu, interpolateGnBu, interpolateOrRd, interpolatePuBuGn, interpolatePuBu, interpolatePuRd, interpolateRdPu, interpolateYlGnBu, interpolateYlGn, interpolateRainbow, interpolateBrBG, interpolatePRGn, interpolatePiYG, interpolatePuOr, interpolateRdBu, interpolateRdGy, interpolateRdYlBu, interpolateRdYlGn, interpolateSpectral} from 'd3-scale-chromatic';\r\nimport {IMapAbleDesc} from './MappingFunction';\r\nimport Column from './Column';\r\nimport {equal} from '../internal/utils';\r\nimport {scaleLinear} from 'd3-scale';\r\n\r\nexport interface IColorMappingFunctionBase {\r\n  apply(v: number): string;\r\n\r\n  dump(): any;\r\n\r\n  clone(): IColorMappingFunction;\r\n\r\n  eq(other: IColorMappingFunction): boolean;\r\n}\r\n\r\nexport interface IInterpolateColorMappingFunction extends IColorMappingFunctionBase {\r\n  type: 'sequential'|'divergent';\r\n  name: string;\r\n}\r\n\r\nexport interface IQuantizedColorMappingFunction extends IColorMappingFunctionBase {\r\n  type: 'quantized';\r\n  base: IColorMappingFunction;\r\n  steps: number;\r\n}\r\n\r\nexport interface ISolidColorMappingFunction extends IColorMappingFunctionBase {\r\n  type: 'solid';\r\n  color: string;\r\n}\r\n\r\nexport interface ICustomColorMappingFunction extends IColorMappingFunctionBase {\r\n  type: 'custom';\r\n  entries: {value: number, color: string}[];\r\n}\r\n\r\nexport declare type IColorMappingFunction = ISolidColorMappingFunction | ICustomColorMappingFunction | IQuantizedColorMappingFunction | IInterpolateColorMappingFunction;\r\n\r\nexport class InterpolatingColorFunction implements IInterpolateColorMappingFunction {\r\n  constructor(public readonly name: string, public readonly type: 'sequential'|'divergent', public readonly apply: (v: number)=>string) {\r\n\r\n  }\r\n\r\n  dump() {\r\n    return this.name;\r\n  }\r\n\r\n  clone() {\r\n    return this; // no clone needed since not parameterized\r\n  }\r\n\r\n  eq(other: IColorMappingFunction): boolean {\r\n    return other === this;\r\n  }\r\n}\r\n\r\nexport class SolidColorFunction implements ISolidColorMappingFunction {\r\n  constructor(public readonly color: string) {\r\n\r\n  }\r\n\r\n  get type(): 'solid' {\r\n    return 'solid';\r\n  }\r\n\r\n  apply() {\r\n    return this.color;\r\n  }\r\n\r\n  dump() {\r\n    return this.color;\r\n  }\r\n\r\n  clone() {\r\n    return this; // no clone needed since not parameterized\r\n  }\r\n\r\n  eq(other: IColorMappingFunction): boolean {\r\n    return other instanceof SolidColorFunction && other.color === this.color;\r\n  }\r\n}\r\n\r\nexport class QuantizedColorFunction implements IQuantizedColorMappingFunction {\r\n  constructor(public readonly base: IColorMappingFunction, public readonly steps: number) {\r\n\r\n  }\r\n\r\n  get type(): 'quantized' {\r\n    return 'quantized';\r\n  }\r\n\r\n  apply(v: number) {\r\n    return this.base.apply(quantize(v, this.steps));\r\n  }\r\n\r\n  dump() {\r\n    return {\r\n      base: this.base.dump(),\r\n      steps: this.steps\r\n    };\r\n  }\r\n\r\n  clone(): QuantizedColorFunction {\r\n    return this; // no clone needed since not parameterized\r\n  }\r\n\r\n  eq(other: IColorMappingFunction): boolean {\r\n    return other instanceof QuantizedColorFunction && other.base.eq(this.base) && other.steps === this.steps;\r\n  }\r\n}\r\n\r\nexport class CustomColorMappingFunction implements ICustomColorMappingFunction {\r\n  private readonly scale = scaleLinear<string>();\r\n\r\n  constructor(public readonly entries: {value: number, color: string}[]) {\r\n    this.scale\r\n      .domain(entries.map((d) => d.value))\r\n      .range(entries.map((d) => d.color))\r\n      .clamp(true);\r\n  }\r\n\r\n  get type(): 'custom' {\r\n    return 'custom';\r\n  }\r\n\r\n  apply(v: number) {\r\n    return this.scale(v);\r\n  }\r\n\r\n  dump() {\r\n    return this.entries;\r\n  }\r\n\r\n  clone() {\r\n    return new CustomColorMappingFunction(this.entries);\r\n  }\r\n\r\n  eq(other: IColorMappingFunction): boolean {\r\n    return other instanceof CustomColorMappingFunction && equal(this.entries, other.entries);\r\n  }\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport function quantize(v: number, steps: number) {\r\n  const perStep = 1 / steps;\r\n  if (v <= perStep) {\r\n    return 0;\r\n  }\r\n  if (v >= (1 - perStep)) {\r\n    return 1;\r\n  }\r\n  for (let acc = 0; acc < 1; acc += perStep) {\r\n    if (v < acc) {\r\n      return acc - perStep / 2; // center\r\n    }\r\n  }\r\n  return v;\r\n}\r\n\r\nconst cache = new Map<string, SolidColorFunction>();\r\n\r\n/**\r\n * @internal\r\n */\r\nexport function asColorFunction(color: string) {\r\n  if (cache.has(color)) {\r\n    return cache.get(color)!;\r\n  }\r\n  const s = new SolidColorFunction(color);\r\n  cache.set(color, s);\r\n  return s;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const DEFAULT_COLOR_FUNCTION = asColorFunction(Column.DEFAULT_COLOR);\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const sequentialColors: InterpolatingColorFunction[] = [];\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const divergentColors: InterpolatingColorFunction[] = [];\r\n\r\n/**\r\n * @internal\r\n */\r\nexport const lookupInterpolatingColor = new Map<string, InterpolatingColorFunction>();\r\n\r\n{\r\n  const sequential: { [key: string]: (v: number)=>string } = {\r\n    interpolateBlues,\r\n    interpolateGreens,\r\n    interpolateGreys,\r\n    interpolateOranges,\r\n    interpolatePurples,\r\n    interpolateReds,\r\n    interpolateCool,\r\n    interpolateCubehelixDefault,\r\n    interpolateWarm,\r\n    interpolatePlasma,\r\n    interpolateMagma,\r\n    interpolateViridis,\r\n    interpolateInferno,\r\n    interpolateYlOrRd,\r\n    interpolateYlOrBr,\r\n    interpolateBuGn,\r\n    interpolateBuPu,\r\n    interpolateGnBu,\r\n    interpolateOrRd,\r\n    interpolatePuBuGn,\r\n    interpolatePuBu,\r\n    interpolatePuRd,\r\n    interpolateRdPu,\r\n    interpolateYlGnBu,\r\n    interpolateYlGn,\r\n    interpolateRainbow\r\n  };\r\n  const divergent: { [key: string]: (v: number)=>string } = {\r\n    interpolateBrBG,\r\n    interpolatePRGn,\r\n    interpolatePiYG,\r\n    interpolatePuOr,\r\n    interpolateRdBu,\r\n    interpolateRdGy,\r\n    interpolateRdYlBu,\r\n    interpolateRdYlGn,\r\n    interpolateSpectral\r\n  };\r\n  for (const key of Object.keys(sequential)) {\r\n    sequentialColors.push(new InterpolatingColorFunction(key, 'sequential', sequential[key]));\r\n  }\r\n  for (const key of Object.keys(divergent)) {\r\n    divergentColors.push(new InterpolatingColorFunction(key, 'divergent', divergent[key]));\r\n  }\r\n\r\n  for (const col of sequentialColors) {\r\n    lookupInterpolatingColor.set(col.name, col);\r\n  }\r\n  for (const col of divergentColors) {\r\n    lookupInterpolatingColor.set(col.name, col);\r\n  }\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport function createColorMappingFunction(color: string | null, dump: any): IColorMappingFunction {\r\n  if (!dump) {\r\n    return color ? asColorFunction(color) : DEFAULT_COLOR_FUNCTION;\r\n  }\r\n  if (typeof dump === 'string') {\r\n    const s = lookupInterpolatingColor.get(dump);\r\n    if (s) {\r\n      return s;\r\n    }\r\n    return asColorFunction(dump);\r\n  }\r\n  if (typeof dump === 'function') {\r\n    return new InterpolatingColorFunction('custom', 'sequential', dump);\r\n  }\r\n  if (dump.base && dump.steps) {\r\n    return new QuantizedColorFunction(createColorMappingFunction(color, dump.base), dump.steps);\r\n  }\r\n  if (Array.isArray(dump)) {\r\n    return new CustomColorMappingFunction(dump);\r\n  }\r\n  return DEFAULT_COLOR_FUNCTION;\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport function restoreColorMapping(color: string | null, desc: IMapAbleDesc): IColorMappingFunction {\r\n  if (desc.colorMapping) {\r\n    return createColorMappingFunction(color, desc.colorMapping);\r\n  }\r\n  return color ? asColorFunction(color) : DEFAULT_COLOR_FUNCTION;\r\n}\r\n","import {LazyBoxPlotData} from '../internal';\r\nimport {toolbar, SortByDefault, dialogAddons} from './annotations';\r\nimport ArrayColumn, {IArrayColumnDesc, IArrayDesc, spliceChanged} from './ArrayColumn';\r\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport ValueColumn, {dataLoaded} from './ValueColumn';\r\nimport {IDataRow} from './interfaces';\r\nimport {isDummyNumberFilter, restoreFilter} from './internal';\r\nimport {\r\n  compareBoxPlot, DEFAULT_FORMATTER, EAdvancedSortMethod, getBoxPlotNumber, INumberFilter, INumbersColumn,\r\n  noNumberFilter\r\n} from './INumberColumn';\r\nimport {\r\n  createMappingFunction, IMapAbleDesc, IMappingFunction, restoreMapping,\r\n  ScaleMappingFunction\r\n} from './MappingFunction';\r\nimport {isMissingValue} from './missing';\r\nimport NumberColumn, {colorMappingChanged} from './NumberColumn';\r\nimport {IAdvancedBoxPlotData} from '../internal/math';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\nimport {IColorMappingFunction, restoreColorMapping, createColorMappingFunction} from './ColorMappingFunction';\r\n\r\n\r\nexport interface INumbersDesc extends IArrayDesc, IMapAbleDesc {\r\n  readonly sort?: EAdvancedSortMethod;\r\n}\r\n\r\nexport declare type INumbersColumnDesc = INumbersDesc & IArrayColumnDesc<number>;\r\n\r\n/**\r\n * emitted when the mapping property changes\r\n * @asMemberOf NumbersColumn\r\n * @event\r\n */\r\nexport declare function mappingChanged(previous: IMappingFunction, current: IMappingFunction): void;\r\n\r\n/**\r\n * emitted when the sort method property changes\r\n * @asMemberOf NumbersColumn\r\n * @event\r\n */\r\nexport declare function sortMethodChanged(previous: EAdvancedSortMethod, current: EAdvancedSortMethod): void;\r\n\r\n@toolbar('filterMapped', 'colorMapped')\r\n@dialogAddons('sort', 'sortNumbers')\r\n@SortByDefault('descending')\r\nexport default class NumbersColumn extends ArrayColumn<number> implements INumbersColumn {\r\n  static readonly EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\r\n  static readonly EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\r\n  static readonly EVENT_SORTMETHOD_CHANGED = NumberColumn.EVENT_SORTMETHOD_CHANGED;\r\n\r\n  static readonly CENTER = 0;\r\n\r\n  private sort: EAdvancedSortMethod;\r\n  private mapping: IMappingFunction;\r\n  private original: IMappingFunction;\r\n  private colorMapping: IColorMappingFunction;\r\n  /**\r\n   * currently active filter\r\n   * @type {{min: number, max: number}}\r\n   * @private\r\n   */\r\n  private currentFilter: INumberFilter = noNumberFilter();\r\n\r\n  constructor(id: string, desc: Readonly<INumbersColumnDesc>) {\r\n    super(id, desc);\r\n    this.mapping = restoreMapping(desc);\r\n    this.original = this.mapping.clone();\r\n    this.colorMapping = restoreColorMapping(this.color, desc);\r\n\r\n    this.sort = desc.sort || EAdvancedSortMethod.median;\r\n\r\n    // better initialize the default with based on the data length\r\n    if (this.dataLength) {\r\n      this.setDefaultWidth(Math.min(Math.max(100, this.dataLength! * 10), 500));\r\n    }\r\n    this.setDefaultRenderer('heatmap');\r\n    this.setDefaultGroupRenderer('heatmap');\r\n    this.setDefaultSummaryRenderer('histogram');\r\n  }\r\n\r\n  compare(a: IDataRow, b: IDataRow): number {\r\n    return compareBoxPlot(this, a, b);\r\n  }\r\n\r\n  getRawNumbers(row: IDataRow) {\r\n    return this.getRawValue(row);\r\n  }\r\n\r\n  getBoxPlotData(row: IDataRow): IAdvancedBoxPlotData | null {\r\n    const data = this.getRawValue(row);\r\n    if (data == null) {\r\n      return null;\r\n    }\r\n    return new LazyBoxPlotData(data, this.mapping);\r\n  }\r\n\r\n  getRange() {\r\n    return this.mapping.getRange(DEFAULT_FORMATTER);\r\n  }\r\n\r\n  getRawBoxPlotData(row: IDataRow): IAdvancedBoxPlotData | null {\r\n    const data = this.getRawValue(row);\r\n    if (data == null) {\r\n      return null;\r\n    }\r\n    return new LazyBoxPlotData(data);\r\n  }\r\n\r\n  getNumbers(row: IDataRow) {\r\n    return this.getValue(row);\r\n  }\r\n\r\n  getNumber(row: IDataRow): number {\r\n    return getBoxPlotNumber(this, row, 'normalized');\r\n  }\r\n\r\n  getRawNumber(row: IDataRow): number {\r\n    return getBoxPlotNumber(this, row, 'raw');\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    const values = this.getRawValue(row);\r\n    return values.map((d) => isMissingValue(d) ? NaN : this.mapping.apply(d));\r\n  }\r\n\r\n  getRawValue(row: IDataRow) {\r\n    const r = super.getValue(row);\r\n    return r == null ? [] : r;\r\n  }\r\n\r\n  getLabels(row: IDataRow) {\r\n    return this.getValue(row).map(DEFAULT_FORMATTER);\r\n  }\r\n\r\n  getSortMethod() {\r\n    return this.sort;\r\n  }\r\n\r\n  setSortMethod(sort: EAdvancedSortMethod) {\r\n    if (this.sort === sort) {\r\n      return;\r\n    }\r\n    this.fire([NumbersColumn.EVENT_SORTMETHOD_CHANGED], this.sort, this.sort = sort);\r\n    // sort by me if not already sorted by me\r\n    if (!this.isSortedByMe().asc) {\r\n      this.sortByMe();\r\n    }\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any): any {\r\n    const r = super.dump(toDescRef);\r\n    r.sortMethod = this.getSortMethod();\r\n    r.filter = !isDummyNumberFilter(this.currentFilter) ? this.currentFilter : null;\r\n    r.map = this.mapping.dump();\r\n    r.colorMapping = this.colorMapping.dump();\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    super.restore(dump, factory);\r\n    if (dump.sortMethod) {\r\n      this.sort = dump.sortMethod;\r\n    }\r\n    if (dump.filter) {\r\n      this.currentFilter = restoreFilter(dump.filter);\r\n    }\r\n    if (dump.map) {\r\n      this.mapping = createMappingFunction(dump.map);\r\n    } else if (dump.domain) {\r\n      this.mapping = new ScaleMappingFunction(dump.domain, 'linear', dump.range || [0, 1]);\r\n    }\r\n    if (dump.colorMapping) {\r\n      this.colorMapping = createColorMappingFunction(this.color, dump.colorMapping);\r\n    }\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([NumbersColumn.EVENT_COLOR_MAPPING_CHANGED, NumbersColumn.EVENT_MAPPING_CHANGED, NumbersColumn.EVENT_SORTMETHOD_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof NumbersColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged | null): this;\r\n  on(type: typeof NumbersColumn.EVENT_MAPPING_CHANGED, listener: typeof mappingChanged | null): this;\r\n  on(type: typeof NumbersColumn.EVENT_SORTMETHOD_CHANGED, listener: typeof sortMethodChanged | null): this;\r\n  on(type: typeof ArrayColumn.EVENT_SPLICE_CHANGED, listener: typeof spliceChanged | null): this;\r\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(<any>type, listener);\r\n  }\r\n\r\n  getOriginalMapping() {\r\n    return this.original.clone();\r\n  }\r\n\r\n  getMapping() {\r\n    return this.mapping.clone();\r\n  }\r\n\r\n  setMapping(mapping: IMappingFunction) {\r\n    if (this.mapping.eq(mapping)) {\r\n      return;\r\n    }\r\n    this.fire([NumbersColumn.EVENT_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.mapping.clone(), this.mapping = mapping);\r\n  }\r\n\r\n  getColor(row: IDataRow) {\r\n    return NumberColumn.prototype.getColor.call(this, row);\r\n  }\r\n\r\n  getColorMapping() {\r\n    return this.colorMapping.clone();\r\n  }\r\n\r\n  setColorMapping(mapping: IColorMappingFunction) {\r\n    if (this.colorMapping.eq(mapping)) {\r\n      return;\r\n    }\r\n    this.fire([NumbersColumn.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\r\n  }\r\n\r\n  isFiltered() {\r\n    return NumberColumn.prototype.isFiltered.call(this);\r\n  }\r\n\r\n  getFilter(): INumberFilter {\r\n    return NumberColumn.prototype.getFilter.call(this);\r\n  }\r\n\r\n  setFilter(value: INumberFilter = {min: -Infinity, max: +Infinity, filterMissing: false}) {\r\n    NumberColumn.prototype.setFilter.call(this, value);\r\n  }\r\n\r\n  filter(row: IDataRow) {\r\n    return NumberColumn.prototype.filter.call(this, row);\r\n  }\r\n}\r\n\r\n","/*! lineupengine - v1.1.0 - 2018\n* https://sgratzl.github.io/lineupengine/\n* Copyright (c) 2018 Samuel Gratzl; Licensed MIT*/\n!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.lineupengine=e():t.lineupengine=e()}(window,function(){return function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},i.r=function(t){Object.defineProperty(t,\"__esModule\",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=0)}([function(t,e,i){\"use strict\";i.r(e);\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};function n(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}Object.assign;var r=Symbol(\"aborted\");function s(t){return{then:function(e){var i,o=null,n=function(){return null===o},s=new Promise(function(t){return o=t}),a=t.then(function(t){return n()?r:Promise.resolve(e(t)).then(function(t){return n()?r:t})}),l=Promise.race([s,a]);return(i={abort:function(){null!==o&&(o(r),o=null)},then:l.then.bind(l),catch:l.catch.bind(l)})[Symbol.toStringTag]=l[Symbol.toStringTag],i}}}function a(t){return void 0!==t&&null!==t&&t&&\"function\"==typeof t.then&&\"function\"==typeof t.abort}var l,h=function(){function t(t,e){var i=this;this.context=t,this.key=e,this.cache=[],this.lastFilled=0,this.key2index=new Map,this.context.exceptions.forEach(function(t){i.cache[t.index]=t.y,i.key2index.set(e(t.index),t.index)})}return t.prototype.findValidStart=function(t){for(var e=t-1;e>=0;--e)if(void 0!==this.cache[e])return e;return-1},t.prototype.posByKey=function(t){if(this.key2index.has(t)){var e=this.key2index.get(t);return{index:e,pos:this.pos(e)}}return this.fillCacheTillKey(t)},t.prototype.pos=function(t){if(0===this.context.exceptions.length)return t*this.context.defaultRowHeight;var e=this.cache[t];if(void 0!==e)return e;var i=this.findValidStart(t);return i<0?this.fillCache(0,t,0):this.fillCache(i+1,t,this.cache[i]+this.heightOf(i)),this.cache[t]},t.prototype.fillCache=function(t,e,i,o){if(e<=this.lastFilled){if(!o)return;for(var n=t;n<=e;++n)o(n,this.key(n),this.cache[n])}else{var r=i;for(n=t;n<=e;++n){this.cache[n]=r;var s=this.key(n);this.key2index.set(s,n),o&&o(n,s,r),r+=this.heightOf(n)}}},t.prototype.heightOf=function(t){var e=this.context.exceptionsLookup;return e.has(t)?e.get(t):this.context.defaultRowHeight},t.prototype.exceptionHeightOf=function(t,e){void 0===e&&(e=!1);var i=this.context.padding(t),o=this.context.exceptionsLookup;return o.has(t)?o.get(t)-i:e?this.context.defaultRowHeight-i:null},t.prototype.padding=function(t){return this.context.padding(t)},t.prototype.fillCacheTillKey=function(t){for(var e=0,i=this.lastFilled;i<this.context.numberOfRows;++i,++this.lastFilled){var o=this.cache[i];if(void 0===o){var n=this.key(i);if(this.cache[i]=e,this.key2index.set(n,i),n===t)return{index:i,pos:e};e+=this.heightOf(i)}else e=o+this.heightOf(i)}return{index:-1,pos:-1}},t.prototype.positions=function(t,e,i,o){this.fillCache(t,e,i,o)},t}();!function(t){t[t.UPDATE=0]=\"UPDATE\",t[t.UPDATE_CREATE=1]=\"UPDATE_CREATE\",t[t.UPDATE_REMOVE=2]=\"UPDATE_REMOVE\",t[t.SHOW=3]=\"SHOW\",t[t.HIDE=4]=\"HIDE\"}(l||(l={}));var c=1;function d(t,e,i){var o=t.previous,n=t.mode,r=t.nodeY,s=t.current,a=null==o.height?e:o.height,h=null==s.height?i:s.height;return n===l.UPDATE&&Math.abs(o.y-r)<=c&&Math.abs(a-h)<=c}var u,f=[{delay:0,apply:function(t){var e=t.mode,i=t.previous,o=t.nodeY,n=t.current,r=t.node;r.dataset.animation=l[e].toLowerCase(),r.style.transform=\"translate(0, \"+(i.y-o)+\"px)\",e===l.SHOW?r.style.height=null!==n.height?n.height+\"px\":null:r.style.height=i.height+\"px\",r.style.opacity=e===l.SHOW?\"0\":e===l.HIDE?\"1\":null}},{delay:10,apply:function(t){var e=t.mode,i=t.current,o=t.nodeY,n=t.node;n.style.transform=e===l.HIDE||e===l.UPDATE_REMOVE?\"translate(0, \"+(i.y-o)+\"px)\":null,e!==l.HIDE&&(n.style.height=null!==i.height?i.height+\"px\":null),n.style.opacity=e===l.SHOW?\"1\":e===l.HIDE?\"0\":null}},{delay:1100,apply:function(t){var e=t.node;delete e.dataset.animation,e.style.opacity=null,e.style.transform=null}}],p=function(){function t(t,e,i){this.index=t,this.y=e,this.height=i}return Object.defineProperty(t.prototype,\"y2\",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),t}();function m(t,e,i){return void 0===i&&(i=0),{exceptions:[],exceptionsLookup:{keys:function(){return[].values()},get:function(){return e},has:function(){return!1},size:0},totalHeight:t*(e+=i),numberOfRows:t,defaultRowHeight:e,padding:function(){return i}}}function y(t,e,i){void 0===e&&(e=NaN),void 0===i&&(i=0);var o=new Map,n=[],r=\"function\"==typeof i?i:function(){return i};isNaN(e)&&(e=function(t){var e=new Map;if(t.forEach(function(t){e.set(t,(e.get(t)||0)+1)}),0===e.size)return 20;var i=Array.from(e).sort(function(t,e){return t[1]!==e[1]?e[1]-t[1]:t[0]-e[0]}),o=i[0][0];return 0===o?i.length>1?i[1][0]:20:o}(t)),e+=r(-1);var s=-1,a=0,l=0,h=0;return t.forEach(function(t,i){if(t+=r(i),l+=t,h++,t!==e){o.set(i,t);var c=(i-s-1)*e;s=i;var d=a+c;a=d+t,n.push(new p(i,d,t))}}),{exceptionsLookup:o,exceptions:n,totalHeight:l,defaultRowHeight:e,numberOfRows:h,padding:r}}function v(t,e,i,o,n,r){void 0===i&&(i=2),void 0===o&&(o=10*e),void 0===n&&(n=.2),void 0===r&&(r=Date.now());var s=r,a=function(){var t=1e4*Math.sin(s++);return t-Math.floor(t)};return y({forEach:function(r){for(var s=0;s<t;++s)r(a()<n?i+Math.round(a()*(o-i)):e,s)}},e)}function g(t,e,i,o,n){if(0===n)return{first:0,last:-1,firstRowPos:0,endPos:0};if(1===n)return{first:0,last:0,firstRowPos:0,endPos:0===o.length?i:o[0].y2};var r=t,s=r+e;function a(t,e){return Math.min(n-1,e+Math.max(0,Math.floor(t/i)))}function l(t,e,o){void 0===o&&(o=!1);var l=s-t,h=a(r-t,e),c=a(l,e),d=t+(h-e)*i,u=t+(c+1-e)*i;return console.assert(!o||!(d>r||u<s&&c<n-1),\"error\",o,d,u,r,s,e,t),{first:h,last:c,firstRowPos:d,endPos:u}}var h=l(0,0,!0);if(0===o.length)return h;if(h.last<o[0].index)return h;if(h.last===o[0].index&&o[0].height>i)return Object.assign(h,{endPos:o[0].y2});var c=o[o.length-1];if(r>=c.y){var d=l(c.y2,c.index+1);return r<c.y2?Object.assign(d,{first:c.index,firstRowPos:c.y}):d}for(var u=[],f=o[0],p=0,m=o;p<m.length;p++){var y=m[p],v=y.y,g=y.y2;if(v>=s)break;g<=r?f=y:u.push(y)}if(0===u.length)return l(f.y2,f.index+1);var b=u[0],x=u[u.length-1],w=Math.max(0,b.index-Math.max(0,Math.ceil((b.y-r)/i))),C=x.index;s>=x.y2&&(C=a(s-x.y2,x.index+1));var R=b.y-(b.index-w)*i,E=x.y2+(C-x.index)*i;return console.assert(R<=r&&(E>=s||C===n-1),\"error\",R,E,r,s,b,x),{first:w,last:C,firstRowPos:R,endPos:E}}function b(t,e){var i=t.length,o=e.length;if(0===i)return{added:e,removed:[],common:0};if(0===o)return{added:[],removed:t,common:0};if(i===o)return{added:[],removed:[],common:i};var n=t.slice(Math.min(o,i));return{added:e.slice(Math.min(o,i)),removed:n,common:i-n.length}}function x(t,e,i){for(var o=0===t.length?0:t[t.length-1]+1,n=[],r=[],s=t.length-1;s>=0;--s){if(!(t[s]>=i))break;r.push(t.pop())}for(s=o;s<i;++s)e[s].frozen&&(n.push(s),t.push(s));return{target:t,added:n,removed:r}}!function(t){t[t.NONE=0]=\"NONE\",t[t.ALL=1]=\"ALL\",t[t.SOME=2]=\"SOME\",t[t.SOME_BOTTOM=3]=\"SOME_BOTTOM\",t[t.SOME_TOP=4]=\"SOME_TOP\"}(u||(u={}));var w=\"animation\",C=function(){function t(t){var e=this;this.node=t,this.handlers=new Map,this.animationWaiting=!1,this.immediateTimeout=-1,this.timersWaiting=new Set,this.prevs=new Map,t.addEventListener(\"scroll\",function(){e.handle(\"sync\"),e.handleAnimation(),e.handleImmediate(),e.handleTimeouts()},{passive:!0})}return t.prototype.has=function(t){return this.handlers.has(t)&&this.handlers.get(t).length>0},t.prototype.handle=function(t){var e=this.handlers.get(t)||[];if(e&&!(e.length<=0)){var i=this.asInfo();if(this.prevs.has(t)){var o=this.prevs.get(t);if(Math.abs(i.left-o.left)+Math.abs(i.top-o.top)<4)return}this.prevs.set(t,i);for(var n=0,r=e;n<r.length;n++){(0,r[n])(i)}}},t.prototype.handleAnimation=function(){var t=this;!this.animationWaiting&&this.has(\"animation\")&&(this.animationWaiting=!0,requestAnimationFrame(function(){t.animationWaiting&&(t.animationWaiting=!1,t.handle(\"animation\"))}))},t.prototype.handleImmediate=function(){var t=this;this.immediateTimeout>=0||!this.has(\"immediate\")||(this.immediateTimeout=self.setImmediate(function(){t.immediateTimeout<0||(t.immediateTimeout=-1,t.handle(\"immediate\"))}))},t.prototype.handleTimeouts=function(){var t=this,e=Array.from(this.handlers.keys()).filter(function(e){return\"number\"==typeof e&&!t.timersWaiting.has(e)});if(0!==e.length)for(var i=function(e){o.timersWaiting.add(e),self.setTimeout(function(){t.timersWaiting.delete(e),t.handle(e)},e)},o=this,n=0,r=e;n<r.length;n++){i(r[n])}},t.prototype.asInfo=function(){return{left:this.node.scrollLeft,top:this.node.scrollTop,width:this.node.clientWidth,height:this.node.clientHeight}},t.prototype.push=function(t,e){\"immediate\"===t&&\"function\"!=typeof self.setImmediate&&(t=0),this.handlers.has(t)?this.handlers.get(t).push(e):this.handlers.set(t,[e])},t.prototype.remove=function(t){return Array.from(this.handlers.values()).some(function(e){var i=e.indexOf(t);return i>=0&&e.splice(i,1),i>=0})},t}();function R(t,e,i){t.__le_scroller__||(t.__le_scroller__=new C(t));var o=t.__le_scroller__;return o.push(e,i),o.asInfo()}var E=function(){function t(t,e){void 0===e&&(e={});var i=this;this.body=t,this.pool=[],this.loadingPool=[],this.loading=new Map,this.visible={first:0,forcedFirst:0,last:-1,forcedLast:-1},this.visibleFirstRowPos=0,this.scrollListener=null,this.abortAnimation=function(){},this.options={async:w,minScrollDelta:10,mixins:[],scrollingHint:!1,batchSize:5},this.adapter=this.createAdapter(),Object.assign(this.options,e),this.mixins=this.options.mixins.map(function(t){return new t(i.adapter)}),this.fragment=t.ownerDocument.createDocumentFragment()}return t.prototype.addMixin=function(t,e){this.mixins.push(new t(this.adapter,e))},t.prototype.createAdapter=function(){var t=this,e={visible:this.visible,addAtBeginning:this.addAtBeginning.bind(this),addAtBottom:this.addAtBottom.bind(this),removeFromBeginning:this.removeFromBeginning.bind(this),removeFromBottom:this.removeFromBottom.bind(this),updateOffset:this.updateOffset.bind(this),scroller:this.bodyScroller};return Object.defineProperties(e,{visibleFirstRowPos:{get:function(){return t.visibleFirstRowPos},enumerable:!0},context:{get:function(){return t.context},enumerable:!0}}),e},Object.defineProperty(t.prototype,\"bodyScroller\",{get:function(){return this.body.parentElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"bodySizer\",{get:function(){var t=this.bodyScroller,e=Array.from(t.children).find(function(t){return\"footer\"===t.tagName.toLowerCase()});if(e)return e;var i=t.ownerDocument.createElement(\"footer\");return t.insertBefore(i,t.firstChild),i},enumerable:!0,configurable:!0}),t.prototype.init=function(){var t=this,e=this.bodyScroller,i=R(e,this.options.async,this.scrollListener=function(o){if(!(Math.abs(i.top-o.top)<t.options.minScrollDelta&&Math.abs(i.height-o.height)<t.options.minScrollDelta)){var n=o.top>i.top;i=o,t.onScrolledVertically(o.top,o.height,n),t.options.scrollingHint&&e.classList.remove(\"le-scrolling\")}});this.options.scrollingHint&&R(e,\"animation\",function(){return e.classList.add(\"le-scrolling\")}),this.recreate()},t.prototype.destroy=function(){var t,e;t=this.bodyScroller,e=this.scrollListener,t.__le_scroller__&&t.__le_scroller__.remove(e),this.body.remove()},t.cleanUp=function(t){t.style.height&&(t.style.height=null)},t.prototype.select=function(t){var e,i;return this.pool.length>0?(e=this.pool.pop(),i=this.updateRow(e,t)):this.loadingPool.length>0?((e=this.loadingPool.pop()).classList.remove(\"loading\"),i=this.createRow(e,t)):(e=this.body.ownerDocument.createElement(\"div\"),i=this.createRow(e,t)),e.dataset.index=String(t),{item:e,result:i}},t.prototype.selectProxy=function(){var t;return this.loadingPool.length>0?t=this.loadingPool.pop():(t=this.body.ownerDocument.createElement(\"div\")).classList.add(\"loading\"),t},t.prototype.recycle=function(e){(t.cleanUp(e),this.loading.has(e))?this.loading.get(e).abort():this.pool.push(e)},t.prototype.proxy=function(e,i){var o=this;if(!a(i))return e;var n=i,s=e,l=this.selectProxy();return l.dataset.index=s.dataset.index,l.style.height=s.style.height,this.loading.set(l,n),n.then(function(e){e===r?(t.cleanUp(s),o.pool.push(s)):o.body.replaceChild(s,l),o.loading.delete(l),t.cleanUp(l),o.loadingPool.push(l)}),l},t.prototype.create=function(t){var e=this.select(t),i=e.item,o=e.result,n=this.context,r=n.exceptionsLookup,s=n.padding;return r.has(t)&&(i.style.height=r.get(t)-s(t)+\"px\"),this.proxy(i,o)},t.prototype.removeAll=function(){var t=this,e=Array.from(this.body.children);this.body.innerHTML=\"\",e.forEach(function(e){t.recycle(e)})},t.prototype.update=function(){var t=this,e=this.visible.first,i=this.fragment,o=Array.from(this.body.children);this.body.innerHTML=\"\",o.forEach(function(o,n){if(!t.loading.has(o)){var r=t.updateRow(o,n+e);i.appendChild(t.proxy(o,r))}}),this.body.appendChild(i)},t.prototype.forEachRow=function(t,e){var i=this;void 0===e&&(e=!1);var o=Array.from(this.body.children),n=this.fragment;e||(this.body.innerHTML=\"\"),o.forEach(function(o,r){o.classList.contains(\"loading\")||\"update_remove\"===o.dataset.animation||\"hide\"===o.dataset.animation||t(o,r+i.visible.first),e||n.appendChild(o)}),e||this.body.appendChild(n)},t.prototype.removeFromBeginning=function(t,e){return this.remove(t,e,!0)},t.prototype.removeFromBottom=function(t,e){return this.remove(t,e,!1)},t.prototype.remove=function(t,e,i){if(!(e<t))for(var o=t;o<=e;++o){var n=i?this.body.firstChild:this.body.lastChild;n.remove(),this.recycle(n)}},t.prototype.addAtBeginning=function(t,e){if(!(e<t))if(t!==e){for(var i=this.fragment,o=t;o<=e;++o)i.appendChild(this.create(o));this.body.insertBefore(i,this.body.firstChild)}else this.body.insertBefore(this.create(t),this.body.firstChild)},t.prototype.addAtBottom=function(t,e){if(!(e<t))if(t!==e){for(var i=this.fragment,o=t;o<=e;++o)i.appendChild(this.create(o));this.body.appendChild(i)}else this.body.appendChild(this.create(t))},t.prototype.updateOffset=function(t){this.visibleFirstRowPos=t,this.body.classList.toggle(\"odd\",this.visible.first%2==1),this.updateSizer(t)},t.prototype.updateSizer=function(t){var e=this.context.totalHeight;this.body.style.transform=\"translate(0, \"+t.toFixed(0)+\"px)\",this.bodySizer.style.transform=\"translate(0, \"+Math.max(0,e-1).toFixed(0)+\"px)\"},t.prototype.recreate=function(t){return this.abortAnimation(),t?this.recreateAnimated(t):this.recreatePure()},t.prototype.recreatePure=function(){var t=this.context,e=this.bodyScroller;this.updateOffset(0),this.removeAll(),this.clearPool();var i=g(e.scrollTop,e.clientHeight,t.defaultRowHeight,t.exceptions,t.numberOfRows),o=i.first,n=i.last,r=i.firstRowPos;this.visible.first=this.visible.forcedFirst=o,this.visible.last=this.visible.forcedLast=n,o<0?this.updateOffset(0):(this.addAtBottom(o,n),this.updateOffset(r))},t.prototype.recreateAnimated=function(t){var e=this,i=new Map,o=new h(t.previous,t.previousKey),n=new h(this.context,t.currentKey),r=g(this.bodyScroller.scrollTop,this.bodyScroller.clientHeight,n.context.defaultRowHeight,n.context.exceptions,n.context.numberOfRows),s=Array.from(this.body.children),a=Object.assign({},this.visible);this.body.innerHTML=\"\",o.positions(a.first,Math.min(a.last,a.first+s.length),this.visibleFirstRowPos,function(t,e,o){var n=s[t];n&&i.set(e,{n:n,pos:o,i:t})}),this.visible.first=this.visible.forcedFirst=r.first,this.visible.last=this.visible.forcedLast=r.last;var c=this.fragment,d=[],u=r.firstRowPos;n.positions(r.first,r.last,r.firstRowPos,function(t,r,s){var a,h,f=l.UPDATE;if(i.has(r)){var p=i.get(r);i.delete(r),p.n.dataset.index=String(t),a=e.proxy(p.n,e.updateRow(p.n,t)),h={index:p.i,y:p.pos,height:o.exceptionHeightOf(p.i,!0)}}else{var m=o.posByKey(r);a=e.create(t),f=m.index<0?l.SHOW:l.UPDATE_CREATE,h={index:m.index,y:m.pos>=0?m.pos:s,height:m.index<0?n.exceptionHeightOf(t,!0):o.exceptionHeightOf(m.index,!0)}}d.push({node:a,key:r,mode:f,previous:h,nodeY:u,nodeYCurrentHeight:s,current:{index:t,y:s,height:n.exceptionHeightOf(t)}}),a.style.transform=\"translate(0, \"+(u-s)+\"px)\",u+=h.height+(h.index<0?n.padding(t):o.padding(h.index)),c.appendChild(a)});var p=r.endPos;i.forEach(function(t,e){var i=n.posByKey(e),r=i.pos>=0?i.pos:t.pos,s=t.n;s.style.transform=\"translate(0, \"+(t.pos-u)+\"px)\",c.appendChild(s);var a=o.exceptionHeightOf(t.i,!0);d.push({node:t.n,key:e,mode:i.index<0?l.HIDE:l.UPDATE_REMOVE,previous:{index:t.i,y:t.pos,height:a},nodeY:u,nodeYCurrentHeight:p,current:{index:i.index,y:r,height:i.index<0?null:n.exceptionHeightOf(i.index)}}),p+=i.index<0?n.context.defaultRowHeight:n.exceptionHeightOf(i.index,!0)+n.padding(i.index),u+=a+o.padding(t.i)}),this.updateOffset(r.firstRowPos),this.animate(d,t.phases||f,o,n,c)},t.prototype.animate=function(t,e,i,o,n){var r=this;if(t.length<=0)this.body.appendChild(n);else{for(var s=-1,a=0,h=function(e,n){void 0===n&&(n=t),n.forEach(function(t){return e.apply(t,i,o)})},c=function(){if(console.assert(t[0].node.offsetTop>=0,\"dummy log for forcing dom update\"),h(e[a++]),a<e.length){var i=e[a];s=self.setTimeout(c,i.delay)}else{var o=r.body.classList;Array.from(o).forEach(function(t){t.startsWith(\"le-\")&&t.endsWith(\"-animation\")&&o.remove(t)}),t.forEach(function(t){var e=t.node,i=t.mode;i!==l.UPDATE_REMOVE&&i!==l.HIDE||(e.remove(),e.style.transform=null,r.recycle(e))}),r.abortAnimation=function(){},s=-1}};0===e[a].delay;)h(e[a++]);var u=this.body;this.body.appendChild(n);var f=[];t=t.filter(function(t){return!d(t,i.context.defaultRowHeight,o.context.defaultRowHeight)||(f.push(t),!1)}),f.length>0&&e.slice(a).forEach(function(t){return h(t,f)}),0!==t.length&&(u.classList.add(\"le-row-animation\"),new Set(t.map(function(t){return t.mode})).forEach(function(t){u.classList.add(\"le-\"+l[t].toLowerCase().split(\"_\")[0]+\"-animation\")}),this.abortAnimation=function(){s<=0||(clearTimeout(s),s=-1,a=e.length-1,c())},s=self.setTimeout(c,e[a].delay))}},t.prototype.clearPool=function(){this.pool.splice(0,this.pool.length)},t.prototype.revalidate=function(){var t=this.bodyScroller;this.onScrolledVertically(t.scrollTop,t.clientHeight,!0),this.updateOffset(this.visibleFirstRowPos)},t.prototype.onScrolledVertically=function(t,e,i){var o=this.onScrolledImpl(t,e);return this.mixins.forEach(function(t){return t.onScrolled(i,o)}),o},t.prototype.shiftLast=function(t,e){if(e>=this.options.batchSize)return t;var i=this.context.numberOfRows;return Math.min(i-1,t+(this.options.batchSize-e))},t.prototype.shiftFirst=function(t,e,i){if(i>=this.options.batchSize||t<=0)return{first:t,firstRowPos:e};for(var o=Math.max(0,t-(this.options.batchSize-i)),n=this.context,r=n.exceptionsLookup,s=n.defaultRowHeight,a=e,l=o;l<t;++l)r.has(l)?a-=r.get(l):a-=s;return{first:o,firstRowPos:a}},t.prototype.onScrolledImpl=function(t,e){var i=this.context,o=g(t,e,i.defaultRowHeight,i.exceptions,i.numberOfRows),n=o.first,r=o.last,s=o.firstRowPos,a=this.visible;if(a.forcedFirst=n,a.forcedLast=r,n-a.first>=0&&r-a.last<=0)return u.NONE;var l=u.SOME;if(n>a.last||r<a.first)this.removeAll(),this.addAtBottom(n,r),l=u.ALL;else if(n<a.first){a.last-(r+1)>=this.options.batchSize?this.removeFromBottom(r+1,a.last):r=a.last;var h=this.shiftFirst(n,s,a.first-1-n);n=h.first,s=h.firstRowPos,this.addAtBeginning(n,a.first-1),l=u.SOME_TOP}else{n-1-a.first>=this.options.batchSize?this.removeFromBeginning(a.first,n-1):(n=a.first,s=this.visibleFirstRowPos),r=this.shiftLast(r,r-a.last+1),this.addAtBottom(a.last+1,r),l=u.SOME_BOTTOM}return a.first=n,a.last=r,this.updateOffset(s),l},t}(),O=E,S=function(){function t(t){this.rules=new Map,this.node=t.ownerDocument.createElement(\"style\"),t.appendChild(this.node)}return t.prototype.destroy=function(){this.node.remove()},t.prototype.updateRules=function(){this.node.innerHTML=Array.from(this.rules.values()).join(\"\\n\")},t.prototype.addRule=function(t,e,i){return void 0===i&&(i=!0),this.rules.set(t,e),i&&this.updateRules(),t},t.prototype.updateRule=function(t,e,i){return void 0===i&&(i=!0),this.rules.set(t,e),i&&this.updateRules(),t},t.prototype.deleteRule=function(t,e){void 0===e&&(e=!0),this.rules.get(t)&&e&&this.updateRules()},Object.defineProperty(t.prototype,\"ruleNames\",{get:function(){return Array.from(this.rules.keys())},enumerable:!0,configurable:!0}),t}(),P=\"\\n  <header>\\n    <article></article>\\n  </header>\\n  <main>\\n    <footer>&nbsp;</footer>\\n    <article></article>\\n  </main>\";function H(t){return t.innerHTML=P,t}function A(t,e){t.dataset.id=e.id}var M=function(t){function e(e,i){var o=t.call(this,e)||this;o.id=i;var n=e.querySelector(\"header\"),r=e.querySelector(\"main\"),s=0,a=0;return R(r,\"animation\",function(t){var i=n.scrollLeft,l=t.left;i!==l&&(n.scrollLeft=l),e.classList.toggle(\"le-shifted\",t.left>0);var h=t.width-n.clientWidth;if(!(Math.abs(h)<2)){var c=r.scrollWidth-n.scrollWidth;s===h&&a===c||(s=h,a=c,self.setTimeout(function(){o.updateRule(\"__scollBarFix\",\"\\n          \"+o.hashedId+\" > header {\\n            margin-right: \"+-h+\"px;\\n          }\\n        \",!1),o.updateRule(\"__scollBarFix2\",\"\\n          \"+o.hashedId+\" > header > :last-child {\\n            border-right: \"+c+\"px solid transparent;\\n          }\")},0))}}),o}return n(e,t),Object.defineProperty(e.prototype,\"hashedId\",{get:function(){return this.id.startsWith(\"#\")?this.id:\"#\"+this.id},enumerable:!0,configurable:!0}),e.prototype.update=function(t,e,i,o,n){void 0===n&&(n=\"px\");var r=void 0!==o?this.tableIds(o,!0):{header:this.id+\" > header > article\",body:this.id+\" > main > article\"};this.updateRule(\"__heightsRule\"+r.body,r.body+\" > div {\\n      height: \"+t+\"px;\\n    }\",!1),this.updateColumns(e,r,i,n),this.updateRules()},e.prototype.remove=function(t){var e=this.tableIds(t,!0);this.deleteRule(\"__heightsRule\"+e.body,!1),this.deleteRule(\"__widthRule\"+e.body,!1);for(var i=\"__col\"+e.body+\"_\",o=this.ruleNames.reduce(function(t,e){return t+(e.startsWith(i)?1:0)},0),n=0;n<o;++n)this.deleteRule(\"\"+i+n,!1);this.updateRules()},e.prototype.tableIds=function(t,e){void 0===e&&(e=!1);var i=this.id.startsWith(\"#\")?this.id.slice(1):this.id;return{header:(e?\"#\":\"\")+i+\"_H\"+t,body:(e?\"#\":\"\")+i+\"_B\"+t}},e.prototype.updateColumns=function(t,e,i,o){var n=this;void 0===o&&(o=\"px\");var r=\"__col\"+e.body+\"_\",s=this.ruleNames.reduce(function(t,e){return t+(e.startsWith(r)?1:0)},0),a=0,l=0;t.forEach(function(t){var s=e.body+' > div > [data-id=\"'+t.id+'\"], '+e.header+' [data-id=\"'+t.id+'\"] {\\n        width: '+t.width+o+\";\\n        \"+(t.frozen?\"left: \"+a+\"px;\":\"\")+\"\\n      }\";if(0!==i&&t.frozen){var h=e.body+' > div > [data-id=\"'+t.id+'\"] {\\n          width: '+t.width+o+\";\\n          left: \"+(a+i)+\"px;\\n        }\";s=e.header+' [data-id=\"'+t.id+'\"] {\\n          width: '+t.width+o+\";\\n          left: \"+a+\"px;\\n        }\",n.updateRule(\"\"+r+l++,h,!1)}t.frozen&&(a+=t.width),n.updateRule(\"\"+r+l++,s,!1)});for(var h=l-1;h<s;++h)this.deleteRule(\"\"+r+h,!1)},e}(S),F=function(){function t(t,e,i){for(var o=[],n=3;n<arguments.length;n++)o[n-3]=arguments[n];var r=this;this.header=t,this.style=e,this.tableId=i,this.cellPool=[],this.visibleColumns={frozen:[],first:0,forcedFirst:0,last:-1,forcedLast:-1},this.visibleFirstColumnPos=0,this.columnAdapter=this.createColumnAdapter(),this.columnMixins=o.map(function(t){return new t(r.columnAdapter)}),this.columnFragment=t.ownerDocument.createDocumentFragment()}return t.prototype.leftShift=function(){var t=this.context,e=this.visibleColumns.frozen.reduce(function(e,i){return e+t.columns[i].width+t.column.padding(i)},0);return this.visibleFirstColumnPos-e},Object.defineProperty(t.prototype,\"headerScroller\",{get:function(){return this.header.parentElement},enumerable:!0,configurable:!0}),t.prototype.addColumnMixin=function(t,e){this.columnMixins.push(new t(this.columnAdapter,e))},t.prototype.createColumnAdapter=function(){var t=this,e={visible:this.visibleColumns,addAtBeginning:this.addColumnAtStart.bind(this),addAtBottom:this.addColumnAtEnd.bind(this),removeFromBeginning:this.removeColumnFromStart.bind(this),removeFromBottom:this.removeColumnFromEnd.bind(this),updateOffset:this.updateColumnOffset.bind(this),scroller:this.headerScroller,syncFrozen:this.syncFrozen.bind(this)};return Object.defineProperties(e,{visibleFirstRowPos:{get:function(){return t.visibleFirstColumnPos},enumerable:!0},context:{get:function(){return t.context.column},enumerable:!0}}),e},t.prototype.init=function(){var t=this,e=this.context;this.style.update(e.defaultRowHeight-e.padding(-1),e.columns,0,this.tableId),e.columns.forEach(function(){t.cellPool.push([])})},t.prototype.onScrolledHorizontally=function(t,e,i){var o=this.onScrolledHorizontallyImpl(t,e);return this.columnMixins.forEach(function(t){return t.onScrolled(i,o)}),o},t.prototype.removeColumnFromStart=function(t,e,i){var o=this;void 0===i&&(i=this.visibleColumns.frozen.length),this.forEachRow(function(n){o.removeCellFromStart(n,t,e,i)})},t.prototype.removeCellFromStart=function(t,e,i,o){for(var n=e;n<=i;++n){var r=0===o?t.firstElementChild:t.children[o];r.remove(),this.recycleCell(r,n)}},t.prototype.removeColumnFromEnd=function(t,e){var i=this;this.forEachRow(function(o){i.removeCellFromEnd(o,t,e)})},t.prototype.removeCellFromEnd=function(t,e,i){for(var o=i;o>=e;--o){var n=t.lastElementChild;n.remove(),this.recycleCell(n,o)}},t.prototype.removeFrozenCells=function(t,e,i){for(var o=0,n=e;o<n.length;o++){var r=n[o],s=t.children[i];s.remove(),this.recycleCell(s,r)}},t.prototype.removeFrozenColumns=function(t,e){var i=this;this.forEachRow(function(o){i.removeFrozenCells(o,t,e)})},t.prototype.removeAllColumns=function(t){var e=this;this.forEachRow(function(i){e.removeAllCells(i,t)})},t.prototype.removeAllCells=function(t,e,i){var o=this;void 0===i&&(i=this.visibleColumns.first);var n=Array.from(t.children),r=this.visibleColumns.frozen;if(t.innerHTML=\"\",e||0===r.length)for(var s=0,a=r;s<a.length;s++){var l=a[s];this.recycleCell(n.shift(),l)}else for(var h=0,c=r;h<c.length;h++){c[h];t.appendChild(n.shift())}n.forEach(function(t,e){o.recycleCell(t,e+i)})},t.prototype.selectCell=function(t,e,i){var o=this.cellPool[e],n=i[e];if(o.length>0){var r=o.pop(),s=this.updateCell(r,t,n);return s&&s!==r&&A(s,n),s||r}var a=this.createCell(this.header.ownerDocument,t,n);return A(a,n),a},t.prototype.recycleCell=function(t,e){this.cellPool[e].push(t)},t.prototype.addColumnAtStart=function(t,e,i){var o=this;void 0===i&&(i=this.visibleColumns.frozen.length);var n=this.context.columns;this.forEachRow(function(r,s){o.addCellAtStart(r,s,t,e,i,n)})},t.prototype.addCellAtStart=function(t,e,i,o,n,r){for(var s=o;s>=i;--s){var a=this.selectCell(e,s,r);t.insertBefore(a,n>0?t.children[n]:t.firstChild)}},t.prototype.insertFrozenCells=function(t,e,i,o,n){for(var r=t.children[o],s=0,a=i;s<a.length;s++){var l=a[s],h=this.selectCell(e,l,n);r?t.insertBefore(h,r):t.appendChild(h)}},t.prototype.insertFrozenColumns=function(t,e){var i=this,o=this.context.columns;this.forEachRow(function(n,r){i.insertFrozenCells(n,r,t,e,o)})},t.prototype.addColumnAtEnd=function(t,e){var i=this,o=this.context.columns;this.forEachRow(function(n,r){i.addCellAtEnd(n,r,t,e,o)})},t.prototype.verifyRows=function(){var t=this.context.columns;this.forEachRow(function(e,i){return T(e,i,t)})},t.prototype.addCellAtEnd=function(t,e,i,o,n){for(var r=i;r<=o;++r){var s=this.selectCell(e,r,n);t.appendChild(s)}},t.prototype.updateHeaders=function(){var t=this,e=this.context.columns;Array.from(this.header.children).forEach(function(i,o){t.updateHeader(i,e[o])})},t.prototype.recreate=function(t,e){var i=this,o=this.context;this.style.update(o.defaultRowHeight-o.padding(-1),o.columns,-this.leftShift(),this.tableId),this.clearPool();for(var n=this.cellPool.length;n<o.columns.length;++n)this.cellPool.push([]);var r=this.columnFragment,s=r.ownerDocument;this.header.innerHTML=\"\",o.columns.forEach(function(t){var e=i.createHeader(s,t);A(e,t),r.appendChild(e)}),this.header.appendChild(r);var a=g(t,e,o.column.defaultRowHeight,o.column.exceptions,o.column.numberOfRows),l=a.first,h=a.last,c=a.firstRowPos;if(this.visibleColumns.first=this.visibleColumns.forcedFirst=l,this.visibleColumns.last=this.visibleColumns.forcedLast=h,o.columns.some(function(t){return t.frozen})){var d=x([],o.columns,l).target;this.visibleColumns.frozen=d}else this.visibleColumns.frozen=[];this.updateColumnOffset(c)},t.prototype.clearPool=function(){this.cellPool.forEach(function(t){return t.splice(0,t.length)})},t.prototype.updateColumnOffset=function(t){var e=t!==this.visibleFirstColumnPos;if(this.visibleFirstColumnPos=t,e){var i=this.context;this.style.update(i.defaultRowHeight-i.padding(-1),i.columns,-this.leftShift(),this.tableId)}},t.prototype.createRow=function(t,e){var i=this.context.columns,o=this.visibleColumns;if(o.frozen.length>0)for(var n=0,r=o.frozen;n<r.length;n++){var s=r[n],a=this.selectCell(e,s,i);t.appendChild(a)}for(s=o.first;s<=o.last;++s){a=this.selectCell(e,s,i);t.appendChild(a)}},t.prototype.updateRow=function(t,e){var i=this.context.columns,o=this.visibleColumns,n=Array.from(t.children);switch(n.length){case 0:o.frozen.length>0&&this.insertFrozenCells(t,e,o.frozen,0,i),this.addCellAtEnd(t,e,o.first,o.last,i);break;case 1:var r=n[0],s=r.dataset.id,a=i.findIndex(function(t){return t.id===s});t.removeChild(r),a>=0&&this.recycleCell(r,a),o.frozen.length>0&&this.insertFrozenCells(t,e,o.frozen,0,i),this.addCellAtEnd(t,e,o.first,o.last,i);break;default:this.mergeColumns(t,e,n)}},t.prototype.mergeColumns=function(t,e,i){var o=this,n=this.context.columns,r=this.visibleColumns;t.innerHTML=\"\";var s=new Map(i.map(function(t){return[t.dataset.id,t]})),a=function(i){var r=n[i],a=s.get(r.id);if(a){var l=o.updateCell(a,e,r);l&&l!==a&&A(l,r),t.appendChild(l||a)}else{var h=o.selectCell(e,i,n);t.appendChild(h)}};r.frozen.forEach(a);for(var l=r.first;l<=r.last;++l)a(l)},t.prototype.syncFrozen=function(t){var e=this.context.columns,i=this.visibleColumns;if(!e.some(function(t){return t.frozen}))return 0;if(0===t)return i.frozen.length>0&&(this.removeFrozenColumns(i.frozen,0),i.frozen=[]),0;var o=i.frozen.length,n=x(i.frozen,e,t),r=n.target,s=n.added,a=n.removed;return a.length>0&&this.removeFrozenColumns(a,o-a.length),s.length>0&&this.insertFrozenColumns(s,o-a.length),i.frozen=r,r.length},t.prototype.onScrolledHorizontallyImpl=function(t,e){var i=this.context.column,o=g(t,e,i.defaultRowHeight,i.exceptions,i.numberOfRows),n=o.first,r=o.last,s=o.firstRowPos,a=this.visibleColumns;if(a.forcedFirst=n,a.forcedLast=r,n-a.first>=0&&r-a.last<=0)return u.NONE;var l=u.SOME,h=this.syncFrozen(n);return n>a.last||r<a.first?(this.removeAllColumns(!1),this.addColumnAtEnd(n,r),l=u.ALL):n<a.first?(this.removeColumnFromEnd(r+1,a.last),this.addColumnAtStart(n,a.first-1,h),l=u.SOME_TOP):(this.removeColumnFromStart(a.first,n-1,h),this.addColumnAtEnd(a.last+1,r),l=u.SOME_BOTTOM),a.first=n,a.last=r,this.updateColumnOffset(s),l},t}();function T(t,e,i){var o=Array.from(t.children);if(!(o.length<=1)){var n=o.map(function(t){return i.find(function(e){return e.id===t.dataset.id})});console.assert(n.every(function(t){return Boolean(t)}),\"all columns must exist\",e),console.assert(n.every(function(t,e){return 0===e||t.index>=n[e-1].index}),\"all columns in ascending order\",e),console.assert(new Set(n).size===n.length,\"unique columns\",n)}}var z=function(t){function e(e,i,o){void 0===o&&(o={});var r=t.call(this,H(e).querySelector(\"main > article\"),o)||this;r.root=e,e.classList.add(\"lineup-engine\"),r.style=new M(r.root,i);var s=r,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,\"context\",{get:function(){return s.context},enumerable:!0,configurable:!0}),e.prototype.createHeader=function(t,e){return s.createHeader(t,e)},e.prototype.updateHeader=function(t,e){return s.updateHeader(t,e)},e.prototype.createCell=function(t,e,i){return s.createCell(t,e,i)},e.prototype.updateCell=function(t,e,i){return s.updateCell(t,e,i)},e.prototype.updateColumnOffset=function(e){t.prototype.updateColumnOffset.call(this,e),s.updateOffset(s.visibleFirstRowPos)},e.prototype.forEachRow=function(t){return s.forEachRow(t)},e}(F);return r.cell=new(a.bind.apply(a,[void 0,r.header,r.style,void 0].concat(o.mixins||[]))),r}return n(e,t),Object.defineProperty(e.prototype,\"header\",{get:function(){return this.root.querySelector(\"header > article\")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"headerScroller\",{get:function(){return this.root.querySelector(\"header\")},enumerable:!0,configurable:!0}),e.prototype.addColumnMixin=function(t,e){this.cell.addColumnMixin(t,e)},e.prototype.init=function(){var e=this;this.cell.init();var i=R(this.body.parentElement,this.options.async,function(t){if(!(Math.abs(i.left-t.left)<e.options.minScrollDelta&&Math.abs(i.width-t.width)<e.options.minScrollDelta)){var o=t.left>i.left;i=t,e.onScrolledHorizontally(t.left,t.width,o)}});t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.root.remove()},e.prototype.onScrolledHorizontally=function(t,e,i){return this.cell.onScrolledHorizontally(t,e,i)},e.prototype.updateHeaders=function(){this.cell.updateHeaders()},e.prototype.updateColumnWidths=function(){var t=this.context;this.style.update(t.defaultRowHeight-t.padding(-1),t.columns,-this.cell.leftShift())},e.prototype.updateSizer=function(t){var e=this.context,i=e.totalHeight,o=e.column.totalHeight;this.body.style.transform=\"translate(\"+this.cell.leftShift().toFixed(0)+\"px, \"+t.toFixed(0)+\"px)\",this.bodySizer.style.transform=\"translate(\"+Math.max(0,o-1).toFixed(0)+\"px, \"+Math.max(0,i-1).toFixed(0)+\"px)\"},e.prototype.recreate=function(e){var i=this.bodyScroller,o=i.scrollLeft;this.cell.recreate(o,i.clientWidth),t.prototype.recreate.call(this,e),i.scrollLeft=o},e.prototype.clearPool=function(){t.prototype.clearPool.call(this),this.cell.clearPool()},e.prototype.createRow=function(t,e){this.cell.createRow(t,e)},e.prototype.updateRow=function(t,e){this.cell.updateRow(t,e)},e}(E),_=i(1),L=function(){function t(t,e){return this.adapter=t,this.prefetchTimeout=-1,this.cleanupTimeout=-1,this.options={prefetchRows:20,cleanUpRows:3,delay:50},Object.assign(this.options,e),this}return t.prototype.prefetchDown=function(){this.prefetchTimeout=-1;var t=this.adapter.context,e=Math.min(this.adapter.visible.forcedLast+this.options.prefetchRows,t.numberOfRows-1);this.adapter.visible.last===e&&this.adapter.visible.last>=this.adapter.visible.forcedLast+this.options.prefetchRows||(this.adapter.addAtBottom(this.adapter.visible.last+1,e),this.adapter.visible.last=e)},t.prototype.prefetchUp=function(){if(this.prefetchTimeout=-1,!(this.adapter.visible.first<=this.adapter.visible.forcedFirst-this.options.prefetchRows)){var t=this.adapter.context,e=this.adapter.scroller,i=g(Math.max(e.scrollTop-this.options.prefetchRows*t.defaultRowHeight,0),e.clientHeight,t.defaultRowHeight,t.exceptions,t.numberOfRows),o=i.first,n=i.firstRowPos;if(o!==this.adapter.visible.first){var r=this.adapter.syncFrozen?this.adapter.syncFrozen(o):0;this.adapter.addAtBeginning(o,this.adapter.visible.first-1,r),this.adapter.visible.first=o,this.adapter.updateOffset(n)}}},t.prototype.triggerPrefetch=function(t){this.prefetchTimeout>=0&&clearTimeout(this.prefetchTimeout);var e=this.adapter.visible.last<this.adapter.visible.forcedLast+this.options.prefetchRows,i=this.adapter.visible.first>this.adapter.visible.forcedFirst-this.options.prefetchRows,o=this.adapter.visible.last===this.adapter.context.numberOfRows,n=0===this.adapter.visible.first;if((!t||e||o)&&(t||i||n)){var r=t||n?this.prefetchDown.bind(this):this.prefetchUp.bind(this);this.prefetchTimeout=self.setTimeout(r,this.options.delay)}},t.prototype.cleanUpTop=function(t){this.cleanupTimeout=-1;var e=Math.max(0,t-this.options.cleanUpRows);if(!(e<=this.adapter.visible.first)){var i=this.adapter.syncFrozen?this.adapter.syncFrozen(e):0;this.adapter.removeFromBeginning(this.adapter.visible.first,e-1,i);var o=this.adapter.context,n=(e-this.adapter.visible.first)*o.defaultRowHeight;if(o.exceptions.length>0)for(var r=this.adapter.visible.first;r<e;++r)o.exceptionsLookup.has(r)&&(n+=o.exceptionsLookup.get(r)-o.defaultRowHeight);this.adapter.visible.first=e,this.adapter.updateOffset(this.adapter.visibleFirstRowPos+n),this.prefetchDown()}},t.prototype.cleanUpBottom=function(t){this.cleanupTimeout=-1;var e=t+this.options.cleanUpRows;this.adapter.visible.last<=e||(this.adapter.removeFromBottom(e+1,this.adapter.visible.last),this.adapter.visible.last=e,this.prefetchUp())},t.prototype.triggerCleanUp=function(t,e,i){this.cleanupTimeout>=0&&clearTimeout(this.cleanupTimeout),i&&t-this.options.cleanUpRows<=this.adapter.visible.first||!i&&this.adapter.visible.last<=e+this.options.cleanUpRows||(this.cleanupTimeout=self.setTimeout(i?this.cleanUpTop.bind(this):this.cleanUpBottom.bind(this),this.options.delay,i?t:e))},t.prototype.onScrolled=function(t,e){e!==u.ALL&&this.options.cleanUpRows>0&&this.triggerCleanUp(this.adapter.visible.forcedFirst,this.adapter.visible.forcedLast,t),e!==u.NONE&&this.options.prefetchRows>0&&this.triggerPrefetch(t)},t}(),B=function(t){function e(e,i,o,r,s){void 0===s&&(s={});var a=t.call(this,i,s)||this;a.header=e,a.body=i,a.tableId=o,a.style=r;var l=a,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),Object.defineProperty(e.prototype,\"context\",{get:function(){return l.context},enumerable:!0,configurable:!0}),e.prototype.createHeader=function(t,e){return l.createHeader(t,e)},e.prototype.updateHeader=function(t,e){return l.updateHeader(t,e)},e.prototype.createCell=function(t,e,i){return l.createCell(t,e,i)},e.prototype.updateColumnOffset=function(e){t.prototype.updateColumnOffset.call(this,e),l.updateOffset(l.visibleFirstRowPos)},e.prototype.updateCell=function(t,e,i){return l.updateCell(t,e,i)},e.prototype.forEachRow=function(t){return l.forEachRow(t)},e}(F);return a.cell=new(h.bind.apply(h,[void 0,a.header,a.style,o].concat(s.mixins||[]))),a}return n(e,t),e.prototype.addColumnMixin=function(t,e){this.cell.addColumnMixin(t,e)},Object.defineProperty(e.prototype,\"width\",{get:function(){return this.context.column.totalHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"height\",{get:function(){return this.context.totalHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"hidden\",{get:function(){return this.header.classList.contains(\"loading\")},set:function(t){this.hidden!==t&&(this.header.classList.toggle(\"loading\",t),this.body.classList.toggle(\"loading\",t),this.onVisibilityChanged(!t))},enumerable:!0,configurable:!0}),e.prototype.updateSizer=function(t){this.body.style.transform=\"translate(\"+this.cell.leftShift().toFixed(0)+\"px, \"+t.toFixed(0)+\"px)\"},e.prototype.onVisibilityChanged=function(t){},e.prototype.hide=function(){this.hidden=!0},e.prototype.show=function(t,e,i){var o=this.hidden;this.hidden=!1,o?this.revalidate():this.onScrolledHorizontally(t,e,i)},e.prototype.init=function(){this.hide(),this.cell.init(),t.prototype.init.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.header.remove(),this.style.remove(this.tableId)},e.prototype.onScrolledVertically=function(e,i,o){return this.hidden?u.NONE:t.prototype.onScrolledVertically.call(this,e,i,o)},e.prototype.onScrolledHorizontally=function(t,e,i){return this.cell.onScrolledHorizontally(t,e,i)},e.prototype.updateHeaders=function(){this.cell.updateHeaders()},e.prototype.updateColumnWidths=function(){var t=this.context;this.style.update(t.defaultRowHeight-t.padding(-1),t.columns,-this.cell.leftShift(),this.tableId)},e.prototype.recreate=function(e){var i=this.bodyScroller,o=i.scrollLeft;this.cell.recreate(o,i.clientWidth),t.prototype.recreate.call(this,e),i.scrollLeft=o},e.prototype.clearPool=function(){t.prototype.clearPool.call(this),this.cell.clearPool()},e.prototype.createRow=function(t,e){this.cell.createRow(t,e)},e.prototype.updateRow=function(t,e){this.cell.updateRow(t,e)},e}(O),I=function(){function t(t,e,i){void 0===i&&(i={});var o=this;this.node=t,this.tableId=0,this.sections=[],this.options={columnPadding:0,async:w,minScrollDelta:30},Object.assign(this.options,i),t.id=e.startsWith(\"#\")?e.slice(1):e,t.innerHTML=\"<header><footer>&nbsp;</footer></header><main><footer>&nbsp;</footer></main>\",t.classList.add(\"lineup-engine\",\"lineup-multi-engine\"),this.style=new M(this.node,e);var n=R(this.main,this.options.async,function(t){if(!(Math.abs(n.left-t.left)<o.options.minScrollDelta&&Math.abs(n.width-t.width)<o.options.minScrollDelta)){var e=t.left>n.left;n=t,o.onScrolledHorizontally(t.left,t.width,e)}})}return t.prototype.update=function(){var t=this;this.onScrolledHorizontally(this.main.scrollLeft,this.main.clientWidth,!1);var e=0;this.sections.forEach(function(i){i.body.style.left=i.header.style.left=e+\"px\",e+=i.width+t.options.columnPadding})},t.prototype.onScrolledHorizontally=function(t,e,i){var o=this,n=0,r=t+e;this.sections.forEach(function(e){var s=n+e.width;s<t||n>r?e.hide():e.show(Math.max(0,t-n),Math.min(r-n,e.width),i),n=s+o.options.columnPadding}),this.updateOffset()},t.prototype.updateOffset=function(){var t=this,e=this.header.querySelector(\"footer\"),i=this.main.querySelector(\"footer\"),o=Math.max.apply(Math,[0].concat(this.sections.map(function(t){return t.height}))),n=this.sections.reduce(function(e,i){return e+i.width+t.options.columnPadding},0);e.style.transform=\"translate(\"+n+\"px,0)\",i.style.transform=\"translate(\"+n+\"px, \"+o+\"px)\"},t.prototype.destroy=function(){this.sections.forEach(function(t){return t.destroy()}),this.node.remove()},Object.defineProperty(t.prototype,\"doc\",{get:function(){return this.node.ownerDocument},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"header\",{get:function(){return this.node.querySelector(\"header\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"main\",{get:function(){return this.node.querySelector(\"main\")},enumerable:!0,configurable:!0}),t.prototype.pushTable=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.doc.createElement(\"article\"),n=this.doc.createElement(\"article\"),r=\"T\"+this.tableId++,s=this.style.tableIds(r);o.id=s.header,n.id=s.body,this.header.insertBefore(o,this.header.lastElementChild),this.main.appendChild(n);var a=t.apply(void 0,[o,n,r,this.style].concat(e));return a.init(),this.sections.push(a),this.update(),a},t.prototype.pushSeparator=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=this.doc.createElement(\"section\"),n=this.doc.createElement(\"section\");this.header.insertBefore(o,this.header.lastElementChild),this.main.appendChild(n);var r=t.apply(void 0,[o,n,this.style].concat(e));return r.init(),this.sections.push(r),this.update(),r},t.prototype.remove=function(t){var e=this.sections.indexOf(t);return!(e<0)&&(this.sections.splice(e,1),t.destroy(),this.update(),!0)},t.prototype.clear=function(){this.sections.splice(0,this.sections.length).forEach(function(t){return t.destroy()}),this.update()},t.prototype.widthChanged=function(){this.update()},t}();i.d(e,\"version\",function(){return D}),i.d(e,\"ACellRenderer\",function(){return z}),i.d(e,\"ARowRenderer\",function(){return E}),i.d(e,\"uniformContext\",function(){return m}),i.d(e,\"nonUniformContext\",function(){return y}),i.d(e,\"randomContext\",function(){return v}),i.d(e,\"range\",function(){return g}),i.d(e,\"frozenDelta\",function(){return b}),i.d(e,\"updateFrozen\",function(){return x}),i.d(e,\"ABORTED\",function(){return r}),i.d(e,\"isAbortAble\",function(){return a}),i.d(e,\"abortAble\",function(){return s}),i.d(e,\"IColumn\",function(){return _.IColumn}),i.d(e,\"GridStyleManager\",function(){return M}),i.d(e,\"setColumn\",function(){return A}),i.d(e,\"TEMPLATE\",function(){return P}),i.d(e,\"setTemplate\",function(){return H}),i.d(e,\"StyleManager\",function(){return S}),i.d(e,\"IMixin\",function(){}),i.d(e,\"IMixinAdapter\",function(){}),i.d(e,\"IMixinClass\",function(){}),i.d(e,\"EScrollResult\",function(){return u}),i.d(e,\"PrefetchMixin\",function(){return L}),i.d(e,\"ITableCellRenderContext\",function(){}),i.d(e,\"ACellTableSection\",function(){return B}),i.d(e,\"IMultiTableRowRendererOptions\",function(){}),i.d(e,\"ISeparatorFactory\",function(){}),i.d(e,\"ITableFactory\",function(){}),i.d(e,\"ITableSection\",function(){}),i.d(e,\"MultiTableRowRenderer\",function(){return I}),i.d(e,\"KeyFinder\",function(){return h}),i.d(e,\"EAnimationMode\",function(){return l}),i.d(e,\"noAnimationChange\",function(){return d}),i.d(e,\"defaultPhases\",function(){return f});var D=\"1.1.0\"},function(t,e){}])});","import {uniqueId} from './dialogs/utils';\r\n\r\n/** @internal */\r\nexport const filterMissingText = 'Filter rows containing missing values';\r\n\r\n/** @internal */\r\nexport function filterMissingMarkup(bakMissing: boolean, idPrefix: string) {\r\n  const id = uniqueId(idPrefix);\r\n  return `<div class=\"lu-checkbox\"><input type=\"checkbox\" ${bakMissing ? 'checked=\"checked\"' : ''} id=\"${id}\"><label for=\"${id}\" class=\"lu-filter-missing\">${filterMissingText}</label></div>`;\r\n}\r\n\r\n/** @internal */\r\nexport function filterMissingNumberMarkup(bakMissing: boolean, count: number, idPrefix: string) {\r\n  const id = uniqueId(idPrefix);\r\n  return `<div class=\"lu-checkbox\"><input type=\"checkbox\" ${bakMissing ? 'checked=\"checked\"' : ''} ${count === 0 ? 'disabled' : ''} id=\"${id}\"><label for=\"${id}\" class=\"lu-filter-missing\" ${count === 0 ? 'class=\"lu-disabled\"' : ''}>Filter ${count} missing value rows</label></div>`;\r\n}\r\n\r\nexport function findFilterMissing(node: HTMLElement) {\r\n  return <HTMLInputElement>(<HTMLElement>node.querySelector('.lu-filter-missing')).previousElementSibling;\r\n}\r\n\r\n/** @internal */\r\nexport function updateFilterMissingNumberMarkup(element: HTMLElement, count: number) {\r\n  const checked = element.querySelector('input')!;\r\n  if (count > 0) {\r\n    element.classList.remove('lu-disabled');\r\n    checked.disabled = false;\r\n  }\r\n  if (!checked.checked) {\r\n    element.lastElementChild!.textContent = `Filter ${count} remaining missing value rows`;\r\n  }\r\n}\r\n","// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimal(1.23) returns [\"123\", 0].\nexport default function(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x) {\n  return x = formatDecimal(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-\\( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  return new FormatSpecifier(specifier);\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nfunction FormatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  this.fill = match[1] || \" \";\n  this.align = match[2] || \">\";\n  this.sign = match[3] || \"-\";\n  this.symbol = match[4] || \"\";\n  this.zero = !!match[5];\n  this.width = match[6] && +match[6];\n  this.comma = !!match[7];\n  this.precision = match[8] && +match[8].slice(1);\n  this.trim = !!match[9];\n  this.type = match[10] || \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width == null ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision == null ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (i0 > 0) { if (!+s[i]) break out; i0 = 0; } break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimal(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import formatDecimal from \"./formatDecimal\";\n\nexport default function(x, p) {\n  var d = formatDecimal(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatPrefixAuto from \"./formatPrefixAuto\";\nimport formatRounded from \"./formatRounded\";\n\nexport default {\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": function(x) { return Math.round(x).toString(10); },\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent\";\nimport formatGroup from \"./formatGroup\";\nimport formatNumerals from \"./formatNumerals\";\nimport formatSpecifier from \"./formatSpecifier\";\nimport formatTrim from \"./formatTrim\";\nimport formatTypes from \"./formatTypes\";\nimport {prefixExponent} from \"./formatPrefixAuto\";\nimport identity from \"./identity\";\n\nvar prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping && locale.thousands ? formatGroup(locale.grouping, locale.thousands) : identity,\n      currency = locale.currency,\n      decimal = locale.decimal,\n      numerals = locale.numerals ? formatNumerals(locale.numerals) : identity,\n      percent = locale.percent || \"%\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision == null && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currency[0] : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currency[1] : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision == null ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Perform the initial formatting.\n        var valueNegative = value < 0;\n        value = formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero during formatting, treat as positive.\n        if (valueNegative && +value === 0) valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : \"-\") : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","import exponent from \"./exponent\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import Column from '../../model';\r\nimport {forEach, uniqueId} from '../../renderer/utils';\r\n\r\n/** @internal */\r\nexport function updateFilterState(attachment: HTMLElement, column: Column, filtered: boolean) {\r\n  const toggle = (e: Element) => {\r\n    const n = <HTMLElement>e;\r\n    if (filtered) {\r\n      n.dataset.active = '';\r\n    } else {\r\n      delete n.dataset.active;\r\n    }\r\n  };\r\n\r\n  toggle(attachment);\r\n  const root = attachment.closest('.lu');\r\n  if (!root) {\r\n    return;\r\n  }\r\n  Array.from(root.querySelectorAll(`[data-col-id=\"${column.id}\"] i[title^=Filter]`)).forEach(toggle);\r\n}\r\n\r\n/** @internal */\r\nexport function sortMethods(node: HTMLElement, column: {setSortMethod(v: string): void, getSortMethod(): string}, methods: string[], idPrefix: string) {\r\n  const id = uniqueId(idPrefix);\r\n  const bak = column.getSortMethod();\r\n  methods.forEach((d) => node.insertAdjacentHTML('beforeend', `<div class=\"checkbox\"><input id=\"${id}${d}\" type=\"radio\" name=\"multivaluesort\" value=\"${d}\"  ${(bak === d) ? 'checked' : ''} ><label for=\"${id}${d}\">${d.slice(0, 1).toUpperCase() + d.slice(1)}</label></div>`));\r\n\r\n  forEach(node, 'input[name=multivaluesort]', (n: HTMLInputElement) => {\r\n    n.addEventListener('change', () => column.setSortMethod(n.value), {\r\n      passive: true\r\n    });\r\n  });\r\n}\r\n\r\n\r\nexport {uniqueId, forEach, forEachChild} from '../../renderer/utils';\r\n","import {scaleLinear, scaleLog, scalePow, scaleSqrt} from 'd3-scale';\r\nimport {similar} from '../internal';\r\nimport Column from './Column';\r\nimport INumberColumn, {INumberFilter} from './INumberColumn';\r\nimport {IColorMappingFunction} from './ColorMappingFunction';\r\n\r\n/**\r\n * interface of a d3 scale\r\n */\r\nexport interface IScale {\r\n  (v: number): number;\r\n\r\n  invert(r: number): number;\r\n\r\n  domain(): number[];\r\n\r\n  domain(domain: number[]): this;\r\n\r\n  range(): number[];\r\n\r\n  range(range: number[]): this;\r\n}\r\n\r\nexport interface IMappingFunction {\r\n  //new(domain: number[]);\r\n\r\n  apply(v: number): number;\r\n\r\n  dump(): any;\r\n\r\n  restore(dump: any): void;\r\n\r\n  domain: number[];\r\n\r\n  clone(): IMappingFunction;\r\n\r\n  eq(other: IMappingFunction): boolean;\r\n\r\n  getRange(formatter: (v: number) => string): [string, string];\r\n\r\n}\r\n\r\n\r\nfunction toScale(type = 'linear'): IScale {\r\n  switch (type) {\r\n    case 'log':\r\n      return scaleLog().clamp(true);\r\n    case 'sqrt':\r\n      return scaleSqrt().clamp(true);\r\n    case 'pow1.1':\r\n      return scalePow().exponent(1.1).clamp(true);\r\n    case 'pow2':\r\n      return scalePow().exponent(2).clamp(true);\r\n    case 'pow3':\r\n      return scalePow().exponent(3).clamp(true);\r\n    default:\r\n      return scaleLinear().clamp(true);\r\n  }\r\n}\r\n\r\n\r\nexport interface IMapAbleColumn extends INumberColumn {\r\n  getOriginalMapping(): IMappingFunction;\r\n\r\n  getMapping(): IMappingFunction;\r\n\r\n  setMapping(mapping: IMappingFunction): void;\r\n\r\n  getColorMapping(): IColorMappingFunction;\r\n\r\n  setColorMapping(mapping: IColorMappingFunction): void;\r\n\r\n  getFilter(): INumberFilter;\r\n\r\n  setFilter(value?: INumberFilter): void;\r\n\r\n  getRange(): [string, string];\r\n}\r\n\r\nexport function isMapAbleColumn(col: Column): col is IMapAbleColumn {\r\n  return typeof (<IMapAbleColumn>col).getMapping === 'function';\r\n}\r\n\r\nfunction isSame(a: number[], b: number[]) {\r\n  if (a.length !== b.length) {\r\n    return false;\r\n  }\r\n  return a.every((ai, i) => similar(ai, b[i], 0.0001));\r\n}\r\n\r\n\r\nfunction fixDomain(domain: number[], type: string) {\r\n  if (type === 'log' && domain[0] === 0) {\r\n    domain[0] = 0.0000001; //0 is bad\r\n  }\r\n  return domain;\r\n}\r\n\r\n/**\r\n * a mapping function based on a d3 scale (linear, sqrt, log)\r\n */\r\nexport class ScaleMappingFunction implements IMappingFunction {\r\n  private s: IScale;\r\n\r\n  constructor(domain: number[] = [0, 1], private type = 'linear', range: number[] = [0, 1]) {\r\n\r\n    this.s = toScale(type).domain(fixDomain(domain, this.type)).range(range);\r\n  }\r\n\r\n  get domain() {\r\n    return this.s.domain();\r\n  }\r\n\r\n  set domain(domain: number[]) {\r\n    this.s.domain(fixDomain(domain, this.type));\r\n  }\r\n\r\n  get range() {\r\n    return this.s.range();\r\n  }\r\n\r\n  set range(range: number[]) {\r\n    this.s.range(range);\r\n  }\r\n\r\n  getRange(format: (v: number) => string): [string, string] {\r\n    return [format(this.invert(0)), format(this.invert(1))];\r\n  }\r\n\r\n  apply(v: number): number {\r\n    return this.s(v);\r\n  }\r\n\r\n  invert(r: number) {\r\n    return this.s.invert(r);\r\n  }\r\n\r\n  get scaleType() {\r\n    return this.type;\r\n  }\r\n\r\n  dump(): any {\r\n    return {\r\n      type: this.type,\r\n      domain: this.domain,\r\n      range: this.range\r\n    };\r\n  }\r\n\r\n  eq(other: IMappingFunction): boolean {\r\n    if (!(other instanceof ScaleMappingFunction)) {\r\n      return false;\r\n    }\r\n    const that = <ScaleMappingFunction>other;\r\n    return that.type === this.type && isSame(this.domain, that.domain) && isSame(this.range, that.range);\r\n  }\r\n\r\n  restore(dump: any) {\r\n    this.type = dump.type;\r\n    this.s = toScale(dump.type).domain(dump.domain).range(dump.range);\r\n  }\r\n\r\n  clone() {\r\n    return new ScaleMappingFunction(this.domain, this.type, this.range);\r\n  }\r\n}\r\n\r\n/**\r\n * a mapping function based on a custom user function using 'value' as the current value\r\n */\r\nexport class ScriptMappingFunction implements IMappingFunction {\r\n  private f: Function;\r\n\r\n  constructor(public domain: number[] = [0, 1], private _code: string = 'return this.linear(value,this.value_min,this.value_max);') {\r\n    this.f = new Function('value', _code);\r\n  }\r\n\r\n  get code() {\r\n    return this._code;\r\n  }\r\n\r\n  set code(code: string) {\r\n    if (this._code === code) {\r\n      return;\r\n    }\r\n    this._code = code;\r\n    this.f = new Function('value', code);\r\n  }\r\n\r\n  getRange(): [string, string] {\r\n    return ['?', '?'];\r\n  }\r\n\r\n  apply(v: number): number {\r\n    const min = this.domain[0],\r\n      max = this.domain[this.domain.length - 1];\r\n    const r = this.f.call({\r\n      value_min: min,\r\n      value_max: max,\r\n      value_range: max - min,\r\n      value_domain: this.domain.slice(),\r\n      linear: (v: number, mi: number, ma: number) => (v - mi) / (ma - mi)\r\n    }, v);\r\n\r\n    if (typeof r === 'number') {\r\n      return Math.max(Math.min(r, 1), 0);\r\n    }\r\n    return NaN;\r\n  }\r\n\r\n  dump(): any {\r\n    return {\r\n      type: 'script',\r\n      code: this.code,\r\n      domain: this.domain\r\n    };\r\n  }\r\n\r\n  eq(other: IMappingFunction): boolean {\r\n    if (!(other instanceof ScriptMappingFunction)) {\r\n      return false;\r\n    }\r\n    const that = <ScriptMappingFunction>other;\r\n    return that.code === this.code;\r\n  }\r\n\r\n  restore(dump: any) {\r\n    this.code = dump.code;\r\n    this.domain = dump.domain;\r\n  }\r\n\r\n  clone() {\r\n    return new ScriptMappingFunction(this.domain, this.code);\r\n  }\r\n}\r\n\r\nexport interface IMapAbleDesc {\r\n  /**\r\n   * dump of mapping function\r\n   */\r\n  map?: any;\r\n  /**\r\n   * either map or domain should be available\r\n   */\r\n  domain?: [number, number];\r\n  /**\r\n   * @default [0,1]\r\n   */\r\n  range?: [number, number];\r\n\r\n  colorMapping?: string | ((v: number)=>string) | any;\r\n}\r\n\r\nexport function createMappingFunction(dump: any): IMappingFunction {\r\n  if (dump.type === 'script') {\r\n    const s = new ScriptMappingFunction();\r\n    s.restore(dump);\r\n    return s;\r\n  }\r\n  const l = new ScaleMappingFunction();\r\n  l.restore(dump);\r\n  return l;\r\n}\r\n\r\nexport function restoreMapping(desc: IMapAbleDesc): IMappingFunction {\r\n  if (desc.map) {\r\n    return createMappingFunction(desc.map);\r\n  }\r\n  if (desc.domain) {\r\n    return new ScaleMappingFunction(desc.domain, 'linear', desc.range || [0, 1]);\r\n  }\r\n  return new ScaleMappingFunction([0, 1], 'linear', [0, 1]);\r\n}\r\n","import {suffix, IEventListener} from '../internal/AEventDispatcher';\r\nimport Column, {IColumnParent, IFlatColumn, widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport {Category, toolbar} from './annotations';\r\nimport {IDataRow} from './interfaces';\r\nimport {isNumberColumn} from './INumberColumn';\r\nimport ValueColumn from './ValueColumn';\r\n\r\nexport function isMultiLevelColumn(col: Column): col is IMultiLevelColumn {\r\n  return typeof ((<IMultiLevelColumn>col).getCollapsed) === 'function';\r\n}\r\n\r\n/**\r\n * emitted when the filter property changes\r\n * @asMemberOf CompositeColumn\r\n * @event\r\n */\r\nexport declare function filterChanged(previous: any | null, current: any | null): void;\r\n\r\n/**\r\n * emitted when a column has been added\r\n * @asMemberOf CompositeColumn\r\n * @event\r\n */\r\nexport declare function addColumn(col: Column, index: number): void;\r\n\r\n/**\r\n * emitted when a column has been moved within this composite columm\r\n * @asMemberOf CompositeColumn\r\n * @event\r\n */\r\nexport declare function moveColumn(col: Column, index: number, oldIndex: number): void;\r\n\r\n/**\r\n * emitted when a column has been removed\r\n * @asMemberOf CompositeColumn\r\n * @event\r\n */\r\nexport declare function removeColumn(col: Column, index: number): void;\r\n\r\n/**\r\n * implementation of a combine column, standard operations how to select\r\n */\r\n@toolbar('compositeContained', 'splitCombined')\r\n@Category('composite')\r\nexport default class CompositeColumn extends Column implements IColumnParent {\r\n  static readonly EVENT_FILTER_CHANGED = 'filterChanged';\r\n  static readonly EVENT_ADD_COLUMN = 'addColumn';\r\n  static readonly EVENT_MOVE_COLUMN = 'moveColumn';\r\n  static readonly EVENT_REMOVE_COLUMN = 'removeColumn';\r\n\r\n  protected readonly _children: Column[] = [];\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([CompositeColumn.EVENT_FILTER_CHANGED, CompositeColumn.EVENT_ADD_COLUMN, CompositeColumn.EVENT_MOVE_COLUMN, CompositeColumn.EVENT_REMOVE_COLUMN]);\r\n  }\r\n\r\n  on(type: typeof CompositeColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(type, listener);\r\n  }\r\n\r\n  assignNewId(idGenerator: () => string) {\r\n    super.assignNewId(idGenerator);\r\n    this._children.forEach((c) => c.assignNewId(idGenerator));\r\n  }\r\n\r\n  get children() {\r\n    return this._children.slice();\r\n  }\r\n\r\n  get length() {\r\n    return this._children.length;\r\n  }\r\n\r\n  flatten(r: IFlatColumn[], offset: number, levelsToGo = 0, padding = 0) {\r\n    let w = 0;\r\n    //no more levels or just this one\r\n    if (levelsToGo === 0 || levelsToGo <= Column.FLAT_ALL_COLUMNS) {\r\n      w = this.getWidth();\r\n      r.push({col: this, offset, width: w});\r\n      if (levelsToGo === 0) {\r\n        return w;\r\n      }\r\n    }\r\n    //push children\r\n    this._children.forEach((c) => {\r\n      if (c.isVisible() && levelsToGo <= Column.FLAT_ALL_COLUMNS) {\r\n        c.flatten(r, offset, levelsToGo - 1, padding);\r\n      }\r\n    });\r\n    return w;\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any) {\r\n    const r = super.dump(toDescRef);\r\n    r.children = this._children.map((d) => d.dump(toDescRef));\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    dump.children.map((child: any) => {\r\n      const c = factory(child);\r\n      if (c) {\r\n        this.push(c);\r\n      }\r\n    });\r\n    super.restore(dump, factory);\r\n  }\r\n\r\n  /**\r\n   * inserts a column at a the given position\r\n   * @param col\r\n   * @param index\r\n   * @returns {any}\r\n   */\r\n  insert(col: Column, index: number): Column | null {\r\n    if (!isNumberColumn(col) && this.canJustAddNumbers) { //indicator it is a number type\r\n      return null;\r\n    }\r\n    this._children.splice(index, 0, col);\r\n    //listen and propagate events\r\n    return this.insertImpl(col, index);\r\n  }\r\n\r\n  move(col: Column, index: number): Column | null {\r\n    if (col.parent !== this) { //not moving\r\n      return null;\r\n    }\r\n    const old = this._children.indexOf(col);\r\n    if (index === old) {\r\n      // no move needed\r\n      return col;\r\n    }\r\n    //delete first\r\n    this._children.splice(old, 1);\r\n    // adapt target index based on previous index, i.e shift by one\r\n    this._children.splice(old < index ? index - 1 : index, 0, col);\r\n    //listen and propagate events\r\n    return this.moveImpl(col, index, old);\r\n  }\r\n\r\n  protected insertImpl(col: Column, index: number) {\r\n    col.parent = this;\r\n    this.forward(col, ...suffix('.combine', Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY, CompositeColumn.EVENT_FILTER_CHANGED, Column.EVENT_RENDERER_TYPE_CHANGED, Column.EVENT_GROUP_RENDERER_TYPE_CHANGED));\r\n    this.fire([CompositeColumn.EVENT_ADD_COLUMN, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], col, index);\r\n    return col;\r\n  }\r\n\r\n  protected moveImpl(col: Column, index: number, oldIndex: number) {\r\n    this.fire([CompositeColumn.EVENT_MOVE_COLUMN, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY, Column.EVENT_RENDERER_TYPE_CHANGED, Column.EVENT_GROUP_RENDERER_TYPE_CHANGED], col, index, oldIndex);\r\n    return col;\r\n  }\r\n\r\n  push(col: Column) {\r\n    return this.insert(col, this._children.length);\r\n  }\r\n\r\n  at(index: number) {\r\n    return this._children[index];\r\n  }\r\n\r\n  indexOf(col: Column) {\r\n    return this._children.indexOf(col);\r\n  }\r\n\r\n  insertAfter(col: Column, ref: Column) {\r\n    const i = this.indexOf(ref);\r\n    if (i < 0) {\r\n      return null;\r\n    }\r\n    return this.insert(col, i + 1);\r\n  }\r\n\r\n  moveAfter(col: Column, ref: Column) {\r\n    const i = this.indexOf(ref);\r\n    if (i < 0) {\r\n      return null;\r\n    }\r\n    return this.move(col, i + 1);\r\n  }\r\n\r\n\r\n  remove(child: Column) {\r\n    const i = this._children.indexOf(child);\r\n    if (i < 0) {\r\n      return false;\r\n    }\r\n    this._children.splice(i, 1); //remove and deregister listeners\r\n    return this.removeImpl(child, i);\r\n  }\r\n\r\n  protected removeImpl(child: Column, index: number) {\r\n    child.parent = null;\r\n    this.unforward(child, ...suffix('.combine', Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY, CompositeColumn.EVENT_FILTER_CHANGED));\r\n    this.fire([CompositeColumn.EVENT_REMOVE_COLUMN, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], child, index);\r\n    return true;\r\n  }\r\n\r\n  getColor(_row: IDataRow) {\r\n    return this.color;\r\n  }\r\n\r\n  isFiltered() {\r\n    return this._children.some((d) => d.isFiltered());\r\n  }\r\n\r\n  filter(row: IDataRow) {\r\n    return this._children.every((d) => d.filter(row));\r\n  }\r\n\r\n  isLoaded(): boolean {\r\n    return this._children.every((c) => !(c instanceof ValueColumn || c instanceof CompositeColumn) || (<ValueColumn<any> | CompositeColumn>c).isLoaded());\r\n  }\r\n\r\n  get canJustAddNumbers() {\r\n    return false;\r\n  }\r\n}\r\n\r\nexport interface IMultiLevelColumn extends CompositeColumn {\r\n  getCollapsed(): boolean;\r\n\r\n  setCollapsed(value: boolean): void;\r\n}\r\n","import {format} from 'd3-format';\r\nimport {IBoxPlotData} from '../internal';\r\nimport {Category, toolbar, SortByDefault, dialogAddons} from './annotations';\r\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport ValueColumn, {IValueColumnDesc, dataLoaded} from './ValueColumn';\r\nimport {IDataRow} from './interfaces';\r\nimport {isDummyNumberFilter, restoreFilter} from './internal';\r\nimport {\r\n  compareBoxPlot, ESortMethod, getBoxPlotNumber, IBoxPlotColumn, INumberFilter, noNumberFilter\r\n} from './INumberColumn';\r\nimport {\r\n  createMappingFunction, IMapAbleDesc, IMappingFunction, restoreMapping,\r\n  ScaleMappingFunction\r\n} from './MappingFunction';\r\nimport NumberColumn, {colorMappingChanged} from './NumberColumn';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\nimport {IColorMappingFunction, restoreColorMapping, createColorMappingFunction} from './ColorMappingFunction';\r\n\r\n\r\nexport interface IBoxPlotDesc extends IMapAbleDesc {\r\n  sort?: ESortMethod;\r\n}\r\n\r\nexport declare type IBoxPlotColumnDesc = IBoxPlotDesc & IValueColumnDesc<IBoxPlotData>;\r\n\r\n\r\n/**\r\n * emitted when the sort method property changes\r\n * @asMemberOf BoxPlotColumn\r\n * @event\r\n */\r\nexport declare function sortMethodChanged(previous: ESortMethod, current: ESortMethod): void;\r\n\r\n/**\r\n * emitted when the mapping property changes\r\n * @asMemberOf BoxPlotColumn\r\n * @event\r\n */\r\nexport declare function mappingChanged(previous: IMappingFunction, current: IMappingFunction): void;\r\n\r\n\r\n@toolbar('filterMapped', 'colorMapped')\r\n@dialogAddons('sort', 'sortBoxPlot')\r\n@Category('array')\r\n@SortByDefault('descending')\r\nexport default class BoxPlotColumn extends ValueColumn<IBoxPlotData> implements IBoxPlotColumn {\r\n  static readonly EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\r\n  static readonly EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\r\n  static readonly EVENT_SORTMETHOD_CHANGED = 'sortMethodChanged';\r\n\r\n  static readonly DEFAULT_FORMATTER = format('.3n');\r\n\r\n  private sort: ESortMethod;\r\n\r\n  private mapping: IMappingFunction;\r\n  private colorMapping: IColorMappingFunction;\r\n\r\n  private original: Readonly<IMappingFunction>;\r\n  /**\r\n   * currently active filter\r\n   * @type {{min: number, max: number}}\r\n   * @private\r\n   */\r\n  private currentFilter: INumberFilter = noNumberFilter();\r\n\r\n\r\n  constructor(id: string, desc: Readonly<IBoxPlotColumnDesc>) {\r\n    super(id, desc);\r\n    this.mapping = restoreMapping(desc);\r\n    this.original = this.mapping.clone();\r\n    this.colorMapping = restoreColorMapping(this.color, desc);\r\n\r\n    this.sort = desc.sort || ESortMethod.min;\r\n\r\n  }\r\n\r\n  compare(a: IDataRow, b: IDataRow): number {\r\n    return compareBoxPlot(this, a, b);\r\n  }\r\n\r\n  getBoxPlotData(row: IDataRow): IBoxPlotData | null {\r\n    return this.getValue(row);\r\n  }\r\n\r\n  getRange() {\r\n    return this.mapping.getRange(BoxPlotColumn.DEFAULT_FORMATTER);\r\n  }\r\n\r\n  getRawBoxPlotData(row: IDataRow): IBoxPlotData | null {\r\n    return this.getRawValue(row);\r\n  }\r\n\r\n  getRawValue(row: IDataRow) {\r\n    return super.getValue(row);\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    const v = this.getRawValue(row);\r\n    if (v == null) {\r\n      return v;\r\n    }\r\n    return {\r\n      min: this.mapping.apply(v.min),\r\n      max: this.mapping.apply(v.max),\r\n      median: this.mapping.apply(v.median),\r\n      q1: this.mapping.apply(v.q1),\r\n      q3: this.mapping.apply(v.q3)\r\n    };\r\n  }\r\n\r\n  getNumber(row: IDataRow): number {\r\n    return getBoxPlotNumber(this, row, 'normalized');\r\n  }\r\n\r\n  getRawNumber(row: IDataRow): number {\r\n    return getBoxPlotNumber(this, row, 'raw');\r\n  }\r\n\r\n  getLabel(row: IDataRow): string {\r\n    const v = this.getRawValue(row);\r\n    if (v == null) {\r\n      return '';\r\n    }\r\n    const f = BoxPlotColumn.DEFAULT_FORMATTER;\r\n    return `BoxPlot(min = ${f(v.min)}, q1 = ${f(v.q1)}, median = ${f(v.median)}, q3 = ${f(v.q3)}, max = ${f(v.max)})`;\r\n  }\r\n\r\n  getSortMethod() {\r\n    return this.sort;\r\n  }\r\n\r\n  setSortMethod(sort: ESortMethod) {\r\n    if (this.sort === sort) {\r\n      return;\r\n    }\r\n    this.fire(BoxPlotColumn.EVENT_SORTMETHOD_CHANGED, this.sort, this.sort = sort);\r\n    // sort by me if not already sorted by me\r\n    if (!this.isSortedByMe().asc) {\r\n      this.sortByMe();\r\n    }\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any): any {\r\n    const r = super.dump(toDescRef);\r\n    r.sortMethod = this.getSortMethod();\r\n    r.filter = !isDummyNumberFilter(this.currentFilter) ? this.currentFilter : null;\r\n    r.map = this.mapping.dump();\r\n    r.colorMapping = this.colorMapping.dump();\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    super.restore(dump, factory);\r\n    if (dump.sortMethod) {\r\n      this.sort = dump.sortMethod;\r\n    }\r\n    if (dump.filter) {\r\n      this.currentFilter = restoreFilter(dump.filter);\r\n    }\r\n    if (dump.map) {\r\n      this.mapping = createMappingFunction(dump.map);\r\n    } else if (dump.domain) {\r\n      this.mapping = new ScaleMappingFunction(dump.domain, 'linear', dump.range || [0, 1]);\r\n    }\r\n    if (dump.colorMapping) {\r\n      this.colorMapping = createColorMappingFunction(this.color, dump.colorMapping);\r\n    }\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([BoxPlotColumn.EVENT_SORTMETHOD_CHANGED, BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED, BoxPlotColumn.EVENT_MAPPING_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged | null): this;\r\n  on(type: typeof BoxPlotColumn.EVENT_MAPPING_CHANGED, listener: typeof mappingChanged | null): this;\r\n  on(type: typeof BoxPlotColumn.EVENT_SORTMETHOD_CHANGED, listener: typeof sortMethodChanged | null): this;\r\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(<any>type, listener);\r\n  }\r\n\r\n  getOriginalMapping() {\r\n    return this.original.clone();\r\n  }\r\n\r\n  getMapping() {\r\n    return this.mapping.clone();\r\n  }\r\n\r\n  setMapping(mapping: IMappingFunction) {\r\n    if (this.mapping.eq(mapping)) {\r\n      return;\r\n    }\r\n    this.fire([BoxPlotColumn.EVENT_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.mapping.clone(), this.mapping = mapping);\r\n  }\r\n\r\n  getColor(row: IDataRow) {\r\n    return NumberColumn.prototype.getColor.call(this, row);\r\n  }\r\n\r\n  getColorMapping() {\r\n    return this.colorMapping.clone();\r\n  }\r\n\r\n  setColorMapping(mapping: IColorMappingFunction) {\r\n    if (this.colorMapping.eq(mapping)) {\r\n      return;\r\n    }\r\n    this.fire([BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.colorMapping.clone(), this.colorMapping = mapping);\r\n  }\r\n\r\n  isFiltered() {\r\n    return NumberColumn.prototype.isFiltered.call(this);\r\n  }\r\n\r\n  getFilter(): INumberFilter {\r\n    return NumberColumn.prototype.getFilter.call(this);\r\n  }\r\n\r\n  setFilter(value: INumberFilter = {min: -Infinity, max: +Infinity, filterMissing: false}) {\r\n    NumberColumn.prototype.setFilter.call(this, value);\r\n  }\r\n\r\n  filter(row: IDataRow) {\r\n    return NumberColumn.prototype.filter.call(this, row);\r\n  }\r\n}\r\n\r\n","import {Category} from './annotations';\r\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport ValueColumn, {IValueColumnDesc, dataLoaded} from './ValueColumn';\r\nimport {range} from 'd3-array';\r\nimport {IArrayColumn} from './IArrayColumn';\r\nimport {IDataRow} from './interfaces';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\n\r\nexport interface IArrayDesc {\r\n  dataLength?: number;\r\n  labels?: string[];\r\n}\r\n\r\nexport interface ISplicer {\r\n  length: number | null;\r\n\r\n  splice<T>(values: T[]): T[];\r\n}\r\n\r\nexport interface IArrayColumnDesc<T> extends IArrayDesc, IValueColumnDesc<T[]> {\r\n  // dummy\r\n}\r\n\r\n/**\r\n * emitted when the splicer property changes\r\n * @asMemberOf ArrayColumn\r\n * @event\r\n */\r\nexport declare function spliceChanged(previous: ISplicer, current: ISplicer): void;\r\n\r\n\r\n@Category('array')\r\nexport default class ArrayColumn<T> extends ValueColumn<T[]> implements IArrayColumn<T> {\r\n  static readonly EVENT_SPLICE_CHANGED = 'spliceChanged';\r\n\r\n  private readonly _dataLength: number | null;\r\n\r\n  private splicer: Readonly<ISplicer>;\r\n\r\n  private readonly originalLabels: string[];\r\n\r\n  constructor(id: string, desc: Readonly<IArrayColumnDesc<T>>) {\r\n    super(id, desc);\r\n    this._dataLength = desc.dataLength == null || isNaN(desc.dataLength) ? null : desc.dataLength;\r\n    this.originalLabels = desc.labels || (range(this._dataLength == null ? 0 : this._dataLength).map((_d, i) => `Column ${i}`));\r\n    this.splicer = {\r\n      length: this._dataLength,\r\n      splice: (v) => v\r\n    };\r\n  }\r\n\r\n  setSplicer(splicer: Readonly<ISplicer>) {\r\n    this.fire([ArrayColumn.EVENT_SPLICE_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], this.splicer, this.splicer = splicer);\r\n  }\r\n\r\n  get labels() {\r\n    if (this.splicer) {\r\n      return this.splicer.splice(this.originalLabels);\r\n    }\r\n    return this.originalLabels;\r\n  }\r\n\r\n  getSplicer() {\r\n    return this.splicer;\r\n  }\r\n\r\n  get dataLength() {\r\n    if (this.splicer) {\r\n      return this.splicer.length;\r\n    }\r\n    return this._dataLength;\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    return this.getValues(row);\r\n  }\r\n\r\n  getValues(row: IDataRow) {\r\n    let r = super.getValue(row);\r\n    if (this.splicer && r != null) {\r\n      r = this.splicer.splice(r);\r\n    }\r\n    return r == null ? [] : r;\r\n  }\r\n\r\n  getLabels(row: IDataRow) {\r\n    return this.getValues(row).map(String);\r\n  }\r\n\r\n  getLabel(row: IDataRow): string {\r\n    const v = this.getLabels(row);\r\n    if (!v) {\r\n      return '';\r\n    }\r\n    return v.toString();\r\n  }\r\n\r\n  getMap(row: IDataRow) {\r\n    const labels = this.labels;\r\n    return this.getValues(row).map((value, i) => ({key: labels[i], value}));\r\n  }\r\n\r\n  getMapLabel(row: IDataRow) {\r\n    const labels = this.labels;\r\n    return this.getLabels(row).map((value, i) => ({key: labels[i], value}));\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([ArrayColumn.EVENT_SPLICE_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof ArrayColumn.EVENT_SPLICE_CHANGED, listener: typeof spliceChanged | null): this;\r\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(<any>type, listener);\r\n  }\r\n\r\n}\r\n\r\n","import {Category, toolbar} from './annotations';\r\nimport CategoricalColumn from './CategoricalColumn';\r\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport {ICategoricalColumn, ICategory} from './ICategoricalColumn';\r\nimport {IDataRow, IGroup} from './interfaces';\r\nimport {colorPool} from './internal';\r\nimport {missingGroup} from './missing';\r\nimport ValueColumn, {IValueColumnDesc, dataLoaded} from './ValueColumn';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\nexport interface ICategoryNode extends ICategory {\r\n  children: Readonly<ICategoryNode>[];\r\n}\r\n\r\nexport interface IPartialCategoryNode extends Partial<ICategory> {\r\n  children: IPartialCategoryNode[];\r\n}\r\n\r\nexport interface IHierarchyDesc {\r\n  hierarchy: IPartialCategoryNode;\r\n  hierarchySeparator?: string;\r\n}\r\n\r\nexport declare type IHierarchyColumnDesc = IHierarchyDesc & IValueColumnDesc<string>;\r\n\r\nexport interface ICategoryInternalNode extends ICategory {\r\n  path: string;\r\n  children: Readonly<ICategoryInternalNode>[];\r\n}\r\n\r\nexport interface ICutOffNode {\r\n  node: Readonly<ICategoryInternalNode>;\r\n  maxDepth: number;\r\n}\r\n\r\n/**\r\n * emitted when the cut off property changes\r\n * @asMemberOf HierarchyColumn\r\n * @event\r\n */\r\nexport declare function cutOffChanged(previous: ICutOffNode, current: ICutOffNode): void;\r\n\r\n/**\r\n * column for hierarchical categorical values\r\n */\r\n@toolbar('cutoff', 'group', 'groupBy')\r\n@Category('categorical')\r\nexport default class HierarchyColumn extends ValueColumn<string> implements ICategoricalColumn {\r\n  static readonly EVENT_CUTOFF_CHANGED = 'cutOffChanged';\r\n\r\n  private readonly hierarchySeparator: string;\r\n  readonly hierarchy: Readonly<ICategoryInternalNode>;\r\n\r\n  private currentNode: Readonly<ICategoryInternalNode>;\r\n  private currentMaxDepth: number = Infinity;\r\n  private currentLeaves: Readonly<ICategoryInternalNode>[] = [];\r\n  private readonly currentLeavesNameCache = new Map<string, Readonly<ICategoryInternalNode>>();\r\n  private readonly currentLeavesPathCache = new Map<string, Readonly<ICategoryInternalNode>>();\r\n\r\n  constructor(id: string, desc: Readonly<IHierarchyColumnDesc>) {\r\n    super(id, desc);\r\n    this.hierarchySeparator = desc.hierarchySeparator || '.';\r\n    this.hierarchy = this.initHierarchy(desc.hierarchy);\r\n    this.currentNode = this.hierarchy;\r\n    this.currentLeaves = computeLeaves(this.currentNode, this.currentMaxDepth);\r\n    this.updateCaches();\r\n\r\n    this.setDefaultRenderer('categorical');\r\n  }\r\n\r\n  private initHierarchy(root: IPartialCategoryNode) {\r\n    const colors = colorPool();\r\n    const s = this.hierarchySeparator;\r\n    const add = (prefix: string, node: IPartialCategoryNode): ICategoryInternalNode => {\r\n      const name = node.name == null ? String(node.value) : node.name;\r\n      const children = (node.children || []).map((child: IPartialCategoryNode | string): ICategoryInternalNode => {\r\n        if (typeof child === 'string') {\r\n          const path = prefix + child;\r\n          return {\r\n            path,\r\n            name: child,\r\n            label: path,\r\n            color: colors(),\r\n            value: 0,\r\n            children: []\r\n          };\r\n        }\r\n        const r = add(`${prefix}${name}${s}`, child);\r\n        if (!r.color) {\r\n          //hack to inject the next color\r\n          (<any>r).color = colors();\r\n        }\r\n        return r;\r\n      });\r\n      const path = prefix + name;\r\n      const label = node.label ? `${node.label}` : path;\r\n      return {path, name, children, label, color: node.color!, value: 0};\r\n    };\r\n    return add('', root);\r\n  }\r\n\r\n  get categories() {\r\n    return this.currentLeaves;\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([HierarchyColumn.EVENT_CUTOFF_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof HierarchyColumn.EVENT_CUTOFF_CHANGED, listener: typeof cutOffChanged | null): this;\r\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(<any>type, listener);\r\n  }\r\n\r\n  getCutOff(): ICutOffNode {\r\n    return {\r\n      node: this.currentNode,\r\n      maxDepth: this.currentMaxDepth\r\n    };\r\n  }\r\n\r\n  setCutOff(value: ICutOffNode) {\r\n    const maxDepth = value.maxDepth == null ? Infinity : value.maxDepth;\r\n    if (this.currentNode === value.node && this.currentMaxDepth === maxDepth) {\r\n      return;\r\n    }\r\n    const bak = this.getCutOff();\r\n    this.currentNode = value.node;\r\n    this.currentMaxDepth = maxDepth;\r\n    this.currentLeaves = computeLeaves(value.node, maxDepth);\r\n    this.updateCaches();\r\n    this.fire([HierarchyColumn.EVENT_CUTOFF_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, this.getCutOff());\r\n  }\r\n\r\n  getCategory(row: IDataRow) {\r\n    let v = super.getValue(row);\r\n    if (v == null || v === '') {\r\n      return null;\r\n    }\r\n    v = v.trim();\r\n    if (this.currentLeavesNameCache.has(v)) {\r\n      return this.currentLeavesNameCache.get(v)!;\r\n    }\r\n    if (this.currentLeavesPathCache.has(v)) {\r\n      return this.currentLeavesPathCache.get(v)!;\r\n    }\r\n    return this.currentLeaves.find((n) => {\r\n      //direct hit or is a child of it\r\n      return n.path === v || n.name === v || v!.startsWith(n.path + this.hierarchySeparator);\r\n    }) || null;\r\n  }\r\n\r\n  get dataLength() {\r\n    return this.currentLeaves.length;\r\n  }\r\n\r\n  get labels() {\r\n    return this.currentLeaves.map((d) => d.label);\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    const v = this.getCategory(row);\r\n    return v ? v.name : null;\r\n  }\r\n\r\n  getLabel(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getLabel.call(this, row);\r\n  }\r\n\r\n  getColor(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getColor.call(this, row);\r\n  }\r\n\r\n  getLabels(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getLabels.call(this, row);\r\n  }\r\n\r\n  getValues(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getValues.call(this, row);\r\n  }\r\n\r\n  getMap(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getMap.call(this, row);\r\n  }\r\n\r\n  getMapLabel(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getMapLabel.call(this, row);\r\n  }\r\n\r\n  getSet(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getSet.call(this, row);\r\n  }\r\n\r\n  compare(a: IDataRow, b: IDataRow) {\r\n    return CategoricalColumn.prototype.compare.call(this, a, b);\r\n  }\r\n\r\n  group(row: IDataRow): IGroup {\r\n    if (this.isMissing(row)) {\r\n      return missingGroup;\r\n    }\r\n    const base = this.getCategory(row);\r\n    if (!base) {\r\n      return super.group(row);\r\n    }\r\n    return {name: base.label, color: base.color};\r\n  }\r\n\r\n  private updateCaches() {\r\n    this.currentLeavesPathCache.clear();\r\n    this.currentLeavesNameCache.clear();\r\n\r\n    this.currentLeaves.forEach((n) => {\r\n      this.currentLeavesPathCache.set(n.path, n);\r\n      this.currentLeavesNameCache.set(n.name, n);\r\n    });\r\n  }\r\n}\r\n\r\nfunction computeLeaves(node: ICategoryInternalNode, maxDepth: number = Infinity) {\r\n  const leaves: ICategoryInternalNode[] = [];\r\n  //depth first\r\n  const visit = (node: ICategoryInternalNode, depth: number) => {\r\n    //hit or end\r\n    if (depth >= maxDepth || node.children.length === 0) {\r\n      leaves.push(node);\r\n    } else {\r\n      // go down\r\n      node.children.forEach((c) => visit(c, depth + 1));\r\n    }\r\n  };\r\n  visit(node, 0);\r\n  return leaves;\r\n}\r\n\r\nexport function resolveInnerNodes(node: ICategoryInternalNode) {\r\n  //breath first\r\n  const queue: ICategoryInternalNode[] = [node];\r\n  let index = 0;\r\n  while (index < queue.length) {\r\n    const next = queue[index++];\r\n    queue.push(...next.children);\r\n  }\r\n  return queue;\r\n}\r\n\r\nexport function isHierarchical(categories: (string | Partial<ICategory>)[]) {\r\n  if (categories.length === 0 || typeof categories[0] === 'string') {\r\n    return false;\r\n  }\r\n  // check if any has a given parent name\r\n  return categories.some((c) => (<any>c).parent != null);\r\n}\r\n\r\nexport function deriveHierarchy(categories: (Partial<ICategory> & { parent: string | null })[]) {\r\n  const lookup = new Map<string, ICategoryNode>();\r\n  categories.forEach((c) => {\r\n    const p = c.parent || '';\r\n    // set and fill up proxy\r\n    const item = Object.assign(<ICategoryNode>{\r\n      children: [],\r\n      label: c.name!,\r\n      name: c.name!,\r\n      color: Column.DEFAULT_COLOR,\r\n      value: 0\r\n    }, lookup.get(c.name!) || {}, c);\r\n    lookup.set(c.name!, item);\r\n\r\n    if (!lookup.has(p)) {\r\n      // create proxy\r\n      lookup.set(p, {name: p, children: [], label: p, value: 0, color: Column.DEFAULT_COLOR});\r\n    }\r\n    lookup.get(p)!.children.push(item);\r\n  });\r\n  const root = lookup.get('')!;\r\n  console.assert(root !== undefined, 'hierarchy with no root');\r\n  if (root.children.length === 1) {\r\n    return root.children[0];\r\n  }\r\n  return root;\r\n}\r\n","import {Category} from './annotations';\r\nimport {IKeyValue, IMapColumn} from './IArrayColumn';\r\nimport {IDataRow} from './interfaces';\r\nimport ValueColumn, {IValueColumnDesc} from './ValueColumn';\r\n\r\nexport interface IMapColumnDesc<T> extends IValueColumnDesc<IKeyValue<T>[]> {\r\n  // dummy\r\n}\r\n\r\n@Category('map')\r\nexport default class MapColumn<T> extends ValueColumn<IKeyValue<T>[]> implements IMapColumn<T> {\r\n\r\n  constructor(id: string, desc: Readonly<IMapColumnDesc<T>>) {\r\n    super(id, desc);\r\n    this.setDefaultWidth(200); //by default 200\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    return toKeyValue<T>(<any>super.getValue(row));\r\n  }\r\n\r\n  getLabels(row: IDataRow): IKeyValue<string>[] {\r\n    const v = this.getValue(row);\r\n    return v.map(({key, value}) => ({key, value: String(value)}));\r\n  }\r\n\r\n  getMap(row: IDataRow) {\r\n    return this.getValue(row);\r\n  }\r\n\r\n  getMapLabel(row: IDataRow) {\r\n    return this.getLabels(row);\r\n  }\r\n\r\n  getLabel(row: IDataRow) {\r\n    const v = this.getLabels(row);\r\n    return `{${v.map(({key, value}) => `${key}: ${value}`).join(', ')}}`;\r\n  }\r\n}\r\n\r\nfunction byKey(a: IKeyValue<any>, b: IKeyValue<any>) {\r\n  if (a === b) {\r\n    return 0;\r\n  }\r\n  return a.key.localeCompare(b.key);\r\n}\r\n\r\nfunction toKeyValue<T>(v?: Map<string, T> | { [key: string]: T } | IKeyValue<T>[]): IKeyValue<T>[] {\r\n  if (!v) {\r\n    return [];\r\n  }\r\n  if (v instanceof Map) {\r\n    return Array.from(v.entries()).map(([key, value]) => ({key, value})).sort(byKey);\r\n  }\r\n  if (Array.isArray(v)) {\r\n    return v; // keep original order\r\n  }\r\n  // object\r\n  return Object.keys(v).map((key) => ({key, value: v[key]})).sort(byKey);\r\n}\r\n","import {format} from 'd3-format';\r\nimport Column, {IColumnDesc} from './Column';\r\nimport CompositeColumn from './CompositeColumn';\r\nimport {IDataRow, IGroupData} from './interfaces';\r\nimport {isMissingValue} from './missing';\r\nimport NumberColumn, {INumberColumn} from './NumberColumn';\r\nimport {SortByDefault} from './annotations';\r\n\r\nexport interface ICompositeNumberDesc extends IColumnDesc {\r\n  /**\r\n   * d3 format number Format\r\n   * @default 0.3n\r\n   */\r\n  numberFormat?: string;\r\n\r\n  /**\r\n   * missing value to use\r\n   * @default 0\r\n   */\r\n  missingValue?: number;\r\n}\r\n\r\nexport declare type ICompositeNumberColumnDesc = ICompositeNumberDesc & IColumnDesc;\r\n\r\n/**\r\n * implementation of a combine column, standard operations how to select\r\n */\r\n@SortByDefault('descending')\r\nexport default class CompositeNumberColumn extends CompositeColumn implements INumberColumn {\r\n  missingValue = NaN;\r\n\r\n  private numberFormat: (n: number) => string = format('.3n');\r\n\r\n  constructor(id: string, desc: Readonly<ICompositeNumberColumnDesc>) {\r\n    super(id, desc);\r\n\r\n    if (desc.numberFormat) {\r\n      this.numberFormat = format(desc.numberFormat);\r\n    }\r\n\r\n    if (desc.missingValue !== undefined) {\r\n      this.missingValue = desc.missingValue;\r\n    }\r\n  }\r\n\r\n\r\n  dump(toDescRef: (desc: any) => any) {\r\n    const r = super.dump(toDescRef);\r\n    r.missingValue = this.missingValue;\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    if (dump.missingValue !== undefined) {\r\n      this.missingValue = dump.missingValue;\r\n    }\r\n    if (dump.numberFormat) {\r\n      this.numberFormat = format(dump.numberFormat);\r\n    }\r\n    super.restore(dump, factory);\r\n  }\r\n\r\n  getLabel(row: IDataRow) {\r\n    if (!this.isLoaded()) {\r\n      return '';\r\n    }\r\n    const v = this.getValue(row);\r\n    //keep non number if it is not a number else convert using formatter\r\n    return String(typeof v === 'number' && !isNaN(v) && isFinite(v) ? this.numberFormat(v) : v);\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    if (!this.isLoaded()) {\r\n      return null;\r\n    }\r\n    //weighted sum\r\n    const v = this.compute(row);\r\n    if (isMissingValue(v)) {\r\n      return this.missingValue;\r\n    }\r\n    return v;\r\n  }\r\n\r\n  protected compute(_row: IDataRow) {\r\n    return NaN;\r\n  }\r\n\r\n  getNumber(row: IDataRow) {\r\n    const r = this.getValue(row);\r\n    return r == null ? NaN : r;\r\n  }\r\n\r\n  getRawNumber(row: IDataRow) {\r\n    return this.getNumber(row);\r\n  }\r\n\r\n  isMissing(row: IDataRow) {\r\n    return isMissingValue(this.compute(row));\r\n  }\r\n\r\n  compare(a: IDataRow, b: IDataRow) {\r\n    return NumberColumn.prototype.compare.call(this, a, b);\r\n  }\r\n\r\n  groupCompare(a: IGroupData, b: IGroupData) {\r\n    return NumberColumn.prototype.groupCompare.call(this, a, b);\r\n  }\r\n\r\n  getRenderer(): string {\r\n    return NumberColumn.prototype.getRenderer.call(this);\r\n  }\r\n}\r\n","import {ITaggleOptions} from './interfaces';\r\nimport {renderers} from './renderer';\r\nimport {toolbarActions} from './ui';\r\n\r\nexport * from './interfaces';\r\n\r\n\r\nexport function defaultOptions(): ITaggleOptions {\r\n  return {\r\n    toolbar: Object.assign({}, toolbarActions),\r\n    renderers: Object.assign({}, renderers),\r\n\r\n    labelRotation: 0,\r\n    summaryHeader: true,\r\n    animated: true,\r\n    expandLineOnHover: false,\r\n    sidePanel: true,\r\n    sidePanelCollapsed: false,\r\n    hierarchyIndicator: true,\r\n    defaultSlopeGraphMode: 'item',\r\n    overviewMode: false,\r\n\r\n    rowHeight: 18,\r\n    groupHeight: 40,\r\n    groupPadding: 5,\r\n    rowPadding: 2,\r\n\r\n    levelOfDetail: () => 'high',\r\n    customRowUpdate: () => undefined,\r\n    dynamicHeight: () => null,\r\n    flags: {\r\n      disableFrozenColumns: true //disable by default for speed navigator.userAgent.includes('Firefox/52') // disable by default in Firefox ESR 52\r\n    },\r\n    ignoreUnsupportedBrowser: false\r\n  };\r\n}\r\n","import {IGroupData, IGroupItem} from './model';\r\nimport Ranking from './model/Ranking';\r\nimport {IDataProvider} from './provider';\r\nimport {ICellRendererFactory} from './renderer';\r\nimport {IToolbarAction, IToolbarDialogAddon} from './ui';\r\n\r\n\r\n/**\r\n * number of bins before switching to dense mode\r\n */\r\nexport const DENSE_HISTOGRAM = 19;\r\n/**\r\n * minimal witdh of a column to show the label in the header\r\n */\r\nexport const MIN_LABEL_WIDTH = 30;\r\n/**\r\n * number of milliseconds to wait before a hovered canvas row will be replaced with a DOM one\r\n * @type {number}\r\n */\r\nexport const HOVER_DELAY_SHOW_DETAIL = 500;\r\n\r\n/**\r\n * custom height implementation logic\r\n */\r\nexport interface IDynamicHeight {\r\n  /**\r\n   * default height for a row for optimized styling\r\n   */\r\n  defaultHeight: number;\r\n\r\n  /**\r\n   * returns the height in pixel for the given row\r\n   * @param {IGroupItem | IGroupData} item the item to show\r\n   * @returns {number} its height in pixel\r\n   */\r\n  height(item: IGroupItem | IGroupData): number;\r\n\r\n  /**\r\n   * returns the padding in pixel after the given row\r\n   * @param {IGroupItem | IGroupData | null} item item to show\r\n   * @returns {number} its padding in pixel\r\n   */\r\n  padding(item: IGroupItem | IGroupData | null): number;\r\n}\r\n\r\nexport interface ILineUpFlags {\r\n  /**\r\n   * optimization flag to disable frozen columns for optimizing rendering performance\r\n   */\r\n  disableFrozenColumns: boolean;\r\n}\r\n\r\nexport interface ILineUpOptions {\r\n  /**\r\n   * option to enable/disable showing a summary (histogram, ...) in the header\r\n   * @default true\r\n   */\r\n  summaryHeader: boolean;\r\n  /**\r\n   * option to enable/disable animated transitions\r\n   * @default true\r\n   */\r\n  animated: boolean;\r\n  /**\r\n   * option to enforce that the whole row is shown upon hover without overflow hidden\r\n   * @default false\r\n   */\r\n  expandLineOnHover: boolean;\r\n  /**\r\n   * option to enable/disable the panel\r\n   * @default true\r\n   */\r\n  sidePanel: boolean;\r\n  /**\r\n   * option to specify whether the panel should be collapsed by default\r\n   * @default false\r\n   */\r\n  sidePanelCollapsed: boolean;\r\n  /**\r\n   * show the sorting and grouping hierarchy indicators in the side panel\r\n   * @default true\r\n   */\r\n  hierarchyIndicator: boolean;\r\n\r\n  /**\r\n   * option to specify the default slope graph mode\r\n   * @default 'item'\r\n   */\r\n  defaultSlopeGraphMode: 'item' | 'band';\r\n\r\n  /**\r\n   * how many degrees should a label be rotated in case of narrow columns\r\n   * @default 0 no rotation\r\n   */\r\n  labelRotation: number;\r\n\r\n  /**\r\n   * height of a row\r\n   * @default 18\r\n   */\r\n  rowHeight: number;\r\n  /**\r\n   * padding between two rows\r\n   * @default 2\r\n   */\r\n  rowPadding: number;\r\n  /**\r\n   * height of an aggregated group in pixel\r\n   * @default 40\r\n   */\r\n  groupHeight: number;\r\n  /**\r\n   * padding between two groups in pixel\r\n   * @default 5\r\n   */\r\n  groupPadding: number;\r\n\r\n  /**\r\n   * custom function to compute the level of detail for a row\r\n   * @param {number} rowIndex the current row index to be rendered\r\n   * @returns {\"high\" | \"low\"}\r\n   */\r\n  levelOfDetail: (rowIndex: number) => 'high' | 'low';\r\n  /**\r\n   * custom function to compute the height of a row (group or item)\r\n   * @param {(IGroupItem | IGroupData)[]} data the data to render\r\n   * @param {Ranking} ranking the ranking of the data\r\n   * @returns {IDynamicHeight | null} the height compute function or null to use the default\r\n   */\r\n  dynamicHeight: (data: (IGroupItem | IGroupData)[], ranking: Ranking) => IDynamicHeight | null;\r\n  /**\r\n   * custom function to be called when updating a HTML row\r\n   * @param {HTMLElement} row node element to be updated\r\n   * @param {number} rowIndex row index to be rendered in the row\r\n   */\r\n  customRowUpdate: (row: HTMLElement, rowIndex: number) => void;\r\n\r\n  /**\r\n   * register custom toolbar actions and dialog addons\r\n   */\r\n  toolbar: {[key: string]: IToolbarAction | IToolbarDialogAddon};\r\n  /**\r\n   * register custom renderer factories\r\n   */\r\n  renderers: {[type: string]: ICellRendererFactory};\r\n\r\n  /**\r\n   * custom flags for optimization\r\n   */\r\n  flags: ILineUpFlags;\r\n\r\n  /**\r\n   * ignore incompatible browser and always show (on own risk)\r\n   * @default false\r\n   */\r\n  ignoreUnsupportedBrowser: boolean;\r\n}\r\n\r\nexport interface ITaggleOptions extends ILineUpOptions {\r\n  /**\r\n   * whether the overview mode is enabled by default\r\n   * @default false\r\n   */\r\n  overviewMode: boolean;\r\n}\r\n\r\nexport interface ILineUpLike {\r\n  readonly node: HTMLElement;\r\n  readonly data: IDataProvider;\r\n\r\n  dump(): any;\r\n\r\n  destroy(): void;\r\n}\r\n","import {Category, SupportType} from './annotations';\r\nimport Column, {IColumnDesc, widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport {IGroup} from './interfaces';\r\nimport Ranking from './Ranking';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\n/**\r\n * factory for creating a description creating a rank column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createAggregateDesc(label: string = 'Aggregate Groups') {\r\n  return {type: 'aggregate', label, fixed: true};\r\n}\r\n\r\nexport interface IAggregateGroupColumnDesc extends IColumnDesc {\r\n  isAggregated(ranking: Ranking, group: IGroup): boolean;\r\n\r\n  setAggregated(ranking: Ranking, group: IGroup, value: boolean): void;\r\n}\r\n\r\n/**\r\n * emitted upon changing of the aggregate attribute\r\n * @asMemberOf AggregateGroupColumn\r\n * @event\r\n */\r\nexport declare function aggregate(ranking: Ranking, group: IGroup, value: boolean): void;\r\n\r\n/**\r\n * a checkbox column for selections\r\n */\r\n@SupportType()\r\n@Category('support')\r\nexport default class AggregateGroupColumn extends Column {\r\n  static readonly EVENT_AGGREGATE = 'aggregate';\r\n\r\n  constructor(id: string, desc: Readonly<IAggregateGroupColumnDesc>) {\r\n    super(id, desc);\r\n    this.setDefaultWidth(20);\r\n  }\r\n\r\n  get frozen() {\r\n    return this.desc.frozen !== false;\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([AggregateGroupColumn.EVENT_AGGREGATE]);\r\n  }\r\n\r\n  on(type: typeof AggregateGroupColumn.EVENT_AGGREGATE, listener: typeof aggregate | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(<any>type, listener);\r\n  }\r\n\r\n  isAggregated(group: IGroup) {\r\n    const ranking = this.findMyRanker()!;\r\n    if ((<IAggregateGroupColumnDesc>this.desc).isAggregated) {\r\n      return (<IAggregateGroupColumnDesc>this.desc).isAggregated(ranking, group);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  setAggregated(group: IGroup, value: boolean) {\r\n    const ranking = this.findMyRanker()!;\r\n    const current = ((<IAggregateGroupColumnDesc>this.desc).isAggregated) && (<IAggregateGroupColumnDesc>this.desc).isAggregated(ranking, group);\r\n    if (current === value) {\r\n      return true;\r\n    }\r\n\r\n    if ((<IAggregateGroupColumnDesc>this.desc).setAggregated) {\r\n      (<IAggregateGroupColumnDesc>this.desc).setAggregated(ranking, group, value);\r\n    }\r\n    this.fire(AggregateGroupColumn.EVENT_AGGREGATE, ranking, group, value);\r\n    return false;\r\n  }\r\n}\r\n","import {Category, SupportType} from './annotations';\r\nimport ValueColumn, {IValueColumnDesc} from './ValueColumn';\r\n\r\n/**\r\n * factory for creating a description creating a rank column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createRankDesc(label: string = 'Rank') {\r\n  return {type: 'rank', label};\r\n}\r\n\r\n/**\r\n * a rank column\r\n */\r\n@SupportType()\r\n@Category('support')\r\nexport default class RankColumn extends ValueColumn<number> {\r\n\r\n  constructor(id: string, desc: IValueColumnDesc<number>) {\r\n    super(id, desc);\r\n    this.setDefaultWidth(50);\r\n  }\r\n\r\n  get frozen() {\r\n    return this.desc.frozen !== false;\r\n  }\r\n}\r\n","import {defaultOptions} from '../config';\r\nimport {ILineUpOptions} from '../interfaces';\r\nimport merge from '../internal/merge';\r\nimport DataProvider from '../provider/ADataProvider';\r\nimport {ALineUp} from './ALineUp';\r\nimport EngineRenderer from './EngineRenderer';\r\nimport SidePanel from './panel/SidePanel';\r\n\r\nexport {ILineUpOptions} from '../interfaces';\r\n\r\nexport default class LineUp extends ALineUp {\r\n  private readonly renderer: EngineRenderer | null;\r\n  private readonly panel: SidePanel | null;\r\n\r\n  private readonly options = defaultOptions();\r\n\r\n  constructor(node: HTMLElement, data: DataProvider, options: Partial<ILineUpOptions> = {}) {\r\n    super(node, data, options && options.ignoreUnsupportedBrowser === true);\r\n\r\n    merge(this.options, options);\r\n\r\n    if (!this.isBrowserSupported) {\r\n      this.renderer = null;\r\n      this.panel = null;\r\n      return;\r\n    }\r\n\r\n    this.node.classList.add('lu');\r\n\r\n    this.renderer = new EngineRenderer(data, this.node, this.options);\r\n    if (this.options.sidePanel) {\r\n      this.panel = new SidePanel(this.renderer.ctx, this.node.ownerDocument, {\r\n        collapseable: this.options.sidePanelCollapsed ? 'collapsed' : true,\r\n        hierarchy: this.options.hierarchyIndicator\r\n      });\r\n      this.renderer.pushUpdateAble((ctx) => this.panel!.update(ctx));\r\n      this.node.insertBefore(this.panel.node, this.node.firstChild);\r\n    } else {\r\n      this.panel = null;\r\n    }\r\n    this.forward(this.renderer, `${EngineRenderer.EVENT_HIGHLIGHT_CHANGED}.main`);\r\n  }\r\n\r\n  destroy() {\r\n    this.node.classList.remove('lu');\r\n    if (this.renderer) {\r\n      this.renderer.destroy();\r\n    }\r\n    if (this.panel) {\r\n      this.panel.destroy();\r\n    }\r\n    super.destroy();\r\n  }\r\n\r\n  update() {\r\n    if (this.renderer) {\r\n      this.renderer.update();\r\n    }\r\n  }\r\n\r\n  setDataProvider(data: DataProvider, dump?: any) {\r\n    super.setDataProvider(data, dump);\r\n    if (!this.renderer) {\r\n      return;\r\n    }\r\n    this.renderer.setDataProvider(data);\r\n    this.update();\r\n    if (this.panel) {\r\n      this.panel.update(this.renderer.ctx);\r\n    }\r\n  }\r\n\r\n  setHighlight(dataIndex: number, scrollIntoView: boolean = true) {\r\n    return this.renderer != null && this.renderer.setHighlight(dataIndex, scrollIntoView);\r\n  }\r\n\r\n  getHighlight() {\r\n    return this.renderer ? this.renderer.getHighlight() : -1;\r\n  }\r\n\r\n  protected enableHighlightListening(enable: boolean) {\r\n    if (this.renderer) {\r\n      this.renderer.enableHighlightListening(enable);\r\n    }\r\n  }\r\n}\r\n","import Column from '../../model/Column';\r\nimport {IRankingHeaderContext} from '../interfaces';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\nimport {uniqueId} from './utils';\r\n\r\n/** @internal */\r\nexport default class ChangeRendererDialog extends ADialog {\r\n  constructor(private readonly column: Column, dialog: IDialogContext, private readonly ctx: IRankingHeaderContext) {\r\n    super(dialog);\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    const current = this.column.getRenderer();\r\n    const currentGroup = this.column.getGroupRenderer();\r\n    const currentSummary = this.column.getSummaryRenderer();\r\n    const {item, group, summary} = this.ctx.getPossibleRenderer(this.column);\r\n\r\n    console.assert(item.length > 1 || group.length > 1 || summary.length > 1); // otherwise no need to show this\r\n\r\n    const id = uniqueId(this.dialog.idPrefix);\r\n    node.insertAdjacentHTML('beforeend', `\r\n      ${item.sort((a, b) => a.label.localeCompare(b.label)).map((d) => ` <div class=\"lu-checkbox\"><input id=\"${id}0${d.type}\" type=\"radio\" name=\"renderer\" value=\"${d.type}\" ${(current === d.type) ? 'checked' : ''}><label for=\"${id}0${d.type}\">${d.label}</label></div>`).join('')}\r\n      <strong>Group Visualization</strong>\r\n      ${group.sort((a, b) => a.label.localeCompare(b.label)).map((d) => ` <div class=\"lu-checkbox\"><input id=\"${id}1${d.type}\" type=\"radio\" name=\"group\" value=\"${d.type}\" ${(currentGroup === d.type) ? 'checked' : ''}><label for=\"${id}1${d.type}\">${d.label}</label></div>`).join('')}\r\n      <strong>Summary Visualization</strong>\r\n      ${summary.sort((a, b) => a.label.localeCompare(b.label)).map((d) => ` <div class=\"lu-checkbox\"><input id=\"${id}2${d.type}\" type=\"radio\" name=\"summary\" value=\"${d.type}\" ${(currentSummary === d.type) ? 'checked' : ''}><label for=\"${id}2${d.type}\">${d.label}</label></div>`).join('')}\r\n    `);\r\n    this.forEach('input[name=\"renderer\"]', (n: HTMLInputElement) => {\r\n      n.addEventListener('change', () => this.column.setRenderer(n.value), { passive: true });\r\n    });\r\n    this.forEach('input[name=\"group\"]', (n: HTMLInputElement) => {\r\n      n.addEventListener('change', () => this.column.setGroupRenderer(n.value), { passive: true });\r\n    });\r\n    this.forEach('input[name=\"summary\"]', (n: HTMLInputElement) => {\r\n      n.addEventListener('change', () => this.column.setSummaryRenderer(n.value), { passive: true });\r\n    });\r\n  }\r\n\r\n}\r\n","import Column from '../../model/Column';\r\nimport {createToolbarMenuItems, updateIconState} from '../header';\r\nimport {IRankingHeaderContext} from '../interfaces';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\n\r\n/** @internal */\r\nexport default class MoreColumnOptionsDialog extends ADialog {\r\n\r\n  constructor(private readonly column: Column, dialog: IDialogContext, private readonly ctx: IRankingHeaderContext) {\r\n    super(dialog);\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    node.classList.add('lu-more-options');\r\n    createToolbarMenuItems(node, this.dialog.level + 1, this.column, this.ctx);\r\n\r\n    updateIconState(node, this.column);\r\n  }\r\n}\r\n","import {IColumnMetaData} from '../../model';\r\nimport Column from '../../model/Column';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\nimport {uniqueId} from '../../renderer/utils';\r\nimport {schemeCategory10} from 'd3-scale-chromatic';\r\n\r\n/** @internal */\r\nexport default class RenameDialog extends ADialog {\r\n\r\n  private readonly before: IColumnMetaData;\r\n\r\n  constructor(private readonly column: Column, dialog: IDialogContext) {\r\n    super(dialog, {\r\n      fullDialog: true\r\n    });\r\n    this.before = column.getMetaData();\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    node.classList.add('lu-rename-dialog');\r\n    const id = uniqueId('col');\r\n    node.insertAdjacentHTML('beforeend', `\r\n      <datalist id=\"${id}L\"><option value=\"${Column.DEFAULT_COLOR}\"></option>${schemeCategory10.slice(1).map((d) => `<option>${d}</option>`).join('')}</datalist>\r\n      <input type=\"text\" value=\"${this.column.label}\" required autofocus placeholder=\"name\">\r\n      <input type=\"color\" value=\"${this.column.color}\" required placeholder=\"color\" list=\"${id}L\">\r\n      <textarea rows=\"5\" placeholder=\"Description\">${this.column.description}</textarea>`);\r\n  }\r\n\r\n  protected reset() {\r\n    this.findInput('input[type=\"text\"]').value = this.before.label;\r\n    this.findInput('input[type=\"color\"]').value = this.before.color || Column.DEFAULT_COLOR;\r\n    this.node.querySelector('textarea')!.value = this.before.description;\r\n    this.column.setMetaData(this.before);\r\n  }\r\n\r\n  protected submit() {\r\n    const newValue = this.findInput('input[type=\"text\"]').value;\r\n    const newColor = this.findInput('input[type=\"color\"]').value;\r\n    const newDescription = this.node.querySelector('textarea')!.value;\r\n    this.column.setMetaData({label: newValue, color: newColor, description: newDescription});\r\n    return true;\r\n  }\r\n}\r\n","import BooleanColumn from '../../model/BooleanColumn';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\nimport {updateFilterState, uniqueId} from './utils';\r\n\r\n/** @internal */\r\nexport default class BooleanFilterDialog extends ADialog {\r\n\r\n  private readonly before: boolean | null;\r\n\r\n  constructor(private readonly column: BooleanColumn, dialog: IDialogContext) {\r\n    super(dialog, {\r\n      fullDialog: true\r\n    });\r\n    this.before = this.column.getFilter();\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    const id = uniqueId(this.dialog.idPrefix);\r\n    node.insertAdjacentHTML('beforeend', `\r\n     <div class=\"lu-checkbox\"><input id=\"${id}0\" type=\"radio\" name=\"boolean_check\" value=\"null\" ${this.before == null ? 'checked=\"checked\"' : ''}><label id=\"${id}0\">No Filter</label></div>\r\n     <div class=\"lu-checkbox\"><input id=\"${id}1\" type=\"radio\" name=\"boolean_check\" value=\"true\" ${this.before === true ? 'checked=\"checked\"' : ''}><label id=\"${id}1\">True</label></div>\r\n     <div class=\"lu-checkbox\"><input id=\"${id}2\" type=\"radio\" name=\"boolean_check\" value=\"false\" ${this.before === false ? 'checked=\"checked\"' : ''}><label id=\"${id}2\">False</label></div>\r\n    `);\r\n  }\r\n\r\n  private updateFilter(filter: boolean | null) {\r\n    updateFilterState(this.attachment, this.column, filter != null);\r\n    this.column.setFilter(filter);\r\n  }\r\n\r\n  reset() {\r\n    const v = 'null';\r\n    this.forEach('input[type=\"radio\"]', (d: HTMLInputElement) => d.checked = d.value === v);\r\n    this.updateFilter(null);\r\n  }\r\n\r\n  submit() {\r\n    const isTrue = this.findInput('input[type=\"radio\"][value=\"true\"]').checked;\r\n    const isFalse = this.findInput('input[type=\"radio\"][value=\"false\"]').checked;\r\n    this.updateFilter(isTrue ? true : (isFalse ? false : null));\r\n    return true;\r\n  }\r\n}\r\n","import CategoricalColumn from '../../model/CategoricalColumn';\r\nimport {ICategoricalFilter, isCategoryIncluded} from '../../model/ICategoricalColumn';\r\nimport SetColumn from '../../model/SetColumn';\r\nimport {filterMissingMarkup, findFilterMissing} from '../missing';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\nimport {updateFilterState, uniqueId, forEach} from './utils';\r\n\r\n/** @internal */\r\nexport default class CategoricalFilterDialog extends ADialog {\r\n\r\n  private readonly before: ICategoricalFilter;\r\n\r\n  constructor(private readonly column: CategoricalColumn | SetColumn, dialog: IDialogContext) {\r\n    super(dialog, {\r\n      fullDialog: true\r\n    });\r\n    this.before = this.column.getFilter() || {filter: this.column.categories.map((d) => d.name), filterMissing: false};\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    node.classList.add('lu-filter-table');\r\n\r\n    const id = uniqueId(this.dialog.idPrefix);\r\n\r\n    node.insertAdjacentHTML('beforeend', `<div>\r\n        <div class=\"lu-checkbox\"><input id=\"${id}\" type=\"checkbox\" checked><label for=\"${id}\"><span></span><div>Un/Select All</div></label></div>\r\n        ${this.column.categories.map((c) => `<div class=\"lu-checkbox\"><input id=\"${id}${c.name}\" data-cat=\"${c.name}\" type=\"checkbox\"${isCategoryIncluded(this.before, c) ? 'checked' : ''}><label for=\"${id}${c.name}\"><span style=\"background-color: ${c.color}\"></span><div>${c.label}</div></label></div>`).join('')}\r\n    </div>`);\r\n    // selectAll\r\n    this.findInput('input:not([data-cat])').onchange = function (this: HTMLElement) {\r\n      const input = <HTMLInputElement>this;\r\n      forEach(node, 'input[data-cat]', (n: HTMLInputElement) => n.checked = input.checked);\r\n    };\r\n    node.insertAdjacentHTML('beforeend', filterMissingMarkup(this.before.filterMissing, this.dialog.idPrefix));\r\n  }\r\n\r\n  private updateFilter(filter: string[] | null, filterMissing: boolean) {\r\n    const noFilter = filter == null && filterMissing === false;\r\n    updateFilterState(this.attachment, this.column, !noFilter);\r\n    this.column.setFilter(noFilter ? null : {filter: filter!, filterMissing});\r\n  }\r\n\r\n  reset() {\r\n    this.forEach('input[data-cat]', (n: HTMLInputElement) => n.checked = true);\r\n    this.updateFilter(null, false);\r\n  }\r\n\r\n  submit() {\r\n    let f: string[] | null = this.forEach('input[data-cat]', (n: HTMLInputElement) => n.checked ? n.dataset.cat! : '').filter(Boolean);\r\n    if (f.length === this.column.categories.length) { // all checked = no filter\r\n      f = null;\r\n    }\r\n    const filterMissing = findFilterMissing(this.node).checked;\r\n    this.updateFilter(f, filterMissing);\r\n    return true;\r\n  }\r\n}\r\n","import {round} from '../../internal';\r\nimport OrdinalColumn from '../../model/OrdinalColumn';\r\nimport {ICategoricalFilter, isCategoryIncluded} from '../../model/ICategoricalColumn';\r\nimport {filterMissingMarkup, findFilterMissing} from '../missing';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\nimport {updateFilterState, uniqueId, forEach} from './utils';\r\n\r\n/** @internal */\r\nexport default class CategoricalMappingFilterDialog extends ADialog {\r\n\r\n  private readonly before: ICategoricalFilter;\r\n\r\n  constructor(private readonly column: OrdinalColumn, dialog: IDialogContext) {\r\n    super(dialog, {\r\n      fullDialog: true\r\n    });\r\n    this.before = this.column.getFilter() || {filter: this.column.categories.map((d) => d.name), filterMissing: false};\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    node.classList.add('lu-filter-table');\r\n    const joint = this.column.categories.map((d) => Object.assign({\r\n      range: round(d.value * 100, 2)\r\n    }));\r\n    joint.sort((a, b) => a.label.localeCompare(b.label));\r\n\r\n    const id = uniqueId(this.dialog.idPrefix);\r\n    node.insertAdjacentHTML('beforeend', `<div>\r\n        <div class=\"lu-checkbox\"><input id=\"${id}\" type=\"checkbox\" checked><label for=\"${id}\"><div>Un/Select All</div></label></div>\r\n        ${joint.map(({name, color, label, range}) => `<input id=\"${id}${name}\" data-cat=\"${name}\" type=\"checkbox\"${isCategoryIncluded(this.before, name) ? 'checked' : ''}>\r\n        <div class=\"lu-checkbox\"><input type=\"number\" value=\"${range}\" min=\"0\" max=\"100\" size=\"5\"><label for=\"${id}${name}\"><div><div style=\"background-color: ${color}; width: ${range}%\"></div></div><div>${label}</div></label></div>`).join('')}\r\n    </div>`);\r\n    // selectAll\r\n    this.findInput('input[type=checkbox]:not([data-cat])').onchange = function (this: HTMLElement) {\r\n      const input = <HTMLInputElement>this;\r\n      forEach(node, '[data-cat]', (n: HTMLInputElement) => n.checked = input.checked);\r\n    };\r\n    this.forEach('input[type=number]', (d: HTMLInputElement) => {\r\n      d.oninput = () => {\r\n        (<HTMLElement>d.nextElementSibling!.firstElementChild).style.width = `${d.value}%`;\r\n      };\r\n    });\r\n    node.insertAdjacentHTML('beforeend', filterMissingMarkup(this.before.filterMissing, this.dialog.idPrefix));\r\n  }\r\n\r\n  private updateFilter(filter: string[] | null, filterMissing: boolean) {\r\n    const noFilter = filter == null && filterMissing === false;\r\n    updateFilterState(this.attachment, this.column, !noFilter);\r\n    this.column.setFilter(noFilter ? null : {filter: filter!, filterMissing});\r\n  }\r\n\r\n  reset() {\r\n    this.forEach('[data-cat]', (n: HTMLInputElement) => {\r\n      n.checked = false;\r\n      (<HTMLInputElement>n.nextElementSibling!).value = '50';\r\n    });\r\n    this.updateFilter(null, false);\r\n    this.column.setMapping(this.column.categories.map(() => 1));\r\n  }\r\n\r\n  submit() {\r\n    const items = this.forEach('input[data-cat]', (n: HTMLInputElement) => ({\r\n      checked: n.checked,\r\n      cat: n.dataset.cat!,\r\n      range: parseFloat((<HTMLInputElement>n.nextElementSibling)!.value)\r\n    }));\r\n    let f: string[] | null = items.filter((d) => d.checked).map((d) => d.cat);\r\n    if (f.length === this.column.categories.length) { // all checked = no filter\r\n      f = null;\r\n    }\r\n    const filterMissing = findFilterMissing(this.node).checked;\r\n    this.updateFilter(f, filterMissing);\r\n    this.column.setMapping(items.map((d) => d.range / 100));\r\n    return true;\r\n  }\r\n}\r\n","import {suffix} from '../../internal/AEventDispatcher';\r\nimport debounce from '../../internal/debounce';\r\nimport CompositeColumn from '../../model/CompositeColumn';\r\nimport {createHeader, updateHeader} from '../header';\r\nimport {IRankingHeaderContext} from '../interfaces';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\n\r\n/** @internal */\r\nexport default class CompositeChildrenDialog extends ADialog {\r\n\r\n  private readonly id: string;\r\n\r\n  constructor(private readonly column: CompositeColumn, dialog: IDialogContext, private ctx: IRankingHeaderContext) {\r\n    super(dialog);\r\n    this.id = `.dialog${Math.random().toString(36).slice(-8).substr(0, 3)}`;\r\n  }\r\n\r\n  destroy() {\r\n    this.column.on(suffix(this.id, CompositeColumn.EVENT_ADD_COLUMN, CompositeColumn.EVENT_REMOVE_COLUMN), null);\r\n    super.destroy();\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    node.classList.add('lu-sub-nested');\r\n    const createChildren = () => {\r\n      this.column.children.forEach((c) => {\r\n        const n = createHeader(c, this.ctx, {\r\n          mergeDropAble: false,\r\n          resizeable: false,\r\n          level: this.dialog.level + 1\r\n        });\r\n        n.className = `lu-header`;\r\n        updateHeader(n, c);\r\n        const summary = this.ctx.summaryRenderer(c, false);\r\n        n.insertAdjacentHTML('beforeend', summary.template);\r\n        const summaryNode = <HTMLElement>n.lastElementChild!;\r\n        summaryNode.dataset.renderer = c.getSummaryRenderer();\r\n        summaryNode.classList.add('lu-summary');\r\n        summary.update(summaryNode, this.ctx.statsOf(<any>c));\r\n        node.appendChild(n);\r\n      });\r\n    };\r\n    createChildren();\r\n\r\n    this.column.on(suffix(this.id, CompositeColumn.EVENT_ADD_COLUMN, CompositeColumn.EVENT_REMOVE_COLUMN), debounce(() => {\r\n      if (!node.parentElement) {\r\n        // already closed\r\n        this.destroy();\r\n        return;\r\n      }\r\n      node.innerHTML = '';\r\n      createChildren();\r\n    }));\r\n  }\r\n}\r\n","import HierarchyColumn, {ICategoryInternalNode, ICutOffNode, resolveInnerNodes} from '../../model/HierarchyColumn';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\n\r\n/** @internal */\r\nexport default class CutOffHierarchyDialog extends ADialog {\r\n\r\n  private readonly innerNodes: ICategoryInternalNode[];\r\n  private readonly innerNodePaths: string[];\r\n\r\n  private readonly before: ICutOffNode;\r\n\r\n\r\n  constructor(private readonly column: HierarchyColumn, dialog: IDialogContext, private readonly idPrefix: string) {\r\n    super(dialog, {\r\n      fullDialog: true\r\n    });\r\n\r\n    this.innerNodes = resolveInnerNodes(this.column.hierarchy);\r\n    this.innerNodePaths = this.innerNodes.map((n) => n.path);\r\n    this.before = column.getCutOff();\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    node.insertAdjacentHTML('beforeend', `\r\n        <input type=\"text\" value=\"${this.before.node.label}\" required=\"required\" autofocus=\"autofocus\" list=\"ui${this.idPrefix}lineupHierarchyList\" placeholder=\"cut off node\">\r\n        <input type=\"number\" value=\"${isFinite(this.before.maxDepth) ? this.before.maxDepth : ''}\" placeholder=\"max depth (&infin;)\">\r\n        <datalist id=\"ui${this.idPrefix}lineupHierarchyList\">${this.innerNodes.map((node) => `<option value=\"${node.path}\">${node.label}</option>`)}</datalist>`);\r\n\r\n    //custom validation\r\n    const innerNodePaths = this.innerNodePaths;\r\n    this.findInput('input[type=\"text\"]').addEventListener('change', function (this: HTMLInputElement) {\r\n      const value = this.value;\r\n      if (innerNodePaths.indexOf(value) < 0) {\r\n        this.setCustomValidity('invalid node');\r\n      } else {\r\n        this.setCustomValidity('');\r\n      }\r\n    }, {\r\n      passive: true\r\n    });\r\n  }\r\n\r\n  protected reset() {\r\n    this.findInput('input[type=\"text\"]').value = this.before.node.label;\r\n    this.findInput('input[type=\"number\"]').value = isFinite(this.before.maxDepth) ? String(this.before.maxDepth) : '';\r\n    this.column.setCutOff(this.before);\r\n  }\r\n\r\n  protected submit() {\r\n    const newNode = this.findInput('input[type=\"text\"]').value;\r\n    const newNodeIndex = this.innerNodePaths.indexOf(newNode);\r\n    const node = this.innerNodes[newNodeIndex];\r\n    const maxDepthText = this.findInput('input[type=\"number\"]').value;\r\n    const maxDepth = maxDepthText === '' ? Infinity : parseInt(maxDepthText, 10);\r\n    this.column.setCutOff({node, maxDepth});\r\n    return true;\r\n  }\r\n}\r\n","import StringColumn from '../../model/StringColumn';\r\nimport StringMapColumn from '../../model/StringMapColumn';\r\nimport StringsColumn from '../../model/StringsColumn';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\n\r\n/** @internal */\r\nexport default class EditPatternDialog extends ADialog {\r\n\r\n  constructor(private readonly column: StringColumn | StringsColumn | StringMapColumn, dialog: IDialogContext, private readonly idPrefix: string) {\r\n    super(dialog, {\r\n      fullDialog: true\r\n    });\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    const templates = this.column.patternTemplates;\r\n    node.insertAdjacentHTML('beforeend', `<strong>Edit Pattern (access via $\\{value}, $\\{item})</strong><input\r\n        type=\"text\"\r\n        size=\"30\"\r\n        value=\"${this.column.getPattern()}\"\r\n        required\r\n        autofocus\r\n        placeholder=\"pattern (access via $\\{value}, $\\{item})\"\r\n        ${templates.length > 0 ? `list=\"ui${this.idPrefix}lineupPatternList\"` : ''}\r\n      >`);\r\n    if (templates.length > 0) {\r\n      node.insertAdjacentHTML('beforeend', `<datalist id=\"ui${this.idPrefix}lineupPatternList\">${templates.map((t) => `<option value=\"${t}\">`)}</datalist>`);\r\n    }\r\n  }\r\n\r\n  protected reset() {\r\n    this.node.querySelector('input')!.value = '';\r\n    this.column.setPattern('');\r\n  }\r\n\r\n  protected submit() {\r\n    const newValue = this.node.querySelector('input')!.value;\r\n    this.column.setPattern(newValue);\r\n    return true;\r\n  }\r\n}\r\n","import {D3DragEvent, drag} from 'd3-drag';\r\nimport {event as d3event, select, Selection} from 'd3-selection';\r\nimport {round, similar} from '../../internal/math';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\n\r\nfunction clamp(v: number) {\r\n  return Math.max(Math.min(v, 100), 0);\r\n}\r\n\r\n/** @internal */\r\nexport interface IMappingAdapter {\r\n  destroyed(self: MappingLine): void;\r\n\r\n  updated(self: MappingLine): void;\r\n\r\n  domain(): number[];\r\n\r\n  normalizeRaw(v: number): number;\r\n\r\n  unnormalizeRaw(v: number): number;\r\n\r\n  dialog: IDialogContext;\r\n}\r\n\r\n/** @internal */\r\nexport default class MappingLineDialog extends ADialog {\r\n  constructor(private readonly line: {destroy(): void, domain: number, range: number, frozen: boolean, update(domain: number, range: number): void}, dialog: IDialogContext, private readonly adapter: IMappingAdapter) {\r\n    super(dialog);\r\n  }\r\n\r\n  build(node: HTMLElement) {\r\n    const domain = this.adapter.domain();\r\n    node.insertAdjacentHTML('beforeend', `\r\n        <strong>Input Domain Value (min ... max)</strong>\r\n        <input type=\"number\" value=\"${round(this.adapter.unnormalizeRaw(this.line.domain), 3)}\" ${this.line.frozen ? 'readonly' : ''} autofocus required min=\"${domain[0]}\" max=\"${domain[1]}\" step=\"any\">\r\n        <strong>Output Normalized Value (0 ... 1)</strong>\r\n        <input type=\"number\" value=\"${round(this.line.range / 100, 3)}\" required min=\"0\" max=\"1\" step=\"any\">\r\n        <button type=\"button\" ${this.line.frozen ? 'disabled' : ''} >Remove Mapping Line</button>\r\n      `);\r\n\r\n    this.forEach('input', (d: HTMLInputElement) => d.onchange = () => this.submit());\r\n    this.find('button').addEventListener('click', () => {\r\n      this.destroy();\r\n      this.line.destroy();\r\n    }, {\r\n      passive: true\r\n    });\r\n  }\r\n\r\n  protected submit() {\r\n    if (!this.node.checkValidity()) {\r\n      return false;\r\n    }\r\n    const domain = this.adapter.normalizeRaw(parseFloat(this.findInput('input[type=number]').value));\r\n    const range = parseFloat(this.findInput('input[type=number]:last-of-type').value) * 100;\r\n    this.line.update(domain, range);\r\n    return true;\r\n  }\r\n}\r\n\r\n/** @internal */\r\nexport class MappingLine {\r\n  readonly node: SVGGElement;\r\n\r\n  private readonly $select: Selection<SVGGElement, any, any, any>;\r\n\r\n  constructor(g: SVGGElement, public domain: number, public range: number, private readonly adapter: IMappingAdapter) {\r\n    g.insertAdjacentHTML('beforeend', `<g class=\"lu-mapping\" transform=\"translate(${domain},0)\">\r\n      <line x1=\"0\" x2=\"${range - domain}\" y2=\"60\"></line>\r\n      <line x1=\"0\" x2=\"${range - domain}\" y2=\"60\"></line>\r\n      <circle r=\"3\"></circle>\r\n      <circle cx=\"${range - domain}\" cy=\"60\" r=\"3\"></circle>\r\n      <title>Drag the anchor circle to change the mapping, shift click to edit</title>\r\n    </g>`);\r\n    this.node = <SVGGElement>g.lastElementChild!;\r\n\r\n    // freeze 0 and 100 domain = raw domain ones\r\n    this.node.classList.toggle('lu-frozen', similar(0, domain) || similar(domain, 100));\r\n    this.$select = select(this.node);\r\n    {\r\n      let beforeDomain: number;\r\n      let beforeRange: number;\r\n      let shiftDomain: number;\r\n      let shiftRange: number;\r\n      this.$select.selectAll<SVGCircleElement, {}>('line:first-of-type, circle').call(drag<SVGCircleElement, {}>()\r\n        .container(function (this: SVGCircleElement) {\r\n          return <any>this.parentNode!.parentNode;\r\n        }).filter(() => d3event.button === 0 && !d3event.shiftKey)\r\n        .on('start', () => {\r\n          beforeDomain = this.domain;\r\n          beforeRange = this.range;\r\n          const evt = (<D3DragEvent<any, any, any>>d3event);\r\n          shiftDomain = this.domain - evt.x;\r\n          shiftRange = this.range - evt.x;\r\n        }).on('drag', (_, i) => {\r\n          const evt = (<D3DragEvent<any, any, any>>d3event);\r\n          switch (i) {\r\n            case 0: // line\r\n              this.update(clamp(evt.x + shiftDomain), clamp(evt.x + shiftRange));\r\n              break;\r\n            case 1: // domain circle\r\n              this.update(clamp(evt.x), this.range);\r\n              break;\r\n            case 2: // range circle\r\n              this.update(this.domain, clamp(evt.x));\r\n              break;\r\n          }\r\n        }).on('end', () => {\r\n          if (!similar(beforeDomain, this.domain) || !similar(beforeRange, this.range)) {\r\n            this.adapter.updated(this);\r\n          }\r\n        })\r\n      );\r\n    }\r\n\r\n    this.node.onclick = (evt) => {\r\n      if (!evt.shiftKey) {\r\n        return;\r\n      }\r\n      const ctx = {\r\n        manager: this.adapter.dialog.manager,\r\n        level: this.adapter.dialog.level + 1,\r\n        attachment: <any>this.node,\r\n        idPrefix: this.adapter.dialog.idPrefix\r\n      };\r\n      const dialog = new MappingLineDialog(this, ctx, this.adapter);\r\n      dialog.open();\r\n    };\r\n  }\r\n\r\n  get frozen() {\r\n    return this.node.classList.contains('lu-frozen');\r\n  }\r\n\r\n  destroy() {\r\n    this.node.remove();\r\n    this.adapter.destroyed(this);\r\n  }\r\n\r\n  update(domain: number, range: number) {\r\n    if (similar(domain, this.domain) && similar(range, this.range)) {\r\n      return;\r\n    }\r\n    if (this.frozen) {\r\n      domain = this.domain;\r\n    }\r\n    this.domain = domain;\r\n    this.range = range;\r\n    this.node.setAttribute('transform', `translate(${domain},0)`);\r\n    const shift = range - domain;\r\n    this.$select.selectAll('line')!.attr('x2', String(shift));\r\n    this.$select.select('circle[cx]').attr('cx', String(shift));\r\n  }\r\n}\r\n","import {computeStats, IStatistics, round} from '../../internal';\r\nimport {\r\n  IMapAbleColumn, IMappingFunction, isMissingValue, noNumberFilter, ScaleMappingFunction,\r\n  ScriptMappingFunction,\r\n  isMapAbleColumn\r\n} from '../../model';\r\nimport {isDummyNumberFilter} from '../../model/internal';\r\nimport {ISummaryRenderer} from '../../renderer/interfaces';\r\nimport {IRankingHeaderContext} from '../interfaces';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\nimport {IMappingAdapter, MappingLine} from './MappingLineDialog';\r\nimport {updateFilterState} from './utils';\r\n\r\n/** @internal */\r\nexport default class MappingsFilterDialog extends ADialog {\r\n\r\n  private scale: IMappingFunction;\r\n\r\n  private readonly mappingLines: MappingLine[] = [];\r\n  private rawDomain: [number, number];\r\n\r\n  private summary: ISummaryRenderer;\r\n  private readonly data: Promise<number[]>;\r\n  private readonly idPrefix: string;\r\n  private loadedData: number[] | null = null;\r\n  private hist: IStatistics | null = null;\r\n\r\n  private readonly mappingAdapter: IMappingAdapter = {\r\n    destroyed: (self: MappingLine) => {\r\n      this.mappingLines.splice(this.mappingLines.indexOf(self), 1);\r\n    },\r\n    updated: () => this.updateLines(this.computeScale()),\r\n    domain: () => this.rawDomain,\r\n    normalizeRaw: this.normalizeRaw.bind(this),\r\n    unnormalizeRaw: this.unnormalizeRaw.bind(this),\r\n    dialog: this.dialog\r\n  };\r\n\r\n  constructor(private readonly column: IMapAbleColumn, dialog: IDialogContext, private readonly ctx: IRankingHeaderContext) {\r\n    super(dialog, {\r\n      fullDialog: true\r\n    });\r\n\r\n    this.idPrefix = `me${ctx.idPrefix}`;\r\n    this.scale = this.column.getMapping().clone();\r\n    const domain = this.scale.domain;\r\n    this.rawDomain = [domain[0], domain[domain.length - 1]];\r\n    this.summary = ctx.summaryRenderer(this.column, true);\r\n\r\n    this.data = Promise.resolve(ctx.provider.mappingSample(column));\r\n  }\r\n\r\n  private get scaleType() {\r\n    if (!(this.scale instanceof ScaleMappingFunction)) {\r\n      return 'script';\r\n    }\r\n    const base = this.scale.scaleType;\r\n    if (base !== 'linear') {\r\n      return base;\r\n    }\r\n    // check if invert or absolute\r\n    const r = this.scale.range;\r\n    if (r.length === 2 && r[0] === 1 && r[1] === 0) {\r\n      return 'linear_invert';\r\n    }\r\n    if (r.length === 3 && r[0] === 1 && r[1] === 0 && r[2] === 1) {\r\n      return 'linear_abs';\r\n    }\r\n    return 'linear';\r\n  }\r\n\r\n  build(node: HTMLElement) {\r\n    node.classList.add('lu-dialog-mapper');\r\n\r\n    const r = this.column.findMyRanker();\r\n    const others = !r ? [] : r.flatColumns.filter((d) => isMapAbleColumn(d) && d !== this.column);\r\n\r\n    node.insertAdjacentHTML('beforeend', `\r\n        <div><label for=\"${this.idPrefix}mapping_type\"><strong>Scaling:</strong></label><select id=\"${this.idPrefix}mapping_type\" class=\"browser-default\">\r\n        <option value=\"linear\">Linear</option>\r\n        <option value=\"linear_invert\">Invert</option>\r\n        <option value=\"linear_abs\">Absolute</option>\r\n        <option value=\"log\">Log</option>\r\n        <option value=\"pow1.1\">Pow 1.1</option>\r\n        <option value=\"pow2\">Pow 2</option>\r\n        <option value=\"pow3\">Pow 3</option>\r\n        <option value=\"sqrt\">Sqrt</option>\r\n        <option value=\"script\">Custom Script</option>\r\n        ${others.length > 0 ? `<optgroup label=\"Copy From\">${others.map((d) => `<option value=\"copy_${d.id}\">${d.label}</option>`).join('')}</optgroup>`: ''}\r\n      </select>\r\n      </div>\r\n        ${this.summary.template}\r\n        <strong data-toggle>Mapping Details</strong>\r\n        <div class=\"lu-details\"><strong>Domain (min - max): </strong><input id=\"${this.idPrefix}min\" required type=\"number\" value=\"${round(this.rawDomain[0], 3)}\" step=\"any\"> - <input id=\"${this.idPrefix}max\" required type=\"number\" value=\"${round(this.rawDomain[1], 3)}\" step=\"any\"></div>\r\n        <strong class=\"lu-details\" style=\"text-align: center\">Input Domain (min - max)</strong>\r\n        <svg class=\"lu-details\" viewBox=\"0 0 106 66\">\r\n           <g transform=\"translate(3,3)\">\r\n              <line x2=\"100\"></line>\r\n              <rect y=\"-3\" width=\"100\" height=\"10\"></rect>\r\n              <line y1=\"60\" x2=\"100\" y2=\"60\"></line>\r\n              <rect y=\"36\" width=\"100\" height=\"10\"></rect>\r\n           </g>\r\n        </svg>\r\n        <strong class=\"lu-details\" style=\"text-align: center; margin-top: 0\">Output Normalized Domain (0 - 1)</strong>\r\n        <div class=\"lu-script\">\r\n          <strong>Custom Mapping Script</strong>\r\n          <textarea></textarea>\r\n        </div>`);\r\n\r\n    // patch in lu-summary and renderer\r\n    const summary = <HTMLElement>node.children[1];\r\n    summary.classList.add('lu-summary');\r\n    summary.dataset.interactive = '';\r\n    summary.dataset.renderer = this.column.getSummaryRenderer();\r\n\r\n\r\n    this.find('[data-toggle]').onclick = (evt) => {\r\n      evt.stopPropagation();\r\n      evt.preventDefault();\r\n      const elem = (<HTMLElement>evt.currentTarget).dataset;\r\n      elem.toggle = elem.toggle === 'open' ? '' : 'open';\r\n    };\r\n\r\n    const g = <SVGGElement>node.querySelector('.lu-details > g');\r\n\r\n    this.forEach('.lu-details rect', (d: SVGRectElement) => d.onclick = (evt) => {\r\n      evt.preventDefault();\r\n      evt.stopPropagation();\r\n      const bb = d.getBoundingClientRect();\r\n      const x = round((evt.x - bb.left) * 100 / bb.width, 2);\r\n      const m = new MappingLine(g, x, x, this.mappingAdapter);\r\n      this.mappingLines.push(m);\r\n    });\r\n\r\n    {\r\n      const createMappings = () => {\r\n        if (!(this.scale instanceof ScaleMappingFunction)) {\r\n          return;\r\n        }\r\n        const domain = this.scale.domain;\r\n        const range = this.scale.range;\r\n        this.mappingLines.push(...domain.map((d, i) => new MappingLine(g, this.normalizeRaw(d), range[i] * 100, this.mappingAdapter)));\r\n      };\r\n\r\n      const select = <HTMLSelectElement>this.find('select');\r\n      const textarea = <HTMLTextAreaElement>this.find('textarea');\r\n      select.onchange = (evt) => {\r\n        const select = <HTMLSelectElement>evt.currentTarget;\r\n        switch (select.value) {\r\n          case 'linear_invert':\r\n            this.scale = new ScaleMappingFunction(this.rawDomain.slice(), 'linear', [1, 0]);\r\n            break;\r\n          case 'linear_abs':\r\n            this.scale = new ScaleMappingFunction([this.rawDomain[0], (this.rawDomain[1] - this.rawDomain[0]) / 2, this.rawDomain[1]], 'linear', [1, 0, 1]);\r\n            break;\r\n          case 'script':\r\n            const s = new ScriptMappingFunction(this.rawDomain.slice());\r\n            this.scale = s;\r\n            textarea.value = s.code;\r\n            break;\r\n          default:\r\n            if (select.value.startsWith('copy_')) {\r\n              this.copyMapping(select.value.slice('copy_'.length));\r\n              return;\r\n            }\r\n            this.scale = new ScaleMappingFunction(this.rawDomain.slice(), select.value);\r\n            break;\r\n        }\r\n        this.mappingLines.splice(0, this.mappingLines.length).forEach((d) => d.destroy());\r\n        createMappings();\r\n        node.dataset.scale = select.value;\r\n        this.updateLines();\r\n      };\r\n      const scaleType = node.dataset.scale = this.scaleType;\r\n      select.selectedIndex = Array.from(select.options).findIndex((d) => d.value === scaleType);\r\n\r\n      if (scaleType === 'script') {\r\n        textarea.value = (<ScriptMappingFunction>this.scale).code;\r\n      }\r\n      createMappings();\r\n    }\r\n\r\n    {\r\n      this.forEach('.lu-details input[type=number]', (d: HTMLInputElement, i) => d.onchange = () => {\r\n        const v = parseFloat(d.value);\r\n        if (v === this.rawDomain[i]) {\r\n          d.setCustomValidity('');\r\n          return;\r\n        }\r\n        const other = this.rawDomain[1 - i];\r\n        if (isNaN(v) || (i === 0 && v >= other) || (i === 1 && v <= other)) {\r\n          d.setCustomValidity(`value has to be ${i === 0 ? '<= max' : '>= min'}`);\r\n          return;\r\n        }\r\n        d.setCustomValidity('');\r\n        this.rawDomain[i] = v;\r\n        this.scale.domain = this.rawDomain.slice();\r\n\r\n        if (!this.loadedData) {\r\n          return;\r\n        }\r\n        this.applyMapping(this.scale, this.column.getFilter());\r\n        this.updateSummary(true);\r\n        this.updateLines();\r\n      });\r\n    }\r\n\r\n    this.data.then((values) => {\r\n      this.loadedData = values;\r\n      this.updateSummary();\r\n\r\n      Array.from(values).forEach((v) => {\r\n        if (!isMissingValue(v)) {\r\n          g.insertAdjacentHTML('afterbegin', `<line data-v=\"${v}\" x1=\"${round(this.normalizeRaw(v), 2)}\" x2=\"${round(this.scale.apply(v) * 100, 2)}\" y2=\"60\"></line>`);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  private updateSummary(recreate = false) {\r\n    if (!this.loadedData) {\r\n      return;\r\n    }\r\n    this.hist = computeStats(this.loadedData, (v) => v, (v) => isMissingValue(v), this.rawDomain);\r\n\r\n    if (recreate) {\r\n      // replace the summary\r\n      const summaryNode = this.find('.lu-summary');\r\n      this.summary = this.ctx.summaryRenderer(this.column, true);\r\n      summaryNode.insertAdjacentHTML('afterend', this.summary.template);\r\n      const summary = <HTMLElement>summaryNode.nextElementSibling!;\r\n      summaryNode.remove();\r\n      summary.classList.add('lu-summary');\r\n      summary.dataset.interactive = '';\r\n      summary.dataset.renderer = this.column.getSummaryRenderer();\r\n    }\r\n\r\n    this.summary.update(this.find('.lu-summary'), this.hist);\r\n  }\r\n\r\n  private update() {\r\n    const scaleType = this.node.dataset.scale = this.scaleType;\r\n    const select = <HTMLSelectElement>this.find('select');\r\n    select.selectedIndex = Array.from(select.options).findIndex((d) => d.value === scaleType);\r\n    if (scaleType === 'script') {\r\n      (<HTMLTextAreaElement>this.find('textarea')).value = (<ScriptMappingFunction>this.scale).code;\r\n    }\r\n    const domain = this.scale.domain;\r\n    this.forEach('.lu-details input[type=number]', (d: HTMLInputElement, i) => {\r\n      d.value = String(domain[i]);\r\n    });\r\n  }\r\n\r\n  private updateLines(scale = this.scale) {\r\n    this.forEach('.lu-details > g > line[x1]', (d: SVGLineElement) => {\r\n      const v = parseFloat(d.getAttribute('data-v')!);\r\n      d.setAttribute('x1', round(this.normalizeRaw(v), 2).toString());\r\n      d.setAttribute('x2', round(scale.apply(v) * 100, 2).toString());\r\n    });\r\n  }\r\n\r\n  private applyMapping(newScale: IMappingFunction, filter: {min: number, max: number, filterMissing: boolean}) {\r\n    updateFilterState(this.attachment, this.column, !isDummyNumberFilter(filter));\r\n\r\n    this.column.setMapping(newScale);\r\n    this.column.setFilter(filter);\r\n  }\r\n\r\n  protected reset() {\r\n    this.scale = this.column.getOriginalMapping();\r\n    this.rawDomain = <[number, number]>this.scale.domain.slice();\r\n    this.applyMapping(this.scale, noNumberFilter());\r\n    this.update();\r\n    this.updateSummary(true);\r\n    this.updateLines();\r\n  }\r\n\r\n  private copyMapping(columnId: string) {\r\n    const r = this.column.findMyRanker();\r\n    if (!r) {\r\n      return;\r\n    }\r\n    const ref = <IMapAbleColumn>r.find(columnId)!;\r\n    this.scale = ref.getMapping().clone();\r\n    this.rawDomain = <[number, number]>this.scale.domain.slice();\r\n    this.applyMapping(this.scale, ref.getFilter());\r\n    this.update();\r\n    this.updateSummary(true);\r\n    this.updateLines();\r\n  }\r\n\r\n  private normalizeRaw(d: number) {\r\n    const v = (d - this.rawDomain[0]) * 100 / (this.rawDomain[1] - this.rawDomain[0]);\r\n    return Math.max(Math.min(v, 100), 0); // clamp\r\n  }\r\n\r\n  private unnormalizeRaw(d: number) {\r\n    return (d) * (this.rawDomain[1] - this.rawDomain[0]) / 100 + this.rawDomain[0];\r\n  }\r\n\r\n  private computeScale() {\r\n    const s = this.scale.clone();\r\n    if (this.scaleType === 'script') {\r\n      (<ScriptMappingFunction>s).code = this.node.querySelector('textarea')!.value;\r\n      s.domain = this.rawDomain.slice();\r\n    }\r\n    if (s instanceof ScaleMappingFunction) {\r\n      this.mappingLines.sort((a, b) => a.domain - b.domain);\r\n      s.domain = this.mappingLines.map((d) => this.unnormalizeRaw(d.domain));\r\n      s.range = this.mappingLines.map((d) => d.range / 100);\r\n    }\r\n    return s;\r\n  }\r\n\r\n  protected submit() {\r\n    if (!this.node.checkValidity()) {\r\n      return false;\r\n    }\r\n    if (this.scaleType === 'script') {\r\n      (<ScriptMappingFunction>this.scale).code = this.node.querySelector('textarea')!.value;\r\n      this.scale.domain = this.rawDomain.slice();\r\n    }\r\n    if (this.scale instanceof ScaleMappingFunction) {\r\n      this.mappingLines.sort((a, b) => a.domain - b.domain);\r\n      this.scale.domain = this.mappingLines.map((d) => this.unnormalizeRaw(d.domain));\r\n      this.scale.range = this.mappingLines.map((d) => d.range / 100);\r\n    }\r\n    this.applyMapping(this.scale, this.column.getFilter());\r\n    return true;\r\n  }\r\n}\r\n","import {EAdvancedSortMethod} from '../../model/INumberColumn';\r\nimport ReduceColumn from '../../model/ReduceColumn';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\nimport {sortMethods} from './utils';\r\n\r\n/** @internal */\r\nexport default class ReduceDialog extends ADialog {\r\n  constructor(private readonly column: ReduceColumn, dialog: IDialogContext) {\r\n    super(dialog);\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    const wrapper = {\r\n      getSortMethod: () => this.column.getReduce(),\r\n      setSortMethod: (s: EAdvancedSortMethod) => this.column.setReduce(s)\r\n    };\r\n    sortMethods(node, wrapper, Object.keys(EAdvancedSortMethod), this.dialog.idPrefix);\r\n  }\r\n}\r\n","import ScriptColumn from '../../model/ScriptColumn';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\n//\r\n// const help = `<div class=\"script-description\">\r\n//       <p>You can write any valid JavaScript code. It will be embedded in a function. Therefore the last statement has to return a value.\r\n//       In case of a single line statement the code piece statement <code>return</code> will be automatically prefixed.</p>\r\n//       <p>The function signature is: <br><code>(row: any, index: number, children: Column[], values: any[], raws: (number|null)[]) => number</code>\r\n//       <dl>\r\n//         <dt>param: <code>row</code></dt>\r\n//         <dd>the row in the dataset to compute the value for</dd>\r\n//         <dt>param: <code>index</code></dt>\r\n//         <dd>the index of the row</dd>\r\n//         <dt>param: <code>children</code></dt>\r\n//         <dd>the list of LineUp columns that are part of this ScriptColumn</dd>\r\n//         <dt>param: <code>values</code></dt>\r\n//         <dd>the computed value of each column (see <code>children</code>) for the current row</dd>\r\n//         <dt>param: <code>raws</code></dt>\r\n//         <dd>similar to <code>values</code>. Numeric columns return by default the normalized value, this array gives access to the original \"raw\" values before mapping is applied</dd>\r\n//         <dt>returns:</dt>\r\n//         <dd>the computed number <strong>in the range [0, 1] or NaN</strong></dd>\r\n//       </dl>\r\n//       <p>In addition to the standard JavaScript functions and objects (Math, ...) a couple of utility functions are available: </p>\r\n//       <dl>\r\n//         <dt><code>max(arr: number[]) => number</code></dt>\r\n//         <dd>computes the maximum of the given array of numbers</dd>\r\n//         <dt><code>min(arr: number[]) => number</code></dt>\r\n//         <dd>computes the minimum of the given array of numbers</dd>\r\n//         <dt><code>extent(arr: number[]) => [number, number]</code></dt>\r\n//         <dd>computes both minimum and maximum and returning an array with the first element the minimum and the second the maximum</dd>\r\n//         <dt><code>clamp(v: number, min: number, max: number) => number</code></dt>\r\n//         <dd>ensures that the given value is within the given min/max value</dd>\r\n//         <dt><code>normalize(v: number, min: number, max: number) => number</code></dt>\r\n//         <dd>normalizes the given value <code>(v - min) / (max - min)</code></dd>\r\n//         <dt><code>denormalize(v: number, min: number, max: number) => number</code></dt>\r\n//         <dd>inverts a normalized value <code>v * (max - min) + min</code></dd>\r\n//         <dt><code>linear(v: number, input: [number, number], output: [number, number]) => number</code></dt>\r\n//         <dd>performs a linear mapping from input domain to output domain both given as an array of [min, max] values. <code>denormalize(normalize(v, input[0], input[1]), output[0], output[1])</code></dd>\r\n//       </dl>\r\n//       </div>`;\r\n\r\n/** @internal */\r\nexport default class ScriptEditDialog extends ADialog {\r\n  private readonly before: string;\r\n\r\n  constructor(private readonly column: ScriptColumn, dialog: IDialogContext) {\r\n    super(dialog, {\r\n      fullDialog: true\r\n    });\r\n    this.before = column.getScript();\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    node.insertAdjacentHTML('beforeend', `<textarea autofocus=\"true\" rows=\"5\" autofocus=\"autofocus\" style=\"width: 95%;\">${this.column.getScript()}</textarea>`);\r\n  }\r\n\r\n  protected reset() {\r\n    this.node.querySelector('textarea')!.value = this.before;\r\n    this.column.setScript(this.before);\r\n  }\r\n\r\n  protected submit() {\r\n    this.column.setScript(this.node.querySelector('textarea')!.value);\r\n    return true;\r\n  }\r\n}\r\n","import Column from '../../model/Column';\r\nimport {IDataProvider} from '../../provider/ADataProvider';\r\nimport ADialog, { IDialogContext} from './ADialog';\r\nimport {uniqueId} from './utils';\r\n\r\n/** @internal */\r\nexport default class SearchDialog extends ADialog {\r\n\r\n  constructor(private readonly column: Column, dialog: IDialogContext, private readonly provider: IDataProvider) {\r\n    super(dialog);\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    const id = uniqueId(this.dialog.idPrefix);\r\n    node.insertAdjacentHTML('beforeend', `<input type=\"text\" size=\"20\" value=\"\" required autofocus placeholder=\"search... (>= 3 chars)\"><div class=\"lu-checkbox\"><input id=\"${id}\" type=\"checkbox\"><label for=\"${id}\">RegExp</label></div>`);\r\n\r\n    const input = <HTMLInputElement>node.querySelector('input[type=\"text\"]')!;\r\n    const checkbox = <HTMLInputElement>node.querySelector('input[type=\"checkbox\"]')!;\r\n    const update = () => {\r\n      let search: any = input.value;\r\n      if (search.length < 3) {\r\n        input.setCustomValidity('at least 3 characters');\r\n        return;\r\n      }\r\n      input.setCustomValidity('');\r\n      const isRegex = checkbox.checked;\r\n      if (isRegex) {\r\n        search = new RegExp(search);\r\n      }\r\n      this.provider.searchAndJump(search, this.column);\r\n    };\r\n    input.addEventListener('input', update, {\r\n      passive: true\r\n    });\r\n    checkbox.addEventListener('change', update, {\r\n      passive: true\r\n    });\r\n  }\r\n}\r\n","import StringColumn from '../../model/StringColumn';\r\nimport {filterMissingMarkup, findFilterMissing} from '../missing';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\nimport {updateFilterState, uniqueId} from './utils';\r\n\r\n/** @internal */\r\nexport default class StringFilterDialog extends ADialog {\r\n\r\n  constructor(private readonly column: StringColumn, dialog: IDialogContext) {\r\n    super(dialog, {\r\n      fullDialog: true\r\n    });\r\n  }\r\n\r\n  private updateFilter(filter: string | RegExp | null) {\r\n    updateFilterState(this.attachment, this.column, filter != null && filter !== '');\r\n    this.column.setFilter(filter);\r\n  }\r\n\r\n  reset() {\r\n    this.findInput('input[type=\"text\"]').value = '';\r\n    this.forEach('input[type=checkbox', (n: HTMLInputElement) => n.checked = false);\r\n    this.updateFilter(null);\r\n  }\r\n\r\n  submit() {\r\n    const filterMissing = findFilterMissing(this.node).checked;\r\n    if (filterMissing) {\r\n      this.updateFilter(StringColumn.FILTER_MISSING);\r\n      return true;\r\n    }\r\n    const input = this.findInput('input[type=\"text\"]').value;\r\n    const isRegex = this.findInput('input[type=\"checkbox\"]').checked;\r\n    this.updateFilter(isRegex ? new RegExp(input) : input);\r\n    return true;\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    let bak = this.column.getFilter() || '';\r\n    const bakMissing = bak === StringColumn.FILTER_MISSING;\r\n    if (bakMissing) {\r\n      bak = '';\r\n    }\r\n    const id = uniqueId(this.dialog.idPrefix);\r\n    node.insertAdjacentHTML('beforeend', `<input type=\"text\" placeholder=\"Filter ${this.column.desc.label}...\" autofocus value=\"${(bak instanceof RegExp) ? bak.source : bak}\" style=\"width: 100%\">\r\n    <span class=\"lu-checkbox\"><input id=\"${id}\" type=\"checkbox\" ${(bak instanceof RegExp) ? 'checked=\"checked\"' : ''}><label for=\"${id}\">RegExp</label></span>\r\n    ${filterMissingMarkup(bakMissing, this.dialog.idPrefix)}`);\r\n\r\n    const filterMissing = findFilterMissing(node);\r\n    const input = <HTMLInputElement>node.querySelector('input[type=\"text\"]');\r\n    const isRegex = <HTMLInputElement>node.querySelector('input[type=\"checkbox\"]');\r\n\r\n    const update = () => {\r\n      input.disabled = filterMissing.checked;\r\n      isRegex.disabled = filterMissing.checked;\r\n\r\n      if (filterMissing.checked) {\r\n        this.updateFilter(StringColumn.FILTER_MISSING);\r\n        return;\r\n      }\r\n      const valid = input.value.trim();\r\n      filterMissing.disabled = valid.length > 0;\r\n      if (valid.length <= 0) {\r\n        this.updateFilter(null);\r\n        return;\r\n      }\r\n      this.updateFilter(isRegex.checked ? new RegExp(input.value) : input.value);\r\n    };\r\n\r\n    filterMissing.onchange = update;\r\n    input.onchange = update;\r\n    isRegex.onchange = update;\r\n  }\r\n}\r\n","import {round} from '../../internal';\r\nimport StackColumn from '../../model/StackColumn';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\nimport {forEach} from './utils';\r\n\r\n/** @internal */\r\nexport default class WeightsEditDialog extends ADialog {\r\n\r\n  private readonly weights: number[];\r\n\r\n  constructor(private readonly column: StackColumn, dialog: IDialogContext) {\r\n    super(dialog, {\r\n      fullDialog: true\r\n    });\r\n\r\n    this.weights = this.column.getWeights();\r\n  }\r\n\r\n  protected reset() {\r\n    forEach(this.node, 'input[type=number]', (n: HTMLInputElement) => {\r\n      const v = round(100 / this.weights.length, 2);\r\n      n.value = String(v);\r\n      (<HTMLElement>n.nextElementSibling!.firstElementChild!).style.width = `${v}%`;\r\n    });\r\n    this.column.setWeights(this.weights.slice().fill(100 / this.weights.length));\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    node.classList.add('lu-filter-table', 'lu-weights-table');\r\n\r\n    const children = this.column.children;\r\n    node.insertAdjacentHTML('beforeend', `<div>\r\n        ${this.weights.map((weight, i) => `<div><input type=\"number\" value=\"${round(weight * 100, 2)}\" min=\"0\" max=\"100\" step=\"any\"><span><span style=\"background-color: ${children[i].color}; width: ${round(weight * 100, 2)}%\"></span></span>${children[i].label}</div>`).join('')}\r\n    </div>`);\r\n    this.forEach('input[type=number]', (d: HTMLInputElement) => {\r\n      d.oninput = () => {\r\n        (<HTMLElement>d.nextElementSibling!.firstElementChild!).style.width = `${d.value}%`;\r\n      };\r\n    });\r\n  }\r\n\r\n  submit() {\r\n    const items = this.forEach('input[type=number]', (n: HTMLInputElement) => parseFloat(n.value) / 100);\r\n    this.column.setWeights(items);\r\n    return true;\r\n  }\r\n}\r\n","import Column from '../../model/Column';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\nimport {uniqueId, forEach} from './utils';\r\nimport {getToolbarDialogAddons, IToolbarDialogAddon} from '../toolbar';\r\nimport {IRankingHeaderContext} from '../interfaces';\r\n\r\n/** @internal */\r\nexport default class GroupDialog extends ADialog {\r\n  private readonly addons: IToolbarDialogAddon[];\r\n\r\n  constructor(private readonly column: Column, dialog: IDialogContext, private readonly ctx: IRankingHeaderContext) {\r\n    super(dialog);\r\n    this.addons = getToolbarDialogAddons(this.column, 'group', ctx);\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    for(const addon of this.addons) {\r\n      this.node.insertAdjacentHTML('beforeend', `<strong>${addon.title}</strong>`);\r\n      addon.append(this.column, this.node, this.dialog, this.ctx);\r\n    }\r\n\r\n    sortOrder(node, this.column, this.dialog.idPrefix);\r\n  }\r\n}\r\n\r\nfunction sortOrder(node: HTMLElement, column: Column, idPrefix: string) {\r\n  const ranking = column.findMyRanker()!;\r\n  const current = ranking.getGroupCriteria();\r\n  let order = current.indexOf(column);\r\n  let enabled = order >= 0;\r\n\r\n  if (order < 0) {\r\n    order = current.length;\r\n  }\r\n\r\n  const id = uniqueId(idPrefix);\r\n  node.insertAdjacentHTML('afterbegin', `\r\n        <strong>Group By</strong>\r\n        <div class=\"lu-checkbox\"><input id=\"${id}B\" type=\"radio\" name=\"grouped\" value=\"true\" ${enabled ? 'checked' : ''} ><label for=\"${id}B\">Enabled</label></div>\r\n        <div class=\"lu-checkbox\"><input id=\"${id}N\" type=\"radio\" name=\"grouped\" value=\"false\" ${!enabled ? 'checked' : ''} ><label for=\"${id}N\">Disabled</label></div>\r\n        <strong>Group Priority</strong>\r\n        <input type=\"number\" id=\"${id}P\" step=\"1\" min=\"1\" max=\"${current.length + 1}\" value=\"${order + 1}\">\r\n    `);\r\n\r\n  const updateDisabled = (disable: boolean) => {\r\n    forEach(node, 'input:not([name=grouped]), select, textarea', (d: HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement) => {\r\n      d.disabled = disable;\r\n    });\r\n  };\r\n  updateDisabled(!enabled);\r\n\r\n  const trigger = () => {\r\n    ranking.groupBy(column, !enabled ? -1 : order);\r\n    updateDisabled(!enabled);\r\n  };\r\n\r\n  forEach(node, 'input[name=grouped]', (n: HTMLInputElement) => {\r\n    n.addEventListener('change', () => {\r\n      enabled = n.value === 'true';\r\n      trigger();\r\n    }, {\r\n      passive: true\r\n    });\r\n  });\r\n  {\r\n    const priority = (<HTMLInputElement>node.querySelector(`#${id}P`));\r\n    priority.addEventListener('change', () => {\r\n      order = parseInt(priority.value, 10) - 1;\r\n      trigger();\r\n    }, {\r\n      passive: true\r\n    });\r\n  }\r\n}\r\n","import Column from '../../model/Column';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\nimport {uniqueId, forEach} from './utils';\r\nimport {getToolbarDialogAddons, IToolbarDialogAddon} from '../toolbar';\r\nimport {IRankingHeaderContext} from '../interfaces';\r\n\r\n/** @internal */\r\nexport default class SortDialog extends ADialog {\r\n  private readonly addons: IToolbarDialogAddon[];\r\n\r\n  constructor(private readonly column: Column, private readonly group: boolean, dialog: IDialogContext, private readonly ctx: IRankingHeaderContext) {\r\n    super(dialog);\r\n    this.addons = getToolbarDialogAddons(this.column, group ? 'sortGroup' : 'sort', ctx);\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    for(const addon of this.addons) {\r\n      this.node.insertAdjacentHTML('beforeend', `<strong>${addon.title}</strong>`);\r\n      addon.append(this.column, this.node, this.dialog, this.ctx);\r\n    }\r\n\r\n    sortOrder(node, this.column, this.dialog.idPrefix, this.group);\r\n  }\r\n}\r\n\r\nfunction sortOrder(node: HTMLElement, column: Column, idPrefix: string, groupSortBy: boolean = false) {\r\n  const ranking = column.findMyRanker()!;\r\n  const current = groupSortBy  ? ranking.getGroupSortCriteria() : ranking.getSortCriteria();\r\n  const order = Object.assign({}, groupSortBy ? column.isGroupSortedByMe() : column.isSortedByMe());\r\n\r\n  if (order.priority === undefined) {\r\n    order.priority = current.length;\r\n  }\r\n\r\n  const id = uniqueId(idPrefix);\r\n  node.insertAdjacentHTML('afterbegin', `\r\n        <strong>Sort Order</strong>\r\n        <div class=\"lu-checkbox\"><input id=\"${id}B\" type=\"radio\" name=\"sortorder\" value=\"asc\"  ${(order.asc === 'asc') ? 'checked' : ''} ><label for=\"${id}B\">Ascending</label></div>\r\n        <div class=\"lu-checkbox\"><input id=\"${id}D\" type=\"radio\" name=\"sortorder\" value=\"desc\"  ${(order.asc === 'desc') ? 'checked' : ''} ><label for=\"${id}D\">Decending</label></div>\r\n        <div class=\"lu-checkbox\"><input id=\"${id}N\" type=\"radio\" name=\"sortorder\" value=\"none\"  ${(order.asc === undefined) ? 'checked' : ''} ><label for=\"${id}N\">Unsorted</label></div>\r\n        <strong>Sort Priority</strong>\r\n        <input type=\"number\" id=\"${id}P\" step=\"1\" min=\"1\" max=\"${current.length + 1}\" value=\"${order.priority + 1}\">\r\n    `);\r\n\r\n  const updateDisabled = (disable: boolean) => {\r\n    forEach(node, 'input:not([name=sortorder]), select, textarea', (d: HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement) => {\r\n      d.disabled = disable;\r\n    });\r\n  };\r\n  updateDisabled(order.asc === undefined);\r\n\r\n  const trigger = () => {\r\n    if (groupSortBy) {\r\n      ranking.groupSortBy(column, order.asc === 'asc', order.asc === undefined ? -1 : order.priority);\r\n    } else {\r\n      ranking.sortBy(column, order.asc === 'asc', order.asc === undefined ? -1 : order.priority);\r\n    }\r\n\r\n    updateDisabled(order.asc === undefined);\r\n  };\r\n\r\n  forEach(node, 'input[name=sortorder]', (n: HTMLInputElement) => {\r\n    n.addEventListener('change', () => {\r\n      order.asc = n.value === 'none' ? undefined : <'asc'|'desc'>n.value;\r\n      trigger();\r\n    }, {\r\n      passive: true\r\n    });\r\n  });\r\n  {\r\n    const priority = (<HTMLInputElement>node.querySelector(`#${id}P`));\r\n    priority.addEventListener('change', () => {\r\n      order.priority = parseInt(priority.value, 10) - 1;\r\n      trigger();\r\n    }, {\r\n      passive: true\r\n    });\r\n  }\r\n}\r\n","import ADialog from './ADialog';\r\nimport {IDialogContext} from './ADialog';\r\nimport {schemeCategory10, schemeSet1, schemeSet2, schemeSet3, schemeAccent, schemeDark2, schemePastel2, schemePastel1} from 'd3-scale-chromatic';\r\nimport {round, fixCSS} from '../../internal';\r\nimport {uniqueId} from '../../renderer/utils';\r\nimport {sequentialColors, divergentColors, createColorMappingFunction, lookupInterpolatingColor, QuantizedColorFunction, asColorFunction, CustomColorMappingFunction} from '../../model/ColorMappingFunction';\r\nimport Column, {IMapAbleColumn} from '../../model';\r\n\r\n/** @internal */\r\nexport default class ColorMappingDialog extends ADialog {\r\n  constructor(private readonly column: IMapAbleColumn, dialog: IDialogContext) {\r\n    super(dialog);\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    node.classList.add('lu-dialog-color');\r\n    const id = uniqueId('col');\r\n\r\n    const current = this.column.getColorMapping();\r\n    const entries = current.type === 'custom' ? current.entries : [];\r\n\r\n    let h = '';\r\n    h += `<datalist id=\"${id}L\">${schemeCategory10.map((d) => `<option>${d}\"</option>`).join('')}</datalist>`;\r\n    h += `<datalist id=\"${id}LW\"><option>#FFFFFF\"</option>${schemeCategory10.slice(0, -1).map((d) => `<option>${d}</option>`).join('')}</datalist>`;\r\n\r\n    h += `<strong>Quantization</strong>\r\n    <div class=\"lu-checkbox\">\r\n      <input id=\"${id}KC\" name=\"kind\" type=\"radio\" value=\"continuous\" ${current.type !== 'quantized' ? 'checked': ''}>\r\n      <label for=\"${id}CK\">Continuous</label>\r\n    </div>\r\n    <div class=\"lu-checkbox\">\r\n      <input id=\"${id}KQ\" name=\"kind\" type=\"radio\" value=\"quantized\" ${current.type === 'quantized' ? 'checked': ''}>\r\n      <label for=\"${id}KQ\"><input type=\"number\" id=\"${id}KQS\" min=\"2\" step=\"1\" value=\"${current.type === 'quantized' ? current.steps : 5}\">&nbsp; steps</label>\r\n    </div>`;\r\n\r\n    h += `<strong data-toggle=\"${current.type === 'solid' ? 'open' : ''}\">Solid Color</strong>`;\r\n    h += `<div>`;\r\n    {\r\n      const refColor = current.type === 'solid' ? current.color : '';\r\n      let has = false;\r\n      const colorsets = [schemeCategory10, schemeAccent, schemeDark2, schemePastel1, schemePastel2, schemeSet1, schemeSet2, schemeSet3];\r\n      for (const colors of colorsets) {\r\n        has = has || colors.includes(refColor);\r\n        h += `<div class=\"lu-color-line\">\r\n          ${colors.map((d) => `<div class=\"lu-checkbox-color\">\r\n              <input id=\"${id}${fixCSS(d)}\" name=\"color\" type=\"radio\" value=\"${d}\" ${d === refColor ? 'checked=\"checked\"': ''}>\r\n              <label for=\"${id}${fixCSS(d)}\" style=\"background: ${d}\"></label>\r\n            </div>`).join('')}\r\n        </div>`;\r\n      }\r\n      h += `<div class=\"lu-checkbox\"><input id=\"${id}O\" name=\"color\" type=\"radio\" value=\"custom:solid\" ${refColor && !has ? 'checked=\"checked\"' : ''}>\r\n        <label for=\"${id}O\"><input type=\"color\" name=\"solid\" list=\"${id}L\" value=\"${current.type === 'solid' ? current.color : Column.DEFAULT_COLOR}\" ${refColor && !has ? '' : 'disabled'}></label>\r\n      </div>`;\r\n    }\r\n    h += '</div>';\r\n\r\n    h += `<strong data-toggle=\"${current.type === 'sequential' || (current.type === 'custom' && entries.length === 2) ? 'open' : ''}\">Sequential Color</strong>`;\r\n    h += '<div>';\r\n    {\r\n      const name = current.type === 'sequential' ? current.name : '';\r\n      for (const colors of sequentialColors) {\r\n        h += `<div class=\"lu-checkbox lu-color-gradient\"><input id=\"${id}${colors.name}\" name=\"color\" type=\"radio\" value=\"${colors.name}\" ${colors.name === name ? 'checked=\"checked\"' : ''}>\r\n        <label for=\"${id}${colors.name}\" data-c=\"${colors.name}\" style=\"background: ${gradient(colors.apply, 9)}\"></label>\r\n      </div>`;\r\n      }\r\n      const isCustom = entries.length === 2;\r\n      h += `<div class=\"lu-checkbox lu-color-gradient\">\r\n        <input id=\"${id}S\" name=\"color\" type=\"radio\" value=\"custom:sequential\" ${isCustom ? 'checked': ''}>\r\n        <label for=\"${id}S\" class=\"lu-color-custom\">\r\n          <input type=\"color\" name=\"interpolate0\" list=\"${id}LW\" ${!isCustom ? 'disabled': `value=\"${entries[0].color}\"`}>\r\n          <input type=\"color\" name=\"interpolate1\" list=\"${id}LW\" ${!isCustom ? 'disabled': `value=\"${entries[entries.length - 1].color}\"`}>\r\n        </label>\r\n      </div>`;\r\n    }\r\n    h += '</div>';\r\n    h += `<strong data-toggle=\"${current.type === 'divergent' || (current.type === 'custom' && entries.length === 3) ? 'open' : ''}\">Diverging Color</strong>`;\r\n    h += '<div>';\r\n    {\r\n      const name = current.type === 'sequential' ? current.name : '';\r\n      for (const colors of divergentColors) {\r\n        h += `<div class=\"lu-checkbox lu-color-gradient\"><input id=\"${id}${colors.name}\" name=\"color\" type=\"radio\" value=\"${colors.name}\" ${colors.name === name ? 'checked=\"checked\"' : ''}>\r\n        <label for=\"${id}${colors.name}\" data-c=\"${colors.name}\" style=\"background: ${gradient(colors.apply, 11)}\"></label>\r\n      </div>`;\r\n      }\r\n      const isCustom = entries.length === 3;\r\n      h += `<div class=\"lu-checkbox lu-color-gradient\"><input id=\"${id}D\" name=\"color\" type=\"radio\" value=\"custom:divergent\" ${isCustom ? 'checked': ''}>\r\n        <label for=\"${id}D\" class=\"lu-color-custom\">\r\n          <input type=\"color\" name=\"divergingm1\" list=\"${id}L\" ${!isCustom ? 'disabled': `value=\"${entries[0].color}\"`}>\r\n          <input type=\"color\" name=\"diverging0\" list=\"${id}LW\" ${!isCustom ? 'disabled': `value=\"${entries[1].color}\"`}>\r\n          <input type=\"color\" name=\"diverging1\" list=\"${id}L\" ${!isCustom ? 'disabled': `value=\"${entries[2].color}\"`}>\r\n          </label>\r\n      </div>`;\r\n    }\r\n    h += '</div>';\r\n\r\n    node.insertAdjacentHTML('beforeend', h);\r\n\r\n    this.interactive(node, id);\r\n  }\r\n\r\n  private interactive(node: HTMLElement, id: string) {\r\n    const continuouos = this.findInput(`#${id}KC`);\r\n    const quantized = this.findInput(`#${id}KQ`);\r\n    const steps = this.findInput(`#${id}KQS`);\r\n    const toggles = <HTMLElement[]>Array.from(node.querySelectorAll('strong[data-toggle]'));\r\n\r\n    continuouos.onchange = () => {\r\n      if (continuouos.checked) {\r\n        this.updateGradients(-1);\r\n      }\r\n    };\r\n    quantized.onchange = steps.onchange = () => {\r\n      if (!quantized.checked) {\r\n        this.updateGradients(-1);\r\n        return;\r\n      }\r\n      if (toggles[0].dataset.toggle === 'open') {\r\n        // auto open sequential\r\n        toggles[0].dataset.toggle = '';\r\n        toggles[1].dataset.toggle = 'open';\r\n      }\r\n      this.updateGradients(parseInt(steps.value, 10));\r\n    };\r\n\r\n    for (const toggle of toggles) {\r\n      toggle.onclick = (evt) => {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        for (const t2 of toggles) {\r\n          t2.dataset.toggle = t2.dataset.toggle === 'open' || toggle !== t2 ? '' : 'open';\r\n        }\r\n      };\r\n    }\r\n\r\n    const customs: HTMLElement[] = [];\r\n\r\n    const toColor = (input: HTMLInputElement) => {\r\n      switch (input.value) {\r\n        case 'custom:solid':\r\n          return asColorFunction((<HTMLInputElement>node.querySelector('input[name=solid]')!).value);\r\n        case 'custom:sequential':\r\n          const s0 = (<HTMLInputElement>node.querySelector('input[name=interpolate0]')!).value;\r\n          const s1 = (<HTMLInputElement>node.querySelector('input[name=interpolate1]')!).value;\r\n          return new CustomColorMappingFunction([{color: s0, value: 0}, {color: s1, value: 1}]);\r\n        case 'custom:diverging':\r\n          const dm1 = (<HTMLInputElement>node.querySelector('input[name=divergentm1]')!).value;\r\n          const d0 = (<HTMLInputElement>node.querySelector('input[name=divergent0]')!).value;\r\n          const d1 = (<HTMLInputElement>node.querySelector('input[name=divergent1]')!).value;\r\n          return new CustomColorMappingFunction([{color: dm1, value: 0}, {color: d0, value: 0.5}, {color: d1, value: 1}]);\r\n      }\r\n      return createColorMappingFunction(this.column.color, input.value);\r\n    };\r\n\r\n    this.forEach('input[name=color]', (d: HTMLInputElement) => {\r\n      if (d.value.startsWith('custom:')) {\r\n        customs.push(d);\r\n      }\r\n      d.onchange = () => {\r\n        if (!d.checked) {\r\n          return;\r\n        }\r\n        // disable customs\r\n        for (const custom of customs) {\r\n          Array.from(custom.nextElementSibling!.querySelectorAll('input')).forEach((s) => s.disabled = custom !== d);\r\n        }\r\n        const base = toColor(d);\r\n        if (quantized.checked && base.type !== 'solid') {\r\n          this.column.setColorMapping(new QuantizedColorFunction(base, parseInt(steps.value, 10)));\r\n        } else {\r\n          this.column.setColorMapping(base);\r\n        }\r\n      };\r\n    });\r\n\r\n    // upon changing custom parameter trigger an update\r\n    this.forEach('label > input[type=color]', (d: HTMLInputElement) => {\r\n      d.onchange = () => {\r\n        const item = (<HTMLInputElement>d.parentElement!.previousElementSibling!);\r\n        item.onchange!.call(item, null);\r\n      };\r\n    });\r\n  }\r\n\r\n  private updateGradients(steps: number) {\r\n    this.forEach(`label[data-c]`, (d: HTMLElement) => {\r\n      const f = lookupInterpolatingColor.get(d.dataset.c!)!;\r\n      d.style.background = steps < 0 ? gradient(f.apply, f.type === 'sequential' ? 9 : 11) : steppedGradient(f.apply, steps);\r\n    });\r\n  }\r\n}\r\n\r\nfunction gradient(interpolate: (v: number)=>string, steps = 2) {\r\n  if (steps <= 1) {\r\n    return `${interpolate(0)}`;\r\n  }\r\n  const stepSize = 1 / (steps - 1);\r\n  let r = `linear-gradient(to right`;\r\n  for (let i = 0; i < steps; ++i) {\r\n    r += `, ${interpolate(i * stepSize)} ${round((i * stepSize) * 100, 2)}%`;\r\n  }\r\n  r += ')';\r\n  return r;\r\n}\r\n\r\nfunction steppedGradient(color: (v: number)=>string, count = 2) {\r\n  if (count === 1) {\r\n    return `${color(0)}`;\r\n  }\r\n  let r = `linear-gradient(to right`;\r\n  const stepSize = 1 / count;\r\n  const half = stepSize / 2;\r\n  for (let i = 0; i < count; ++i) {\r\n    // stepped\r\n    // first and last at border else center\r\n    const shift = i === 0 ? 0 : (i === (count - 1) ? stepSize : half);\r\n    const c = color(i * stepSize + shift);\r\n    r += `, ${c} ${round((i * stepSize) * 100, 2)}%, ${c} ${round(((i + 1) * stepSize) * 100, 2)}%`;\r\n  }\r\n  r += ')';\r\n  return r;\r\n}\r\n","import {getAllToolbarActions, isSupportType, getAllToolbarDialogAddons, isSortingAscByDefault} from '../model/annotations';\r\nimport Column from '../model/Column';\r\nimport CompositeColumn, {IMultiLevelColumn} from '../model/CompositeColumn';\r\nimport ADialog, {IDialogContext} from './dialogs/ADialog';\r\nimport ChangeRendererDialog from './dialogs/ChangeRendererDialog';\r\nimport MoreColumnOptionsDialog from './dialogs/MoreColumnOptionsDialog';\r\nimport RenameDialog from './dialogs/RenameDialog';\r\nimport BooleanFilterDialog from './dialogs/BooleanFilterDialog';\r\nimport CategoricalFilterDialog from './dialogs/CategoricalFilterDialog';\r\nimport CategoricalMappingFilterDialog from './dialogs/CategoricalMappingFilterDialog';\r\nimport CompositeChildrenDialog from './dialogs/CompositeChildrenDialog';\r\nimport CutOffHierarchyDialog from './dialogs/CutOffHierarchyDialog';\r\nimport EditPatternDialog from './dialogs/EditPatternDialog';\r\nimport MappingsFilterDialog from './dialogs/MappingsFilterDialog';\r\nimport ReduceDialog from './dialogs/ReduceDialog';\r\nimport ScriptEditDialog from './dialogs/ScriptEditDialog';\r\nimport SearchDialog from './dialogs/SearchDialog';\r\nimport StringFilterDialog from './dialogs/StringFilterDialog';\r\nimport WeightsEditDialog from './dialogs/WeightsEditDialog';\r\nimport GroupDialog from './dialogs/GroupDialog';\r\nimport {sortMethods} from './dialogs/utils';\r\nimport {IRankingHeaderContext} from './interfaces';\r\nimport SortDialog from './dialogs/SortDialog';\r\nimport {EAdvancedSortMethod, ESortMethod} from '../model/INumberColumn';\r\nimport {EDateSort} from '../model/DatesColumn';\r\nimport appendNumber from './dialogs/groupNumber';\r\nimport ColorMappingDialog from './dialogs/ColorMappingDialog';\r\n\r\nexport interface IUIOptions {\r\n  shortcut: boolean|'only';\r\n  order: number;\r\n}\r\n\r\nexport interface IMouseEvent {\r\n  stopPropagation(): void;\r\n  currentTarget: Element;\r\n  shiftKey: boolean;\r\n  altKey: boolean;\r\n  ctrlKey: boolean;\r\n  [key: string]: any;\r\n}\r\n\r\nexport interface IOnClickHandler {\r\n  (col: Column, evt: IMouseEvent, ctx: IRankingHeaderContext, level: number, viaShortcut: boolean): any;\r\n}\r\n\r\nexport interface IToolbarAction {\r\n  title: string;\r\n\r\n  onClick: IOnClickHandler;\r\n\r\n  options: Partial<IUIOptions>;\r\n}\r\n\r\nexport interface IToolbarDialogAddon {\r\n  title: string;\r\n\r\n  order: number;\r\n\r\n  append(col: Column, node: HTMLElement, dialog: IDialogContext, ctx: IRankingHeaderContext): void;\r\n}\r\n\r\nexport interface IDialogClass {\r\n  new(col: any, dialog: IDialogContext, ...args: any[]): ADialog;\r\n}\r\n\r\nfunction ui(title: string, onClick: IOnClickHandler, options: Partial<IUIOptions> = {}): IToolbarAction {\r\n  return { title, onClick, options };\r\n}\r\n\r\nexport function dialogContext(ctx: IRankingHeaderContext, level: number, evt: { currentTarget: Element }): IDialogContext {\r\n  return {\r\n    attachment: <HTMLElement>evt.currentTarget,\r\n    level,\r\n    manager: ctx.dialogManager,\r\n    idPrefix: ctx.idPrefix\r\n  };\r\n}\r\n\r\nfunction uiDialog(title: string, dialogClass: IDialogClass, extraArgs: ((ctx: IRankingHeaderContext) => any[]) = () => [], options: Partial<IUIOptions> = {}): IToolbarAction {\r\n  return {\r\n    title,\r\n    onClick: (col, evt, ctx, level) => {\r\n      const dialog = new dialogClass(col, dialogContext(ctx, level, evt), ...extraArgs(ctx));\r\n      dialog.open();\r\n    }, options\r\n  };\r\n}\r\n\r\nfunction uiSortMethod(methods: string[]): IToolbarDialogAddon {\r\n  methods = methods.sort((a, b) => a.toLowerCase().localeCompare(b.toLowerCase()));\r\n  return {\r\n    title: 'Sort By',\r\n    order: 2,\r\n    append(col, node, dialog) {\r\n      sortMethods(node, <any>col, methods, dialog.idPrefix);\r\n    }\r\n  };\r\n}\r\n\r\nconst sort: IToolbarAction = {\r\n  title: 'Sort',\r\n  onClick: (col, evt, ctx, level) => {\r\n    ctx.dialogManager.removeAboveLevel(level);\r\n    if (!evt.ctrlKey) {\r\n      col.toggleMySorting();\r\n      return;\r\n    }\r\n    const ranking = col.findMyRanker()!;\r\n    const current = ranking.getSortCriteria();\r\n    const order = col.isSortedByMe();\r\n\r\n    const isAscByDefault = isSortingAscByDefault(col);\r\n\r\n    if (order.priority === undefined) {\r\n      ranking.sortBy(col, isAscByDefault, current.length);\r\n      return;\r\n    }\r\n    let next: string|undefined = undefined;\r\n    if (isAscByDefault) {\r\n      next = order.asc ? 'desc' : undefined;\r\n    } else {\r\n      next = !order.asc ? 'asc' : undefined;\r\n    }\r\n    ranking.sortBy(col, next === 'asc', next ? order.priority : -1);\r\n  },\r\n  options: {\r\n    shortcut: 'only',\r\n    order: 1\r\n  }\r\n};\r\n\r\nconst sortBy: IToolbarAction = {\r\n  title: 'Sort By &hellip;',\r\n  onClick: (col, evt, ctx, level) => {\r\n    const dialog = new SortDialog(col, false, dialogContext(ctx, level, evt), ctx);\r\n    dialog.open();\r\n  },\r\n  options: {\r\n    shortcut: false,\r\n    order: 1\r\n  }\r\n};\r\n\r\nconst sortGroupBy: IToolbarAction = {\r\n  title: 'Sort Groups By &hellip;',\r\n  onClick: (col, evt, ctx, level) => {\r\n    const dialog = new SortDialog(col, true, dialogContext(ctx, level, evt), ctx);\r\n    dialog.open();\r\n  },\r\n  options: {\r\n    shortcut: false,\r\n    order: 3\r\n  }\r\n};\r\n\r\nconst rename: IToolbarAction = {\r\n  title: 'Rename + Color &hellip;',\r\n  onClick: (col, evt, ctx, level) => {\r\n    const dialog = new RenameDialog(col, dialogContext(ctx, level, evt));\r\n    dialog.open();\r\n  },\r\n  options: {\r\n    order: 4\r\n  }\r\n};\r\n\r\nconst vis: IToolbarAction = {\r\n  title: 'Visualization &hellip;',\r\n  onClick: (col, evt, ctx, level) => {\r\n    const dialog = new ChangeRendererDialog(col, dialogContext(ctx, level, evt), ctx);\r\n    dialog.open();\r\n  },\r\n  options: {}\r\n};\r\n\r\nconst clone: IToolbarAction = {\r\n  title: 'Clone',\r\n  onClick: (col, _evt, ctx) => {\r\n    ctx.dialogManager.removeAll(); // since the column will be removed\r\n    ctx.provider.takeSnapshot(col);\r\n  },\r\n  options: {\r\n    order: 80\r\n  }\r\n};\r\n\r\nconst more: IToolbarAction = {\r\n  title: 'More &hellip;',\r\n  onClick: (col, evt, ctx, level) => {\r\n    const dialog = new MoreColumnOptionsDialog(col, dialogContext(ctx, level, evt), ctx);\r\n    dialog.open();\r\n  },\r\n  options: {\r\n    shortcut: true,\r\n    order: 100\r\n  }\r\n};\r\n\r\nconst remove: IToolbarAction = {\r\n  title: 'Remove',\r\n  onClick: (col, _evt, ctx) => {\r\n    ctx.dialogManager.removeAll(); // since the column will be removed\r\n    const ranking = col.findMyRanker()!;\r\n    const last = ranking.children.every((d) => isSupportType(d) || d.fixed || d === col);\r\n    if (!last) {\r\n      col.removeMe();\r\n      return;\r\n    }\r\n    ctx.provider.removeRanking(ranking);\r\n    ctx.provider.ensureOneRanking();\r\n  },\r\n  options: {\r\n    order: 90\r\n  }\r\n};\r\n\r\nconst group = ui('Group', (col, evt, ctx, level) => {\r\n  ctx.dialogManager.removeAboveLevel(level);\r\n\r\n  if (!evt.ctrlKey) {\r\n    col.groupByMe();\r\n    return;\r\n  }\r\n  const ranking = col.findMyRanker()!;\r\n  const current = ranking.getGroupCriteria();\r\n  const order = current.indexOf(col);\r\n\r\n  ranking.groupBy(col, order >= 0 ? -1 : current.length);\r\n}, { shortcut: 'only', order: 2 });\r\n\r\nconst groupBy = ui('Group By &hellip;', (col, evt, ctx, level) => {\r\n  const dialog = new GroupDialog(col, dialogContext(ctx, level, evt), ctx);\r\n  dialog.open();\r\n}, { shortcut: false, order: 2 });\r\n\r\n\r\nconst collapse = ui('Compress', (col, evt, ctx, level) => {\r\n  ctx.dialogManager.removeAboveLevel(level);\r\n  const mcol = <IMultiLevelColumn>col;\r\n  mcol.setCollapsed(!mcol.getCollapsed());\r\n  const i = <HTMLElement>evt.currentTarget;\r\n  i.title = mcol.getCollapsed() ? 'Expand' : 'Compress';\r\n});\r\n\r\nconst toolbarAddons: { [key: string]: IToolbarDialogAddon } = {\r\n  sortNumber: uiSortMethod(Object.keys(EAdvancedSortMethod)),\r\n  sortNumbers: uiSortMethod(Object.keys(EAdvancedSortMethod)),\r\n  sortBoxPlot: uiSortMethod(Object.keys(ESortMethod)),\r\n  sortDates: uiSortMethod(Object.keys(EDateSort)),\r\n  sortGroup: uiSortMethod(['count', 'name']),\r\n  groupNumber: <IToolbarDialogAddon>{\r\n    title: 'Split',\r\n    order: 2,\r\n    append: appendNumber\r\n  }\r\n};\r\n\r\nexport const toolbarActions: { [key: string]: IToolbarAction | IToolbarDialogAddon } = Object.assign({\r\n  group,\r\n  groupBy,\r\n  collapse,\r\n  sort,\r\n  sortBy,\r\n  sortGroupBy,\r\n  more,\r\n  clone,\r\n  remove,\r\n  rename,\r\n  search: uiDialog('Search &hellip;', SearchDialog, (ctx) => [ctx.provider], { shortcut: true, order: 3 }),\r\n  filterMapped: uiDialog('Filter &hellip;', MappingsFilterDialog, (ctx) => [ctx], { shortcut: true }),\r\n  filterString: uiDialog('Filter &hellip;', StringFilterDialog, () => [], { shortcut: true }),\r\n  filterCategorical: uiDialog('Filter &hellip;', CategoricalFilterDialog, () => [], { shortcut: true }),\r\n  filterOrdinal: uiDialog('Filter &hellip;', CategoricalMappingFilterDialog, () => [], { shortcut: true }),\r\n  filterBoolean: uiDialog('Filter &hellip;', BooleanFilterDialog, () => [], { shortcut: true }),\r\n  colorMapped: uiDialog('Color Mapping &hellip;', ColorMappingDialog, () => [], { shortcut: false }),\r\n  script: uiDialog('Edit Combine Script &hellip;', ScriptEditDialog, () => [], { shortcut: true }),\r\n  reduce: uiDialog('Reduce by &hellip;', ReduceDialog),\r\n  cutoff: uiDialog('Set Cut Off &hellip;', CutOffHierarchyDialog, (ctx) => [ctx.idPrefix]),\r\n  editPattern: uiDialog('Edit Pattern &hellip;', EditPatternDialog, (ctx) => [ctx.idPrefix]),\r\n  editWeights: uiDialog('Edit Weights &hellip;', WeightsEditDialog, () => [], { shortcut: true }),\r\n  compositeContained: uiDialog('Contained Columns &hellip;', CompositeChildrenDialog, (ctx) => [ctx]),\r\n  splitCombined: ui('Split Combined Column', (col, _evt, ctx, level) => {\r\n    ctx.dialogManager.removeAboveLevel(level);\r\n    // split the combined column into its children\r\n    (<CompositeColumn>col).children.reverse().forEach((c) => col.insertAfterMe(c));\r\n    col.removeMe();\r\n  }),\r\n  invertSelection: ui('Invert Selection', (col, _evt, ctx, level) => {\r\n    ctx.dialogManager.removeAboveLevel(level - 1); // close itself\r\n    const s = ctx.provider.getSelection();\r\n    const order = col.findMyRanker()!.getOrder();\r\n    if (s.length === 0) {\r\n      ctx.provider.setSelection(order);\r\n      return;\r\n    }\r\n    const ss = new Set(s);\r\n    const others = order.filter((d) => !ss.has(d));\r\n    ctx.provider.setSelection(others);\r\n  })\r\n}, toolbarAddons);\r\n\r\nconst cache = new Map<string, IToolbarAction[]>();\r\nconst cacheAddon = new Map<string, IToolbarDialogAddon[]>();\r\n\r\nexport default function getToolbar(col: Column, ctx: IRankingHeaderContext) {\r\n  if (cache.has(col.desc.type)) {\r\n    return cache.get(col.desc.type)!;\r\n  }\r\n  const icons = <{ [key: string]: IToolbarAction }>ctx.toolbar;\r\n  const actions = new Set<IToolbarAction>();\r\n  if (!col.fixed) {\r\n    actions.add(remove);\r\n  }\r\n  {\r\n    const possible = ctx.getPossibleRenderer(col);\r\n    if (possible.item.length > 2 || possible.group.length > 2 || possible.summary.length > 2) { // default always possible\r\n      actions.add(vis);\r\n    }\r\n  }\r\n\r\n  if (!isSupportType(col)) {\r\n    actions.add(sort);\r\n    actions.add(sortBy);\r\n    actions.add(rename);\r\n    actions.add(clone);\r\n  }\r\n\r\n  const keys = getAllToolbarActions(col);\r\n\r\n  keys.forEach((key) => {\r\n    if (icons.hasOwnProperty(key)) {\r\n      actions.add(icons[key]);\r\n    } else {\r\n      console.warn('cannot find: ', col.desc.type, key);\r\n    }\r\n  });\r\n\r\n  if (actions.size > 0) {\r\n    actions.add(more);\r\n  }\r\n\r\n  const r = Array.from(actions).sort((a, b) => {\r\n    if (a.options.order === b.options.order) {\r\n      return a.title.localeCompare(b.title);\r\n    }\r\n    return (a.options.order || 50) - (b.options.order || 50);\r\n  });\r\n  cache.set(col.desc.type, r);\r\n  return r;\r\n}\r\n\r\nexport function getToolbarDialogAddons(col: Column, key: string, ctx: IRankingHeaderContext) {\r\n  const cacheKey = `${col.desc.type}@${key}`;\r\n  if (cacheAddon.has(cacheKey)) {\r\n    return cacheAddon.get(cacheKey)!;\r\n  }\r\n  const icons = <{ [key: string]: IToolbarDialogAddon }>ctx.toolbar;\r\n  const actions = new Set<IToolbarDialogAddon>();\r\n\r\n  const keys = getAllToolbarDialogAddons(col, key);\r\n\r\n  keys.forEach((key) => {\r\n    if (icons.hasOwnProperty(key)) {\r\n      actions.add(icons[key]);\r\n    } else {\r\n      console.warn('cannot find: ', col.desc.type, key);\r\n    }\r\n  });\r\n\r\n  const r = Array.from(actions).sort((a, b) => {\r\n    if (a.order === b.order) {\r\n      return a.title.localeCompare(b.title);\r\n    }\r\n    return (a.order || 50) - (b.order || 50);\r\n  });\r\n  cacheAddon.set(cacheKey, r);\r\n  return r;\r\n}\r\n\r\nexport function isSortAble(col: Column, ctx: IRankingHeaderContext) {\r\n  const toolbar = getToolbar(col, ctx);\r\n  return toolbar.includes(sortBy);\r\n}\r\n\r\nexport function isGroupAble(col: Column, ctx: IRankingHeaderContext) {\r\n  const toolbar = getToolbar(col, ctx);\r\n  return toolbar.includes(groupBy);\r\n}\r\n","import NumberColumn from '../../model/NumberColumn';\r\nimport {IDialogContext} from './ADialog';\r\nimport {round, getNumberOfBins} from '../../internal/math';\r\nimport {forEach} from '../../renderer/utils';\r\n\r\n\r\n/** @internal */\r\nexport default function append(col: NumberColumn, node: HTMLElement, dialog: IDialogContext) {\r\n  const domain = col.getMapping().domain;\r\n  const current = col.getGroupThresholds();\r\n  let isThreshold = current.length <= 1;\r\n  const ranking =  col.findMyRanker()!;\r\n  node.insertAdjacentHTML('beforeend', `\r\n    <div class=\"lu-checkbox\">\r\n      <input type=\"radio\" name=\"threshold\" value=\"threshold\" id=\"${dialog.idPrefix}T1\" ${isThreshold ? 'checked' : ''}>\r\n      <label for=\"${dialog.idPrefix}T1\">at&nbsp;<input type=\"number\" size=\"10\" id=\"${dialog.idPrefix}N1\" value=\"${current.length > 0 ? current[0] : round((domain[1] - domain[0]) / 2, 2)}\"\r\n          required min=\"${domain[0]}\" max=\"${domain[1]}\" step=\"any\" ${!isThreshold ? 'disabled': ''}>\r\n      </label>\r\n    </div>\r\n    <div class=\"lu-checkbox\">\r\n      <input type=\"radio\" name=\"threshold\" value=\"bins\" id=\"${dialog.idPrefix}T2\" ${!isThreshold ? 'checked' : ''}>\r\n      <label for=\"${dialog.idPrefix}T2\"> in&nbsp;<input type=\"number\" size=\"5\" id=\"${dialog.idPrefix}N2\" value=\"${current.length > 1 ? current.length : getNumberOfBins(ranking.getOrder().length)}\"\r\n          required min=\"2\" step=\"1\" ${isThreshold ? 'disabled': ''}>&nbsp;bins\r\n      </label>\r\n    </div>\r\n  `);\r\n\r\n  const threshold = <HTMLInputElement>node.querySelector(`#${dialog.idPrefix}N1`);\r\n  const bins = <HTMLInputElement>node.querySelector(`#${dialog.idPrefix}N2`);\r\n\r\n  const update = () => {\r\n    threshold.disabled = !isThreshold;\r\n    bins.disabled = isThreshold;\r\n\r\n    if (isThreshold) {\r\n      col.setGroupThresholds([parseFloat(threshold.value)]);\r\n      return;\r\n    }\r\n\r\n    const count = parseInt(bins.value, 10);\r\n    const delta = (domain[1] - domain[0]) / count;\r\n    let act = domain[0] + delta;\r\n    const thresholds = [act];\r\n    for(let i = 1; i < count - 1; ++i) {\r\n      act += delta;\r\n      thresholds.push(act);\r\n    }\r\n    col.setGroupThresholds(thresholds);\r\n  };\r\n\r\n  threshold.addEventListener('change', update, { passive: true });\r\n  bins.addEventListener('change', update, { passive: true });\r\n\r\n\r\n  forEach(node, 'input[name=threshold]', (d: HTMLInputElement) => {\r\n    d.addEventListener('change', () => {\r\n      isThreshold = d.value === 'threshold';\r\n      update();\r\n    }, { passive: true });\r\n  });\r\n}\r\n","import AEventDispatcher, {IEventListener} from '../../internal/AEventDispatcher';\r\n\r\nexport interface IItem {\r\n  id: string;\r\n  text: string;\r\n}\r\n\r\nexport interface IGroupSearchItem<T extends IItem> {\r\n  text: string;\r\n  children: (T | IGroupSearchItem<T>)[];\r\n}\r\n\r\nfunction isItem<T extends IItem>(v: T | IGroupSearchItem<T>): v is T {\r\n  return (<T>v).id !== undefined;\r\n}\r\n\r\nexport interface ISearchBoxOptions<T extends IItem> {\r\n  doc: Document;\r\n\r\n  formatItem(item: T | IGroupSearchItem<T>, node: HTMLElement): string;\r\n\r\n  placeholder: string;\r\n}\r\n\r\n/**\r\n * @asMemberOf SearchBox\r\n * @event\r\n */\r\nexport declare function select(item: any): void;\r\n\r\n\r\nexport default class SearchBox<T extends IItem> extends AEventDispatcher {\r\n  static readonly EVENT_SELECT = 'select';\r\n\r\n  private readonly options: Readonly<ISearchBoxOptions<T>> = {\r\n    formatItem: (item) => item.text,\r\n    doc: document,\r\n    placeholder: 'Select...',\r\n  };\r\n\r\n  readonly node: HTMLElement;\r\n  private search: HTMLInputElement;\r\n  private body: HTMLElement;\r\n\r\n  private values: (T | IGroupSearchItem<T>)[] = [];\r\n\r\n  constructor(options: Partial<ISearchBoxOptions<T>> = {}) {\r\n    super();\r\n    Object.assign(this.options, options);\r\n\r\n    this.node = this.options.doc.createElement('div');\r\n    this.node.classList.add('lu-search');\r\n    this.node.innerHTML = `<input type=\"search\" placeholder=\"${this.options.placeholder}\"><ul></ul>`;\r\n\r\n    this.search = this.node.querySelector('input')!;\r\n    this.body = this.node.querySelector('ul')!;\r\n\r\n    this.search.onfocus = () => this.focus();\r\n    this.search.onblur = () => this.blur();\r\n    this.search.oninput = () => this.filter();\r\n    this.search.onkeydown = (evt) => this.handleKey(evt);\r\n  }\r\n\r\n  get data() {\r\n    return this.values;\r\n  }\r\n\r\n  set data(data: (T | IGroupSearchItem<T>)[]) {\r\n    this.values = data;\r\n    this.body.innerHTML = '';\r\n    this.buildDialog(this.body, this.values);\r\n  }\r\n\r\n  private buildDialog(node: HTMLElement, values: (T | IGroupSearchItem<T>)[]) {\r\n    values.forEach((v) => {\r\n      if (isItem(v)) {\r\n        node.insertAdjacentHTML('beforeend', `<li class=\"lu-search-item\"><span></span></li>`);\r\n        const span = (<HTMLElement>node.lastElementChild!);\r\n        span.onmousedown = (evt) => {\r\n          // see https://stackoverflow.com/questions/10652852/jquery-fire-click-before-blur-event#10653160\r\n          evt.preventDefault();\r\n        };\r\n        span.onclick = () => this.select(v);\r\n        span.onmouseenter = () => this.highlighted = span;\r\n        span.onmouseleave = () => this.highlighted = null;\r\n      } else {\r\n        node.insertAdjacentHTML('beforeend', `<li class=\"lu-search-group\"><span></span><ul></ul></li>`);\r\n        const ul = <HTMLElement>node.lastElementChild!.lastElementChild!;\r\n        this.buildDialog(ul, v.children);\r\n      }\r\n      const item = <HTMLElement>node.lastElementChild!.firstElementChild!;\r\n      item.innerHTML = this.options.formatItem(v, item);\r\n    });\r\n  }\r\n\r\n  private handleKey(evt: KeyboardEvent) {\r\n    const KEYS = {\r\n      ESC: 27,\r\n      ENTER: 13,\r\n      UP: 38,\r\n      DOWN: 40\r\n    };\r\n    switch (evt.which) {\r\n      case KEYS.ESC:\r\n        this.search.blur();\r\n        break;\r\n      case KEYS.ENTER:\r\n        const h = this.highlighted;\r\n        if (h) {\r\n          h.click();\r\n        }\r\n        break;\r\n      case KEYS.UP:\r\n        this.highlightPrevious();\r\n        break;\r\n      case KEYS.DOWN:\r\n        this.highlightNext();\r\n        break;\r\n    }\r\n  }\r\n\r\n  private select(item: T) {\r\n    this.search.value = ''; // reset\r\n    this.search.blur();\r\n    this.filterResults(this.body, '');\r\n    this.fire(SearchBox.EVENT_SELECT, item);\r\n  }\r\n\r\n  focus() {\r\n    this.body.style.width = `${this.search.offsetWidth}px`;\r\n    this.highlighted = <HTMLElement>this.body.firstElementChild || null;\r\n    this.node.classList.add('lu-search-open');\r\n  }\r\n\r\n  private get highlighted() {\r\n    return <HTMLElement>this.body.querySelector('.lu-search-highlighted') || null;\r\n  }\r\n\r\n  private set highlighted(value: HTMLElement | null) {\r\n    const old = this.highlighted;\r\n    if (old === value) {\r\n      return;\r\n    }\r\n    if (old) {\r\n      old.classList.remove('lu-search-highlighted');\r\n    }\r\n    if (value) {\r\n      value.classList.add('lu-search-highlighted');\r\n    }\r\n  }\r\n\r\n  private highlightNext() {\r\n    const h = this.highlighted;\r\n    if (!h || h.classList.contains('hidden')) {\r\n      this.highlighted = <HTMLElement>this.body.querySelector('.lu-search-item:not(.hidden)') || null;\r\n      return;\r\n    }\r\n\r\n    const items = <HTMLElement[]>Array.from(this.body.querySelectorAll('.lu-search-item:not(.hidden)'));\r\n    const index = items.indexOf(h);\r\n    this.highlighted = items[index + 1] || null;\r\n  }\r\n\r\n  private highlightPrevious() {\r\n    const h = this.highlighted;\r\n    const items = <HTMLElement[]>Array.from(this.body.querySelectorAll('.lu-search-item:not(.hidden)'));\r\n\r\n    if (!h || h.classList.contains('hidden')) {\r\n      this.highlighted = items[items.length - 1] || null;\r\n      return;\r\n    }\r\n    const index = items.indexOf(h);\r\n    this.highlighted = items[index - 1] || null;\r\n  }\r\n\r\n  private blur() {\r\n    this.search.value = '';\r\n    this.node.classList.remove('lu-search-open');\r\n  }\r\n\r\n  private filter() {\r\n    const empty = this.filterResults(this.body, this.search.value.toLowerCase());\r\n    this.body.classList.toggle('lu-search-empty', empty);\r\n  }\r\n\r\n  private filterResults(node: HTMLElement, text: string) {\r\n    if (text === '') {\r\n      // show all\r\n      (<HTMLElement[]>Array.from(node.querySelectorAll('.hidden'))).forEach((d: HTMLElement) => d.classList.remove('hidden'));\r\n      return false;\r\n    }\r\n    const children = Array.from(node.children);\r\n    children.forEach((d) => {\r\n      const content = d.firstElementChild!.innerHTML.toLowerCase();\r\n      let hidden = !content.includes(text);\r\n      if (d.classList.contains('lu-search-group')) {\r\n        const ul = <HTMLElement>d.lastElementChild!;\r\n        const allChildrenHidden = this.filterResults(ul, text);\r\n        hidden = hidden && allChildrenHidden;\r\n      }\r\n      d.classList.toggle('hidden', hidden);\r\n    });\r\n\r\n    return children.every((d) => d.classList.contains('hidden'));\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([SearchBox.EVENT_SELECT]);\r\n  }\r\n\r\n  on(type: typeof SearchBox.EVENT_SELECT, listener: typeof select | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(type, listener);\r\n  }\r\n}\r\n","import {Category, SupportType} from './annotations';\r\nimport Column, {IColumnDesc} from './Column';\r\nimport {IDataRow, IGroup} from './interfaces';\r\n\r\nexport interface IAction {\r\n  name: string;\r\n  icon?: string;\r\n  className?: string;\r\n\r\n  action(row: IDataRow): void;\r\n}\r\n\r\nexport interface IGroupAction {\r\n  name: string;\r\n  icon?: string;\r\n  className?: string;\r\n\r\n  action(group: IGroup, rows: IDataRow[]): void;\r\n}\r\n\r\n/**\r\n * utility for creating an action description with optional label\r\n * @param label\r\n * @param actions\r\n * @param groupActions\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createActionDesc(label = 'actions', actions: Readonly<IAction>[] = [], groupActions: Readonly<IGroupAction>[] = []) {\r\n  return {type: 'actions', label, actions, groupActions, fixed: true};\r\n}\r\n\r\nexport interface IActionDesc {\r\n  actions?: Readonly<IAction>[];\r\n  groupActions?: Readonly<IGroupAction>[];\r\n}\r\n\r\nexport declare type IActionColumnDesc = IColumnDesc & IActionDesc;\r\n\r\n/**\r\n * a default column with no values\r\n */\r\n@SupportType()\r\n@Category('support')\r\nexport default class ActionColumn extends Column {\r\n\r\n  readonly actions: IAction[];\r\n  readonly groupActions: IGroupAction[];\r\n\r\n  constructor(id: string, desc: Readonly<IActionColumnDesc>) {\r\n    super(id, desc);\r\n\r\n    this.actions = desc.actions || [];\r\n    this.groupActions = desc.groupActions || [];\r\n  }\r\n\r\n  getLabel() {\r\n    return '';\r\n  }\r\n\r\n  getValue() {\r\n    return '';\r\n  }\r\n\r\n  compare() {\r\n    return 0; //can't compare\r\n  }\r\n}\r\n","import {Category, SupportType, toolbar, dialogAddons} from './annotations';\r\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport {IGroupData} from './interfaces';\r\nimport {FIRST_IS_NAN, missingGroup} from './missing';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\nexport function createGroupDesc(label = 'Group Name') {\r\n  return {type: 'group', label};\r\n}\r\n\r\nexport enum EGroupSortMethod {\r\n  name = 'name',\r\n  count ='count'\r\n}\r\n\r\n/**\r\n * emitted when the sort method property changes\r\n * @asMemberOf Column\r\n * @event\r\n */\r\nexport declare function sortMethodChanged(previous: EGroupSortMethod, current: EGroupSortMethod): void;\r\n\r\n\r\n@SupportType()\r\n@toolbar('sortGroupBy')\r\n@dialogAddons('sortGroup', 'sortGroups')\r\n@Category('support')\r\nexport default class GroupColumn extends Column {\r\n  static readonly EVENT_SORTMETHOD_CHANGED = 'sortMethodChanged';\r\n\r\n  private groupSortMethod: EGroupSortMethod = EGroupSortMethod.name;\r\n\r\n  get frozen() {\r\n    return this.desc.frozen !== false;\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([GroupColumn.EVENT_SORTMETHOD_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof GroupColumn.EVENT_SORTMETHOD_CHANGED, listener: typeof sortMethodChanged | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(<any>type, listener);\r\n  }\r\n\r\n  getLabel() {\r\n    return '';\r\n  }\r\n\r\n  getValue() {\r\n    return '';\r\n  }\r\n\r\n  compare() {\r\n    return 0; //can't compare\r\n  }\r\n\r\n  getSortMethod() {\r\n    return this.groupSortMethod;\r\n  }\r\n\r\n  setSortMethod(sortMethod: EGroupSortMethod) {\r\n    if (this.groupSortMethod === sortMethod) {\r\n      return;\r\n    }\r\n    this.fire([GroupColumn.EVENT_SORTMETHOD_CHANGED], this.groupSortMethod, this.groupSortMethod = sortMethod);\r\n    // sort by me if not already sorted by me\r\n    if (!this.isGroupSortedByMe().asc) {\r\n      this.toggleMyGroupSorting();\r\n    }\r\n  }\r\n\r\n  groupCompare(a: IGroupData, b: IGroupData) {\r\n    switch (this.groupSortMethod) {\r\n      case 'count':\r\n        return a.rows.length - b.rows.length;\r\n      default:\r\n        if (a.name === missingGroup.name) {\r\n          return b.name === missingGroup.name ? 0 : FIRST_IS_NAN;\r\n        }\r\n        if (b.name === missingGroup.name) {\r\n          return -FIRST_IS_NAN;\r\n        }\r\n        return a.name.toLowerCase().localeCompare(b.name.toLowerCase());\r\n    }\r\n  }\r\n}\r\n","import {IBoxPlotData} from '../internal';\r\nimport {suffix, IEventListener} from '../internal/AEventDispatcher';\r\nimport {toolbar, SortByDefault, dialogAddons} from './annotations';\r\nimport BoxPlotColumn, {mappingChanged} from './BoxPlotColumn';\r\nimport Column, {IColumnDesc, widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport CompositeColumn, {addColumn, filterChanged, moveColumn, removeColumn} from './CompositeColumn';\r\nimport {IDataRow, IGroupData} from './interfaces';\r\nimport {ESortMethod, IBoxPlotColumn, INumberFilter, isBoxPlotColumn, noNumberFilter} from './INumberColumn';\r\nimport {IMappingFunction, ScaleMappingFunction, isMapAbleColumn} from './MappingFunction';\r\nimport NumbersColumn from './NumbersColumn';\r\nimport {colorMappingChanged} from './NumberColumn';\r\nimport {DEFAULT_COLOR_FUNCTION, IColorMappingFunction} from './ColorMappingFunction';\r\n\r\n\r\n/**\r\n *  factory for creating a description creating a max column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createImpositionBoxPlotDesc(label: string = 'Imposition') {\r\n  return {type: 'impositions', label};\r\n}\r\n\r\n/**\r\n * implementation of a combine column, standard operations how to select\r\n */\r\n@toolbar('filterMapped', 'colorMapped')\r\n@dialogAddons('sort', 'sortBoxPlot')\r\n@SortByDefault('descending')\r\nexport default class ImpositionBoxPlotColumn extends CompositeColumn implements IBoxPlotColumn {\r\n  static readonly EVENT_MAPPING_CHANGED = NumbersColumn.EVENT_MAPPING_CHANGED;\r\n  static readonly EVENT_COLOR_MAPPING_CHANGED = NumbersColumn.EVENT_COLOR_MAPPING_CHANGED;\r\n\r\n  constructor(id: string, desc: Readonly<IColumnDesc>) {\r\n    super(id, desc);\r\n\r\n    this.setDefaultRenderer('boxplot');\r\n    this.setDefaultGroupRenderer('boxplot');\r\n  }\r\n\r\n  get label() {\r\n    const l = super.getMetaData().label;\r\n    const c = this._children;\r\n    if (l !== 'Imposition' || c.length === 0) {\r\n      return l;\r\n    }\r\n    if (c.length === 1) {\r\n      return c[0].label;\r\n    }\r\n    return `${c[0].label} (${c.slice(1).map((c) => c.label).join(', ')})`;\r\n  }\r\n\r\n  private get wrapper(): IBoxPlotColumn | null {\r\n    const c = this._children;\r\n    return c.length === 0 ? null : <IBoxPlotColumn>c[0];\r\n  }\r\n\r\n  getLabel(row: IDataRow) {\r\n    const c = this._children;\r\n    if (c.length === 0) {\r\n      return '';\r\n    }\r\n    if (c.length === 1) {\r\n      return c[0].getLabel(row);\r\n    }\r\n    return `${c[0].getLabel(row)} (${c.slice(1).map((c) => `${c.label} = ${c.getLabel(row)}`)})`;\r\n  }\r\n\r\n  getColor(row: IDataRow) {\r\n    const c = this._children;\r\n    switch(c.length) {\r\n      case 0:\r\n        return this.color;\r\n      case 1:\r\n        return c[0].getColor(row);\r\n      default:\r\n        return c[1].getColor(row);\r\n    }\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([ImpositionBoxPlotColumn.EVENT_MAPPING_CHANGED, ImpositionBoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof ImpositionBoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged | null): this;\r\n  on(type: typeof ImpositionBoxPlotColumn.EVENT_MAPPING_CHANGED, listener: typeof mappingChanged | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(type, listener);\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    const w = this.wrapper;\r\n    return w ? w.getValue(row) : null;\r\n  }\r\n\r\n  getNumber(row: IDataRow) {\r\n    const w = this.wrapper;\r\n    return w ? w.getNumber(row) : NaN;\r\n  }\r\n\r\n  getRawNumber(row: IDataRow) {\r\n    const w = this.wrapper;\r\n    return w ? w.getRawNumber(row) : NaN;\r\n  }\r\n\r\n  getBoxPlotData(row: IDataRow): IBoxPlotData | null {\r\n    const w = this.wrapper;\r\n    return w ? w.getBoxPlotData(row) : null;\r\n  }\r\n\r\n  getRawBoxPlotData(row: IDataRow): IBoxPlotData | null {\r\n    const w = this.wrapper;\r\n    return w ? w.getRawBoxPlotData(row) : null;\r\n  }\r\n\r\n  getMapping() {\r\n    const w = this.wrapper;\r\n    return w ? w.getMapping() : new ScaleMappingFunction();\r\n  }\r\n\r\n  getOriginalMapping() {\r\n    const w = this.wrapper;\r\n    return w ? w.getOriginalMapping() : new ScaleMappingFunction();\r\n  }\r\n\r\n  getSortMethod() {\r\n    const w = this.wrapper;\r\n    return w ? w.getSortMethod() : ESortMethod.min;\r\n  }\r\n\r\n  setSortMethod(value: ESortMethod) {\r\n    const w = this.wrapper;\r\n    return w ? w.setSortMethod(value) : undefined;\r\n  }\r\n\r\n  isMissing(row: IDataRow) {\r\n    const w = this.wrapper;\r\n    return w ? w.isMissing(row) : true;\r\n  }\r\n\r\n  setMapping(mapping: IMappingFunction): void {\r\n    const w = this.wrapper;\r\n    return w ? w.setMapping(mapping) : undefined;\r\n  }\r\n\r\n  getColorMapping() {\r\n    const w = this.wrapper;\r\n    return w ? w.getColorMapping() : DEFAULT_COLOR_FUNCTION;\r\n  }\r\n\r\n  setColorMapping(mapping: IColorMappingFunction) {\r\n    const w = this.wrapper;\r\n    return w ? w.setColorMapping(mapping) : undefined;\r\n  }\r\n\r\n  getFilter() {\r\n    const w = this.wrapper;\r\n    return w ? w.getFilter() : noNumberFilter();\r\n  }\r\n\r\n  setFilter(value?: INumberFilter): void {\r\n    const w = this.wrapper;\r\n    return w ? w.setFilter(value) : undefined;\r\n  }\r\n\r\n  getRange(): [string, string] {\r\n    const w = this.wrapper;\r\n    return w ? w.getRange() : ['0', '1'];\r\n  }\r\n\r\n  compare(a: IDataRow, b: IDataRow) {\r\n    return BoxPlotColumn.prototype.compare.call(this, a, b);\r\n  }\r\n\r\n  group(row: IDataRow) {\r\n    return BoxPlotColumn.prototype.group.call(this, row);\r\n  }\r\n\r\n  groupCompare(a: IGroupData, b: IGroupData) {\r\n    return BoxPlotColumn.prototype.groupCompare.call(this, a, b);\r\n  }\r\n\r\n  insert(col: Column, index: number): Column | null {\r\n    if (this._children.length === 0 && !isBoxPlotColumn(col)) {\r\n      return null;\r\n    }\r\n    if (this._children.length >= 2) {\r\n      // limit to two\r\n      return null;\r\n    }\r\n    return super.insert(col, index);\r\n  }\r\n\r\n  protected insertImpl(col: Column, index: number) {\r\n    if (isBoxPlotColumn(col)) {\r\n      this.forward(col, ...suffix('.impose', BoxPlotColumn.EVENT_MAPPING_CHANGED, BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED));\r\n    }\r\n    if (isMapAbleColumn(col)) {\r\n      this.forward(col, ...suffix('.impose', BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED));\r\n    }\r\n    return super.insertImpl(col, index);\r\n  }\r\n\r\n  protected removeImpl(child: Column, index: number) {\r\n    if (isBoxPlotColumn(child)) {\r\n      this.unforward(child, ...suffix('.impose', BoxPlotColumn.EVENT_MAPPING_CHANGED, BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED));\r\n    }\r\n    if (isMapAbleColumn(child)) {\r\n      this.unforward(child, ...suffix('.impose', BoxPlotColumn.EVENT_COLOR_MAPPING_CHANGED));\r\n    }\r\n    return super.removeImpl(child, index);\r\n  }\r\n}\r\n","import {suffix, IEventListener} from '../internal/AEventDispatcher';\r\nimport {toolbar, SortByDefault} from './annotations';\r\nimport Column, {IColumnDesc, widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport CompositeColumn, {addColumn, filterChanged, moveColumn, removeColumn} from './CompositeColumn';\r\nimport {IDataRow, IGroupData} from './interfaces';\r\nimport {isNumberColumn} from './INumberColumn';\r\nimport NumberColumn, {INumberColumn, mappingChanged, colorMappingChanged} from './NumberColumn';\r\nimport {isMapAbleColumn} from './MappingFunction';\r\n\r\n\r\n/**\r\n *  factory for creating a description creating a max column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createImpositionDesc(label: string = 'Imposition') {\r\n  return {type: 'imposition', label};\r\n}\r\n\r\n/**\r\n * implementation of a combine column, standard operations how to select\r\n */\r\n@toolbar('filterMapped', 'colorMapped')\r\n@SortByDefault('descending')\r\nexport default class ImpositionCompositeColumn extends CompositeColumn implements INumberColumn {\r\n  static readonly EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\r\n  static readonly EVENT_COLOR_MAPPING_CHANGED = NumberColumn.EVENT_COLOR_MAPPING_CHANGED;\r\n\r\n  constructor(id: string, desc: Readonly<IColumnDesc>) {\r\n    super(id, desc);\r\n\r\n    this.setDefaultRenderer('number');\r\n    this.setDefaultGroupRenderer('boxplot');\r\n  }\r\n\r\n  get label() {\r\n    const l = super.getMetaData().label;\r\n    const c = this._children;\r\n    if (l !== 'Imposition' || c.length === 0) {\r\n      return l;\r\n    }\r\n    if (c.length === 1) {\r\n      return c[0].label;\r\n    }\r\n    return `${c[0].label} (${c.slice(1).map((c) => c.label).join(', ')})`;\r\n  }\r\n\r\n  private get wrapper(): INumberColumn | null {\r\n    const c = this._children;\r\n    return c.length === 0 ? null : <INumberColumn>c[0];\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([ImpositionCompositeColumn.EVENT_MAPPING_CHANGED, ImpositionCompositeColumn.EVENT_COLOR_MAPPING_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof ImpositionCompositeColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged | null): this;\r\n  on(type: typeof ImpositionCompositeColumn.EVENT_MAPPING_CHANGED, listener: typeof mappingChanged | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(type, listener);\r\n  }\r\n\r\n  getLabel(row: IDataRow) {\r\n    const c = this._children;\r\n    if (c.length === 0) {\r\n      return '';\r\n    }\r\n    if (c.length === 1) {\r\n      return c[0].getLabel(row);\r\n    }\r\n    return `${c[0].getLabel(row)} (${c.slice(1).map((c) => `${c.label} = ${c.getLabel(row)}`).join(', ')})`;\r\n  }\r\n\r\n  getColor(row: IDataRow) {\r\n    const c = this._children;\r\n    switch(c.length) {\r\n      case 0:\r\n        return this.color;\r\n      case 1:\r\n        return c[0].getColor(row);\r\n      default:\r\n        return c[1].getColor(row);\r\n    }\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    const w = this.wrapper;\r\n    return w ? w.getValue(row) : [];\r\n  }\r\n\r\n  getNumber(row: IDataRow) {\r\n    const w = this.wrapper;\r\n    return w ? w.getNumber(row) : NaN;\r\n  }\r\n\r\n  getRawNumber(row: IDataRow) {\r\n    const w = this.wrapper;\r\n    return w ? w.getRawNumber(row) : NaN;\r\n  }\r\n\r\n  isMissing(row: IDataRow) {\r\n    const w = this.wrapper;\r\n    return w ? w.isMissing(row) : true;\r\n  }\r\n\r\n  compare(a: IDataRow, b: IDataRow) {\r\n    return NumberColumn.prototype.compare.call(this, a, b);\r\n  }\r\n\r\n  group(row: IDataRow) {\r\n    return NumberColumn.prototype.group.call(this, row);\r\n  }\r\n\r\n  groupCompare(a: IGroupData, b: IGroupData) {\r\n    return NumberColumn.prototype.groupCompare.call(this, a, b);\r\n  }\r\n\r\n  insert(col: Column, index: number): Column | null {\r\n    if (this._children.length === 0 && !isNumberColumn(col)) {\r\n      return null;\r\n    }\r\n    if (this._children.length >= 2) {\r\n      // limit to two\r\n      return null;\r\n    }\r\n    return super.insert(col, index);\r\n  }\r\n\r\n  protected insertImpl(col: Column, index: number) {\r\n    if (isNumberColumn(col)) {\r\n      this.forward(col, ...suffix('.impose', NumberColumn.EVENT_MAPPING_CHANGED));\r\n    }\r\n    if (isMapAbleColumn(col)) {\r\n      this.forward(col, ...suffix('.impose', NumberColumn.EVENT_COLOR_MAPPING_CHANGED));\r\n    }\r\n    return super.insertImpl(col, index);\r\n  }\r\n\r\n  protected removeImpl(child: Column, index: number) {\r\n    if (isNumberColumn(child)) {\r\n      this.unforward(child, ...suffix('.impose', NumberColumn.EVENT_MAPPING_CHANGED));\r\n    }\r\n    if (isMapAbleColumn(child)) {\r\n      this.unforward(child, ...suffix('.impose', NumberColumn.EVENT_COLOR_MAPPING_CHANGED));\r\n    }\r\n    return super.removeImpl(child, index);\r\n  }\r\n}\r\n","import {IAdvancedBoxPlotData} from '../internal';\r\nimport {suffix, IEventListener} from '../internal/AEventDispatcher';\r\nimport {toolbar, dialogAddons, SortByDefault} from './annotations';\r\nimport Column, {IColumnDesc, widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport CompositeColumn, {addColumn, filterChanged, moveColumn, removeColumn} from './CompositeColumn';\r\nimport {IKeyValue} from './IArrayColumn';\r\nimport {IDataRow, IGroupData} from './interfaces';\r\nimport {EAdvancedSortMethod, INumberFilter, INumbersColumn, isNumbersColumn, noNumberFilter} from './INumberColumn';\r\nimport {IMappingFunction, ScaleMappingFunction, isMapAbleColumn} from './MappingFunction';\r\nimport NumbersColumn, {mappingChanged} from './NumbersColumn';\r\nimport {colorMappingChanged} from './NumberColumn';\r\nimport {DEFAULT_COLOR_FUNCTION, IColorMappingFunction} from './ColorMappingFunction';\r\n\r\n\r\n/**\r\n *  factory for creating a description creating a max column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createImpositionsDesc(label: string = 'Imposition') {\r\n  return {type: 'impositions', label};\r\n}\r\n\r\n/**\r\n * implementation of a combine column, standard operations how to select\r\n */\r\n@toolbar('filterMapped', 'colorMapped')\r\n@dialogAddons('sort', 'sortNumbers')\r\n@SortByDefault('descending')\r\nexport default class ImpositionCompositesColumn extends CompositeColumn implements INumbersColumn {\r\n  static readonly EVENT_MAPPING_CHANGED = NumbersColumn.EVENT_MAPPING_CHANGED;\r\n  static readonly EVENT_COLOR_MAPPING_CHANGED = NumbersColumn.EVENT_COLOR_MAPPING_CHANGED;\r\n\r\n  constructor(id: string, desc: Readonly<IColumnDesc>) {\r\n    super(id, desc);\r\n\r\n    this.setDefaultRenderer('numbers');\r\n    this.setDefaultGroupRenderer('numbers');\r\n  }\r\n\r\n  get label() {\r\n    const l = super.getMetaData().label;\r\n    const c = this._children;\r\n    if (l !== 'Imposition' || c.length === 0) {\r\n      return l;\r\n    }\r\n    if (c.length === 1) {\r\n      return c[0].label;\r\n    }\r\n    return `${c[0].label} (${c.slice(1).map((c) => c.label).join(', ')})`;\r\n  }\r\n\r\n  private get wrapper(): INumbersColumn | null {\r\n    const c = this._children;\r\n    return c.length === 0 ? null : <INumbersColumn>c[0];\r\n  }\r\n\r\n  getLabel(row: IDataRow) {\r\n    const c = this._children;\r\n    if (c.length === 0) {\r\n      return '';\r\n    }\r\n    if (c.length === 1) {\r\n      return c[0].getLabel(row);\r\n    }\r\n    return `${c[0].getLabel(row)} (${c.slice(1).map((c) => `${c.label} = ${c.getLabel(row)}`)})`;\r\n  }\r\n\r\n  getColor(row: IDataRow) {\r\n    const c = this._children;\r\n    switch(c.length) {\r\n      case 0:\r\n        return this.color;\r\n      case 1:\r\n        return c[0].getColor(row);\r\n      default:\r\n        return c[1].getColor(row);\r\n    }\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([ImpositionCompositesColumn.EVENT_MAPPING_CHANGED, ImpositionCompositesColumn.EVENT_COLOR_MAPPING_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof ImpositionCompositesColumn.EVENT_COLOR_MAPPING_CHANGED, listener: typeof colorMappingChanged | null): this;\r\n  on(type: typeof ImpositionCompositesColumn.EVENT_MAPPING_CHANGED, listener: typeof mappingChanged | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(type, listener);\r\n  }\r\n\r\n  get labels() {\r\n    const w = this.wrapper;\r\n    return w ? w.labels : [];\r\n  }\r\n\r\n  get dataLength() {\r\n    const w = this.wrapper;\r\n    return w ? w.dataLength : null;\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    const w = this.wrapper;\r\n    return w ? w.getValue(row) : [];\r\n  }\r\n\r\n  getNumber(row: IDataRow) {\r\n    const w = this.wrapper;\r\n    return w ? w.getNumber(row) : NaN;\r\n  }\r\n\r\n  getRawNumber(row: IDataRow) {\r\n    const w = this.wrapper;\r\n    return w ? w.getRawNumber(row) : NaN;\r\n  }\r\n\r\n  getNumbers(row: IDataRow) {\r\n    const w = this.wrapper;\r\n    return w ? w.getNumbers(row) : [];\r\n  }\r\n\r\n  getRawNumbers(row: IDataRow) {\r\n    const w = this.wrapper;\r\n    return w ? w.getRawNumbers(row) : [];\r\n  }\r\n\r\n  getBoxPlotData(row: IDataRow): IAdvancedBoxPlotData | null {\r\n    const w = this.wrapper;\r\n    return w ? w.getBoxPlotData(row) : null;\r\n  }\r\n\r\n  getRawBoxPlotData(row: IDataRow): IAdvancedBoxPlotData | null {\r\n    const w = this.wrapper;\r\n    return w ? w.getRawBoxPlotData(row) : null;\r\n  }\r\n\r\n  getMapping() {\r\n    const w = this.wrapper;\r\n    return w ? w.getMapping() : new ScaleMappingFunction();\r\n  }\r\n\r\n  getOriginalMapping() {\r\n    const w = this.wrapper;\r\n    return w ? w.getOriginalMapping() : new ScaleMappingFunction();\r\n  }\r\n\r\n  getSortMethod() {\r\n    const w = this.wrapper;\r\n    return w ? w.getSortMethod() : EAdvancedSortMethod.min;\r\n  }\r\n\r\n  setSortMethod(value: EAdvancedSortMethod) {\r\n    const w = this.wrapper;\r\n    return w ? w.setSortMethod(value) : undefined;\r\n  }\r\n\r\n  isMissing(row: IDataRow) {\r\n    const w = this.wrapper;\r\n    return w ? w.isMissing(row) : true;\r\n  }\r\n\r\n  setMapping(mapping: IMappingFunction): void {\r\n    const w = this.wrapper;\r\n    return w ? w.setMapping(mapping) : undefined;\r\n  }\r\n\r\n  getColorMapping() {\r\n    const w = this.wrapper;\r\n    return w ? w.getColorMapping() : DEFAULT_COLOR_FUNCTION;\r\n  }\r\n\r\n  setColorMapping(mapping: IColorMappingFunction) {\r\n    const w = this.wrapper;\r\n    return w ? w.setColorMapping(mapping) : undefined;\r\n  }\r\n\r\n  getFilter() {\r\n    const w = this.wrapper;\r\n    return w ? w.getFilter() : noNumberFilter();\r\n  }\r\n\r\n  setFilter(value?: INumberFilter): void {\r\n    const w = this.wrapper;\r\n    return w ? w.setFilter(value) : undefined;\r\n  }\r\n\r\n  getRange(): [string, string] {\r\n    const w = this.wrapper;\r\n    return w ? w.getRange() : ['0', '1'];\r\n  }\r\n\r\n  getMap(row: IDataRow): IKeyValue<number>[] {\r\n    const w = this.wrapper;\r\n    return w ? w.getMap(row) : [];\r\n  }\r\n\r\n  getMapLabel(row: IDataRow) {\r\n    const w = this.wrapper;\r\n    return w ? w.getMapLabel(row) : [];\r\n  }\r\n\r\n  getLabels(row: IDataRow): string[] {\r\n    const w = this.wrapper;\r\n    return w ? w.getLabels(row) : [];\r\n  }\r\n\r\n  getValues(row: IDataRow) {\r\n    const w = this.wrapper;\r\n    return w ? w.getValues(row) : [];\r\n  }\r\n\r\n  compare(a: IDataRow, b: IDataRow) {\r\n    return NumbersColumn.prototype.compare.call(this, a, b);\r\n  }\r\n\r\n  group(row: IDataRow) {\r\n    return NumbersColumn.prototype.group.call(this, row);\r\n  }\r\n\r\n  groupCompare(a: IGroupData, b: IGroupData) {\r\n    return NumbersColumn.prototype.groupCompare.call(this, a, b);\r\n  }\r\n\r\n  insert(col: Column, index: number): Column | null {\r\n    if (this._children.length === 0 && !isNumbersColumn(col)) {\r\n      return null;\r\n    }\r\n    if (this._children.length >= 2) {\r\n      // limit to two\r\n      return null;\r\n    }\r\n    return super.insert(col, index);\r\n  }\r\n\r\n  protected insertImpl(col: Column, index: number) {\r\n    if (isNumbersColumn(col)) {\r\n      this.forward(col, ...suffix('.impose', NumbersColumn.EVENT_MAPPING_CHANGED));\r\n    }\r\n    if (isMapAbleColumn(col)) {\r\n      this.forward(col, ...suffix('.impose', NumbersColumn.EVENT_COLOR_MAPPING_CHANGED));\r\n    }\r\n    return super.insertImpl(col, index);\r\n  }\r\n\r\n  protected removeImpl(child: Column, index: number) {\r\n    if (isNumbersColumn(child)) {\r\n      this.unforward(child, ...suffix('.impose', NumbersColumn.EVENT_MAPPING_CHANGED));\r\n    }\r\n    if (isMapAbleColumn(child)) {\r\n      this.unforward(child, ...suffix('.impose', NumbersColumn.EVENT_COLOR_MAPPING_CHANGED));\r\n    }\r\n    return super.removeImpl(child, index);\r\n  }\r\n}\r\n","import {round, similar} from '../internal';\r\nimport {toolbar} from './annotations';\r\nimport Column, {IFlatColumn, widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport CompositeColumn, {IMultiLevelColumn, addColumn, filterChanged, moveColumn, removeColumn} from './CompositeColumn';\r\nimport CompositeNumberColumn, {ICompositeNumberDesc} from './CompositeNumberColumn';\r\nimport {IDataRow} from './interfaces';\r\nimport {isNumberColumn} from './INumberColumn';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\n/**\r\n * factory for creating a description creating a stacked column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createStackDesc(label: string = 'Weighted Sum') {\r\n  return {type: 'stack', label};\r\n}\r\n\r\n\r\n/**\r\n * emitted when the collapse property changes\r\n * @asMemberOf StackColumn\r\n * @event\r\n */\r\nexport declare function collapseChanged(previous: boolean, current: boolean): void;\r\n\r\n\r\n/**\r\n * emitted when the weights change\r\n * @asMemberOf StackColumn\r\n * @event\r\n */\r\nexport declare function weightsChanged(previous: number[], current: number[]): void;\r\n\r\n\r\n/**\r\n * emitted when the ratios between the children changes\r\n * @asMemberOf StackColumn\r\n * @event\r\n */\r\nexport declare function nestedChildRatio(previous: number[], current: number[]): void;\r\n\r\n/**\r\n * implementation of the stacked column\r\n */\r\n@toolbar('editWeights', 'collapse')\r\nexport default class StackColumn extends CompositeNumberColumn implements IMultiLevelColumn {\r\n  static readonly EVENT_COLLAPSE_CHANGED = 'collapseChanged';\r\n  static readonly EVENT_WEIGHTS_CHANGED = 'weightsChanged';\r\n  static readonly EVENT_MULTI_LEVEL_CHANGED = 'nestedChildRatio';\r\n\r\n  static readonly COLLAPSED_RENDERER = 'number';\r\n\r\n  private readonly adaptChange: (old: number, newValue: number) => void;\r\n\r\n  /**\r\n   * whether this stack column is collapsed i.e. just looks like an ordinary number column\r\n   * @type {boolean}\r\n   * @private\r\n   */\r\n  private collapsed = false;\r\n\r\n  constructor(id: string, desc: ICompositeNumberDesc) {\r\n    super(id, desc);\r\n\r\n    const that = this;\r\n    this.adaptChange = function (this: {source: Column}, oldValue, newValue) {\r\n      that.adaptWidthChange(this.source, oldValue, newValue);\r\n    };\r\n\r\n    this.setDefaultRenderer('stack');\r\n    this.setDefaultGroupRenderer('stack');\r\n    this.setDefaultSummaryRenderer('default');\r\n  }\r\n\r\n  get label() {\r\n    const l = super.getMetaData().label;\r\n    const c = this._children;\r\n    if (l !== 'Weighted Sum' || c.length === 0) {\r\n      return l;\r\n    }\r\n    const weights = this.getWeights();\r\n    return c.map((c, i) => `${c.label} (${round(100 * weights[i], 1)})%`).join(' + ');\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([StackColumn.EVENT_COLLAPSE_CHANGED, StackColumn.EVENT_WEIGHTS_CHANGED, StackColumn.EVENT_MULTI_LEVEL_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof StackColumn.EVENT_COLLAPSE_CHANGED, listener: typeof collapseChanged | null): this;\r\n  on(type: typeof StackColumn.EVENT_WEIGHTS_CHANGED, listener: typeof weightsChanged | null): this;\r\n  on(type: typeof StackColumn.EVENT_MULTI_LEVEL_CHANGED, listener: typeof nestedChildRatio | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(type, listener);\r\n  }\r\n\r\n  setCollapsed(value: boolean) {\r\n    if (this.collapsed === value) {\r\n      return;\r\n    }\r\n    this.fire([StackColumn.EVENT_COLLAPSE_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.collapsed, this.collapsed = value);\r\n  }\r\n\r\n  getCollapsed() {\r\n    return this.collapsed;\r\n  }\r\n\r\n  get canJustAddNumbers() {\r\n    return true;\r\n  }\r\n\r\n  flatten(r: IFlatColumn[], offset: number, levelsToGo = 0, padding = 0) {\r\n    let self = null;\r\n    const children = levelsToGo <= Column.FLAT_ALL_COLUMNS ? this._children : this._children.filter((c) => c.isVisible());\r\n    //no more levels or just this one\r\n    if (levelsToGo === 0 || levelsToGo <= Column.FLAT_ALL_COLUMNS) {\r\n      let w = this.getWidth();\r\n      if (!this.collapsed) {\r\n        w += (children.length - 1) * padding;\r\n      }\r\n      r.push(self = {col: this, offset, width: w});\r\n      if (levelsToGo === 0) {\r\n        return w;\r\n      }\r\n    }\r\n    //push children\r\n    let acc = offset;\r\n    children.forEach((c) => {\r\n      acc += c.flatten(r, acc, levelsToGo - 1, padding) + padding;\r\n    });\r\n    if (self) { //nesting my even increase my width\r\n      self.width = acc - offset - padding;\r\n    }\r\n    return acc - offset - padding;\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any) {\r\n    const r = super.dump(toDescRef);\r\n    r.collapsed = this.collapsed;\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    this.collapsed = dump.collapsed === true;\r\n    super.restore(dump, factory);\r\n  }\r\n\r\n  /**\r\n   * inserts a column at a the given position\r\n   */\r\n  insert(col: Column, index: number, weight = NaN) {\r\n    if (!isNaN(weight)) {\r\n      col.setWidth((weight / (1 - weight) * this.getWidth()));\r\n    }\r\n    col.on(`${Column.EVENT_WIDTH_CHANGED}.stack`, this.adaptChange);\r\n    //increase my width\r\n    super.setWidth(this.length === 0 ? col.getWidth() : (this.getWidth() + col.getWidth()));\r\n\r\n    return super.insert(col, index);\r\n  }\r\n\r\n  push(col: Column, weight = NaN) {\r\n    return this.insert(col, this.length, weight);\r\n  }\r\n\r\n  insertAfter(col: Column, ref: Column, weight = NaN) {\r\n    const i = this.indexOf(ref);\r\n    if (i < 0) {\r\n      return null;\r\n    }\r\n    return this.insert(col, i + 1, weight);\r\n  }\r\n\r\n  /**\r\n   * adapts weights according to an own width change\r\n   * @param col\r\n   * @param oldValue\r\n   * @param newValue\r\n   */\r\n  private adaptWidthChange(col: Column, oldValue: number, newValue: number) {\r\n    if (similar(oldValue, newValue, 0.5)) {\r\n      return;\r\n    }\r\n    const bak = this.getWeights();\r\n    const full = this.getWidth(),\r\n      change = (newValue - oldValue) / full;\r\n    const oldWeight = oldValue / full;\r\n    const factor = (1 - oldWeight - change) / (1 - oldWeight);\r\n    const widths = this._children.map((c) => {\r\n      if (c === col) {\r\n        //c.weight += change;\r\n        return newValue;\r\n      }\r\n      const guess = c.getWidth() * factor;\r\n      const w = isNaN(guess) || guess < 1 ? 0 : guess;\r\n      c.setWidthImpl(w);\r\n      return w;\r\n    });\r\n    //adapt width if needed\r\n    super.setWidth(widths.reduce((a, b) => a + b, 0));\r\n\r\n    this.fire([StackColumn.EVENT_WEIGHTS_CHANGED, StackColumn.EVENT_MULTI_LEVEL_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, this.getWeights());\r\n  }\r\n\r\n  getWeights() {\r\n    const w = this.getWidth();\r\n    return this._children.map((d) => d.getWidth() / w);\r\n  }\r\n\r\n  setWeights(weights: number[]) {\r\n    const bak = this.getWeights();\r\n    const delta = weights.length - this.length;\r\n    let s: number;\r\n    if (delta < 0) {\r\n      s = weights.reduce((p, a) => p + a, 0);\r\n      if (s <= 1) {\r\n        for (let i = 0; i < -delta; ++i) {\r\n          weights.push((1 - s) * (1 / -delta));\r\n        }\r\n      } else if (s <= 100) {\r\n        for (let i = 0; i < -delta; ++i) {\r\n          weights.push((100 - s) * (1 / -delta));\r\n        }\r\n      }\r\n    }\r\n    weights = weights.slice(0, this.length);\r\n    s = weights.reduce((p, a) => p + a, 0) / this.getWidth();\r\n    weights = weights.map((d) => d / s);\r\n\r\n    this._children.forEach((c, i) => {\r\n      c.setWidthImpl(weights[i]);\r\n    });\r\n    this.fire([StackColumn.EVENT_WEIGHTS_CHANGED, StackColumn.EVENT_MULTI_LEVEL_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, weights);\r\n\r\n  }\r\n\r\n  removeImpl(child: Column, index: number) {\r\n    child.on(`${Column.EVENT_WIDTH_CHANGED}.stack`, null);\r\n    super.setWidth(this.length === 0 ? 100 : this.getWidth() - child.getWidth());\r\n    return super.removeImpl(child, index);\r\n  }\r\n\r\n  setWidth(value: number) {\r\n    const factor = value / this.getWidth();\r\n    this._children.forEach((child) => {\r\n      //disable since we change it\r\n      child.setWidthImpl(child.getWidth() * factor);\r\n    });\r\n    super.setWidth(value);\r\n  }\r\n\r\n  protected compute(row: IDataRow) {\r\n    const w = this.getWidth();\r\n    return this._children.reduce((acc, d) => acc + d.getValue(row) * (d.getWidth() / w), 0);\r\n  }\r\n\r\n  getRenderer() {\r\n    if (this.getCollapsed() && this.isLoaded()) {\r\n      return StackColumn.COLLAPSED_RENDERER;\r\n    }\r\n    return super.getRenderer();\r\n  }\r\n\r\n  isMissing(row: IDataRow) {\r\n    return this._children.some((c) => isNumberColumn(c) && c.isMissing(row));\r\n  }\r\n}\r\n","import {extent} from 'd3-array';\r\nimport {isNumberColumn, isSupportType} from '../model';\r\nimport {default as Column, IColumnDesc} from '../model/Column';\r\nimport {colorPool} from '../model/internal';\r\nimport Ranking from '../model/Ranking';\r\n\r\n\r\nexport interface IDeriveOptions {\r\n  /**\r\n   * maximal percentage of unique values to be treated as a categorical column\r\n   */\r\n  categoricalThreshold: number;\r\n\r\n  columns: string[];\r\n}\r\n\r\nfunction deriveType(label: string, value: any, column: number | string, data: any[], options: IDeriveOptions): IColumnDesc {\r\n  const base: any = {\r\n    type: 'string',\r\n    label,\r\n    column,\r\n  };\r\n  if (typeof value === 'number') {\r\n    base.type = 'number';\r\n    base.domain = extent(data, (d) => d[column]);\r\n    return base;\r\n  }\r\n  if (value && value instanceof Date) {\r\n    base.type = 'date';\r\n    return base;\r\n  }\r\n  if (typeof value === 'boolean') {\r\n    base.type = 'boolean';\r\n    return base;\r\n  }\r\n  if (typeof value === 'string') {\r\n    //maybe a categorical\r\n    const categories = new Set(data.map((d) => d[column]));\r\n    if (categories.size < data.length * options.categoricalThreshold) { // 70% unique guess categorical\r\n      base.type = 'categorical';\r\n      base.categories = Array.from(categories).sort();\r\n    }\r\n    return base;\r\n  }\r\n  if (Array.isArray(value)) {\r\n    base.type = 'strings';\r\n    const vs = value[0];\r\n    if (typeof vs === 'number') {\r\n      base.type = 'numbers';\r\n      base.domain = extent((<number[]>[]).concat(...data.map((d) => d[column])));\r\n      return base;\r\n    }\r\n    if (vs && value instanceof Date) {\r\n      base.type = 'dates';\r\n      return base;\r\n    }\r\n    if (typeof value === 'boolean') {\r\n      base.type = 'booleans';\r\n      return base;\r\n    }\r\n    if (typeof value === 'string') {\r\n      //maybe a categorical\r\n      const categories = new Set((<string[]>[]).concat(...data.map((d) => d[column])));\r\n      if (categories.size < data.length * options.categoricalThreshold) { // 70% unique guess categorical\r\n        base.type = 'categoricals';\r\n        base.categories = Array.from(categories).sort();\r\n      }\r\n      return base;\r\n    }\r\n  }\r\n  console.log('cannot infer type of column:', column);\r\n  //unknown type\r\n  return base;\r\n}\r\n\r\nexport function deriveColumnDescriptions(data: any[], options: Partial<IDeriveOptions> = {}) {\r\n  const config = Object.assign({\r\n    categoricalThreshold: 0.7,\r\n    columns: []\r\n  }, options);\r\n  const r: IColumnDesc[] = [];\r\n  if (data.length === 0) {\r\n    // no data to derive something from\r\n    return r;\r\n  }\r\n  const first = data[0];\r\n  if (Array.isArray(first)) {\r\n    //array of arrays\r\n    return first.map((v, i) => deriveType(`Col${i}`, v, i, data, config));\r\n  }\r\n  //objects\r\n  const columns = config.columns.length > 0 ? config.columns : Object.keys(first);\r\n  return columns.map((key) => deriveType(key, first[key], key, data, config));\r\n}\r\n\r\n\r\n/**\r\n * assigns colors to columns if they are numbers and not yet defined\r\n * @param columns\r\n * @returns {IColumnDesc[]}\r\n */\r\nexport function deriveColors(columns: IColumnDesc[]) {\r\n  const colors = colorPool();\r\n  columns.forEach((col: any) => {\r\n    switch (col.type) {\r\n      case 'number':\r\n        col.color = colors() || Column.DEFAULT_COLOR;\r\n        break;\r\n    }\r\n  });\r\n  return columns;\r\n}\r\n\r\n\r\nexport interface IExportOptions {\r\n  /**\r\n   * export separator, default: '\\t'\r\n   */\r\n  separator: string;\r\n  /**\r\n   * new line character, default: '\\n'\r\n   */\r\n  newline: string;\r\n  /**\r\n   * should a header be generated, default: true\r\n   */\r\n  header: boolean;\r\n  /**\r\n   * quote strings, default: false\r\n   */\r\n  quote: boolean;\r\n  /**\r\n   * quote string to use, default: '\"'\r\n   */\r\n  quoteChar: string;\r\n  /**\r\n   * filter specific column types, default: exclude all support types (selection, action, rank)\r\n   * @param col the column description to filter\r\n   */\r\n  filter: (col: Column) => boolean; //!isSupportType\r\n\r\n  /**\r\n   * whether the description should be part of the column header\r\n   */\r\n  verboseColumnHeaders: boolean;\r\n}\r\n\r\n/**\r\n * utility to export a ranking to a table with the given separator\r\n * @param ranking\r\n * @param data\r\n * @param options\r\n * @returns {Promise<string>}\r\n */\r\nexport function exportRanking(ranking: Ranking, data: any[], options: Partial<IExportOptions> = {}) {\r\n  const opts = <IExportOptions>Object.assign({\r\n    separator: '\\t',\r\n    newline: '\\n',\r\n    header: true,\r\n    quote: false,\r\n    quoteChar: '\"',\r\n    filter: (c: Column) => !isSupportType(c),\r\n    verboseColumnHeaders: false\r\n  }, options);\r\n\r\n  //optionally quote not numbers\r\n  const escape = new RegExp(`[${opts.quoteChar}]`, 'g');\r\n\r\n  function quote(l: string, c?: Column) {\r\n    if ((opts.quote || l.indexOf('\\n') >= 0) && (!c || !isNumberColumn(c))) {\r\n      return `${opts.quoteChar}${l.replace(escape, opts.quoteChar + opts.quoteChar)}${opts.quoteChar}`;\r\n    }\r\n    return l;\r\n  }\r\n\r\n  const columns = ranking.flatColumns.filter((c) => opts.filter(c));\r\n  const order = ranking.getOrder();\r\n\r\n  const r: string[] = [];\r\n  if (opts.header) {\r\n    r.push(columns.map((d) => quote(`${d.label}${opts.verboseColumnHeaders && d.description ? `\\n${d.description}` : ''}`)).join(opts.separator));\r\n  }\r\n  data.forEach((row, i) => {\r\n    r.push(columns.map((c) => quote(c.getLabel({v: row, i: order[i]}), c)).join(opts.separator));\r\n  });\r\n  return r.join(opts.newline);\r\n}\r\n","import {IGroup} from './interfaces';\r\n\r\n\r\nexport interface IOrderedGroup extends IGroup {\r\n  order: number[];\r\n}\r\n\r\nexport const defaultGroup: IGroup = {\r\n  name: 'Default',\r\n  color: 'gray'\r\n};\r\n","import {extent} from 'd3-array';\r\nimport {equalArrays} from '../internal';\r\nimport {Category, toolbar} from './annotations';\r\nimport CategoricalColumn from './CategoricalColumn';\r\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport {\r\n  ICategoricalColumn, ICategoricalDesc, ICategoricalFilter, ICategory, toCategories,\r\n  toCategory\r\n} from './ICategoricalColumn';\r\nimport {IDataRow} from './interfaces';\r\nimport NumberColumn, {INumberColumn} from './NumberColumn';\r\nimport ValueColumn, {IValueColumnDesc, dataLoaded} from './ValueColumn';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\nexport declare type ICategoricalNumberColumnDesc = ICategoricalDesc & IValueColumnDesc<number>;\r\n\r\n/**\r\n * emitted when the mapping property changes\r\n * @asMemberOf OrdinalColumn\r\n * @event\r\n */\r\nexport declare function mappingChanged(previous: number[], current: number[]): void;\r\n\r\n/**\r\n * similar to a categorical column but the categories are mapped to numbers\r\n */\r\n@toolbar('group', 'filterOrdinal')\r\n@Category('categorical')\r\nexport default class OrdinalColumn extends ValueColumn<number> implements INumberColumn, ICategoricalColumn {\r\n  static readonly EVENT_MAPPING_CHANGED = NumberColumn.EVENT_MAPPING_CHANGED;\r\n\r\n  readonly categories: ICategory[];\r\n\r\n  private missingCategory: ICategory | null;\r\n\r\n  private readonly lookup = new Map<string, Readonly<ICategory>>();\r\n\r\n  private currentFilter: ICategoricalFilter | null = null;\r\n\r\n\r\n  constructor(id: string, desc: Readonly<ICategoricalNumberColumnDesc>) {\r\n    super(id, desc);\r\n    this.categories = toCategories(desc);\r\n    this.missingCategory = desc.missingCategory ? toCategory(desc.missingCategory, NaN) : null;\r\n    this.categories.forEach((d) => this.lookup.set(d.name, d));\r\n    this.setDefaultRenderer('number');\r\n    this.setDefaultGroupRenderer('boxplot');\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([OrdinalColumn.EVENT_MAPPING_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof OrdinalColumn.EVENT_MAPPING_CHANGED, listener: typeof mappingChanged | null): this;\r\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(<any>type, listener);\r\n  }\r\n\r\n  get dataLength() {\r\n    return this.categories.length;\r\n  }\r\n\r\n  get labels() {\r\n    return this.categories.map((d) => d.label);\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    const v = this.getCategory(row);\r\n    return v ? v.value : NaN;\r\n  }\r\n\r\n  getCategory(row: IDataRow) {\r\n    const v = super.getValue(row);\r\n    if (!v) {\r\n      return this.missingCategory;\r\n    }\r\n    const vs = String(v);\r\n    return this.lookup.has(vs) ? this.lookup.get(vs)! : this.missingCategory;\r\n  }\r\n\r\n  getColor(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getColor.call(this, row);\r\n  }\r\n\r\n  getLabel(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getLabel.call(this, row);\r\n  }\r\n\r\n  getLabels(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getLabels.call(this, row);\r\n  }\r\n\r\n  getValues(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getValues.call(this, row);\r\n  }\r\n\r\n  getMap(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getMap.call(this, row);\r\n  }\r\n\r\n  getMapLabel(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getMapLabel.call(this, row);\r\n  }\r\n\r\n  getSet(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getSet.call(this, row);\r\n  }\r\n\r\n  getNumber(row: IDataRow) {\r\n    return this.getValue(row);\r\n  }\r\n\r\n  isMissing(row: IDataRow) {\r\n    return CategoricalColumn.prototype.isMissing.call(this, row);\r\n  }\r\n\r\n  getRawNumber(row: IDataRow) {\r\n    return this.getNumber(row);\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any): any {\r\n    const r = CategoricalColumn.prototype.dump.call(this, toDescRef);\r\n    r.mapping = this.getMapping();\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    CategoricalColumn.prototype.restore.call(this, dump, factory);\r\n    if (dump.mapping) {\r\n      this.setMapping(dump.mapping);\r\n    }\r\n  }\r\n\r\n  getMapping() {\r\n    return this.categories.map((d) => d.value);\r\n  }\r\n\r\n  setMapping(mapping: number[]) {\r\n    const r = extent(mapping);\r\n    mapping = mapping.map((d) => (d - r[0]!) / (r[1]! - r[0]!));\r\n    const bak = this.getMapping();\r\n    if (equalArrays(bak, mapping)) {\r\n      return;\r\n    }\r\n    this.categories.forEach((d, i) => d.value = mapping[i] || 0);\r\n    this.fire([OrdinalColumn.EVENT_MAPPING_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], bak, this.getMapping());\r\n  }\r\n\r\n  isFiltered() {\r\n    return this.currentFilter != null;\r\n  }\r\n\r\n  filter(row: IDataRow): boolean {\r\n    return CategoricalColumn.prototype.filter.call(this, row);\r\n  }\r\n\r\n  group(row: IDataRow) {\r\n    return CategoricalColumn.prototype.group.call(this, row);\r\n  }\r\n\r\n  getFilter() {\r\n    return this.currentFilter;\r\n  }\r\n\r\n  setFilter(filter: ICategoricalFilter | null) {\r\n    return CategoricalColumn.prototype.setFilter.call(this, filter);\r\n  }\r\n\r\n  compare(a: IDataRow, b: IDataRow) {\r\n    return CategoricalColumn.prototype.compare.call(this, a, b);\r\n  }\r\n\r\n  getRenderer(): string {\r\n    return NumberColumn.prototype.getRenderer.call(this);\r\n  }\r\n}\r\n","import {median, quantile} from 'd3-array';\r\nimport {toolbar} from './annotations';\r\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport CompositeColumn, {addColumn, filterChanged, moveColumn, removeColumn} from './CompositeColumn';\r\nimport CompositeNumberColumn, {ICompositeNumberColumnDesc} from './CompositeNumberColumn';\r\nimport {IDataRow} from './interfaces';\r\nimport {EAdvancedSortMethod} from './INumberColumn';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\n/**\r\n *  factory for creating a description creating a max column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createReduceDesc(label: string = 'Reduce') {\r\n  return {type: 'reduce', label};\r\n}\r\n\r\nexport interface IReduceDesc {\r\n  readonly reduce?: EAdvancedSortMethod;\r\n}\r\n\r\n\r\nexport declare type IReduceColumnDesc = IReduceDesc & ICompositeNumberColumnDesc;\r\n\r\n/**\r\n * emitted when the mapping property changes\r\n * @asMemberOf ReduceColumn\r\n * @event\r\n */\r\nexport declare function reduceChanged(previous: EAdvancedSortMethod, current: EAdvancedSortMethod): void;\r\n\r\n/**\r\n * combines multiple columns by using the maximal value\r\n */\r\n@toolbar('reduce')\r\nexport default class ReduceColumn extends CompositeNumberColumn {\r\n  static readonly EVENT_REDUCE_CHANGED = 'reduceChanged';\r\n\r\n  private reduce: EAdvancedSortMethod;\r\n\r\n  constructor(id: string, desc: Readonly<IReduceColumnDesc>) {\r\n    super(id, desc);\r\n    this.reduce = desc.reduce || EAdvancedSortMethod.max;\r\n    this.setDefaultRenderer('interleaving');\r\n    this.setDefaultGroupRenderer('interleaving');\r\n    this.setDefaultSummaryRenderer('interleaving');\r\n  }\r\n\r\n  get label() {\r\n    const l = super.getMetaData().label;\r\n    if (l !== 'Reduce') {\r\n      return l;\r\n    }\r\n    return `${this.reduce[0].toUpperCase()}${this.reduce.slice(1)}(${this.children.map((d) => d.label).join(', ')})`;\r\n  }\r\n\r\n  getColor(row: IDataRow) {\r\n    //compute the index of the maximal one\r\n    const c = this._children;\r\n    if (c.length === 0 || this.reduce === EAdvancedSortMethod.q1 || this.reduce === EAdvancedSortMethod.q3 || this.reduce === EAdvancedSortMethod.mean) {\r\n      return this.color;\r\n    }\r\n    const v = this.compute(row);\r\n    const selected = c.find((c) => c.getValue(row) === v);\r\n    return selected ? selected.color : this.color;\r\n  }\r\n\r\n  protected compute(row: IDataRow) {\r\n    const vs = this._children.map((d) => d.getValue(row)).filter((d) => !isNaN(d));\r\n    if (vs.length === 0) {\r\n      return NaN;\r\n    }\r\n    switch (this.reduce) {\r\n      case EAdvancedSortMethod.mean:\r\n        return vs.reduce((a, b) => a + b, 0) / vs.length;\r\n      case EAdvancedSortMethod.max:\r\n        return Math.max(...vs);\r\n      case EAdvancedSortMethod.min:\r\n        return Math.min(...vs);\r\n      case EAdvancedSortMethod.median:\r\n        return median(vs)!;\r\n      case EAdvancedSortMethod.q1:\r\n        return quantile(vs.sort((a, b) => a - b), 0.25)!;\r\n      case EAdvancedSortMethod.q3:\r\n        return quantile(vs.sort((a, b) => a - b), 0.75)!;\r\n    }\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([ReduceColumn.EVENT_REDUCE_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof ReduceColumn.EVENT_REDUCE_CHANGED, listener: typeof reduceChanged | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(type, listener);\r\n  }\r\n\r\n  getReduce() {\r\n    return this.reduce;\r\n  }\r\n\r\n  setReduce(reduce: EAdvancedSortMethod) {\r\n    if (this.reduce === reduce) {\r\n      return;\r\n    }\r\n    this.fire([ReduceColumn.EVENT_REDUCE_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.reduce, this.reduce = reduce);\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any) {\r\n    const r = super.dump(toDescRef);\r\n    r.reduce = this.reduce;\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    this.reduce = dump.reduce || this.reduce;\r\n    super.restore(dump, factory);\r\n  }\r\n\r\n  get canJustAddNumbers() {\r\n    return true;\r\n  }\r\n}\r\n","import {toolbar} from './annotations';\r\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport CompositeColumn, {addColumn, filterChanged, moveColumn, removeColumn} from './CompositeColumn';\r\nimport CompositeNumberColumn, {ICompositeNumberDesc} from './CompositeNumberColumn';\r\nimport {IDataRow} from './interfaces';\r\nimport {isNumberColumn} from './INumberColumn';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\nconst DEFAULT_SCRIPT = `let s = 0;\r\ncol.forEach((c) => s += c.v);\r\nreturn s / col.length`;\r\n\r\n/**\r\n * factory for creating a description creating a mean column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createScriptDesc(label: string = 'script') {\r\n  return {type: 'script', label, script: DEFAULT_SCRIPT};\r\n}\r\n\r\n\r\nfunction wrapWithContext(code: string) {\r\n  let clean = code.trim();\r\n  if (!clean.includes('return')) {\r\n    clean = `return (${clean});`;\r\n  }\r\n  return `\r\n  const max = function(arr) { return Math.max.apply(Math, arr); };\r\n  const min = function(arr) { return Math.min.apply(Math, arr); };\r\n  const extent = function(arr) { return [min(arr), max(arr)]; };\r\n  const clamp = function(v, minValue, maxValue) { return v < minValue ? minValue : (v > maxValue ? maxValue : v); };\r\n  const normalize = function(v, minMax, max) {\r\n    if (Array.isArray(minMax)) {\r\n      minMax = minMax[0];\r\n      max = minMax[1];\r\n    }\r\n    return (v - minMax) / (max - minMax);\r\n  };\r\n  const denormalize = function(v, minMax, max) {\r\n    if (Array.isArray(minMax)) {\r\n      minMax = minMax[0];\r\n      max = minMax[1];\r\n    }\r\n    return v * (max - minMax) + minMax;\r\n  };\r\n  const linear = function(v, source, target) {\r\n    target = target || [0, 1];\r\n    return denormalize(normalize(v, source), target);\r\n  };\r\n  const v = (function custom() {\r\n    ${clean}\r\n  })();\r\n\r\n  return typeof v === 'number' ? v : NaN`;\r\n}\r\n\r\n\r\n/**\r\n * wrapper class for simpler column accessing\r\n */\r\nclass ColumnWrapper {\r\n  constructor(private readonly c: Column, public readonly v: any, public readonly raw: number | null) {\r\n\r\n  }\r\n\r\n  get type() {\r\n    return this.c.desc.type;\r\n  }\r\n\r\n  get name() {\r\n    return this.c.getMetaData().label;\r\n  }\r\n\r\n  get id() {\r\n    return this.c.id;\r\n  }\r\n}\r\n\r\n/**\r\n * helper context for accessing columns within a scripted columns\r\n */\r\nclass ColumnContext {\r\n  private readonly lookup = new Map<string, ColumnWrapper>();\r\n  private _all: ColumnContext | null = null;\r\n\r\n  constructor(private readonly children: ColumnWrapper[], private readonly allFactory?: () => ColumnContext) {\r\n    children.forEach((c) => {\r\n      this.lookup.set(`ID@${c.id}`, c);\r\n      this.lookup.set(`NAME@${c.name}`, c);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * get a column by name\r\n   * @param {string} name\r\n   * @return {ColumnWrapper}\r\n   */\r\n  byName(name: string) {\r\n    return this.lookup.get(`NAME@${name}`);\r\n  }\r\n\r\n  /**\r\n   * get a column by id\r\n   * @param {string} id\r\n   * @return {ColumnWrapper}\r\n   */\r\n  byID(id: string) {\r\n    return this.lookup.get(`ID@${id}`);\r\n  }\r\n\r\n  /**\r\n   * get a column by index\r\n   * @param {number} index\r\n   * @return {ColumnWrapper}\r\n   */\r\n  byIndex(index: number) {\r\n    return this.children[index];\r\n  }\r\n\r\n  forEach(callback: ((c: ColumnWrapper, index: number) => void)) {\r\n    return this.children.forEach(callback);\r\n  }\r\n\r\n  /**\r\n   * number of columns\r\n   * @return {number}\r\n   */\r\n  get length() {\r\n    return this.children.length;\r\n  }\r\n\r\n  /**\r\n   * get the all context, i.e one with all columns of this ranking\r\n   * @return {ColumnContext}\r\n   */\r\n  get all() {\r\n    if (this._all == null) {\r\n      this._all = this.allFactory ? this.allFactory() : null;\r\n    }\r\n    return this._all!;\r\n  }\r\n}\r\n\r\n\r\nexport interface IScriptDesc extends ICompositeNumberDesc {\r\n  /**\r\n   * the function to use, it has two parameters: children (current children) and values (their row values)\r\n   * @default 'return Math.max.apply(Math,values)'\r\n   */\r\n  script?: string;\r\n}\r\n\r\nexport declare type IScriptColumnDesc = IScriptDesc & ICompositeNumberDesc;\r\n\r\n/**\r\n * emitted when the script property changes\r\n * @asMemberOf ScriptColumn\r\n * @event\r\n */\r\nexport declare function scriptChanged(previous: string, current: string): void;\r\n\r\n\r\n@toolbar('script')\r\nexport default class ScriptColumn extends CompositeNumberColumn {\r\n  static readonly EVENT_SCRIPT_CHANGED = 'scriptChanged';\r\n  static readonly DEFAULT_SCRIPT = DEFAULT_SCRIPT;\r\n\r\n  private script = ScriptColumn.DEFAULT_SCRIPT;\r\n  private f: Function | null = null;\r\n\r\n  constructor(id: string, desc: Readonly<IScriptColumnDesc>) {\r\n    super(id, desc);\r\n    this.script = desc.script || this.script;\r\n\r\n    this.setDefaultRenderer('number');\r\n    this.setDefaultGroupRenderer('number');\r\n    this.setDefaultSummaryRenderer('number');\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([ScriptColumn.EVENT_SCRIPT_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof ScriptColumn.EVENT_SCRIPT_CHANGED, listener: typeof scriptChanged | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(type, listener);\r\n  }\r\n\r\n  setScript(script: string) {\r\n    if (this.script === script) {\r\n      return;\r\n    }\r\n    this.f = null;\r\n    this.fire([ScriptColumn.EVENT_SCRIPT_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.script, this.script = script);\r\n  }\r\n\r\n  getScript() {\r\n    return this.script;\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any) {\r\n    const r = super.dump(toDescRef);\r\n    r.script = this.script;\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    this.script = dump.script || this.script;\r\n    super.restore(dump, factory);\r\n  }\r\n\r\n  protected compute(row: IDataRow) {\r\n    if (this.f == null) {\r\n      this.f = new Function('children', 'values', 'raws', 'col', 'row', 'index', wrapWithContext(this.script));\r\n    }\r\n    const children = this._children;\r\n    const values = this._children.map((d) => d.getValue(row));\r\n    const raws = <number[]>this._children.map((d) => isNumberColumn(d) ? d.getRawNumber(row) : null);\r\n    const col = new ColumnContext(children.map((c, i) => new ColumnWrapper(c, values[i], raws[i])), () => {\r\n      const cols = this.findMyRanker()!.flatColumns;\r\n      return new ColumnContext(cols.map((c) => new ColumnWrapper(c, c.getValue(row), isNumberColumn(c) ? c.getRawNumber(row) : null)));\r\n    });\r\n    return this.f.call(this, children, values, raws, col, row.v, row.i);\r\n  }\r\n}\r\n","import {Category, SupportType, toolbar} from './annotations';\r\nimport {IDataRow, IGroup} from './interfaces';\r\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport ValueColumn, {IValueColumnDesc, dataLoaded} from './ValueColumn';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\n/**\r\n * factory for creating a description creating a rank column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createSelectionDesc(label: string = 'Selection Checkboxes') {\r\n  return {type: 'selection', label, fixed: true};\r\n}\r\n\r\nexport interface ISelectionColumnDesc extends IValueColumnDesc<boolean> {\r\n  /**\r\n   * setter for selecting/deselecting the given row\r\n   */\r\n  setter(row: IDataRow, value: boolean): void;\r\n\r\n  /**\r\n   * setter for selecting/deselecting the given row\r\n   */\r\n  setterAll(rows: IDataRow[], value: boolean): void;\r\n}\r\n\r\n\r\n/**\r\n * emitted when rows are selected\r\n * @asMemberOf SelectionColumn\r\n * @param row the (de)seleced row\r\n * @param value true if selected else false\r\n * @param rows in case of multiple rows are selected\r\n * @event\r\n */\r\nexport declare function select(row: IDataRow, value: boolean, rows?: IDataRow[]): void;\r\n\r\n/**\r\n * a checkbox column for selections\r\n */\r\n@SupportType()\r\n@toolbar('sort', 'sortBy', 'group', 'groupBy', 'invertSelection')\r\n@Category('support')\r\nexport default class SelectionColumn extends ValueColumn<boolean> {\r\n  private static SELECTED_GROUP: IGroup = {\r\n    name: 'Selected',\r\n    color: 'orange'\r\n  };\r\n  private static NOT_SELECTED_GROUP: IGroup = {\r\n    name: 'Unselected',\r\n    color: 'gray'\r\n  };\r\n  static readonly EVENT_SELECT = 'select';\r\n\r\n  constructor(id: string, desc: Readonly<ISelectionColumnDesc>) {\r\n    super(id, desc);\r\n    this.setDefaultWidth(20);\r\n  }\r\n\r\n  get frozen() {\r\n    return this.desc.frozen !== false;\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([SelectionColumn.EVENT_SELECT]);\r\n  }\r\n\r\n  on(type: typeof SelectionColumn.EVENT_SELECT, listener: typeof select | null): this;\r\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(<any>type, listener);\r\n  }\r\n\r\n  setValue(row: IDataRow, value: boolean) {\r\n    const old = this.getValue(row);\r\n    if (old === value) {\r\n      return true;\r\n    }\r\n    return this.setImpl(row, value);\r\n  }\r\n\r\n  setValues(rows: IDataRow[], value: boolean) {\r\n    if (rows.length === 0) {\r\n      return;\r\n    }\r\n    if ((<ISelectionColumnDesc>this.desc).setterAll) {\r\n      (<ISelectionColumnDesc>this.desc).setterAll(rows, value);\r\n    }\r\n    this.fire(SelectionColumn.EVENT_SELECT, rows[0], value, rows);\r\n    return true;\r\n  }\r\n\r\n  private setImpl(row: IDataRow, value: boolean) {\r\n    if ((<ISelectionColumnDesc>this.desc).setter) {\r\n      (<ISelectionColumnDesc>this.desc).setter(row, value);\r\n    }\r\n    this.fire(SelectionColumn.EVENT_SELECT, row, value);\r\n    return true;\r\n  }\r\n\r\n  toggleValue(row: IDataRow) {\r\n    const old = this.getValue(row);\r\n    this.setImpl(row, !old);\r\n    return !old;\r\n  }\r\n\r\n  compare(a: IDataRow, b: IDataRow) {\r\n    const va = this.getValue(a) === true;\r\n    const vb = this.getValue(b) === true;\r\n    return va === vb ? 0 : (va < vb ? -1 : +1);\r\n  }\r\n\r\n  group(row: IDataRow) {\r\n    const isSelected = this.getValue(row);\r\n    return isSelected ? SelectionColumn.SELECTED_GROUP : SelectionColumn.NOT_SELECTED_GROUP;\r\n  }\r\n}\r\n","import {computeHist, computeStats} from '../internal';\r\nimport Column, {\r\n  defaultGroup, ICategoricalColumn, IColumnDesc, IDataRow, IGroup, IGroupData, INumberColumn,\r\n  IOrderedGroup,\r\n  NumberColumn\r\n} from '../model';\r\nimport Ranking from '../model/Ranking';\r\nimport ACommonDataProvider from './ACommonDataProvider';\r\nimport {IDataProviderOptions, IStatsBuilder} from './ADataProvider';\r\n\r\n\r\nexport interface ILocalDataProviderOptions {\r\n  /**\r\n   * whether the filter should be applied to all rankings regardless where they are\r\n   * default: false\r\n   */\r\n  filterGlobally: boolean;\r\n  /**\r\n   * jump to search results such that they are visible\r\n   * default: false\r\n   */\r\n  jumpToSearchResult: boolean;\r\n\r\n  /**\r\n   * the maximum number of nested sorting criteria\r\n   */\r\n  maxNestedSortingCriteria: number;\r\n  maxGroupColumns: number;\r\n}\r\n\r\n/**\r\n * a data provider based on an local array\r\n */\r\nexport default class LocalDataProvider extends ACommonDataProvider {\r\n  private options: ILocalDataProviderOptions = {\r\n    /**\r\n     * whether the filter should be applied to all rankings regardless where they are\r\n     */\r\n    filterGlobally: false,\r\n\r\n    jumpToSearchResult: false,\r\n\r\n    maxNestedSortingCriteria: Infinity,\r\n    maxGroupColumns: Infinity\r\n  };\r\n\r\n  private readonly reorderAll: () => void;\r\n\r\n  private _dataRows: IDataRow[];\r\n  private filter: ((row: IDataRow) => boolean) | null = null;\r\n\r\n  constructor(private _data: any[], columns: IColumnDesc[] = [], options: Partial<ILocalDataProviderOptions & IDataProviderOptions> = {}) {\r\n    super(columns, options);\r\n    Object.assign(this.options, options);\r\n    this._dataRows = toRows(_data);\r\n\r\n\r\n    const that = this;\r\n    this.reorderAll = function (this: {source: Ranking}) {\r\n      //fire for all other rankings a dirty order event, too\r\n      const ranking = this.source;\r\n      that.getRankings().forEach((r) => {\r\n        if (r !== ranking) {\r\n          r.dirtyOrder();\r\n        }\r\n      });\r\n    };\r\n  }\r\n\r\n  /**\r\n   * set a globally applied filter to all data without changing the data source itself\r\n   * @param {((row: IDataRow) => boolean) | null} filter\r\n   */\r\n  setFilter(filter: ((row: IDataRow) => boolean) | null) {\r\n    this.filter = filter;\r\n    this.reorderAll();\r\n  }\r\n\r\n  getFilter() {\r\n    return this.filter;\r\n  }\r\n\r\n  getTotalNumberOfRows() {\r\n    return this.data.length;\r\n  }\r\n\r\n\r\n  protected getMaxGroupColumns() {\r\n    return this.options.maxGroupColumns;\r\n  }\r\n\r\n  protected getMaxNestedSortingCriteria() {\r\n    return this.options.maxNestedSortingCriteria;\r\n  }\r\n\r\n  get data() {\r\n    return this._data;\r\n  }\r\n\r\n  /**\r\n   * replaces the dataset rows with a new one\r\n   * @param data\r\n   */\r\n  setData(data: any[]) {\r\n    this._data = data;\r\n    this._dataRows = toRows(data);\r\n    this.reorderAll();\r\n  }\r\n\r\n  clearData() {\r\n    this.setData([]);\r\n  }\r\n\r\n  /**\r\n   * append rows to the dataset\r\n   * @param data\r\n   */\r\n  appendData(data: any[]) {\r\n    this._data.push(...data);\r\n    this._dataRows.push(...toRows(data));\r\n    this.reorderAll();\r\n  }\r\n\r\n  cloneRanking(existing?: Ranking) {\r\n    const clone = super.cloneRanking(existing);\r\n\r\n    if (this.options.filterGlobally) {\r\n      clone.on(`${NumberColumn.EVENT_FILTER_CHANGED}.reorderAll`, this.reorderAll);\r\n    }\r\n\r\n    return clone;\r\n  }\r\n\r\n  cleanUpRanking(ranking: Ranking) {\r\n    if (this.options.filterGlobally) {\r\n      ranking.on(`${NumberColumn.EVENT_FILTER_CHANGED}.reorderAll`, null);\r\n    }\r\n    super.cleanUpRanking(ranking);\r\n  }\r\n\r\n  sortImpl(ranking: Ranking): IOrderedGroup[] {\r\n    if (this._data.length === 0) {\r\n      return [];\r\n    }\r\n    //wrap in a helper and store the initial index\r\n    let helper = this._data.map((r, i) => ({v: r, i, group: <IGroup | null>null}));\r\n\r\n    //do the optional filtering step\r\n    let filter: ((d: IDataRow) => boolean) | null = null;\r\n    if (this.options.filterGlobally) {\r\n      const filtered = this.getRankings().filter((d) => d.isFiltered());\r\n      if (filtered.length > 0) {\r\n        filter = (d: IDataRow) => filtered.every((f) => f.filter(d));\r\n      }\r\n    } else if (ranking.isFiltered()) {\r\n      filter = (d) => ranking.filter(d);\r\n    }\r\n\r\n    if (filter || this.filter) {\r\n      helper = helper.filter((d) => (!this.filter || this.filter(d)) && (!filter || filter(d)));\r\n    }\r\n\r\n    if (helper.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    //create the groups for each row\r\n    helper.forEach((r) => r.group = ranking.grouper(r) || defaultGroup);\r\n    if ((new Set<string>(helper.map((r) => r.group!.name))).size === 1) {\r\n      const group = helper[0].group;\r\n      //no need to split\r\n      //sort by the ranking column\r\n      helper.sort((a, b) => ranking.comparator(a, b));\r\n\r\n      //store the ranking index and create an argsort version, i.e. rank 0 -> index i\r\n      const order = helper.map((r) => r.i);\r\n      return [Object.assign({order}, group!)];\r\n    }\r\n    //sort by group and within by order\r\n    helper.sort((a, b) => {\r\n      const ga = a.group!;\r\n      const gb = b.group!;\r\n      if (ga.name !== gb.name) {\r\n        return ga.name.toLowerCase().localeCompare(gb.name.toLowerCase());\r\n      }\r\n      return ranking.comparator(a, b);\r\n    });\r\n    //iterate over groups and create within orders\r\n    const groups: (IOrderedGroup & IGroupData)[] = [Object.assign({order: [], rows: []}, helper[0].group!)];\r\n    let group = groups[0];\r\n    helper.forEach((row) => {\r\n      const rowGroup = row.group!;\r\n      if (rowGroup.name === group.name) {\r\n        group.order.push(row.i);\r\n        group.rows.push(row);\r\n      } else { // change in groups\r\n        group = Object.assign({order: [row.i], rows: [row]}, rowGroup);\r\n        groups.push(group);\r\n      }\r\n    });\r\n\r\n    // sort groups\r\n    groups.sort((a, b) => ranking.groupComparator(a, b));\r\n\r\n    return groups;\r\n  }\r\n\r\n\r\n  viewRaw(indices: number[]) {\r\n    //filter invalid indices\r\n    return indices.map((index) => this._data[index]);\r\n  }\r\n\r\n  viewRawRows(indices: number[]) {\r\n    //filter invalid indices\r\n    return indices.map((index) => this._dataRows[index]);\r\n  }\r\n\r\n  view(indices: number[]) {\r\n    return this.viewRaw(indices);\r\n  }\r\n\r\n  fetch(orders: number[][]): IDataRow[][] {\r\n    return orders.map((order) => order.map((index) => this._dataRows[index]));\r\n  }\r\n\r\n  /**\r\n   * helper for computing statistics\r\n   * @param indices\r\n   * @returns {{stats: (function(INumberColumn): *), hist: (function(ICategoricalColumn): *)}}\r\n   */\r\n  stats(indices: number[]): IStatsBuilder {\r\n    let d: IDataRow[] | null = null;\r\n    const getD = () => {\r\n      if (d == null) {\r\n        d = this.viewRawRows(indices);\r\n      }\r\n      return d;\r\n    };\r\n\r\n    return {\r\n      stats: (col: INumberColumn) => computeStats(getD(), (d) => col.getNumber(d), (d) => col.isMissing(d), [0, 1]),\r\n      hist: (col: ICategoricalColumn) => computeHist(getD(), (d) => col.getCategory(d), col.categories)\r\n    };\r\n  }\r\n\r\n\r\n  mappingSample(col: INumberColumn): number[] {\r\n    const MAX_SAMPLE = 120; //at most 500 sample lines\r\n    const l = this._dataRows.length;\r\n    if (l <= MAX_SAMPLE) {\r\n      return <number[]>this._dataRows.map(col.getRawNumber.bind(col));\r\n    }\r\n    //randomly select 500 elements\r\n    const indices: number[] = [];\r\n    for (let i = 0; i < MAX_SAMPLE; ++i) {\r\n      let j = Math.floor(Math.random() * (l - 1));\r\n      while (indices.indexOf(j) >= 0) {\r\n        j = Math.floor(Math.random() * (l - 1));\r\n      }\r\n      indices.push(j);\r\n    }\r\n    return indices.map((i) => col.getRawNumber(this._dataRows[i]));\r\n  }\r\n\r\n  searchAndJump(search: string | RegExp, col: Column) {\r\n    //case insensitive search\r\n    search = typeof search === 'string' ? search.toLowerCase() : search;\r\n    const f = typeof search === 'string' ? (v: string) => v.toLowerCase().indexOf((<string>search)) >= 0 : (<RegExp>search).test.bind(search);\r\n    const indices = <number[]>[];\r\n    for (let i = 0; i < this._dataRows.length; ++i) {\r\n      if (f(col.getLabel(this._dataRows[i]))) {\r\n        indices.push(i);\r\n      }\r\n    }\r\n    this.jumpToNearest(indices);\r\n  }\r\n\r\n}\r\n\r\nfunction toRows(data: any[]) {\r\n  return data.map((v, i) => ({v, i}));\r\n}\r\n","export function hasDnDType(e: DragEvent, ...typesToCheck: string[]) {\r\n  const available: any = e.dataTransfer.types;\r\n\r\n  /*\r\n   * In Chrome datatransfer.types is an Array,\r\n   * while in Firefox it is a DOMStringList\r\n   * that only implements a contains-method!\r\n   */\r\n  if (typeof available.indexOf === 'function') {\r\n    return typesToCheck.some((type) => available.indexOf(type) >= 0);\r\n  }\r\n  if (typeof available.includes === 'function') {\r\n    return typesToCheck.some((type) => available.includes(type));\r\n  }\r\n  if (typeof available.contains === 'function') {\r\n    return typesToCheck.some((type) => available.contains(type));\r\n  }\r\n  return false;\r\n}\r\n\r\n\r\n/**\r\n * helper storage for dnd in edge since edge doesn't support custom mime-types\r\n * @type {Map<number, {[p: string]: string}>}\r\n */\r\nconst dndTransferStorage = new Map<number, { [key: string]: string }>();\r\n\r\nfunction isEdgeDnD(e: DragEvent) {\r\n  return dndTransferStorage.size > 0 && hasDnDType(e, 'text/plain');\r\n}\r\n\r\n/**\r\n * checks whether it is a copy operation\r\n * @param e\r\n * @returns {boolean|RegExpMatchArray}\r\n * @internal\r\n */\r\nexport function copyDnD(e: DragEvent) {\r\n  const dT = e.dataTransfer;\r\n  return Boolean((e.ctrlKey && dT.effectAllowed.match(/copy/gi)) || (!dT.effectAllowed.match(/move/gi)));\r\n}\r\n\r\n/**\r\n * updates the drop effect accoriding to the current copyDnD state\r\n * @param e\r\n * @internal\r\n */\r\nexport function updateDropEffect(e: DragEvent) {\r\n  const dT = e.dataTransfer;\r\n  if (copyDnD(e)) {\r\n    dT.dropEffect = 'copy';\r\n  } else {\r\n    dT.dropEffect = 'move';\r\n  }\r\n}\r\n\r\nexport type IDragEffect = 'none' | 'copy' | 'copyLink' | 'copyMove' | 'link' | 'linkMove' | 'move' | 'all';\r\n\r\nexport interface IDragStartResult {\r\n  effectAllowed: IDragEffect;\r\n  data: { [mimeType: string]: string };\r\n}\r\n\r\nexport interface IDropResult {\r\n  effect: IDragEffect;\r\n  data: { [mimeType: string]: string };\r\n}\r\n\r\nlet idCounter = 0;\r\n\r\n/**\r\n * add drag support for the given element\r\n * @param {HTMLElement} node\r\n * @param {() => IDragStartResult} onDragStart callback to compute the payload an object of mime types\r\n * @param {boolean} stopPropagation whether to stop propagation in case of success\r\n * @internal\r\n */\r\nexport function dragAble(node: HTMLElement, onDragStart: () => IDragStartResult, stopPropagation: boolean = false) {\r\n  const id = ++idCounter;\r\n  node.draggable = true;\r\n  node.addEventListener('dragstart', (e) => {\r\n    node.classList.add('lu-dragging');\r\n    const payload = onDragStart();\r\n    e.dataTransfer.effectAllowed = payload.effectAllowed;\r\n\r\n    if (stopPropagation) {\r\n      e.stopPropagation();\r\n    }\r\n\r\n    const keys = Object.keys(payload.data);\r\n    const allSucceded = keys.every((k) => {\r\n      try {\r\n        e.dataTransfer.setData(k, payload.data[k]);\r\n        return true;\r\n      } catch (e) {\r\n        return false;\r\n      }\r\n    });\r\n    if (allSucceded) {\r\n      return;\r\n    }\r\n    //compatibility mode for edge\r\n    const text = payload.data['text/plain'] || '';\r\n    e.dataTransfer.setData('text/plain', `${id}${text ? `: ${text}` : ''}`);\r\n    dndTransferStorage.set(id, payload.data);\r\n  });\r\n  node.addEventListener('dragend', (e) => {\r\n    node.classList.remove('lu-dragging');\r\n    if (stopPropagation) {\r\n      e.stopPropagation();\r\n    }\r\n    if (dndTransferStorage.size > 0) {\r\n      //clear the id\r\n      dndTransferStorage.delete(id);\r\n    }\r\n\r\n    // remove all\r\n    const over = <HTMLElement>node.ownerDocument.querySelector('.lu-dragover');\r\n    if (over) {\r\n      over.classList.remove('lu-dragover');\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * add dropable support for the given node\r\n * @param {HTMLElement} node\r\n * @param {string[]} mimeTypes mimeTypes to look for\r\n * @param {(result: IDropResult, e: DragEvent) => boolean} onDrop callback when dropped, returns true if the drop was successful\r\n * @param {(e: DragEvent) => void} onDragOver optional drag over handler, e.g. for special effects\r\n * @param {boolean} stopPropagation flag if the event propagation should be stopped in case of success\r\n * @internal\r\n */\r\nexport function dropAble(node: HTMLElement, mimeTypes: string[], onDrop: (result: IDropResult, e: DragEvent) => boolean, onDragOver: null | ((e: DragEvent) => void) = null, stopPropagation: boolean = false) {\r\n  node.addEventListener('dragenter', (e) => {\r\n    //var xy = mouse($node.node());\r\n    if (!node.classList.contains('lu-dragging') && (hasDnDType(e, ...mimeTypes) || isEdgeDnD(e))) {\r\n      node.classList.add('lu-dragover');\r\n      if (stopPropagation) {\r\n        e.stopPropagation();\r\n      }\r\n      //sounds good\r\n      return false;\r\n    }\r\n    //not a valid mime type\r\n    node.classList.remove('lu-dragover');\r\n    return;\r\n  });\r\n  node.addEventListener('dragover', (e) => {\r\n    if (!node.classList.contains('lu-dragging') && (hasDnDType(e, ...mimeTypes) || isEdgeDnD(e))) {\r\n      e.preventDefault();\r\n      updateDropEffect(e);\r\n      node.classList.add('lu-dragover');\r\n\r\n      if (stopPropagation) {\r\n        e.stopPropagation();\r\n      }\r\n      if (onDragOver) {\r\n        onDragOver(e);\r\n      }\r\n      //sound good\r\n      return false;\r\n    }\r\n    return;\r\n  });\r\n  node.addEventListener('dragleave', (evt) => {\r\n    // same fix as in phovea\r\n    (<HTMLElement>evt.target).classList.remove('lu-dragover');\r\n  });\r\n  node.addEventListener('drop', (e) => {\r\n    e.preventDefault();\r\n    if (stopPropagation) {\r\n      e.stopPropagation();\r\n    }\r\n    updateDropEffect(e);\r\n    const effect = <IDragEffect>e.dataTransfer.dropEffect;\r\n\r\n    node.classList.remove('lu-dragover');\r\n\r\n    if (isEdgeDnD(e)) {\r\n      const base = e.dataTransfer.getData('text/plain');\r\n      const id = parseInt(base.indexOf(':') >= 0 ? base.substring(0, base.indexOf(':')) : base, 10);\r\n      if (dndTransferStorage.has(id)) {\r\n        const data = dndTransferStorage.get(id)!;\r\n        dndTransferStorage.delete(id);\r\n        return !onDrop({effect, data}, e);\r\n      }\r\n      return;\r\n    }\r\n    if (hasDnDType(e, ...mimeTypes)) {\r\n      const data: any = {};\r\n      //selects the data contained in the data transfer\r\n      mimeTypes.forEach((mime) => {\r\n        const value = e.dataTransfer.getData(mime);\r\n        if (value !== '') {\r\n          data[mime] = value;\r\n        }\r\n      });\r\n      return !onDrop({effect, data}, e);\r\n    }\r\n    return;\r\n  });\r\n}\r\n","// import Popper from 'popper.js';\r\nimport {MIN_LABEL_WIDTH} from '../config';\r\nimport {equalArrays} from '../internal';\r\nimport {dragAble, dropAble, hasDnDType, IDropResult} from '../internal/dnd';\r\nimport {\r\n  createImpositionBoxPlotDesc, createImpositionDesc, createImpositionsDesc, createNestedDesc, createReduceDesc,\r\n  createStackDesc, IColumnDesc, isArrayColumn, isBoxPlotColumn, isCategoricalColumn, isMapColumn, isNumberColumn,\r\n  isNumbersColumn\r\n} from '../model';\r\nimport {categoryOf} from '../model/annotations';\r\nimport Column from '../model/Column';\r\nimport {default as CompositeColumn, IMultiLevelColumn, isMultiLevelColumn} from '../model/CompositeColumn';\r\nimport ImpositionBoxPlotColumn from '../model/ImpositionBoxPlotColumn';\r\nimport ImpositionCompositeColumn from '../model/ImpositionCompositeColumn';\r\nimport ImpositionCompositesColumn from '../model/ImpositionCompositesColumn';\r\nimport {IRankingHeaderContext} from './interfaces';\r\nimport toolbarActions, {IOnClickHandler} from './toolbar';\r\n\r\n/** @internal */\r\nexport interface IHeaderOptions {\r\n  dragAble: boolean;\r\n  mergeDropAble: boolean;\r\n  rearrangeAble: boolean;\r\n  resizeable: boolean;\r\n  level: number;\r\n}\r\n\r\n/** @internal */\r\nexport function createHeader(col: Column, ctx: IRankingHeaderContext, options: Partial<IHeaderOptions> = {}) {\r\n  options = Object.assign({\r\n    dragAble: true,\r\n    mergeDropAble: true,\r\n    rearrangeAble: true,\r\n    resizeable: true,\r\n    level: 0\r\n  }, options);\r\n  const node = ctx.document.createElement('section');\r\n  node.innerHTML = `\r\n    <div class=\"lu-label\">${col.getWidth() < MIN_LABEL_WIDTH ? '&nbsp;' : col.label}</div>\r\n    <div class=\"lu-toolbar\"></div>\r\n    <div class=\"lu-spacing\"></div>\r\n    <div class=\"lu-handle\"></div>\r\n  `;\r\n\r\n  // addTooltip(node, col);\r\n\r\n  createToolbar(<HTMLElement>node.querySelector('div.lu-toolbar')!, options.level!, col, ctx);\r\n\r\n  toggleToolbarIcons(node, col);\r\n\r\n  if (options.dragAble) {\r\n    dragAbleColumn(node, col, ctx);\r\n  }\r\n  if (options.mergeDropAble) {\r\n    mergeDropAble(node, col, ctx);\r\n  }\r\n  if (options.rearrangeAble) {\r\n    rearrangeDropAble(<HTMLElement>node.querySelector('.lu-handle')!, col, ctx);\r\n  }\r\n  if (options.resizeable) {\r\n    dragWidth(col, node);\r\n  }\r\n  return node;\r\n}\r\n\r\n\r\n/** @internal */\r\nexport function updateHeader(node: HTMLElement, col: Column) {\r\n  const label = <HTMLElement>node.querySelector('.lu-label')!;\r\n  label.innerHTML = col.getWidth() < MIN_LABEL_WIDTH ? '&nbsp;' : col.label;\r\n  node.title = col.label;\r\n  node.dataset.colId = col.id;\r\n  node.dataset.type = col.desc.type;\r\n  node.dataset.typeCat = categoryOf(col).name;\r\n\r\n  updateIconState(node, col);\r\n}\r\n\r\n\r\n/** @internal */\r\nexport function updateIconState(node: HTMLElement, col: Column) {\r\n  const sort = <HTMLElement>node.querySelector(`i[title='Sort']`)!;\r\n  if (sort) {\r\n    const {asc, priority} = col.isSortedByMe();\r\n    sort.dataset.sort = asc !== undefined ? asc : '';\r\n    if (priority !== undefined) {\r\n      sort.dataset.priority = (priority + 1).toString();\r\n    } else {\r\n      delete sort.dataset.priority;\r\n    }\r\n  }\r\n\r\n  const group = <HTMLElement>node.querySelector(`i[title^='Group']`)!;\r\n  if (group) {\r\n    const groupedBy = col.isGroupedBy();\r\n    group.dataset.group = groupedBy >= 0 ? 'true' : 'false';\r\n    if (groupedBy >= 0) {\r\n      group.dataset.priority = (groupedBy + 1).toString();\r\n    } else {\r\n      delete group.dataset.priority;\r\n    }\r\n  }\r\n\r\n  const filter = <HTMLElement>node.querySelector(`i[title^='Filter']`)!;\r\n  if (!filter) {\r\n    return;\r\n  }\r\n  if (col.isFiltered()) {\r\n    filter.dataset.active = '';\r\n  } else {\r\n    delete filter.dataset.active;\r\n  }\r\n}\r\n\r\nfunction addIconDOM(node: HTMLElement, col: Column, ctx: IRankingHeaderContext, level: number, showLabel: boolean) {\r\n  return (title: string, onClick: IOnClickHandler) => {\r\n    node.insertAdjacentHTML('beforeend', `<i title=\"${title}\" class=\"lu-action\"><span${!showLabel ? ' aria-hidden=\"true\"' : ''}>${title}</span> </i>`);\r\n    const i = <HTMLElement>node.lastElementChild;\r\n    i.onclick = (evt) => {\r\n      evt.stopPropagation();\r\n      ctx.dialogManager.setHighlightColumn(col);\r\n      onClick(col, <any>evt, ctx, level, !showLabel);\r\n    };\r\n    return i;\r\n  };\r\n}\r\n\r\n/** @internal */\r\nexport function createToolbar(node: HTMLElement, level: number, col: Column, ctx: IRankingHeaderContext) {\r\n  return createShortcutMenuItems(node, level, col, ctx);\r\n}\r\n\r\nexport interface IAddIcon {\r\n  (title: string, onClick: IOnClickHandler): void;\r\n}\r\n\r\nexport function createShortcutMenuItems(node: HTMLElement, level: number, col: Column, ctx: IRankingHeaderContext) {\r\n  const addIcon = addIconDOM(node, col, ctx, level, false);\r\n  const actions = toolbarActions(col, ctx);\r\n\r\n  actions.filter((d) => d.options.shortcut).forEach((d) => addIcon(d.title, d.onClick));\r\n}\r\n\r\nexport function createToolbarMenuItems(node: HTMLElement, level: number, col: Column, ctx: IRankingHeaderContext) {\r\n  const addIcon = addIconDOM(node, col, ctx, level, true);\r\n  const actions = toolbarActions(col, ctx);\r\n\r\n  actions.filter((d) => !d.title.startsWith('More') && d.options.shortcut !== 'only').forEach((d) => addIcon(d.title, d.onClick));\r\n}\r\n\r\n/** @internal */\r\nfunction toggleRotatedHeader(node: HTMLElement, col: Column, defaultVisibleClientWidth = 22.5) {\r\n  // rotate header flag if needed\r\n  const label = <HTMLElement>node.querySelector('.lu-label');\r\n  if (col.getWidth() < MIN_LABEL_WIDTH) {\r\n    label.classList.remove('lu-rotated');\r\n    return;\r\n  }\r\n  const width = label.clientWidth;\r\n  const rotated = width <= 0 ? (col.label.length * defaultVisibleClientWidth / 3 * 0.6 > col.getWidth()) : (label.scrollWidth * 0.6 > label.clientWidth);\r\n  label.classList.toggle('lu-rotated', rotated);\r\n}\r\n\r\n/** @internal */\r\nfunction toggleToolbarIcons(node: HTMLElement, col: Column, defaultVisibleClientWidth = 22.5) {\r\n  toggleRotatedHeader(node, col, defaultVisibleClientWidth);\r\n\r\n  const toolbar = <HTMLElement>node.querySelector('.lu-toolbar');\r\n  if (toolbar.childElementCount === 0) {\r\n    return;\r\n  }\r\n  const moreIcon = toolbar.querySelector('[title^=More]')!;\r\n  const availableWidth = col.getWidth() - (moreIcon && moreIcon.clientWidth ? moreIcon.clientWidth : defaultVisibleClientWidth);\r\n  const toggableIcons = Array.from(toolbar.children).filter((d) => d !== moreIcon)\r\n    .reverse(); // start hiding with the last icon\r\n\r\n  toggableIcons.forEach((icon) => {\r\n    icon.classList.remove('hidden'); // first show all icons to calculate the correct `clientWidth`\r\n  });\r\n  toggableIcons.forEach((icon) => {\r\n    const currentWidth = toggableIcons.reduce((a, b) => {\r\n      const realWidth = b.clientWidth;\r\n      if (realWidth > 0) {\r\n        return a + realWidth;\r\n      }\r\n      if (!b.classList.contains('hidden')) { // since it may have not yet been layouted\r\n        return a + defaultVisibleClientWidth;\r\n      }\r\n      return a;\r\n    }, 0);\r\n    icon.classList.toggle('hidden', (currentWidth > availableWidth)); // hide icons if necessary\r\n  });\r\n}\r\n\r\n\r\n// function addTooltip(node: HTMLElement, col: Column) {\r\n//   let timer = -1;\r\n//   let popper: Popper | null = null;\r\n\r\n//   const showTooltip = () => {\r\n//     timer = -1;\r\n//     // no tooltip if no description\r\n//     if (col.description.length <= 0) {\r\n//       return;\r\n//     }\r\n//     const parent = <HTMLElement>node.closest('.lu')!;\r\n//     parent.insertAdjacentHTML('beforeend', `<div class=\"lu-tooltip\" data-type=\"${col.desc.type}\" data-type-cat=\"${categoryOf(col).name}\">\r\n//         <div x-arrow></div>\r\n//         <strong class=\"lu-label\">${col.label}</strong>\r\n//         <p>${col.description.replace('\\n', `<br/>`)}</p>\r\n//     </div>`);\r\n//     popper = new Popper(node, parent.lastElementChild!, {\r\n//       removeOnDestroy: true,\r\n//       placement: 'auto',\r\n//       modifiers: {\r\n//         flip: {\r\n//           enabled: false\r\n//         },\r\n//         preventOverflow: {\r\n//           enabled: false\r\n//         }\r\n//       }\r\n//     });\r\n//   };\r\n\r\n//   node.addEventListener('mouseenter', () => {\r\n//     if (col.description.length > 0) {\r\n//       timer = self.setTimeout(showTooltip, HOVER_DELAY_SHOW_DETAIL);\r\n//     }\r\n//   });\r\n//   node.addEventListener('mouseleave', () => {\r\n//     if (timer >= 0) {\r\n//       clearTimeout(timer);\r\n//       timer = -1;\r\n//     }\r\n//     if (popper) {\r\n//       popper.destroy();\r\n//       popper = null;\r\n//     }\r\n//   });\r\n// }\r\n\r\n/**\r\n * allow to change the width of a column using dragging the handle\r\n * @internal\r\n */\r\nexport function dragWidth(col: Column, node: HTMLElement) {\r\n  let ueberElement: HTMLElement;\r\n  const handle = <HTMLElement>node.querySelector('.lu-handle');\r\n\r\n\r\n  let start = 0;\r\n  const mouseMove = (evt: MouseEvent) => {\r\n    evt.stopPropagation();\r\n    evt.preventDefault();\r\n    const end = evt.clientX;\r\n    if (Math.abs(start - end) < 2) {\r\n      //ignore\r\n      return;\r\n    }\r\n    const delta = end - start;\r\n    start = end;\r\n    const width = Math.max(0, col.getWidth() + delta);\r\n    col.setWidth(width);\r\n    toggleToolbarIcons(node, col);\r\n  };\r\n\r\n  const mouseUp = (evt: MouseEvent) => {\r\n    evt.stopPropagation();\r\n    evt.preventDefault();\r\n    const end = evt.clientX;\r\n    node.classList.remove('lu-change-width');\r\n\r\n    ueberElement.removeEventListener('mousemove', mouseMove);\r\n    ueberElement.removeEventListener('mouseup', mouseUp);\r\n    ueberElement.removeEventListener('mouseleave', mouseUp);\r\n\r\n    if (Math.abs(start - end) < 2) {\r\n      //ignore\r\n      return;\r\n    }\r\n    const delta = end - start;\r\n    const width = Math.max(0, col.getWidth() + delta);\r\n    col.setWidth(width);\r\n    toggleToolbarIcons(node, col);\r\n  };\r\n  handle.onmousedown = (evt) => {\r\n    evt.stopPropagation();\r\n    evt.preventDefault();\r\n    node.classList.add('lu-change-width');\r\n\r\n    start = evt.clientX;\r\n    ueberElement = <HTMLElement>node.closest('header')!;\r\n    ueberElement.addEventListener('mousemove', mouseMove);\r\n    ueberElement.addEventListener('mouseup', mouseUp);\r\n    ueberElement.addEventListener('mouseleave', mouseUp);\r\n  };\r\n  handle.onclick = (evt) => {\r\n    // avoid resorting\r\n    evt.stopPropagation();\r\n    evt.preventDefault();\r\n  };\r\n}\r\n\r\nexport const MIMETYPE_PREFIX = 'text/x-caleydo-lineup-column';\r\n\r\n/**\r\n * allow to drag the column away\r\n * @internal\r\n */\r\nexport function dragAbleColumn(node: HTMLElement, column: Column, ctx: IRankingHeaderContext) {\r\n  dragAble(node, () => {\r\n    const ref = JSON.stringify(ctx.provider.toDescRef(column.desc));\r\n    const data: any = {\r\n      'text/plain': column.label,\r\n      [`${MIMETYPE_PREFIX}-ref`]: column.id,\r\n      [MIMETYPE_PREFIX]: ref\r\n    };\r\n    if (isNumberColumn(column)) {\r\n      data[`${MIMETYPE_PREFIX}-number`] = ref;\r\n      data[`${MIMETYPE_PREFIX}-number-ref`] = column.id;\r\n    }\r\n    if (isCategoricalColumn(column)) {\r\n      data[`${MIMETYPE_PREFIX}-categorical`] = ref;\r\n      data[`${MIMETYPE_PREFIX}-categorical-ref`] = column.id;\r\n    }\r\n    if (isBoxPlotColumn(column)) {\r\n      data[`${MIMETYPE_PREFIX}-boxplot`] = ref;\r\n      data[`${MIMETYPE_PREFIX}-boxplot-ref`] = column.id;\r\n    }\r\n    if (isMapColumn(column)) {\r\n      data[`${MIMETYPE_PREFIX}-map`] = ref;\r\n      data[`${MIMETYPE_PREFIX}-map-ref`] = column.id;\r\n    }\r\n    if (isArrayColumn(column)) {\r\n      data[`${MIMETYPE_PREFIX}-array`] = ref;\r\n      data[`${MIMETYPE_PREFIX}-array-ref`] = column.id;\r\n    }\r\n    if (isNumbersColumn(column)) {\r\n      data[`${MIMETYPE_PREFIX}-numbers`] = ref;\r\n      data[`${MIMETYPE_PREFIX}-numbers-ref`] = column.id;\r\n    }\r\n    return {\r\n      effectAllowed: 'copyMove',\r\n      data\r\n    };\r\n  }, true);\r\n}\r\n\r\n/**\r\n * dropper for allowing to rearrange (move, copy) columns\r\n * @internal\r\n */\r\nexport function rearrangeDropAble(node: HTMLElement, column: Column, ctx: IRankingHeaderContext) {\r\n  dropAble(node, [`${MIMETYPE_PREFIX}-ref`, MIMETYPE_PREFIX], (result) => {\r\n    let col: Column | null = null;\r\n    const data = result.data;\r\n    if (!(`${MIMETYPE_PREFIX}-ref` in data)) {\r\n      const desc = JSON.parse(data[MIMETYPE_PREFIX]);\r\n      col = ctx.provider.create(ctx.provider.fromDescRef(desc));\r\n      return col != null && column.insertAfterMe(col) != null;\r\n    }\r\n\r\n    // find by reference\r\n    const id = data[`${MIMETYPE_PREFIX}-ref`];\r\n    col = ctx.provider.find(id);\r\n    if (!col || (col === column && !result.effect.startsWith('copy'))) {\r\n      return false;\r\n    }\r\n    if (result.effect.startsWith('copy')) {\r\n      col = ctx.provider.clone(col!);\r\n      return col != null && column.insertAfterMe(col) != null;\r\n    }\r\n    // detect whether it is an internal move operation or an real remove/insert operation\r\n    const toInsertParent = col.parent;\r\n    if (!toInsertParent) { // no parent will always be a move\r\n      return column.insertAfterMe(col) != null;\r\n    }\r\n    if (toInsertParent === column.parent) {\r\n      // move operation\r\n      return toInsertParent.moveAfter(col, column) != null;\r\n    }\r\n    col.removeMe();\r\n    return column.insertAfterMe(col) != null;\r\n  }, null, true);\r\n}\r\n\r\n/**\r\n * dropper for allowing to change the order by dropping it at a certain position\r\n * @internal\r\n */\r\nexport function resortDropAble(node: HTMLElement, column: Column, ctx: IRankingHeaderContext, where: 'before' | 'after', autoGroup: boolean) {\r\n  dropAble(node, [`${MIMETYPE_PREFIX}-ref`, MIMETYPE_PREFIX], (result) => {\r\n    let col: Column | null = null;\r\n    const data = result.data;\r\n    if (`${MIMETYPE_PREFIX}-ref` in data) {\r\n      const id = data[`${MIMETYPE_PREFIX}-ref`];\r\n      col = ctx.provider.find(id);\r\n      if (!col || col === column) {\r\n        return false;\r\n      }\r\n    } else {\r\n      const desc = JSON.parse(data[MIMETYPE_PREFIX]);\r\n      col = ctx.provider.create(ctx.provider.fromDescRef(desc));\r\n      if (col) {\r\n        column.findMyRanker()!.push(col);\r\n      }\r\n    }\r\n    const ranking = column.findMyRanker()!;\r\n    if (!col || col === column || !ranking) {\r\n      return false;\r\n    }\r\n\r\n    const criteria = ranking.getSortCriteria();\r\n    const groups = ranking.getGroupCriteria();\r\n\r\n    const removeFromSort = (col: Column) => {\r\n      const existing = criteria.findIndex((d) => d.col === col);\r\n      if (existing >= 0) { // remove existing column but keep asc state\r\n        return criteria.splice(existing, 1)[0].asc;\r\n      }\r\n      return false;\r\n    };\r\n\r\n    // remove the one to add\r\n    const asc = removeFromSort(col);\r\n\r\n    const groupIndex = groups.indexOf(column);\r\n    const index = criteria.findIndex((d) => d.col === column);\r\n\r\n    if (autoGroup && groupIndex >= 0) {\r\n      // before the grouping, so either ungroup or regroup\r\n      removeFromSort(column);\r\n      if (isCategoricalColumn(col)) { // we can group by it\r\n        groups.splice(groupIndex + (where === 'after' ? 1 : 0), 0, col);\r\n        if (groups.length > ranking.getMaxGroupColumns()) {\r\n          // move the rest to sorting\r\n          const removed = groups.splice(0, groups.length - ranking.getMaxGroupColumns());\r\n          criteria.unshift(...removed.reverse().map((d) => ({asc: false, col: d}))); // now a first sorting criteria\r\n        }\r\n      } else {\r\n        // remove all before and shift to sorting + sorting\r\n        const removed = groups.splice(0, groups.length - groupIndex);\r\n        criteria.unshift(...removed.reverse().map((d) => ({asc: false, col: d}))); // now a first sorting criteria\r\n        criteria.unshift({asc, col});\r\n      }\r\n    } else if (index < 0) {\r\n      criteria.push({asc, col});\r\n    } else if (index === 0 && autoGroup && isCategoricalColumn(col)) {\r\n      // make group criteria\r\n      groups.push(col);\r\n    } else {\r\n      criteria.splice(index + (where === 'after' ? 1 : 0), 0, {asc, col});\r\n    }\r\n\r\n    if (!equalArrays(groups, ranking.getGroupCriteria())) {\r\n      ranking.setGroupCriteria(groups);\r\n    }\r\n    ranking.setSortCriteria(criteria);\r\n    return true;\r\n  }, null, true);\r\n}\r\n\r\n/**\r\n * dropper for merging columns\r\n * @internal\r\n */\r\nexport function mergeDropAble(node: HTMLElement, column: Column, ctx: IRankingHeaderContext) {\r\n  const resolveDrop = (result: IDropResult) => {\r\n    const data = result.data;\r\n    const copy = result.effect === 'copy';\r\n    const prefix = MIMETYPE_PREFIX;\r\n    const key = Object.keys(data).find((d) => d.startsWith(prefix) && d.endsWith('-ref'));\r\n    if (key) {\r\n      const id = data[key];\r\n      let col: Column = ctx.provider.find(id)!;\r\n      if (copy) {\r\n        col = ctx.provider.clone(col);\r\n      } else if (col === column) {\r\n        return null;\r\n      } else {\r\n        col.removeMe();\r\n      }\r\n      return col;\r\n    }\r\n    const alternative = Object.keys(data).find((d) => d.startsWith(prefix));\r\n    if (!alternative) {\r\n      return null;\r\n    }\r\n    const desc = JSON.parse(alternative);\r\n    return ctx.provider.create(ctx.provider.fromDescRef(desc))!;\r\n  };\r\n\r\n  const pushChild = (result: IDropResult) => {\r\n    const col: Column | null = resolveDrop(result);\r\n    return col != null && (<CompositeColumn>column).push(col) != null;\r\n  };\r\n\r\n  const mergeImpl = (col: Column | null, desc: IColumnDesc) => {\r\n    if (col == null) {\r\n      return false;\r\n    }\r\n    const ranking = column.findMyRanker()!;\r\n    const index = ranking.indexOf(column);\r\n    const parent = <CompositeColumn>ctx.provider.create(desc);\r\n    column.removeMe();\r\n    parent.push(column);\r\n    parent.push(col);\r\n    return ranking.insert(parent, index) != null;\r\n  };\r\n\r\n  const mergeWith = (desc: IColumnDesc) => (result: IDropResult) => {\r\n    const col: Column | null = resolveDrop(result);\r\n    return mergeImpl(col, desc);\r\n  };\r\n\r\n  const all = [`${MIMETYPE_PREFIX}-ref`, MIMETYPE_PREFIX];\r\n  const numberish = [`${MIMETYPE_PREFIX}-number-ref`, `${MIMETYPE_PREFIX}-number`];\r\n  const categorical = [`${MIMETYPE_PREFIX}-categorical-ref`, `${MIMETYPE_PREFIX}-categorical`];\r\n  const boxplot = [`${MIMETYPE_PREFIX}-boxplot-ref`, `${MIMETYPE_PREFIX}-boxplot`];\r\n  const numbers = [`${MIMETYPE_PREFIX}-numbers-ref`, `${MIMETYPE_PREFIX}-numbers`];\r\n\r\n  node.dataset.draginfo = '+';\r\n  if (column instanceof ImpositionCompositeColumn) {\r\n    return dropAble(node, categorical.concat(numberish), pushChild, (e) => {\r\n      if (hasDnDType(e, ...categorical)) {\r\n        node.dataset.draginfo = 'Color by';\r\n        return;\r\n      }\r\n      if (hasDnDType(e, ...numberish)) {\r\n        node.dataset.draginfo = 'Wrap';\r\n      }\r\n    });\r\n  }\r\n  if (column instanceof ImpositionBoxPlotColumn) {\r\n    return dropAble(node, categorical.concat(boxplot), pushChild, (e) => {\r\n      if (hasDnDType(e, ...categorical)) {\r\n        node.dataset.draginfo = 'Color by';\r\n        return;\r\n      }\r\n      if (hasDnDType(e, ...boxplot)) {\r\n        node.dataset.draginfo = 'Wrap';\r\n      }\r\n    });\r\n  }\r\n  if (column instanceof ImpositionCompositesColumn) {\r\n    return dropAble(node, categorical.concat(numbers), pushChild, (e) => {\r\n      if (hasDnDType(e, ...categorical)) {\r\n        node.dataset.draginfo = 'Color by';\r\n        return;\r\n      }\r\n      if (hasDnDType(e, ...numbers)) {\r\n        node.dataset.draginfo = 'Wrap';\r\n      }\r\n    });\r\n  }\r\n  if (isMultiLevelColumn(column)) {\r\n    // stack column or nested\r\n    return dropAble(node, (<IMultiLevelColumn>column).canJustAddNumbers ? numberish : all, pushChild);\r\n  }\r\n  if (column instanceof CompositeColumn) {\r\n    return dropAble(node, (<CompositeColumn>column).canJustAddNumbers ? numberish : all, pushChild);\r\n  }\r\n  if (isNumbersColumn(column)) {\r\n    node.dataset.draginfo = 'Color by';\r\n    return dropAble(node, categorical, mergeWith(createImpositionsDesc()));\r\n  }\r\n  if (isBoxPlotColumn(column)) {\r\n    node.dataset.draginfo = 'Color by';\r\n    return dropAble(node, categorical, mergeWith(createImpositionBoxPlotDesc()));\r\n  }\r\n  if (isNumberColumn(column)) {\r\n    node.dataset.draginfo = 'Merge';\r\n    return dropAble(node, categorical.concat(numberish), (result: IDropResult, evt: DragEvent) => {\r\n      const col: Column | null = resolveDrop(result);\r\n      if (col == null) {\r\n        return false;\r\n      }\r\n      if (isCategoricalColumn(col)) {\r\n        return mergeImpl(col, createImpositionDesc());\r\n      }\r\n      if (isNumberColumn(col)) {\r\n        return mergeImpl(col, evt.shiftKey ? createReduceDesc() : createStackDesc());\r\n      }\r\n      return false;\r\n    }, (e) => {\r\n      if (hasDnDType(e, ...categorical)) {\r\n        node.dataset.draginfo = 'Color by';\r\n        return;\r\n      }\r\n      if (hasDnDType(e, ...numberish)) {\r\n        node.dataset.draginfo = e.shiftKey ? 'Min/Max' : 'Sum';\r\n      }\r\n    });\r\n  }\r\n  node.dataset.draginfo = 'Group';\r\n  return dropAble(node, all, mergeWith(createNestedDesc()));\r\n}\r\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","import {basis} from \"./basis\";\n\nexport default function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis\";\nimport basisClosed from \"./basisClosed\";\nimport nogamma, {gamma} from \"./color\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","import value from \"./value\";\n\nexport default function(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b -= a, function(t) {\n    return d.setTime(a + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return a + b * t;\n  };\n}\n","import value from \"./value\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import decompose, {identity} from \"./decompose\";\n\nvar cssNode,\n    cssRoot,\n    cssView,\n    svgNode;\n\nexport function parseCss(value) {\n  if (value === \"none\") return identity;\n  if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\n  cssNode.style.transform = value;\n  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\n  cssRoot.removeChild(cssNode);\n  value = value.slice(7, -1).split(\",\");\n  return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb\";\nimport array from \"./array\";\nimport date from \"./date\";\nimport number from \"./number\";\nimport object from \"./object\";\nimport string from \"./string\";\nimport constant from \"./constant\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : Array.isArray(b) ? array\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return Math.round(a + b * t);\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import number from \"../number\";\nimport {parseCss, parseSvg} from \"./parse\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var rho = Math.SQRT2,\n    rho2 = 2,\n    rho4 = 4,\n    epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\n// p0 = [ux0, uy0, w0]\n// p1 = [ux1, uy1, w1]\nexport default function(p0, p1) {\n  var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n      ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n      dx = ux1 - ux0,\n      dy = uy1 - uy0,\n      d2 = dx * dx + dy * dy,\n      i,\n      S;\n\n  // Special case for u0 ≅ u1.\n  if (d2 < epsilon2) {\n    S = Math.log(w1 / w0) / rho;\n    i = function(t) {\n      return [\n        ux0 + t * dx,\n        uy0 + t * dy,\n        w0 * Math.exp(rho * t * S)\n      ];\n    }\n  }\n\n  // General case.\n  else {\n    var d1 = Math.sqrt(d2),\n        b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n        b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n        r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n        r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n    S = (r1 - r0) / rho;\n    i = function(t) {\n      var s = t * S,\n          coshr0 = cosh(r0),\n          u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n      return [\n        ux0 + u * dx,\n        uy0 + u * dy,\n        w0 * coshr0 / cosh(rho * s + r0)\n      ];\n    }\n  }\n\n  i.duration = S * 1000;\n\n  return i;\n}\n","import {hsl as colorHsl} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction hsl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHsl(start)).h, (end = colorHsl(end)).h),\n        s = color(start.s, end.s),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.s = s(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hsl(hue);\nexport var hslLong = hsl(color);\n","import {hcl as colorHcl} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction hcl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHcl(start)).h, (end = colorHcl(end)).h),\n        c = color(start.c, end.c),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hcl(hue);\nexport var hclLong = hcl(color);\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","import Column from './Column';\r\nimport {IDataRow} from './interfaces';\r\n\r\n\r\nexport interface IKeyValue<T> {\r\n  key: string;\r\n  value: T;\r\n}\r\n\r\nexport interface IMapColumn<T> extends Column {\r\n  getMap(row: IDataRow): IKeyValue<T>[];\r\n\r\n  getMapLabel(row: IDataRow): IKeyValue<string>[];\r\n}\r\n\r\nexport function isMapColumn(col: Column): col is IMapColumn<any> {\r\n  return typeof (<IMapColumn<any>>col).getMap === 'function' && typeof (<IMapColumn<any>>col).getMapLabel === 'function';\r\n}\r\n\r\nexport interface IArrayColumn<T> extends IMapColumn<T> {\r\n  readonly labels: string[];\r\n  readonly dataLength: number | null;\r\n\r\n  getLabels(row: IDataRow): string[];\r\n\r\n  getValues(row: IDataRow): T[];\r\n}\r\n\r\nexport function isArrayColumn(col: Column): col is IArrayColumn<any> {\r\n  return typeof (<IArrayColumn<any>>col).getLabels === 'function' && typeof (<IArrayColumn<any>>col).getValues === 'function' && isMapColumn(col);\r\n}\r\n","import {IDataRow} from './interfaces';\r\nimport MultiLevelCompositeColumn from './MultiLevelCompositeColumn';\r\n\r\n/**\r\n * factory for creating a description creating a mean column\r\n * @param label\r\n * @returns {{type: string, label: string}}\r\n */\r\nexport function createNestedDesc(label: string = 'Nested') {\r\n  return {type: 'nested', label};\r\n}\r\n\r\n/**\r\n * a nested column is a composite column where the sorting order is determined by the nested ordering of the children\r\n * i.e., sort by the first child if equal sort by the second child,...\r\n */\r\nexport default class NestedColumn extends MultiLevelCompositeColumn {\r\n\r\n  compare(a: IDataRow, b: IDataRow) {\r\n    const c = this.children;\r\n    for (const ci of c) {\r\n      const ciResult = ci.compare(a, b);\r\n      if (ciResult !== 0) {\r\n        return ciResult;\r\n      }\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  getLabel(row: IDataRow) {\r\n    return this.children.map((d) => d.getLabel(row)).join(';');\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    return this.children.map((d) => d.getValue(row)).join(';');\r\n  }\r\n}\r\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newYear(y) {\n  return {y: y, m: 0, d: 1, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, newDate) {\n    return function(string) {\n      var d = newYear(1900),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newYear(d.y)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = newDate(newYear(d.y)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newYear(d.y)).getUTCDay() : newDate(newYear(d.y)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return newDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", localDate);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier, utcDate);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  var map = {}, i = -1, n = names.length;\n  while (++i < n) map[names[i].toLowerCase()] = i;\n  return map;\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = (+n[0]) * 1000, i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d), d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d), d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {utcFormat} from \"./defaultLocale\";\n\nexport var isoSpecifier = \"%Y-%m-%dT%H:%M:%S.%LZ\";\n\nfunction formatIsoNative(date) {\n  return date.toISOString();\n}\n\nvar formatIso = Date.prototype.toISOString\n    ? formatIsoNative\n    : utcFormat(isoSpecifier);\n\nexport default formatIso;\n","import {isoSpecifier} from \"./isoFormat\";\nimport {utcParse} from \"./defaultLocale\";\n\nfunction parseIsoNative(string) {\n  var date = new Date(string);\n  return isNaN(date) ? null : date;\n}\n\nvar parseIso = +new Date(\"2000-01-01T00:00:00.000Z\")\n    ? parseIsoNative\n    : utcParse(isoSpecifier);\n\nexport default parseIso;\n","import {\r\n  defaultPhases, EAnimationMode, IAnimationContext, IAnimationItem, IPhase,\r\n  KeyFinder, IExceptionContext\r\n} from 'lineupengine';\r\nimport {IGroupData, IGroupItem, isGroup} from '../model';\r\n\r\n/** @internal */\r\nexport interface IGroupLookUp {\r\n  item2groupIndex: Map<number, number>;\r\n  group2firstItemIndex: Map<string, number>;\r\n}\r\n\r\nfunction toGroupLookup(items: (IGroupItem | IGroupData)[]): IGroupLookUp {\r\n  const item2groupIndex = new Map<number, number>();\r\n  const group2firstItemIndex = new Map<string, number>();\r\n  items.forEach((item, i) => {\r\n    if (isGroup(item)) {\r\n      item.rows.forEach((d) => item2groupIndex.set(d.i, i));\r\n    } else if (item.group && item.relativeIndex === 0) {\r\n      group2firstItemIndex.set(item.group.name, i);\r\n    }\r\n  });\r\n  return {item2groupIndex, group2firstItemIndex};\r\n}\r\n\r\nfunction toKey(item: IGroupItem | IGroupData) {\r\n  if (isGroup(item)) {\r\n    return item.name;\r\n  }\r\n  return (<IGroupItem>item).i.toString();\r\n}\r\n\r\n/** @internal */\r\nexport function lineupAnimation(previous: IExceptionContext, previousData: (IGroupItem | IGroupData)[], currentData: (IGroupItem | IGroupData)[]): IAnimationContext {\r\n\r\n  const previousKey = (index: number) => toKey(previousData[index]);\r\n  const currentKey = (index: number) => toKey(currentData[index]);\r\n\r\n\r\n  const previousGroupCount = previousData.reduce((acc, i) => acc + (isGroup(i) ? 1 : 0), 0);\r\n  const currentGroupCount = currentData.reduce((acc, i) => acc + (isGroup(i) ? 1 : 0), 0);\r\n\r\n  if (previousGroupCount === currentGroupCount) {\r\n    // reorder or filter only\r\n    return {currentKey, previous, previousKey};\r\n  }\r\n\r\n  // try to appear where the group was uncollapsed and vice versa\r\n  let prevHelper: IGroupLookUp;\r\n  const appearPosition = (currentRowIndex: number, previousFinder: KeyFinder, defaultValue: number) => {\r\n    if (!prevHelper) {\r\n      prevHelper = toGroupLookup(previousData);\r\n    }\r\n    const item = currentData[currentRowIndex];\r\n    const referenceIndex = isGroup(item) ? prevHelper.group2firstItemIndex.get(item.name) : prevHelper.item2groupIndex.get(item.i);\r\n    if (referenceIndex === undefined) {\r\n      return defaultValue;\r\n    }\r\n    const pos = previousFinder.posByKey(previousKey(referenceIndex));\r\n    return pos.pos >= 0 ? pos.pos : defaultValue;\r\n  };\r\n\r\n\r\n  let currHelper: IGroupLookUp;\r\n  const removePosition = (previousRowIndex: number, currentFinder: KeyFinder, defaultValue: number) => {\r\n    if (!currHelper) {\r\n      currHelper = toGroupLookup(currentData);\r\n    }\r\n    const item = previousData[previousRowIndex];\r\n    const referenceIndex = isGroup(item) ? currHelper.group2firstItemIndex.get(item.name) : currHelper.item2groupIndex.get(item.i);\r\n    if (referenceIndex === undefined) {\r\n      return defaultValue;\r\n    }\r\n    const pos = currentFinder.posByKey(currentKey(referenceIndex));\r\n    return pos.pos >= 0 ? pos.pos : defaultValue;\r\n  };\r\n\r\n  const phases: IPhase[] = [\r\n    Object.assign({}, defaultPhases[0], {\r\n      apply(item: Readonly<IAnimationItem>, previousFinder: KeyFinder) {\r\n        defaultPhases[0].apply(item);\r\n        if (item.mode === EAnimationMode.SHOW) {\r\n          item.node.style.transform = `translate(0, ${appearPosition(item.current.index, previousFinder, item.previous.y) - item.nodeY}px)`;\r\n        }\r\n      }\r\n    }),\r\n    Object.assign({}, defaultPhases[1], {\r\n      apply(item: Readonly<IAnimationItem>, _previousFinder: KeyFinder, currentFinder: KeyFinder) {\r\n        defaultPhases[1].apply(item);\r\n        if (item.mode === EAnimationMode.HIDE) {\r\n          item.node.style.transform = `translate(0, ${removePosition(item.previous.index, currentFinder, item.current.y) - item.nodeY}px)`;\r\n        }\r\n      }\r\n    }),\r\n    defaultPhases[defaultPhases.length - 1]\r\n  ];\r\n\r\n  return {previous, previousKey, currentKey, phases};\r\n}\r\n","import {IColumn} from 'lineupengine';\r\nimport Column from '../model/Column';\r\nimport {ICellRenderer, IGroupCellRenderer} from '../renderer';\r\nimport {ISummaryRenderer} from '../renderer/interfaces';\r\nimport {createHeader, updateHeader} from './header';\r\nimport {IRankingContext} from './interfaces';\r\nimport {ILineUpFlags} from '../interfaces';\r\n\r\n\r\nexport interface IRenderers {\r\n  singleId: string;\r\n  single: ICellRenderer;\r\n  groupId: string;\r\n  group: IGroupCellRenderer;\r\n  summaryId: string;\r\n  summary: ISummaryRenderer | null;\r\n  singleTemplate: HTMLElement | null;\r\n  groupTemplate: HTMLElement | null;\r\n  summaryTemplate: HTMLElement | null;\r\n}\r\n\r\nexport default class RenderColumn implements IColumn {\r\n  renderers: IRenderers | null = null;\r\n\r\n  constructor(public readonly c: Column, public index: number, protected ctx: IRankingContext, private readonly flags: ILineUpFlags) {\r\n\r\n  }\r\n\r\n  get width() {\r\n    return this.c.getWidth();\r\n  }\r\n\r\n  get id() {\r\n    return this.c.id;\r\n  }\r\n\r\n  get frozen() {\r\n    return this.flags.disableFrozenColumns ? false : this.c.frozen;\r\n  }\r\n\r\n  private singleRenderer() {\r\n    if (!this.renderers || !this.renderers.single) {\r\n      return null;\r\n    }\r\n    if (this.renderers.singleTemplate)  {\r\n      return <HTMLElement>this.renderers.singleTemplate.cloneNode(true);\r\n    }\r\n    const elem = asElement(this.ctx.document, this.renderers.single.template);\r\n    elem.dataset.renderer = this.renderers.singleId;\r\n    elem.dataset.group = 'd';\r\n\r\n    this.renderers.singleTemplate = <HTMLElement>elem.cloneNode(true);\r\n    return elem;\r\n  }\r\n\r\n  private groupRenderer() {\r\n    if (!this.renderers || !this.renderers.group) {\r\n      return null;\r\n    }\r\n    if (this.renderers.groupTemplate)  {\r\n      return <HTMLElement>this.renderers.groupTemplate.cloneNode(true);\r\n    }\r\n    const elem = asElement(this.ctx.document, this.renderers.group.template);\r\n    elem.dataset.renderer = this.renderers.groupId;\r\n    elem.dataset.group = 'g';\r\n\r\n    this.renderers.groupTemplate = <HTMLElement>elem.cloneNode(true);\r\n    return elem;\r\n  }\r\n\r\n  private summaryRenderer() {\r\n    if (!this.renderers || !this.renderers.summary) {\r\n      return null;\r\n    }\r\n    if (this.renderers.summaryTemplate)  {\r\n      return <HTMLElement>this.renderers.summaryTemplate.cloneNode(true);\r\n    }\r\n    const elem = asElement(this.ctx.document, this.renderers.summary.template);\r\n    elem.dataset.renderer = this.renderers.summaryId;\r\n    elem.classList.add('lu-summary');\r\n    this.renderers.summaryTemplate = <HTMLElement>elem.cloneNode(true);\r\n    return elem;\r\n  }\r\n\r\n  createHeader() {\r\n    const node = createHeader(this.c, this.ctx);\r\n    node.className = `lu-header`;\r\n    node.classList.toggle('frozen', this.frozen);\r\n\r\n    if (this.renderers && this.renderers.summary) {\r\n      const summary = this.summaryRenderer()!;\r\n      node.appendChild(summary);\r\n    }\r\n    this.updateHeader(node);\r\n    return node;\r\n  }\r\n\r\n  updateHeader(node: HTMLElement) {\r\n    updateHeader(node, this.c);\r\n    if (!this.renderers || !this.renderers.summary) {\r\n      return;\r\n    }\r\n    let summary = <HTMLElement>node.querySelector('.lu-summary')!;\r\n    const oldRenderer = summary.dataset.renderer;\r\n    const currentRenderer = this.renderers.summaryId;\r\n    if (oldRenderer !== currentRenderer) {\r\n      summary.remove();\r\n      summary = this.summaryRenderer()!;\r\n      node.appendChild(summary);\r\n    }\r\n    this.renderers.summary.update(summary, this.ctx.statsOf(<any>this.c));\r\n  }\r\n\r\n  createCell(index: number) {\r\n    const isGroup = this.ctx.isGroup(index);\r\n    const node = isGroup ? this.groupRenderer()! : this.singleRenderer()!;\r\n    this.updateCell(node, index);\r\n    return node;\r\n  }\r\n\r\n  updateCell(node: HTMLElement, index: number): HTMLElement | void {\r\n    node.classList.toggle('frozen', this.frozen);\r\n    const isGroup = this.ctx.isGroup(index);\r\n    // assert that we have the template of the right mode\r\n    const oldRenderer = node.dataset.renderer;\r\n    const currentRenderer = isGroup ? this.renderers!.groupId : this.renderers!.singleId;\r\n    const oldGroup = node.dataset.group;\r\n    const currentGroup = (isGroup ? 'g' : 'd');\r\n    if (oldRenderer !== currentRenderer || oldGroup !== currentGroup) {\r\n      node = isGroup ? this.groupRenderer()! : this.singleRenderer()!;\r\n    }\r\n    if (isGroup) {\r\n      const g = this.ctx.getGroup(index);\r\n      this.renderers!.group.update(node, g, g.rows);\r\n    } else {\r\n      const r = this.ctx.getRow(index);\r\n      this.renderers!.single.update(node, r, r.relativeIndex, r.group);\r\n    }\r\n    return node;\r\n  }\r\n\r\n  renderCell(ctx: CanvasRenderingContext2D, index: number) {\r\n    const r = this.ctx.getRow(index);\r\n    this.renderers!.single.render(ctx, r, r.relativeIndex, r.group);\r\n  }\r\n}\r\n\r\nfunction asElement(doc: Document, html: string): HTMLElement {\r\n  const helper = doc.createElement('div');\r\n  helper.innerHTML = html;\r\n  const s = <HTMLElement>helper.firstElementChild!;\r\n  helper.innerHTML = '';\r\n  return s;\r\n}\r\n","import {StyleManager} from 'lineupengine';\r\nimport {round} from '../internal';\r\nimport Column from '../model/Column';\r\nimport {IMultiLevelColumn} from '../model';\r\nimport {ISummaryRenderer} from '../renderer/interfaces';\r\nimport {gridClass} from '../renderer/MultiLevelCellRenderer';\r\nimport {COLUMN_PADDING} from '../styles';\r\nimport {createHeader, updateHeader} from './header';\r\nimport {IRankingContext} from './interfaces';\r\nimport RenderColumn from './RenderColumn';\r\nimport {ILineUpFlags} from '../interfaces';\r\n\r\n/** @internal */\r\nexport default class MultiLevelRenderColumn extends RenderColumn {\r\n  private readonly summaries: ISummaryRenderer[] = [];\r\n\r\n  constructor(c: IMultiLevelColumn & Column, index: number, ctx: IRankingContext, flags: ILineUpFlags) {\r\n    super(c, index, ctx, flags);\r\n  }\r\n\r\n  private get mc() {\r\n    return <IMultiLevelColumn & Column>this.c;\r\n  }\r\n\r\n  get width() {\r\n    return this.c.getWidth() + COLUMN_PADDING * this.mc.length;\r\n  }\r\n\r\n  createHeader() {\r\n    const node = super.createHeader();\r\n    const wrapper = this.ctx.document.createElement('div');\r\n    wrapper.classList.add('lu-nested');\r\n    wrapper.classList.add(gridClass(this.c));\r\n    node.appendChild(wrapper);\r\n\r\n    this.summaries.splice(0, this.summaries.length);\r\n    this.mc.children.forEach((cc, i) => {\r\n      const n = createHeader(cc, this.ctx, {\r\n        mergeDropAble: false\r\n      });\r\n      n.classList.add('lu-header');\r\n      (<any>n.style).gridColumnStart = (i + 1).toString();\r\n      wrapper.appendChild(n);\r\n\r\n      if (!this.renderers || !this.renderers.summary) {\r\n        return;\r\n      }\r\n      const summary = this.ctx.summaryRenderer(cc, false);\r\n      n.insertAdjacentHTML('beforeend', summary.template);\r\n      const summaryNode = <HTMLElement>n.lastElementChild!;\r\n      summaryNode.classList.add('lu-summary');\r\n      summaryNode.dataset.renderer = cc.getSummaryRenderer();\r\n      this.summaries.push(summary);\r\n      summary.update(summaryNode, this.ctx.statsOf(<any>cc));\r\n    });\r\n\r\n    this.updateNested(wrapper);\r\n\r\n    return node;\r\n  }\r\n\r\n  updateHeader(node: HTMLElement) {\r\n    super.updateHeader(node);\r\n\r\n    const wrapper = <HTMLElement>node.querySelector('.lu-nested');\r\n    if (!wrapper) {\r\n      return node; // too early\r\n    }\r\n    node.appendChild(wrapper); // ensure the last one\r\n    this.updateNested(wrapper);\r\n    return node;\r\n  }\r\n\r\n  updateWidthRule(style: StyleManager) {\r\n    const mc = this.mc;\r\n    // need this for chrome to work properly\r\n    const widths = mc.children.map((c) => `minmax(0, ${round(c.getWidth())}fr)`);\r\n    const clazz = gridClass(this.c);\r\n    style.updateRule(`stacked-${this.c.id}`, `.lineup-engine .${clazz} {\r\n      display: grid;\r\n      grid-template-columns: ${widths.join(' ')};\r\n    }`);\r\n    return clazz;\r\n  }\r\n\r\n  private updateNested(wrapper: HTMLElement) {\r\n    const sub = this.mc.children;\r\n    const children = <HTMLElement[]>Array.from(wrapper.children);\r\n    sub.forEach((c, i) => {\r\n      const node = children[i];\r\n      updateHeader(node, c);\r\n\r\n      if (!this.renderers || !this.renderers.summary) {\r\n        return;\r\n      }\r\n      let summary = <HTMLElement>node.querySelector('.lu-summary')!;\r\n      const oldRenderer = summary.dataset.renderer;\r\n      const currentRenderer = c.getSummaryRenderer();\r\n      if (oldRenderer !== currentRenderer) {\r\n        const renderer = this.ctx.summaryRenderer(c, false);\r\n        summary.remove();\r\n        summary.innerHTML = renderer.template;\r\n        summary = <HTMLElement>summary.firstElementChild!;\r\n        summary.classList.add('lu-summary');\r\n        summary.dataset.renderer = currentRenderer;\r\n        this.summaries[i] = renderer;\r\n        node.appendChild(summary);\r\n      }\r\n      this.summaries[i].update(summary, this.ctx.statsOf(<any>c));\r\n    });\r\n  }\r\n}\r\n","import AEventDispatcher from '../internal/AEventDispatcher';\r\nimport OrderedSet from '../internal/OrderedSet';\r\nimport {IGroupData, IGroupItem, isGroup} from '../model';\r\nimport {IDataProvider} from '../provider/ADataProvider';\r\nimport {rangeSelection} from '../renderer/SelectionRenderer';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\ninterface IPoint {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\ninterface IShift {\r\n  xShift: number;\r\n  yShift: number;\r\n  node: HTMLElement;\r\n}\r\n\r\n/**\r\n * @asMemberOf SelectionManager\r\n * @event\r\n */\r\nexport declare function selectRange(from: number, to: number, additional: boolean): void;\r\n\r\n/** @internal */\r\nexport default class SelectionManager extends AEventDispatcher {\r\n  static readonly EVENT_SELECT_RANGE = 'selectRange';\r\n  private static readonly MIN_DISTANCE = 10;\r\n\r\n  private readonly hr: HTMLHRElement;\r\n\r\n  private start: (IPoint & IShift) | null = null;\r\n\r\n  constructor(private readonly ctx: { provider: IDataProvider }, private readonly body: HTMLElement) {\r\n    super();\r\n    const root = body.parentElement!.parentElement!;\r\n    let hr = <HTMLHRElement>root.querySelector('hr');\r\n    if (!hr) {\r\n      hr = root.ownerDocument.createElement('hr');\r\n      root.appendChild(hr);\r\n    }\r\n    this.hr = hr;\r\n\r\n    const mouseMove = (evt: MouseEvent) => {\r\n      this.showHint(evt);\r\n    };\r\n    const mouseUp = (evt: MouseEvent) => {\r\n      this.body.removeEventListener('mousemove', mouseMove);\r\n      this.body.removeEventListener('mouseup', mouseUp);\r\n      this.body.removeEventListener('mouseleave', mouseUp);\r\n\r\n      if (!this.start) {\r\n        return;\r\n      }\r\n      const startNode = this.start.node.classList.contains('lu-row') ? this.start.node : <HTMLElement>this.start.node.closest('.lu-row');\r\n      // somehow on firefox the mouseUp will be triggered on the original node\r\n      // thus search the node explicitly\r\n      const end = <HTMLElement>this.body.ownerDocument.elementFromPoint(evt.clientX, evt.clientY);\r\n      const endNode = end.classList.contains('lu-row') ? end : <HTMLElement>(end.closest('.lu-row'));\r\n      this.start = null;\r\n      this.body.classList.remove('lu-selection-active');\r\n      this.hr.classList.remove('lu-selection-active');\r\n\r\n      this.select(evt.ctrlKey, startNode, endNode);\r\n    };\r\n\r\n    body.addEventListener('mousedown', (evt) => {\r\n      const r = root.getBoundingClientRect();\r\n      this.start = {x: evt.clientX, y: evt.clientY, xShift: r.left, yShift: r.top, node: <HTMLElement>evt.target};\r\n      this.body.classList.add('lu-selection-active');\r\n      body.addEventListener('mousemove', mouseMove, {\r\n        passive: true\r\n      });\r\n      body.addEventListener('mouseup', mouseUp, {\r\n        passive: true\r\n      });\r\n      body.addEventListener('mouseleave', mouseUp, {\r\n        passive: true\r\n      });\r\n    }, {\r\n      passive: true\r\n    });\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([SelectionManager.EVENT_SELECT_RANGE]);\r\n  }\r\n\r\n  on(type: typeof SelectionManager.EVENT_SELECT_RANGE, listener: typeof selectRange | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(type, listener);\r\n  }\r\n\r\n  private select(additional: boolean, startNode?: HTMLElement, endNode?: HTMLElement) {\r\n    if (!startNode || !endNode || startNode === endNode) {\r\n      return; // no single\r\n    }\r\n\r\n    const startIndex = parseInt(startNode.dataset.index!, 10);\r\n    const endIndex = parseInt(endNode.dataset.index!, 10);\r\n\r\n    const from = Math.min(startIndex, endIndex);\r\n    const end = Math.max(startIndex, endIndex);\r\n    if (from === end) {\r\n      return; // no single\r\n    }\r\n    // bounce event end\r\n    requestAnimationFrame(() => this.fire(SelectionManager.EVENT_SELECT_RANGE, from, end, additional));\r\n  }\r\n\r\n  private showHint(end: MouseEvent) {\r\n    const start = this.start!;\r\n    const sy = start.y;\r\n    const ey = end.clientY;\r\n\r\n    const visible = Math.abs(sy - ey) > SelectionManager.MIN_DISTANCE;\r\n    this.hr.classList.toggle('lu-selection-active', visible);\r\n    this.hr.style.transform = `translate(${start.x - start.xShift}px,${sy - start.yShift}px)scale(1,${Math.abs(ey - sy)})rotate(${ey > sy ? 90 : -90}deg)`;\r\n  }\r\n\r\n  remove(node: HTMLElement) {\r\n    node.onclick = <any>undefined;\r\n  }\r\n\r\n  add(node: HTMLElement) {\r\n    node.onclick = (evt) => {\r\n      const dataIndex = parseInt(node.dataset.i!, 10);\r\n      if (evt.shiftKey) {\r\n        const relIndex = parseInt(node.dataset.index!, 10);\r\n        const ranking = node.parentElement!.dataset.ranking!;\r\n        if (rangeSelection(this.ctx.provider, ranking, dataIndex, relIndex, evt.ctrlKey)) {\r\n          return;\r\n        }\r\n      }\r\n      this.ctx.provider.toggleSelection(dataIndex, evt.ctrlKey);\r\n    };\r\n  }\r\n\r\n  /**\r\n   *\r\n   */\r\n\r\n\r\n  selectRange(rows: { forEach: (c: (item: (IGroupItem | IGroupData)) => void) => void }, additional: boolean = false) {\r\n    const current = new OrderedSet<number>(additional ? this.ctx.provider.getSelection() : []);\r\n    const toggle = (dataIndex: number) => {\r\n      if (current.has(dataIndex)) {\r\n        current.delete(dataIndex);\r\n      } else {\r\n        current.add(dataIndex);\r\n      }\r\n    };\r\n    rows.forEach((d) => {\r\n      if (isGroup(d)) {\r\n        d.rows.forEach((r) => toggle(r.i));\r\n      } else {\r\n        toggle(d.i);\r\n      }\r\n    });\r\n    this.ctx.provider.setSelection(Array.from(current));\r\n  }\r\n\r\n  updateState(node: HTMLElement, dataIndex: number) {\r\n    if (this.ctx.provider.isSelected(dataIndex)) {\r\n      node.classList.add('lu-selected');\r\n    } else {\r\n      node.classList.remove('lu-selected');\r\n    }\r\n  }\r\n\r\n  update(node: HTMLElement, selectedDataIndices: { has(dataIndex: number): boolean }) {\r\n    const dataIndex = parseInt(node.dataset.i!, 10);\r\n    if (selectedDataIndices.has(dataIndex)) {\r\n      node.classList.add('lu-selected');\r\n    } else {\r\n      node.classList.remove('lu-selected');\r\n    }\r\n  }\r\n}\r\n","import {IExceptionContext, nonUniformContext, uniformContext, PrefetchMixin, GridStyleManager, setColumn, ACellTableSection, ITableSection, ICellRenderContext} from 'lineupengine';\r\nimport {HOVER_DELAY_SHOW_DETAIL} from '../config';\r\nimport AEventDispatcher, {IEventContext, IEventHandler, IEventListener} from '../internal/AEventDispatcher';\r\nimport debounce from '../internal/debounce';\r\nimport {IDataRow, IGroupData, IGroupItem, isGroup, isMultiLevelColumn, ValueColumn} from '../model';\r\nimport Column from '../model/Column';\r\nimport Ranking from '../model/Ranking';\r\nimport StackColumn from '../model/StackColumn';\r\nimport {IImposer, IRenderContext} from '../renderer';\r\nimport {CANVAS_HEIGHT, COLUMN_PADDING} from '../styles';\r\nimport {lineupAnimation} from './animation';\r\nimport {IRankingBodyContext, IRankingHeaderContextContainer} from './interfaces';\r\nimport MultiLevelRenderColumn from './MultiLevelRenderColumn';\r\nimport RenderColumn, {IRenderers} from './RenderColumn';\r\nimport SelectionManager from './SelectionManager';\r\n\r\nexport interface IEngineRankingContext extends IRankingHeaderContextContainer, IRenderContext {\r\n  createRenderer(c: Column, imposer?: IImposer): IRenderers;\r\n}\r\n\r\n\r\nexport interface IEngineRankingOptions {\r\n  animation: boolean;\r\n  levelOfDetail: (rowIndex: number) => 'high' | 'low';\r\n  customRowUpdate: (row: HTMLElement, rowIndex: number) => void;\r\n  flags: {\r\n    disableFrozenColumns: boolean;\r\n  };\r\n}\r\n\r\n/**\r\n * emitted when the width of the ranking changed\r\n * @asMemberOf EngineRanking\r\n * @event\r\n */\r\nexport declare function widthChanged(): void;\r\n/**\r\n * emitted when the data of the ranking needs to be updated\r\n * @asMemberOf EngineRanking\r\n * @event\r\n */\r\nexport declare function updateData(): void;\r\n/**\r\n * emitted when the histogram of a column needs to be updated\r\n * @asMemberOf EngineRanking\r\n * @param col the column to update the histogram of\r\n * @event\r\n */\r\nexport declare function updateHist(col: Column): void;\r\n/**\r\n * emitted when the highlight changes\r\n * @asMemberOf EngineRanking\r\n * @param dataIndex the highlghted data index or -1 for none\r\n * @event\r\n */\r\nexport declare function highlightChanged(dataIndex: number): void;\r\n\r\n\r\n/** @internal */\r\nclass RankingEvents extends AEventDispatcher {\r\n  static readonly EVENT_WIDTH_CHANGED = 'widthChanged';\r\n  static readonly EVENT_UPDATE_DATA = 'updateData';\r\n  static readonly EVENT_UPDATE_HIST = 'updateHist';\r\n  static readonly EVENT_HIGHLIGHT_CHANGED = 'highlightChanged';\r\n\r\n  fire(type: string | string[], ...args: any[]) {\r\n    super.fire(type, ...args);\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([RankingEvents.EVENT_WIDTH_CHANGED, RankingEvents.EVENT_UPDATE_DATA, RankingEvents.EVENT_UPDATE_HIST, RankingEvents.EVENT_HIGHLIGHT_CHANGED]);\r\n  }\r\n}\r\n\r\nexport default class EngineRanking extends ACellTableSection<RenderColumn> implements ITableSection, IEventHandler {\r\n  static readonly EVENT_WIDTH_CHANGED = RankingEvents.EVENT_WIDTH_CHANGED;\r\n  static readonly EVENT_UPDATE_DATA = RankingEvents.EVENT_UPDATE_DATA;\r\n  static readonly EVENT_UPDATE_HIST = RankingEvents.EVENT_UPDATE_HIST;\r\n  static readonly EVENT_HIGHLIGHT_CHANGED = RankingEvents.EVENT_HIGHLIGHT_CHANGED;\r\n\r\n  private _context: ICellRenderContext<RenderColumn>;\r\n\r\n  private readonly renderCtx: IRankingBodyContext;\r\n  private data: (IGroupItem | IGroupData)[] = [];\r\n  private readonly selection: SelectionManager;\r\n  private highlight: number = -1;\r\n  private readonly canvasPool: HTMLCanvasElement[] = [];\r\n\r\n  private readonly events = new RankingEvents();\r\n\r\n  private roptions: Readonly<IEngineRankingOptions> = {\r\n    animation: true,\r\n    levelOfDetail: () => 'high',\r\n    customRowUpdate: () => undefined,\r\n    flags: {\r\n      disableFrozenColumns: false\r\n    }\r\n  };\r\n\r\n  private readonly delayedUpdate: (this: { type: string }) => void;\r\n  private readonly delayedUpdateAll: () => void;\r\n  private readonly delayedUpdateColumnWidths: () => void;\r\n  private readonly columns: RenderColumn[];\r\n\r\n  private readonly canvasMouseHandler = {\r\n    timer: -1,\r\n    enter: (evt: MouseEvent) => {\r\n      const c = this.canvasMouseHandler;\r\n      if (c.timer > 0) {\r\n        self.clearTimeout(c.timer);\r\n      }\r\n      const row = <HTMLElement>evt.currentTarget;\r\n      row.addEventListener('mouseleave', c.leave, {\r\n        passive: true\r\n      });\r\n      c.timer = self.setTimeout(() => this.updateHoveredRow(row, true), HOVER_DELAY_SHOW_DETAIL);\r\n    },\r\n    leave: (evt: MouseEvent) => {\r\n      const c = this.canvasMouseHandler;\r\n      if (c.timer > 0) {\r\n        self.clearTimeout(c.timer);\r\n        c.timer = -1;\r\n      }\r\n      const row = <HTMLElement>evt.currentTarget;\r\n      if (!EngineRanking.isCanvasRenderedRow(row)) {\r\n        self.setTimeout(() => this.updateHoveredRow(row, false));\r\n      }\r\n      // remove self\r\n      row.removeEventListener('mouseleave', c.leave);\r\n    }\r\n  };\r\n\r\n  private readonly highlightHandler = {\r\n    enabled: false,\r\n    enter: (evt: MouseEvent) => {\r\n      if (this.highlight >= 0) {\r\n        const old = this.body.querySelector('.le-highlighted');\r\n        if (old) {\r\n          old.classList.remove('le-highlighted');\r\n        }\r\n        this.highlight = -1;\r\n      }\r\n      const row = <HTMLElement>evt.currentTarget;\r\n      const dataIndex = parseInt(row.dataset.i || '-1', 10);\r\n      this.events.fire(EngineRanking.EVENT_HIGHLIGHT_CHANGED, dataIndex);\r\n    },\r\n    leave: () => {\r\n      if (this.highlight >= 0) {\r\n        const old = this.body.querySelector('.le-highlighted');\r\n        if (old) {\r\n          old.classList.remove('le-highlighted');\r\n        }\r\n        this.highlight = -1;\r\n      }\r\n      this.events.fire(EngineRanking.EVENT_HIGHLIGHT_CHANGED, -1);\r\n    }\r\n  };\r\n\r\n  constructor(public readonly ranking: Ranking, header: HTMLElement, body: HTMLElement, tableId: string, style: GridStyleManager, private readonly ctx: IEngineRankingContext, roptions: Partial<IEngineRankingOptions> = {}) {\r\n    super(header, body, tableId, style, {mixins: [PrefetchMixin], batchSize: 10});\r\n    Object.assign(this.roptions, roptions);\r\n    body.classList.add('lu-row-body');\r\n    body.dataset.ranking = ranking.id;\r\n\r\n    const that = this;\r\n    this.delayedUpdate = debounce((function (this: { type: string, primaryType: string }) {\r\n      if (this.type !== Ranking.EVENT_DIRTY_VALUES) {\r\n        that.events.fire(EngineRanking.EVENT_UPDATE_DATA);\r\n        return;\r\n      }\r\n      if (this.primaryType !== Column.EVENT_RENDERER_TYPE_CHANGED && this.primaryType !== Column.EVENT_GROUP_RENDERER_TYPE_CHANGED && this.primaryType !== Column.EVENT_LABEL_CHANGED) { // just the single column will be updated\r\n        that.updateBody();\r\n      }\r\n    }), 50, (current, next) => {\r\n      const currentEvent = current.self.type;\r\n      // order changed is more important\r\n      return currentEvent === Ranking.EVENT_ORDER_CHANGED ? current : next;\r\n    });\r\n\r\n    this.delayedUpdateAll = debounce(() => this.updateAll(), 50);\r\n    this.delayedUpdateColumnWidths = debounce(() => this.updateColumnWidths(), 50);\r\n    ranking.on(`${Ranking.EVENT_ADD_COLUMN}.hist`, (col: Column, index: number) => {\r\n      this.columns.splice(index, 0, this.createCol(col, index));\r\n      this.reindex();\r\n      this.updateHist(col);\r\n      this.delayedUpdateAll();\r\n    });\r\n    ranking.on(`${Ranking.EVENT_REMOVE_COLUMN}.body`, (col: Column, index: number) => {\r\n      EngineRanking.disableListener(col);\r\n      this.columns.splice(index, 1);\r\n      this.reindex();\r\n      this.delayedUpdateAll();\r\n    });\r\n    ranking.on(`${Ranking.EVENT_MOVE_COLUMN}.body`, (col: Column, index: number, old: number) => {\r\n      //delete first\r\n      const c = this.columns.splice(old, 1)[0];\r\n      console.assert(c.c === col);\r\n      // adapt target index based on previous index, i.e shift by one\r\n      this.columns.splice(old < index ? index - 1 : index, 0, c);\r\n      this.reindex();\r\n      this.delayedUpdateAll();\r\n    });\r\n    ranking.on(`${Ranking.EVENT_COLUMN_VISIBILITY_CHANGED}.body`, (col: Column, _oldValue: boolean, newValue: boolean) => {\r\n      if (newValue) {\r\n        // become visible\r\n        const index = ranking.children.indexOf(col);\r\n        this.columns.splice(index, 0, this.createCol(col, index));\r\n        this.updateHist(col);\r\n      } else {\r\n        // hide\r\n        const index = this.columns.findIndex((d) => d.c === col);\r\n        EngineRanking.disableListener(col);\r\n        this.columns.splice(index, 1);\r\n      }\r\n      this.reindex();\r\n      this.delayedUpdateAll();\r\n    });\r\n    ranking.on(`${Ranking.EVENT_ORDER_CHANGED}.body`, this.delayedUpdate);\r\n\r\n    this.selection = new SelectionManager(this.ctx, body);\r\n    this.selection.on(SelectionManager.EVENT_SELECT_RANGE, (from: number, to: number, additional: boolean) => {\r\n      this.selection.selectRange(this.data.slice(from, to + 1), additional);\r\n    });\r\n\r\n    this.renderCtx = Object.assign({\r\n      isGroup: (index: number) => isGroup(this.data[index]),\r\n      getRow: (index: number) => <IGroupItem>this.data[index],\r\n      getGroup: (index: number) => <IGroupData>this.data[index]\r\n    }, ctx);\r\n\r\n    // default context\r\n    this.columns = ranking.children.filter((c) => c.isVisible()).map((c, i) => this.createCol(c, i));\r\n    this._context = Object.assign({\r\n      columns: this.columns,\r\n      column: nonUniformContext(this.columns.map((w) => w.width), 100, COLUMN_PADDING)\r\n    }, uniformContext(0, 20));\r\n\r\n    this.columns.forEach((column) => {\r\n      if (column instanceof MultiLevelRenderColumn) {\r\n        column.updateWidthRule(this.style);\r\n      }\r\n      column.renderers = this.ctx.createRenderer(column.c);\r\n    });\r\n  }\r\n\r\n  on(type: typeof EngineRanking.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof EngineRanking.EVENT_UPDATE_DATA, listener: typeof updateData | null): this;\r\n  on(type: typeof EngineRanking.EVENT_UPDATE_HIST, listener: typeof updateHist | null): this;\r\n  on(type: typeof EngineRanking.EVENT_HIGHLIGHT_CHANGED, listener: typeof highlightChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    this.events.on(type, listener);\r\n    return this;\r\n  }\r\n\r\n  get id() {\r\n    return this.ranking.id;\r\n  }\r\n\r\n  protected onVisibilityChanged(visible: boolean) {\r\n    super.onVisibilityChanged(visible);\r\n    if (visible) {\r\n      this.delayedUpdate.call({type: Ranking.EVENT_ORDER_CHANGED});\r\n    }\r\n  }\r\n\r\n  updateHeaders() {\r\n    return super.updateHeaders();\r\n  }\r\n\r\n  get currentData() {\r\n    return this.data;\r\n  }\r\n\r\n  get context(): ICellRenderContext<RenderColumn> {\r\n    return this._context;\r\n  }\r\n\r\n  protected createHeader(_document: Document, column: RenderColumn) {\r\n    return column.createHeader();\r\n  }\r\n\r\n  protected updateHeader(node: HTMLElement, column: RenderColumn) {\r\n    if (column instanceof MultiLevelRenderColumn) {\r\n      column.updateWidthRule(this.style);\r\n    }\r\n    return column.updateHeader(node);\r\n  }\r\n\r\n  protected createCell(_document: Document, index: number, column: RenderColumn) {\r\n    return column.createCell(index);\r\n  }\r\n\r\n  protected updateCell(node: HTMLElement, index: number, column: RenderColumn) {\r\n    return column.updateCell(node, index);\r\n  }\r\n\r\n  private selectCanvas() {\r\n    if (this.canvasPool.length > 0) {\r\n      return this.canvasPool.pop()!;\r\n    }\r\n    return this.body.ownerDocument.createElement('canvas');\r\n  }\r\n\r\n  private rowFlags(row: HTMLElement) {\r\n    const rowany: any = row;\r\n    const v = rowany.__lu__;\r\n    if (v == null) {\r\n      return rowany.__lu__ = {};\r\n    }\r\n    return v;\r\n  }\r\n\r\n  private renderRow(canvas: HTMLCanvasElement, index: number) {\r\n    canvas.width = this.width;\r\n    canvas.style.width = `${this.width}px`;\r\n    canvas.height = CANVAS_HEIGHT;\r\n    const ctx = canvas.getContext('2d')!;\r\n    ctx.imageSmoothingEnabled = false;\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n    ctx.save();\r\n    this.columns.forEach((c) => {\r\n      c.renderCell(ctx, index);\r\n      const shift = c.width + COLUMN_PADDING;\r\n      ctx.translate(shift, 0);\r\n    });\r\n    ctx.restore();\r\n  }\r\n\r\n  protected updateCanvasCell(canvas: HTMLCanvasElement, index: number, column: RenderColumn, x: number) {\r\n    const ctx = canvas.getContext('2d')!;\r\n    ctx.clearRect(x - 1, 0, column.width + 2, canvas.height);\r\n    ctx.save();\r\n    ctx.translate(x, 0);\r\n    column.renderCell(ctx, index);\r\n    ctx.restore();\r\n  }\r\n\r\n  private reindex() {\r\n    this.columns.forEach((c, i) => {\r\n      c.index = i;\r\n    });\r\n  }\r\n\r\n  updateAll() {\r\n    this.columns.forEach((c, i) => {\r\n      c.index = i;\r\n      c.renderers = this.ctx.createRenderer(c.c);\r\n    });\r\n\r\n    this._context = Object.assign({}, this._context, {\r\n      column: nonUniformContext(this.columns.map((w) => w.width), 100, COLUMN_PADDING)\r\n    });\r\n\r\n    super.recreate();\r\n    this.events.fire(EngineRanking.EVENT_WIDTH_CHANGED);\r\n  }\r\n\r\n  updateBody() {\r\n    if (this.hidden) {\r\n      return;\r\n    }\r\n    this.events.fire(EngineRanking.EVENT_WIDTH_CHANGED);\r\n    super.forEachRow((row, rowIndex) => this.updateRow(row, rowIndex));\r\n  }\r\n\r\n  updateHeaderOf(col: Column) {\r\n    const i = this._context.columns.findIndex((d) => d.c === col);\r\n    if (i < 0) {\r\n      return false;\r\n    }\r\n    const node = <HTMLElement>this.header.children[i]!;\r\n    const column = this._context.columns[i];\r\n    if (node && column) {\r\n      this.updateHeader(node, column);\r\n    }\r\n    return node && column;\r\n  }\r\n\r\n  protected createRow(node: HTMLElement, rowIndex: number): void {\r\n    node.classList.add('lu-row');\r\n    this.roptions.customRowUpdate(node, rowIndex);\r\n    if (this.highlightHandler.enabled) {\r\n      node.addEventListener('mouseenter', this.highlightHandler.enter, {\r\n        passive: true\r\n      });\r\n      this.rowFlags(node).highlight = true;\r\n    }\r\n\r\n    const isGroup = this.renderCtx.isGroup(rowIndex);\r\n\r\n    if (isGroup) {\r\n      node.dataset.agg = 'group';\r\n      super.createRow(node, rowIndex);\r\n      return;\r\n    }\r\n\r\n    const {i, meta} = this.renderCtx.getRow(rowIndex);\r\n    node.classList.toggle('le-highlighted', this.highlight === i);\r\n    node.dataset.i = i.toString();\r\n    node.dataset.agg = 'detail'; //or 'group'\r\n    if (!meta) {\r\n      delete node.dataset.meta;\r\n    } else {\r\n      node.dataset.meta = meta;\r\n    }\r\n\r\n    this.selection.updateState(node, i);\r\n    this.selection.add(node);\r\n\r\n    const lod = this.roptions.levelOfDetail(rowIndex);\r\n\r\n    if (lod === 'high') {\r\n      delete node.dataset.lod;\r\n    } else {\r\n      node.dataset.lod = lod;\r\n    }\r\n\r\n    if (lod === 'high' || meta || this.ctx.provider.isSelected(i)) {\r\n      super.createRow(node, rowIndex);\r\n      return;\r\n    }\r\n\r\n    const canvas = this.selectCanvas();\r\n    node.appendChild(canvas);\r\n    this.renderRow(canvas, rowIndex);\r\n    node.addEventListener('mouseenter', this.canvasMouseHandler.enter, {\r\n      passive: true\r\n    });\r\n  }\r\n\r\n  protected updateRow(node: HTMLElement, rowIndex: number, forcedLod?: 'high' | 'low'): void {\r\n    this.roptions.customRowUpdate(node, rowIndex);\r\n\r\n    const computedLod = this.roptions.levelOfDetail(rowIndex);\r\n    const lod = forcedLod ? forcedLod : computedLod;\r\n    const wasLod = node.dataset.lod || 'high';\r\n    const isGroup = this.renderCtx.isGroup(rowIndex);\r\n    const wasGroup = node.dataset.agg === 'group';\r\n\r\n    if (computedLod === 'high') {\r\n      delete node.dataset.lod;\r\n    } else {\r\n      node.dataset.lod = computedLod;\r\n    }\r\n\r\n    if (this.highlightHandler.enabled && !this.rowFlags(node).highlight) {\r\n      node.addEventListener('mouseenter', this.highlightHandler.enter, {\r\n        passive: true\r\n      });\r\n      this.rowFlags(node).highlight = true;\r\n    }\r\n\r\n    node.removeEventListener('mouseenter', this.canvasMouseHandler.enter);\r\n\r\n    if (isGroup !== wasGroup) {\r\n      // change of mode clear the children to reinitialize them\r\n      node.innerHTML = '';\r\n\r\n      // adapt body\r\n      node.dataset.agg = isGroup ? 'group' : 'detail';\r\n      if (isGroup) {\r\n        node.dataset.i = '';\r\n        this.selection.remove(node);\r\n      } else {\r\n        this.selection.add(node);\r\n      }\r\n    }\r\n\r\n    if (isGroup) {\r\n      node.classList.remove('le-highlighted');\r\n      super.updateRow(node, rowIndex);\r\n      return;\r\n    }\r\n\r\n    const {i, meta} = this.renderCtx.getRow(rowIndex);\r\n    node.classList.toggle('le-highlighted', this.highlight === i);\r\n    node.dataset.i = i.toString();\r\n    if (!meta) {\r\n      delete node.dataset.meta;\r\n    } else {\r\n      node.dataset.meta = meta;\r\n    }\r\n    this.selection.updateState(node, i);\r\n\r\n    const canvas = <HTMLCanvasElement>Array.from(node.children).find((d) => d.nodeName.toLowerCase() === 'canvas');\r\n    if (lod === 'high' || meta || this.ctx.provider.isSelected(i)) {\r\n      if (canvas) {\r\n        this.canvasPool.push(canvas);\r\n        canvas.remove();\r\n      }\r\n      super.updateRow(node, rowIndex);\r\n      return;\r\n    }\r\n\r\n    node.addEventListener('mouseenter', this.canvasMouseHandler.enter, {\r\n      passive: true\r\n    });\r\n    // use canvas\r\n    if (wasLod !== 'high' && canvas) {\r\n      this.renderRow(canvas, rowIndex);\r\n      return;\r\n    }\r\n    // clear old\r\n    node.innerHTML = '';\r\n    node.dataset.agg = 'detail';\r\n    const canvas2 = this.selectCanvas();\r\n    node.appendChild(canvas2);\r\n    this.renderRow(canvas2, rowIndex);\r\n  }\r\n\r\n  enableHighlightListening(enable: boolean) {\r\n    if (this.highlightHandler.enabled === enable) {\r\n      return;\r\n    }\r\n\r\n    this.highlightHandler.enabled = enable;\r\n\r\n    if (enable) {\r\n      this.body.addEventListener('mouseleave', this.highlightHandler.leave, {\r\n        passive: true\r\n      });\r\n      super.forEachRow((row) => {\r\n        row.addEventListener('mouseenter', this.highlightHandler.enter, {\r\n          passive: true\r\n        });\r\n        this.rowFlags(row).highlight = true;\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.body.removeEventListener('mouseleave', this.highlightHandler.leave);\r\n\r\n    super.forEachRow((row) => {\r\n      row.removeEventListener('mouseenter', this.highlightHandler.enter);\r\n      this.rowFlags(row).highlight = false;\r\n    });\r\n  }\r\n\r\n  private updateHoveredRow(row: HTMLElement, hover: boolean) {\r\n    const isCanvas = EngineRanking.isCanvasRenderedRow(row);\r\n    if (isCanvas !== hover) {\r\n      return; // good nothing to do\r\n    }\r\n    const index = parseInt(row.dataset.index!, 10);\r\n    this.updateRow(row, index, hover ? 'high' : 'low');\r\n  }\r\n\r\n  protected forEachRow(callback: (row: HTMLElement, rowIndex: number) => void, inplace: boolean = false) {\r\n    const adapter = (row: HTMLElement, rowIndex: number) => {\r\n      if (EngineRanking.isCanvasRenderedRow(row)) {\r\n        // skip canvas\r\n        return;\r\n      }\r\n      callback(row, rowIndex);\r\n    };\r\n    return super.forEachRow(adapter, inplace);\r\n  }\r\n\r\n  updateSelection(selectedDataIndices: { has(i: number): boolean }) {\r\n    super.forEachRow((node: HTMLElement, rowIndex: number) => {\r\n      if (this.renderCtx.isGroup(rowIndex)) {\r\n        this.updateRow(node, rowIndex);\r\n      } else {\r\n        // fast pass for item\r\n        this.selection.update(node, selectedDataIndices);\r\n      }\r\n    }, true);\r\n  }\r\n\r\n  updateColumnWidths() {\r\n    // update the column context in place\r\n    (<any>this._context).column = nonUniformContext(this._context.columns.map((w) => w.width), 100, COLUMN_PADDING);\r\n    super.updateColumnWidths();\r\n    const {columns} = this.context;\r\n    //no data update needed since just width changed\r\n    columns.forEach((column) => {\r\n      if (column instanceof MultiLevelRenderColumn) {\r\n        column.updateWidthRule(this.style);\r\n      }\r\n      column.renderers = this.ctx.createRenderer(column.c);\r\n    });\r\n    this.events.fire(EngineRanking.EVENT_WIDTH_CHANGED);\r\n  }\r\n\r\n  private updateHist(col: Column) {\r\n    this.events.fire(EngineRanking.EVENT_UPDATE_HIST, col);\r\n  }\r\n\r\n  private updateColumn(index: number) {\r\n    const columns = this.context.columns;\r\n    const column = columns[index];\r\n    if (!column) {\r\n      return false;\r\n    }\r\n    let x = 0;\r\n    for (let i = 0; i < index; ++i) {\r\n      x += columns[i].width + COLUMN_PADDING;\r\n    }\r\n    super.forEachRow((row, rowIndex) => {\r\n      if (EngineRanking.isCanvasRenderedRow(row)) {\r\n        this.updateCanvasCell(row.querySelector('canvas')!, rowIndex, column, x);\r\n        return;\r\n      }\r\n      const before = <HTMLElement>row.children[index];\r\n      const after = this.updateCell(before, rowIndex, column);\r\n      if (before !== after && after) {\r\n        setColumn(after, column);\r\n        row.replaceChild(after, before);\r\n      }\r\n    });\r\n    return true;\r\n  }\r\n\r\n  destroy() {\r\n    super.destroy();\r\n    this.ranking.flatColumns.forEach((c) => EngineRanking.disableListener(c));\r\n  }\r\n\r\n  groupData(data: IDataRow[]): (IGroupItem | IGroupData)[] {\r\n    const groups = this.ranking.getGroups();\r\n    const provider = this.ctx.provider;\r\n    const toMeta = (relativeIndex: number, length: number): 'first' | 'last' | 'first last' | undefined => {\r\n      if (length === 1) {\r\n        return 'first last';\r\n      }\r\n      if (relativeIndex === 0) {\r\n        return 'first';\r\n      }\r\n      if (relativeIndex === length - 1) {\r\n        return 'last';\r\n      }\r\n      return undefined;\r\n    };\r\n    if (groups.length === 1) {\r\n      // simple case\r\n      if (provider.isAggregated(this.ranking, groups[0])) {\r\n        // just a single row\r\n        return [Object.assign({rows: data}, groups[0])];\r\n      }\r\n      // simple ungrouped case\r\n      return data.map((r, i) => Object.assign({group: groups[0], relativeIndex: i, meta: toMeta(i, data.length)}, r));\r\n    }\r\n\r\n    //multiple groups\r\n    let offset = 0;\r\n    const r = <(IGroupItem | IGroupData)[]>[];\r\n    groups.forEach((group) => {\r\n      const length = group.order.length;\r\n      const groupData = data.slice(offset, offset + length);\r\n      offset += length;\r\n\r\n      if (provider.isAggregated(this.ranking, group)) {\r\n        r.push(Object.assign({rows: groupData}, group));\r\n        return;\r\n      }\r\n      r.push(...groupData.map((r, i) => Object.assign({\r\n        group,\r\n        relativeIndex: i,\r\n        meta: toMeta(i, groupData.length)\r\n      }, r)));\r\n    });\r\n    return r;\r\n  }\r\n\r\n  render(data: (IGroupItem | IGroupData)[], rowContext: IExceptionContext) {\r\n    const previous = this._context;\r\n    const previousData = this.data;\r\n    this.data = data;\r\n    (<any>this.renderCtx).totalNumberOfRows = data.length;\r\n\r\n    this.columns.forEach((c, i) => {\r\n      c.index = i;\r\n      c.renderers = this.ctx.createRenderer(c.c);\r\n    });\r\n    this._context = Object.assign({\r\n      columns: this.columns,\r\n      column: nonUniformContext(this.columns.map((w) => w.width), 100, COLUMN_PADDING)\r\n    }, rowContext);\r\n\r\n    return super.recreate(this.roptions.animation ? lineupAnimation(previous, previousData, this.data) : undefined);\r\n  }\r\n\r\n  setHighlight(dataIndex: number) {\r\n    this.highlight = dataIndex;\r\n    const old = this.body.querySelector(`[data-i].le-highlighted`);\r\n    if (old) {\r\n      old.classList.remove('le-highlighted');\r\n    }\r\n    if (dataIndex < 0) {\r\n      return;\r\n    }\r\n    const item = this.body.querySelector(`[data-i=\"${dataIndex}\"]`);\r\n    if (item) {\r\n      item.classList.add('le-highlighted');\r\n    }\r\n    return item != null;\r\n  }\r\n\r\n  findNearest(dataIndices: number[]) {\r\n    // find the nearest visible data index\r\n    // first check if already visible\r\n    const index = dataIndices.find((d) => Boolean(this.body.querySelectorAll(`[data-i=\"${d}\"]`)));\r\n    if (index != null) {\r\n      return index; // visible one\r\n    }\r\n    const visible = this.visible;\r\n    const lookFor = new Set(dataIndices);\r\n    let firstBeforePos = -1;\r\n    let firstAfterPos = -1;\r\n    for (let i = visible.first; i >= 0; --i) {\r\n      const d = this.data[i];\r\n      if (!isGroup(d) && lookFor.has(d.i)) {\r\n        firstBeforePos = i;\r\n        break;\r\n      }\r\n    }\r\n    for (let i = visible.last; i < this.data.length; ++i) {\r\n      const d = this.data[i];\r\n      if (!isGroup(d) && lookFor.has(d.i)) {\r\n        firstAfterPos = i;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (firstBeforePos < 0 && firstBeforePos < 0) {\r\n      return -1; // not found at all\r\n    }\r\n    const nearestPos = (firstBeforePos >= 0 && (visible.first - firstBeforePos) < (firstAfterPos - visible.last)) ? firstBeforePos : firstAfterPos;\r\n    return (<IGroupItem>this.data[nearestPos]).i;\r\n  }\r\n\r\n  scrollIntoView(dataIndex: number) {\r\n    const item = this.body.querySelector(`[data-i=\"${dataIndex}\"]`);\r\n    if (item) {\r\n      item.scrollIntoView(true);\r\n      return true;\r\n    }\r\n    const index = this.data.findIndex((d) => !isGroup(d) && d.i === dataIndex);\r\n    if (index < 0) {\r\n      return false; // part of a group?\r\n    }\r\n\r\n    const posOf = () => {\r\n      const c = this._context;\r\n      if (c.exceptions.length === 0 || index < c.exceptions[0].index) {\r\n        // fast pass\r\n        return index * c.defaultRowHeight;\r\n      }\r\n      const before = c.exceptions.reverse().find((d) => d.index <= index);\r\n      if (!before) {\r\n        return -1;\r\n      }\r\n      if (before.index === index) {\r\n        return before.y;\r\n      }\r\n      const regular = index - before.index - 1;\r\n      return before.y2 + regular * c.defaultRowHeight;\r\n    };\r\n    const pos = posOf();\r\n    if (pos < 0) {\r\n      return false;\r\n    }\r\n    const scroller = this.bodyScroller;\r\n    const top = scroller.scrollTop;\r\n    scroller.scrollTop = Math.min(pos, scroller.scrollHeight - scroller.clientHeight);\r\n    this.onScrolledVertically(scroller.scrollTop, scroller.clientHeight, top < scroller.scrollTop);\r\n\r\n    const found = this.body.querySelector(`[data-i=\"${dataIndex}\"]`);\r\n    if (found) {\r\n      found.scrollIntoView(true);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  getHighlight() {\r\n    const item = <HTMLElement>this.body.querySelector(`[data-i]:hover, [data-i].le-highlighted`);\r\n    if (item) {\r\n      return parseInt(item.dataset.i!, 10);\r\n    }\r\n    return this.highlight;\r\n  }\r\n\r\n  private createCol(c: Column, index: number) {\r\n    const col = (isMultiLevelColumn(c) && !c.getCollapsed()) ? new MultiLevelRenderColumn(c, index, this.renderCtx, this.roptions.flags) : new RenderColumn(c, index, this.renderCtx, this.roptions.flags);\r\n\r\n    c.on(`${Column.EVENT_WIDTH_CHANGED}.body`, () => {\r\n      this.delayedUpdateColumnWidths();\r\n    });\r\n    c.on(`${ValueColumn.EVENT_DATA_LOADED}.hist`, () => this.updateHist(c));\r\n    const debounceUpdate = debounce(() => {\r\n      const valid = this.updateColumn(col.index);\r\n      if (!valid) {\r\n        EngineRanking.disableListener(c); // destroy myself\r\n      }\r\n    }, 25);\r\n    c.on([`${Column.EVENT_RENDERER_TYPE_CHANGED}.body`, `${Column.EVENT_GROUP_RENDERER_TYPE_CHANGED}.body`], () => {\r\n      // replace myself upon renderer type change\r\n      col.renderers = this.ctx.createRenderer(c);\r\n      debounceUpdate();\r\n    });\r\n    const that = this;\r\n    c.on(`${Column.EVENT_DIRTY_HEADER}.body`, function (this: IEventContext) {\r\n      const valid = that.updateHeaderOf(col.c);\r\n      if (!valid) {\r\n        EngineRanking.disableListener(c); // destroy myself\r\n      }\r\n      if (this.primaryType === Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED || this.primaryType === Column.EVENT_LABEL_CHANGED || this.primaryType === Column.EVENT_METADATA_CHANGED) {\r\n        return;\r\n      }\r\n      self.setTimeout(() => that.updateHist(col.c), 50);\r\n    });\r\n    c.on(`${Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED}.body`, () => {\r\n      // replace myself upon renderer type change\r\n      col.renderers = this.ctx.createRenderer(c);\r\n      const valid = this.updateHeaderOf(col.c);\r\n      if (!valid) {\r\n        EngineRanking.disableListener(c); // destroy myself\r\n      }\r\n    });\r\n    c.on(`${Column.EVENT_DIRTY_VALUES}.body`, debounceUpdate);\r\n\r\n    if (isMultiLevelColumn(c) && !c.getCollapsed()) {\r\n      (<MultiLevelRenderColumn>col).updateWidthRule(this.style);\r\n      c.on(`${StackColumn.EVENT_MULTI_LEVEL_CHANGED}.body`, () => {\r\n        (<MultiLevelRenderColumn>col).updateWidthRule(this.style);\r\n      });\r\n      c.on(`${StackColumn.EVENT_MULTI_LEVEL_CHANGED}.bodyUpdate`, debounceUpdate);\r\n    }\r\n\r\n    return col;\r\n  }\r\n\r\n  private static isCanvasRenderedRow(row: HTMLElement) {\r\n    return row.dataset.lod === 'low' && row.childElementCount === 1 && row.firstElementChild!.nodeName.toLowerCase() === 'canvas';\r\n  }\r\n\r\n  private static disableListener(c: Column) {\r\n    c.on(`${Column.EVENT_WIDTH_CHANGED}.body`, null);\r\n    c.on(`${ValueColumn.EVENT_DATA_LOADED}.hist`, null);\r\n    c.on([`${Column.EVENT_RENDERER_TYPE_CHANGED}.body`, `${Column.EVENT_GROUP_RENDERER_TYPE_CHANGED}.body`, `${Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED}.body`, `${Column.EVENT_LABEL_CHANGED}.body`], null);\r\n    c.on(`${Ranking.EVENT_DIRTY_HEADER}.body`, null);\r\n    c.on(`${Ranking.EVENT_DIRTY_VALUES}.body`, null);\r\n\r\n    if (!(isMultiLevelColumn(c))) {\r\n      return;\r\n    }\r\n    c.on(`${StackColumn.EVENT_MULTI_LEVEL_CHANGED}.body`, null);\r\n    c.on(`${StackColumn.EVENT_MULTI_LEVEL_CHANGED}.bodyUpdate`, null);\r\n  }\r\n}\r\n","export interface IStyleColumn {\r\n  /**\r\n   * column description\r\n   */\r\n  description: string;\r\n\r\n  /**\r\n   * color of this column\r\n   */\r\n  color: string;\r\n\r\n  /**\r\n   * frozen column\r\n   * @default isSupportType\r\n   */\r\n  frozen: boolean;\r\n\r\n  /**\r\n   * whether the column can be removed or not\r\n   * @default false\r\n   */\r\n  fixed: boolean;\r\n\r\n  /**\r\n   * default renderer to use\r\n   */\r\n  renderer: string;\r\n\r\n  /**\r\n   * default group renderer to use\r\n   */\r\n  groupRenderer: string;\r\n\r\n  /**\r\n   * default summary renderer to use\r\n   */\r\n  summaryRenderer: string;\r\n\r\n  /**\r\n   * initial width of the column\r\n   * @default 100 or 200 for strings\r\n   */\r\n  width: number;\r\n\r\n  /**\r\n   * is this column visible by default\r\n   * @default true\r\n   */\r\n  visible: boolean;\r\n}\r\n\r\n\r\nexport interface IColumnDesc extends Partial<IStyleColumn> {\r\n  /**\r\n   * label of the column\r\n   */\r\n  label: string;\r\n  /**\r\n   * the column type\r\n   */\r\n  type: string;\r\n}\r\n\r\n\r\n/**\r\n * a data row for rendering\r\n */\r\nexport interface IDataRow {\r\n  /**\r\n   * the value\r\n   */\r\n  readonly v: any;\r\n  /**\r\n   * the underlying data index\r\n   */\r\n  readonly i: number;\r\n}\r\n\r\n\r\nexport interface IGroup {\r\n  name: string;\r\n  color: string;\r\n  parent?: Readonly<IGroupParent> | null;\r\n}\r\n\r\nexport interface IGroupParent extends IGroup {\r\n  subGroups: (Readonly<IGroupParent> | Readonly<IGroup>)[];\r\n}\r\n\r\nexport interface IGroupItem extends IDataRow {\r\n  readonly group: IGroup;\r\n  readonly relativeIndex: number;\r\n  readonly meta?: 'first' | 'last' | 'first last';\r\n}\r\n\r\nexport interface IGroupData extends Readonly<IGroup> {\r\n  readonly rows: IDataRow[];\r\n}\r\n\r\nexport function isGroup(item: IGroupData | IGroupItem): item is IGroupData {\r\n  return item && (<IGroupData>item).name !== undefined; // use .name as separator\r\n}\r\n","import * as equalImpl from 'fast-deep-equal';\r\n\r\nexport const equal: (a: any, b: any) => boolean = <any>equalImpl;\r\n\r\n/** @internal */\r\nexport function findOption(options: any) {\r\n  return (key: string, defaultValue: any): any => {\r\n    if (key in options) {\r\n      return options[key];\r\n    }\r\n    if (key.indexOf('.') > 0) {\r\n      const p = key.substring(0, key.indexOf('.'));\r\n      key = key.substring(key.indexOf('.') + 1);\r\n      if (p in options && key in options[p]) {\r\n        return options[p][key];\r\n      }\r\n    }\r\n    return defaultValue;\r\n  };\r\n}\r\n\r\n/** @internal */\r\nexport function equalArrays<T>(a: T[], b: T[]) {\r\n  if (a.length !== b.length) {\r\n    return false;\r\n  }\r\n  return a.every((ai, i) => ai === b[i]);\r\n}\r\n\r\n\r\n/**\r\n * converts a given id to css compatible one\r\n * @param id\r\n * @return {string|void}\r\n * @internal\r\n */\r\nexport function fixCSS(id: string) {\r\n  return id.replace(/[\\s!#$%&'()*+,.\\/:;<=>?@\\[\\\\\\]^`{|}~]/g, '_'); //replace non css stuff to _\r\n}\r\n","interface IDebounceContext {\r\n  self: any;\r\n  args: any[];\r\n}\r\n\r\n/**\r\n * create a delayed call, can be called multiple times but only the last one at most delayed by timeToDelay will be executed\r\n * @param {(...args: any[]) => void} callback the callback to call\r\n * @param {number} timeToDelay delay the call in milliseconds\r\n * @return {(...args: any[]) => any} a function that can be called with the same interface as the callback but delayed\r\n * @internal\r\n */\r\nexport default function debounce(callback: (...args: any[]) => void, timeToDelay = 100, choose?: (current: IDebounceContext, next: IDebounceContext) => IDebounceContext) {\r\n  let tm = -1;\r\n  let ctx: IDebounceContext | null = null;\r\n  return function (this: any, ...args: any[]) {\r\n    if (tm >= 0) {\r\n      clearTimeout(tm);\r\n      tm = -1;\r\n    }\r\n    const next = {self: this, args};\r\n    ctx = ctx && choose ? choose(ctx, next) : next;\r\n    tm = self.setTimeout(() => {\r\n      console.assert(ctx != null);\r\n      callback.call(ctx!.self, ...ctx!.args);\r\n      ctx = null;\r\n    }, timeToDelay);\r\n  };\r\n}\r\n","import {IDataRow, IGroup} from '../model';\r\nimport {default as ActionColumn} from '../model/ActionColumn';\r\nimport Column from '../model/Column';\r\nimport {ERenderMode, ICellRendererFactory} from './interfaces';\r\nimport {forEachChild, noop, noRenderer} from './utils';\r\n\r\n/** @internal */\r\nexport default class ActionRenderer implements ICellRendererFactory {\r\n  readonly title = 'Default';\r\n\r\n  canRender(col: Column, mode: ERenderMode) {\r\n    return col instanceof ActionColumn && mode !== ERenderMode.SUMMARY;\r\n  }\r\n\r\n  create(col: ActionColumn) {\r\n    const actions = col.actions;\r\n    return {\r\n      template: `<div class='actions lu-hover-only'>${actions.map((a) => `<span title='${a.name}' class='${a.className || ''}'>${a.icon || ''}</span>`).join('')}</div>`,\r\n      update: (n: HTMLElement, d: IDataRow) => {\r\n        forEachChild(n, (ni: HTMLSpanElement, i: number) => {\r\n          ni.onclick = function (event) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            actions[i].action(d);\r\n          };\r\n        });\r\n      },\r\n      render: noop\r\n    };\r\n  }\r\n\r\n  createGroup(col: ActionColumn) {\r\n    const actions = col.groupActions;\r\n    return {\r\n      template: `<div class='actions lu-hover-only'>${actions.map((a) => `<span title='${a.name}' class='${a.className || ''}'>${a.icon || ''}</span>`).join('')}</div>`,\r\n      update: (n: HTMLElement, group: IGroup, rows: IDataRow[]) => {\r\n        forEachChild(n, (ni: HTMLSpanElement, i: number) => {\r\n          ni.onclick = function (event) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            actions[i].action(group, rows);\r\n          };\r\n        });\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary() {\r\n    return noRenderer;\r\n  }\r\n}\r\n","import {IDataRow, IGroup} from '../model';\r\nimport AggregateGroupColumn from '../model/AggregateGroupColumn';\r\nimport Column from '../model/Column';\r\nimport {AGGREGATE, CANVAS_HEIGHT} from '../styles';\r\nimport {default as IRenderContext, ICellRendererFactory} from './interfaces';\r\n\r\n/** @internal */\r\nexport default class AggregateGroupRenderer implements ICellRendererFactory {\r\n  readonly title = 'Default';\r\n\r\n  canRender(col: Column) {\r\n    return col instanceof AggregateGroupColumn;\r\n  }\r\n\r\n  create(col: AggregateGroupColumn, context: IRenderContext) {\r\n    const width = context.colWidth(col);\r\n    return {\r\n      template: `<div title=\"Collapse Group\"></div>`,\r\n      update(node: HTMLElement, _row: IDataRow, _i: number, group: IGroup) {\r\n        node.onclick = function (event) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          col.setAggregated(group, true);\r\n        };\r\n      },\r\n      render: (ctx: CanvasRenderingContext2D) => {\r\n        ctx.fillStyle = AGGREGATE.color;\r\n        // weird shift of 1\r\n        ctx.fillRect(width - AGGREGATE.width - 1, 0, AGGREGATE.strokeWidth, CANVAS_HEIGHT);\r\n      }\r\n    };\r\n  }\r\n\r\n  createGroup(col: AggregateGroupColumn) {\r\n    return {\r\n      template: `<div title=\"Expand Group\"></div>`,\r\n      update(node: HTMLElement, group: IGroup) {\r\n        node.onclick = function (event) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          col.setAggregated(group, false);\r\n        };\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary(col: AggregateGroupColumn, context: IRenderContext) {\r\n    return {\r\n      template: `<div title=\"(Un)Aggregate All\" data-icon=\"caret-down\"></div>`,\r\n      update: (node: HTMLElement) => {\r\n        const ranking = col.findMyRanker();\r\n        const right = Boolean(ranking && ranking.getGroups().every((g) => col.isAggregated(g)));\r\n\r\n        node.dataset.icon = right ? 'caret-right' : 'caret-down';\r\n\r\n        node.onclick = (evt) => {\r\n          evt.stopPropagation();\r\n          const ranking = col.findMyRanker();\r\n          if (!ranking || !context) {\r\n            return;\r\n          }\r\n          const aggregate = node.dataset.icon === 'caret-down';\r\n          node.dataset.icon = aggregate ? 'caret-right' : 'caret-down';\r\n          context.provider.aggregateAllOf(ranking, aggregate);\r\n        };\r\n      }\r\n    };\r\n  }\r\n}\r\n","import {IDataRow, IGroup} from '../model';\r\nimport Column from '../model/Column';\r\nimport StringColumn from '../model/StringColumn';\r\nimport {filterMissingMarkup, findFilterMissing} from '../ui/missing';\r\nimport {default as IRenderContext, ICellRendererFactory} from './interfaces';\r\nimport {renderMissingDOM} from './missing';\r\nimport {noop, setText, uniqueId} from './utils';\r\n\r\n\r\n/**\r\n * renders a string with additional alignment behavior\r\n * one instance factory shared among strings\r\n * @internal\r\n */\r\nexport default class StringCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Default';\r\n\r\n  canRender(col: Column) {\r\n    return col instanceof StringColumn;\r\n  }\r\n\r\n  create(col: StringColumn) {\r\n    const align = col.alignment || 'left';\r\n    return {\r\n      template: `<div${align !== 'left' ? ` class=\"lu-${align}\"` : ''}> </div>`,\r\n      update: (n: HTMLDivElement, d: IDataRow) => {\r\n        renderMissingDOM(n, col, d);\r\n        if (col.escape) {\r\n          setText(n, col.getLabel(d));\r\n        } else {\r\n          n.innerHTML = col.getLabel(d);\r\n        }\r\n      },\r\n      render: noop\r\n    };\r\n  }\r\n\r\n  private static exampleText(col: Column, rows: IDataRow[]) {\r\n    const numExampleRows = 5;\r\n    const examples = <string[]>[];\r\n    for (const row of rows) {\r\n      if (col.isMissing(row)) {\r\n        continue;\r\n      }\r\n      const v = col.getLabel(row);\r\n      examples.push(v);\r\n      if (examples.length >= numExampleRows) {\r\n        break;\r\n      }\r\n    }\r\n    return `${examples.join(', ')}${examples.length < rows.length ? ', &hellip;' : ''}`;\r\n  }\r\n\r\n  createGroup(col: StringColumn) {\r\n    return {\r\n      template: `<div> </div>`,\r\n      update: (n: HTMLDivElement, _group: IGroup, rows: IDataRow[]) => {\r\n        n.innerHTML = `${StringCellRenderer.exampleText(col, rows)}`;\r\n      }\r\n    };\r\n  }\r\n\r\n  private static interactiveSummary(col: StringColumn, node: HTMLElement) {\r\n    const form = <HTMLFormElement>node;\r\n    const filterMissing = findFilterMissing(node);\r\n    const input = <HTMLInputElement>node.querySelector('input[type=\"text\"]');\r\n    const isRegex = <HTMLInputElement>node.querySelector('input[type=\"checkbox\"]');\r\n\r\n    const update = () => {\r\n      input.disabled = filterMissing.checked;\r\n      isRegex.disabled = filterMissing.checked;\r\n\r\n      if (filterMissing.checked) {\r\n        col.setFilter(StringColumn.FILTER_MISSING);\r\n        return;\r\n      }\r\n      const valid = input.value.trim();\r\n      filterMissing.disabled = valid.length > 0;\r\n      if (valid.length <= 0) {\r\n        col.setFilter(null);\r\n        return;\r\n      }\r\n      col.setFilter(isRegex.checked ? new RegExp(input.value) : input.value);\r\n    };\r\n\r\n    filterMissing.onchange = update;\r\n    input.onchange = update;\r\n    isRegex.onchange = update;\r\n    form.onsubmit = (evt) => {\r\n      evt.preventDefault();\r\n      evt.stopPropagation();\r\n      update();\r\n      return false;\r\n    };\r\n\r\n    return (actCol: StringColumn) => {\r\n      col = actCol;\r\n      let bak = col.getFilter() || '';\r\n      const bakMissing = bak === StringColumn.FILTER_MISSING;\r\n      if (bakMissing) {\r\n        bak = '';\r\n      }\r\n      filterMissing.checked = bakMissing;\r\n      input.value = bak instanceof RegExp ? bak.source : bak;\r\n      isRegex.checked = bak instanceof RegExp;\r\n      filterMissing.disabled = input.value.trim().length > 0;\r\n      input.disabled = filterMissing.checked;\r\n      isRegex.disabled = filterMissing.checked;\r\n    };\r\n  }\r\n\r\n  createSummary(col: StringColumn, context: IRenderContext, interactive: boolean) {\r\n    if (!interactive) {\r\n      return {\r\n        template: `<div></div>`,\r\n        update: (node: HTMLElement) => {\r\n          const filter = col.getFilter() || '';\r\n          node.textContent = toString(filter);\r\n        }\r\n      };\r\n    }\r\n    let bak = col.getFilter() || '';\r\n    const bakMissing = bak === StringColumn.FILTER_MISSING;\r\n    if (bakMissing) {\r\n      bak = '';\r\n    }\r\n    let update: (col: StringColumn) => void;\r\n    const id = uniqueId(context.idPrefix);\r\n    return {\r\n      template: `<form><input type=\"text\" placeholder=\"Filter ${col.desc.label}...\" autofocus value=\"${(bak instanceof RegExp) ? bak.source : bak}\">\r\n          <div class=\"lu-checkbox\"><input id=\"${id}\" type=\"checkbox\" ${(bak instanceof RegExp) ? 'checked=\"checked\"' : ''}><label for=\"${id}\">RegExp</label></div>\r\n          ${filterMissingMarkup(bakMissing, context.idPrefix)}</form>`,\r\n      update: (node: HTMLElement) => {\r\n        if (!update) {\r\n          update = StringCellRenderer.interactiveSummary(col, node);\r\n        }\r\n        update(col);\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\nfunction toString(filter: null | string | RegExp) {\r\n  if (filter == null || filter === '' || filter === StringColumn.FILTER_MISSING) {\r\n    return '';\r\n  }\r\n  if (filter instanceof RegExp) {\r\n    return filter.source;\r\n  }\r\n  return String(filter);\r\n}\r\n","import {IDataRow} from '../model';\r\nimport AnnotateColumn from '../model/AnnotateColumn';\r\nimport Column from '../model/Column';\r\nimport StringCellRenderer from './StringCellRenderer';\r\nimport {noop} from './utils';\r\n\r\n/** @internal */\r\nexport default class AnnotationRenderer extends StringCellRenderer {\r\n  readonly title = 'Default';\r\n\r\n  canRender(col: Column) {\r\n    return super.canRender(col) && col instanceof AnnotateColumn;\r\n  }\r\n\r\n  create(col: AnnotateColumn) {\r\n    return {\r\n      template: `<div class='annotations text'>\r\n        <input class='lu-hover-only'>\r\n        <span class='text lu-not-hover'></span>\r\n       </div>`,\r\n      update: (n: HTMLElement, d: IDataRow) => {\r\n        const input: HTMLInputElement = <HTMLInputElement>n.firstElementChild!;\r\n        input.onchange = () => {\r\n          col.setValue(d, input.value);\r\n        };\r\n        input.onclick = (event) => {\r\n          event.stopPropagation();\r\n        };\r\n        n.lastElementChild!.textContent = input.value = col.getLabel(d);\r\n      },\r\n      render: noop\r\n    };\r\n  }\r\n}\r\n","import {IDataRow} from '../model';\r\nimport Column from '../model/Column';\r\nimport {IImposer} from './interfaces';\r\nimport {isMapAbleColumn} from '../model/MappingFunction';\r\n\r\n/** @internal */\r\nexport function colorOf(col: Column, row: IDataRow | null, imposer?: IImposer, valueHint?: number) {\r\n  if (imposer && imposer.color) {\r\n    return imposer.color(row, valueHint);\r\n  }\r\n  if (!row) {\r\n    if (isMapAbleColumn(col) && valueHint != null) {\r\n      return col.getColorMapping().apply(valueHint);\r\n    }\r\n    return col.color;\r\n  }\r\n  return col.getColor(row);\r\n}\r\n","import {ICategoricalStatistics, IStatistics} from '../internal';\r\nimport {IDataRow, INumberColumn, isNumberColumn} from '../model';\r\nimport Column from '../model/Column';\r\nimport {setText, adaptDynamicColorToBgColor, noRenderer} from './utils';\r\nimport {isNumbersColumn} from '../model';\r\nimport {CANVAS_HEIGHT} from '../styles';\r\nimport {colorOf} from './impose';\r\nimport {default as IRenderContext, ERenderMode, ICellRendererFactory, IImposer} from './interfaces';\r\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\r\n\r\n\r\n/** @internal */\r\nexport default class BarCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Bar';\r\n\r\n  /**\r\n   * flag to always render the value\r\n   * @type {boolean}\r\n   */\r\n\r\n  constructor(private readonly renderValue: boolean = false) {\r\n  }\r\n\r\n  canRender(col: Column, mode: ERenderMode) {\r\n    return mode === ERenderMode.CELL && isNumberColumn(col) && !isNumbersColumn(col);\r\n  }\r\n\r\n  create(col: INumberColumn, context: IRenderContext, _hist: IStatistics | ICategoricalStatistics | null, imposer?: IImposer) {\r\n    const width = context.colWidth(col);\r\n    return {\r\n      template: `<div title=\"\">\r\n          <div style='background-color: ${col.color}'>\r\n            <span ${this.renderValue ? '' : 'class=\"lu-hover-only\"'}></span>\r\n          </div>\r\n        </div>`,\r\n      update: (n: HTMLDivElement, d: IDataRow) => {\r\n        const value = col.getNumber(d);\r\n        const missing = renderMissingDOM(n, col, d);\r\n        const w = isNaN(value) ? 0 : Math.round(value * 100 * 100) / 100;\r\n        const title = col.getLabel(d);\r\n        n.title = title;\r\n\r\n        const bar = <HTMLElement>n.firstElementChild!;\r\n        bar.style.width = missing ? '100%' : `${w}%`;\r\n        const color = colorOf(col, d, imposer, value);\r\n        bar.style.backgroundColor = missing ? null : color;\r\n        setText(bar.firstElementChild!, title);\r\n        const item = <HTMLElement>bar.firstElementChild!;\r\n        setText(item, title);\r\n        adaptDynamicColorToBgColor(item, color || Column.DEFAULT_COLOR, title, w / 100);\r\n      },\r\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow) => {\r\n        if (renderMissingCanvas(ctx, col, d, width)) {\r\n          return;\r\n        }\r\n        const value = col.getNumber(d);\r\n        ctx.fillStyle = colorOf(col, d, imposer, value) || Column.DEFAULT_COLOR;\r\n        const w = width * value;\r\n        ctx.fillRect(0, 0, isNaN(w) ? 0 : w, CANVAS_HEIGHT);\r\n\r\n      }\r\n    };\r\n  }\r\n\r\n  createGroup() {\r\n    return noRenderer;\r\n  }\r\n\r\n  createSummary() {\r\n    return noRenderer;\r\n  }\r\n}\r\n","import {IDataRow} from '../model';\r\nimport Column from '../model/Column';\r\nimport {ERenderMode, ICellRendererFactory, IGroupCellRenderer, ISummaryRenderer, ICellRenderer} from './interfaces';\r\nimport {renderMissingDOM} from './missing';\r\nimport {noop, noRenderer, setText} from './utils';\r\n\r\n/**\r\n * default renderer instance rendering the value as a text\r\n */\r\nexport class DefaultCellRenderer implements ICellRendererFactory {\r\n  title = 'String';\r\n  groupTitle = 'None';\r\n  summaryTitle = 'None';\r\n\r\n  canRender(_col: Column, _mode: ERenderMode) {\r\n    return true;\r\n  }\r\n\r\n  create(col: Column): ICellRenderer {\r\n    return {\r\n      template: `<div> </div>`,\r\n      update: (n: HTMLDivElement, d: IDataRow) => {\r\n        renderMissingDOM(n, col, d);\r\n        setText(n, col.getLabel(d));\r\n      },\r\n      render: noop\r\n    };\r\n  }\r\n\r\n  createGroup(_col: Column): IGroupCellRenderer {\r\n    return noRenderer;\r\n  }\r\n\r\n  createSummary(): ISummaryRenderer {\r\n    return noRenderer;\r\n  }\r\n}\r\n","import BooleanColumn from '../model/BooleanColumn';\r\nimport Column from '../model/Column';\r\nimport {DefaultCellRenderer} from './DefaultCellRenderer';\r\nimport {ERenderMode} from './interfaces';\r\n\r\n/** @internal */\r\nexport default class BooleanCellRenderer extends DefaultCellRenderer {\r\n  readonly title = 'Default';\r\n\r\n  canRender(col: Column, mode: ERenderMode) {\r\n    return col instanceof BooleanColumn && mode === ERenderMode.CELL;\r\n  }\r\n\r\n  create(col: Column) {\r\n    const r = super.create(col);\r\n    (<any>r).template = `<div class=\"lu-center\"> </div>`;\r\n    return r;\r\n  }\r\n}\r\n","import {IBoxPlotData, ICategoricalStatistics, IStatistics, LazyBoxPlotData} from '../internal';\r\nimport {IDataRow, IGroup, isNumberColumn} from '../model';\r\nimport {default as BoxPlotColumn} from '../model/BoxPlotColumn';\r\nimport Column from '../model/Column';\r\nimport {IBoxPlotColumn, INumberColumn, INumbersColumn, isBoxPlotColumn, isNumbersColumn} from '../model/INumberColumn';\r\nimport NumberColumn from '../model/NumberColumn';\r\nimport {BOX_PLOT, CANVAS_HEIGHT, DOT} from '../styles';\r\nimport {colorOf} from './impose';\r\nimport {default as IRenderContext, ERenderMode, ICellRendererFactory, IImposer} from './interfaces';\r\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\r\n\r\n/** @internal */\r\nexport function computeLabel(v: IBoxPlotData) {\r\n  if (v == null) {\r\n    return '';\r\n  }\r\n  const f = BoxPlotColumn.DEFAULT_FORMATTER;\r\n  return `min = ${f(v.min)}\\nq1 = ${f(v.q1)}\\nmedian = ${f(v.median)}\\nq3 = ${f(v.q3)}\\nmax = ${f(v.max)}`;\r\n}\r\n\r\n/** @internal */\r\nexport default class BoxplotCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Box Plot';\r\n\r\n  canRender(col: Column, mode: ERenderMode) {\r\n    return (isBoxPlotColumn(col) && mode === ERenderMode.CELL || (isNumberColumn(col) && mode !== ERenderMode.CELL));\r\n  }\r\n\r\n  create(col: IBoxPlotColumn, context: IRenderContext, _hist: IStatistics | ICategoricalStatistics | null, imposer?: IImposer) {\r\n    const sortMethod = <keyof IBoxPlotData>col.getSortMethod();\r\n    const sortedByMe = col.isSortedByMe().asc !== undefined;\r\n    const width = context.colWidth(col);\r\n    return {\r\n      template: `<div title=\"\">\r\n                    <div><div></div><div></div></div>\r\n                 </div>`,\r\n      update: (n: HTMLElement, d: IDataRow) => {\r\n        const data = col.getBoxPlotData(d);\r\n        const missing = !data || renderMissingDOM(n, col, d);\r\n        if (missing) {\r\n          return;\r\n        }\r\n        const label = col.getRawBoxPlotData(d)!;\r\n        renderDOMBoxPlot(n, data!, label, sortedByMe ? sortMethod : '', colorOf(col, d, imposer));\r\n      },\r\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow) => {\r\n        if (renderMissingCanvas(ctx, col, d, width)) {\r\n          return;\r\n        }\r\n\r\n        // Rectangle\r\n        const data = col.getBoxPlotData(d);\r\n        if (!data) {\r\n          return;\r\n        }\r\n\r\n        const scaled = {\r\n          min: data.min * width,\r\n          median: data.median * width,\r\n          q1: data.q1 * width,\r\n          q3: data.q3 * width,\r\n          max: data.max * width,\r\n          outlier: data.outlier ? data.outlier.map((d) => d * width) : undefined\r\n        };\r\n        renderBoxPlot(ctx, scaled, sortedByMe ? sortMethod : '', colorOf(col, d, imposer), CANVAS_HEIGHT, 0);\r\n      }\r\n    };\r\n  }\r\n\r\n  private static createAggregatedBoxPlot(col: INumbersColumn, rows: IDataRow[], raw = false): IBoxPlotData {\r\n    // concat all values\r\n    const vs = (<number[]>[]).concat(...rows.map((r) => (raw ? col.getRawNumbers(r) : col.getNumber(r))));\r\n    return new LazyBoxPlotData(vs);\r\n  }\r\n\r\n  createGroup(col: INumberColumn, _context: IRenderContext, _hist: IStatistics | ICategoricalStatistics | null, imposer?: IImposer) {\r\n    const sort = (col instanceof NumberColumn && col.isGroupSortedByMe().asc !== undefined) ? col.getSortMethod() : '';\r\n    return {\r\n      template: `<div title=\"\">\r\n                    <div><div></div><div></div></div>\r\n                 </div>`,\r\n      update: (n: HTMLElement, _group: IGroup, rows: IDataRow[]) => {\r\n        if (rows.every((row) => col.isMissing(row))) {\r\n          renderMissingDOM(n, col, rows[0]); // doesn't matter since all\r\n          return;\r\n        }\r\n        n.classList.remove('lu-missing');\r\n\r\n        let box: IBoxPlotData, label: IBoxPlotData;\r\n\r\n        if (isNumbersColumn(col)) {\r\n          box = BoxplotCellRenderer.createAggregatedBoxPlot(col, rows);\r\n          label = BoxplotCellRenderer.createAggregatedBoxPlot(col, rows, true);\r\n        } else {\r\n          box = new LazyBoxPlotData(rows.map((row) => col.getNumber(row)));\r\n          label = new LazyBoxPlotData(rows.map((row) => col.getRawNumber(row)));\r\n        }\r\n        renderDOMBoxPlot(n, box, label, sort, colorOf(col, null, imposer));\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary(col: INumberColumn, _comtext: IRenderContext, _interactive: boolean, imposer?: IImposer) {\r\n    return {\r\n      template: `<div title=\"\">\r\n                    <div><div></div><div></div></div>\r\n                 </div>`,\r\n      update: (n: HTMLElement, hist: IStatistics | null) => {\r\n        if (hist == null || hist.count === 0) {\r\n          n.classList.add('lu-missing');\r\n          return;\r\n        }\r\n        n.classList.remove('lu-missing');\r\n        const sort = (col instanceof NumberColumn && col.isGroupSortedByMe().asc !== undefined) ? col.getSortMethod() : '';\r\n\r\n        renderDOMBoxPlot(n, hist, hist, sort, colorOf(col, null, imposer));\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\nfunction renderDOMBoxPlot(n: HTMLElement, data: IBoxPlotData, label: IBoxPlotData, sort: string, color: string | null) {\r\n  n.title = computeLabel(label);\r\n\r\n  const whiskers = <HTMLElement>n.firstElementChild;\r\n  const box = <HTMLElement>whiskers.firstElementChild;\r\n  const median = <HTMLElement>whiskers.lastElementChild;\r\n\r\n  const leftWhisker = Math.max(data.q1 - 1.5 * (data.q3 - data.q1), data.min);\r\n  const rightWhisker = Math.min(data.q3 + 1.5 * (data.q3 - data.q1), data.max);\r\n  whiskers.style.left = `${Math.round(leftWhisker * 100)}%`;\r\n  const range = rightWhisker - leftWhisker;\r\n  whiskers.style.width = `${Math.round(range * 100)}%`;\r\n\r\n  //relative within the whiskers\r\n  box.style.left = `${Math.round((data.q1 - leftWhisker) / range * 100)}%`;\r\n  box.style.width = `${Math.round((data.q3 - data.q1) / range * 100)}%`;\r\n  box.style.backgroundColor = color;\r\n\r\n  //relative within the whiskers\r\n  median.style.left = `${Math.round((data.median - leftWhisker) / range * 100)}%`;\r\n\r\n  if (!data.outlier || data.outlier.length === 0) {\r\n    whiskers.dataset.sort = sort;\r\n    if (n.children.length > 1) {\r\n      n.innerHTML = '';\r\n      n.appendChild(whiskers);\r\n    }\r\n    return;\r\n  }\r\n\r\n  // match lengths\r\n  const outliers = <HTMLElement[]>Array.from(n.children).slice(1);\r\n  outliers.slice(data.outlier.length).forEach((v) => v.remove());\r\n  for (let i = outliers.length; i < data.outlier.length; ++i) {\r\n    const p = n.ownerDocument.createElement('div');\r\n    outliers.push(p);\r\n    n.appendChild(p);\r\n  }\r\n\r\n  data.outlier.forEach((v, i) => {\r\n    delete outliers[i].dataset.sort;\r\n    outliers[i].style.left = `${Math.round(v * 100)}%`;\r\n  });\r\n\r\n  if (sort === 'min') {\r\n    whiskers.dataset.sort = '';\r\n    outliers[0].dataset.sort = 'min';\r\n  } else if (sort === 'max') {\r\n    whiskers.dataset.sort = '';\r\n    outliers[outliers.length - 1].dataset.sort = 'max';\r\n  }\r\n}\r\n\r\nfunction renderBoxPlot(ctx: CanvasRenderingContext2D, box: IBoxPlotData, sort: string, color: string | null, height: number, topPadding: number) {\r\n  const left = Math.max((box.q1 - 1.5 * (box.q3 - box.q1)), box.min);\r\n  const right = Math.min((box.q3 + 1.5 * (box.q3 - box.q1)), box.max);\r\n\r\n  ctx.fillStyle = color || BOX_PLOT.box;\r\n  ctx.strokeStyle = BOX_PLOT.stroke;\r\n  ctx.beginPath();\r\n  ctx.rect(box.q1, 0, box.q3 - box.q1, height);\r\n  ctx.fill();\r\n  ctx.stroke();\r\n\r\n  //Line\r\n  const bottomPos = height - topPadding;\r\n  const middlePos = height / 2;\r\n\r\n  ctx.beginPath();\r\n  ctx.moveTo(left, middlePos);\r\n  ctx.lineTo(box.q1, middlePos);\r\n  ctx.moveTo(left, topPadding);\r\n  ctx.lineTo(left, bottomPos);\r\n  ctx.moveTo(box.median, 0);\r\n  ctx.lineTo(box.median, height);\r\n  ctx.moveTo(box.q3, middlePos);\r\n  ctx.lineTo(right, middlePos);\r\n  ctx.moveTo(right, topPadding);\r\n  ctx.lineTo(right, bottomPos);\r\n  ctx.stroke();\r\n  ctx.fill();\r\n\r\n  if (sort !== '') {\r\n    ctx.strokeStyle = BOX_PLOT.sort;\r\n    ctx.beginPath();\r\n    ctx.moveTo(<number>box[<keyof IBoxPlotData>sort], topPadding);\r\n    ctx.lineTo(<number>box[<keyof IBoxPlotData>sort], height - topPadding);\r\n    ctx.stroke();\r\n    ctx.fill();\r\n  }\r\n\r\n  if (!box.outlier) {\r\n    return;\r\n  }\r\n  ctx.fillStyle = BOX_PLOT.outlier;\r\n  box.outlier.forEach((v) => {\r\n    // currently dots with 3px\r\n    ctx.fillRect(Math.max(v - DOT.size / 2, 0), middlePos - DOT.size / 2, DOT.size, DOT.size);\r\n  });\r\n}\r\n","import {hsl} from 'd3-color';\r\nimport {ICategoricalStatistics, IStatistics} from '../internal/math';\r\nimport {IDataRow, INumberColumn, isNumberColumn, isMapAbleColumn} from '../model';\r\nimport Column from '../model/Column';\r\nimport {isNumbersColumn} from '../model/INumberColumn';\r\nimport {CANVAS_HEIGHT} from '../styles';\r\nimport {colorOf} from './impose';\r\nimport {default as IRenderContext, ERenderMode, ICellRendererFactory, IImposer} from './interfaces';\r\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\r\nimport {noRenderer, setText} from './utils';\r\n\r\n/** @internal */\r\nexport function toHeatMapColor(v: number | null, row: IDataRow, col: INumberColumn, imposer?: IImposer) {\r\n  if (v == null || isNaN(v)) {\r\n    v = 1; // max = brightest\r\n  }\r\n  if (imposer || !isMapAbleColumn(col)) {\r\n    //hsl space encoding, encode in lightness\r\n    const color = hsl(colorOf(col, row, imposer, v) || Column.DEFAULT_COLOR);\r\n    color.l = 1 - v; // largest value = darkest color\r\n    return color.toString();\r\n  }\r\n  const map = col.getColorMapping();\r\n  const valueColor = map.apply(v);\r\n  if (map.type === 'solid') {\r\n    //hsl space encoding, encode in lightness\r\n    const color = hsl(valueColor);\r\n    color.l = 1 - v; // largest value = darkest color\r\n    return color.toString();\r\n  }\r\n  // some custom logic that maps to another value\r\n  return valueColor;\r\n}\r\n\r\n/** @internal */\r\nexport default class BrightnessCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Brightness';\r\n\r\n  canRender(col: Column, mode: ERenderMode) {\r\n    return isNumberColumn(col) && mode === ERenderMode.CELL && !isNumbersColumn(col);\r\n  }\r\n\r\n  create(col: INumberColumn, context: IRenderContext, _hist: IStatistics | ICategoricalStatistics | null, imposer?: IImposer) {\r\n    const width = context.colWidth(col);\r\n    return {\r\n      template: `<div title=\"\">\r\n        <div style=\"background-color: ${col.color}\"></div><div> </div>\r\n      </div>`,\r\n      update: (n: HTMLElement, d: IDataRow) => {\r\n        const missing = renderMissingDOM(n, col, d);\r\n        n.title = col.getLabel(d);\r\n        (<HTMLDivElement>n.firstElementChild!).style.backgroundColor = missing ? null : toHeatMapColor(col.getNumber(d), d, col, imposer);\r\n        setText(<HTMLSpanElement>n.lastElementChild!, n.title);\r\n      },\r\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow) => {\r\n        if (renderMissingCanvas(ctx, col, d, width)) {\r\n          return;\r\n        }\r\n        ctx.fillStyle = toHeatMapColor(col.getNumber(d), d, col, imposer);\r\n        ctx.fillRect(0, 0, width, CANVAS_HEIGHT);\r\n      }\r\n    };\r\n  }\r\n\r\n  createGroup() {\r\n    return noRenderer;\r\n  }\r\n\r\n  createSummary() {\r\n    return noRenderer;\r\n  }\r\n}\r\n","import {DENSE_HISTOGRAM} from '../config';\r\nimport {computeHist, ICategoricalBin, ICategoricalStatistics} from '../internal/math';\r\nimport {ICategoricalColumn, IDataRow, IGroup, isCategoricalColumn} from '../model';\r\nimport CategoricalColumn from '../model/CategoricalColumn';\r\nimport Column from '../model/Column';\r\nimport {isCategoryIncluded} from '../model/ICategoricalColumn';\r\nimport OrdinalColumn from '../model/OrdinalColumn';\r\nimport {CANVAS_HEIGHT} from '../styles';\r\nimport {filterMissingNumberMarkup, updateFilterMissingNumberMarkup} from '../ui/missing';\r\nimport {default as IRenderContext, ICellRendererFactory} from './interfaces';\r\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\r\nimport {setText, wideEnough, forEach} from './utils';\r\n\r\n/** @internal */\r\nexport default class CategoricalCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Color';\r\n  readonly groupTitle = 'Histogram';\r\n\r\n  canRender(col: Column) {\r\n    return isCategoricalColumn(col);\r\n  }\r\n\r\n  create(col: ICategoricalColumn, context: IRenderContext) {\r\n    const width = context.colWidth(col);\r\n    return {\r\n      template: `<div>\r\n        <div></div><div></div>\r\n      </div>`,\r\n      update: (n: HTMLElement, d: IDataRow) => {\r\n        renderMissingDOM(n, col, d);\r\n        const v = col.getCategory(d);\r\n        (<HTMLDivElement>n.firstElementChild!).style.backgroundColor = v ? v.color : null;\r\n        setText(<HTMLSpanElement>n.lastElementChild!, col.getLabel(d));\r\n      },\r\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow) => {\r\n        if (renderMissingCanvas(ctx, col, d, width)) {\r\n          return;\r\n        }\r\n        const v = col.getCategory(d);\r\n        ctx.fillStyle = v ? v.color : '';\r\n        ctx.fillRect(0, 0, width, CANVAS_HEIGHT);\r\n      }\r\n    };\r\n  }\r\n\r\n  createGroup(col: ICategoricalColumn, _context: IRenderContext, globalHist: ICategoricalStatistics | null) {\r\n    const {template, update} = hist(col, false);\r\n    return {\r\n      template: `${template}</div>`,\r\n      update: (n: HTMLElement, _group: IGroup, rows: IDataRow[]) => {\r\n        const {maxBin, hist} = computeHist(rows, (r: IDataRow) => col.getCategory(r), col.categories);\r\n\r\n        const max = Math.max(maxBin, globalHist ? globalHist.maxBin : 0);\r\n        update(n, max, hist);\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary(col: ICategoricalColumn, ctx: IRenderContext, interactive: boolean) {\r\n    return (col instanceof CategoricalColumn || col instanceof OrdinalColumn) ? interactiveSummary(col, interactive, ctx.idPrefix) : staticSummary(col, interactive);\r\n  }\r\n}\r\n\r\nfunction staticSummary(col: ICategoricalColumn, interactive: boolean) {\r\n  const {template, update} = hist(col, interactive);\r\n  return {\r\n    template: `${template}</div>`,\r\n    update: (n: HTMLElement, hist: ICategoricalStatistics | null) => {\r\n      n.classList.toggle('lu-missing', !hist);\r\n      if (!hist) {\r\n        return;\r\n      }\r\n      update(n, hist.maxBin, hist.hist);\r\n    }\r\n  };\r\n}\r\n\r\nfunction interactiveSummary(col: CategoricalColumn | OrdinalColumn, interactive: boolean, idPrefix: string) {\r\n  const {template, update} = hist(col, interactive || wideEnough(col));\r\n  let filterUpdate: (missing: number, col: CategoricalColumn | OrdinalColumn) => void;\r\n  return {\r\n    template: `${template}${interactive ? filterMissingNumberMarkup(false, 0, idPrefix) : ''}</div>`,\r\n    update: (n: HTMLElement, hist: ICategoricalStatistics | null) => {\r\n      if (!filterUpdate) {\r\n        filterUpdate = interactiveHist(col, n);\r\n      }\r\n      filterUpdate(hist ? hist.missing : 0, col);\r\n\r\n      n.classList.toggle('lu-missing', !hist);\r\n      if (!hist) {\r\n        return;\r\n      }\r\n      update(n, hist.maxBin, hist.hist);\r\n    }\r\n  };\r\n}\r\n\r\nfunction hist(col: ICategoricalColumn, showLabels: boolean) {\r\n  const bins = col.categories.map((c) => `<div title=\"${c.label}: 0\" data-cat=\"${c.name}\" ${showLabels ? `data-title=\"${c.label}\"` : ''}><div style=\"height: 0; background-color: ${c.color}\"></div></div>`).join('');\r\n\r\n  return {\r\n    template: `<div${col.dataLength! > DENSE_HISTOGRAM ? 'class=\"lu-dense\"' : ''}>${bins}`, // no closing div to be able to append things\r\n    update: (n: HTMLElement, maxBin: number, hist: ICategoricalBin[]) => {\r\n      forEach(n, '[data-cat]', (d: HTMLElement, i) => {\r\n        const {y} = hist[i];\r\n        d.title = `${col.categories[i].label}: ${y}`;\r\n        const inner = <HTMLElement>d.firstElementChild!;\r\n        inner.style.height = `${Math.round(y * 100 / maxBin)}%`;\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\nexport function interactiveHist(col: CategoricalColumn | OrdinalColumn, node: HTMLElement) {\r\n  const bins = <HTMLElement[]>Array.from(node.querySelectorAll('[data-cat]'));\r\n\r\n  bins.forEach((bin, i) => {\r\n    const cat = col.categories[i];\r\n\r\n    bin.onclick = (evt) => {\r\n      evt.preventDefault();\r\n      evt.stopPropagation();\r\n\r\n      // toggle filter\r\n      const old = col.getFilter();\r\n      if (old == null || !Array.isArray(old.filter)) {\r\n        // deselect\r\n        const without = col.categories.slice();\r\n        bin.dataset.filtered = 'filtered';\r\n        without.splice(i, 1);\r\n        col.setFilter({\r\n          filterMissing: old ? old.filterMissing : false,\r\n          filter: without.map((d) => d.name)\r\n        });\r\n        return;\r\n      }\r\n      const filter = old.filter.slice();\r\n      const contained = filter.indexOf(cat.name);\r\n      if (contained >= 0) {\r\n        // remove\r\n        bin.dataset.filtered = 'filtered';\r\n        filter.splice(contained, 1);\r\n      } else {\r\n        // readd\r\n        delete bin.dataset.filtered;\r\n        filter.push(cat.name);\r\n      }\r\n      col.setFilter({\r\n        filterMissing: old.filterMissing,\r\n        filter\r\n      });\r\n    };\r\n  });\r\n\r\n\r\n  const filterMissing = <HTMLInputElement>node.querySelector('input')!;\r\n\r\n  if (filterMissing) {\r\n    filterMissing.onchange = () => {\r\n      // toggle filter\r\n      const v = filterMissing.checked;\r\n      const old = col.getFilter();\r\n      if (old == null) {\r\n        col.setFilter(v ? {filterMissing: v, filter: col.categories.map((d) => d.name)} : null);\r\n      } else {\r\n        col.setFilter({filterMissing: v, filter: old.filter});\r\n      }\r\n    };\r\n  }\r\n\r\n\r\n  return (missing: number, actCol: CategoricalColumn | OrdinalColumn) => {\r\n    col = actCol;\r\n    const cats = col.categories;\r\n    const f = col.getFilter();\r\n    bins.forEach((bin, i) => {\r\n      if (!isCategoryIncluded(f, cats[i])) {\r\n        bin.dataset.filtered = 'filtered';\r\n      } else {\r\n        delete bin.dataset.filtered;\r\n      }\r\n    });\r\n    if (filterMissing) {\r\n      filterMissing.checked = f != null && f.filterMissing;\r\n      updateFilterMissingNumberMarkup(<HTMLElement>filterMissing.parentElement, missing);\r\n    }\r\n  };\r\n}\r\n","import {ICategory, IDataRow, IGroup} from '../model';\r\nimport Column from '../model/Column';\r\nimport {ISetColumn, isSetColumn} from '../model/ICategoricalColumn';\r\nimport {CANVAS_HEIGHT, UPSET} from '../styles';\r\nimport {default as IRenderContext, ERenderMode, ICellRendererFactory} from './interfaces';\r\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\r\nimport {noRenderer} from './utils';\r\n\r\n/** @internal */\r\nexport default class UpSetCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Matrix';\r\n\r\n  canRender(col: Column, mode: ERenderMode) {\r\n    return isSetColumn(col) && mode !== ERenderMode.SUMMARY;\r\n  }\r\n\r\n  private static calculateSetPath(setData: boolean[], cellDimension: number) {\r\n    const catindexes: number[] = [];\r\n    setData.forEach((d: boolean, i: number) => (d) ? catindexes.push(i) : -1);\r\n\r\n    const left = (catindexes[0] * cellDimension) + (cellDimension / 2);\r\n    const right = (catindexes[catindexes.length - 1] * cellDimension) + (cellDimension / 2);\r\n\r\n    return {left, right};\r\n  }\r\n\r\n  private static createDOMContext(col: ISetColumn) {\r\n    const categories = col.categories;\r\n    let templateRows = '';\r\n    for (const cat of categories) {\r\n      templateRows += `<div title=\"${cat.label}\"></div>`;\r\n    }\r\n    return {\r\n      templateRow: templateRows,\r\n      render: (n: HTMLElement, value: boolean[]) => {\r\n        Array.from(n.children).slice(1).forEach((d, i) => {\r\n          const v = value[i];\r\n          d.classList.toggle('enabled', v);\r\n        });\r\n\r\n        const line = <HTMLElement>n.firstElementChild;\r\n        const left = value.findIndex((d) => d);\r\n        const right = (value.length - 1) - value.reverse().findIndex((d) => d);\r\n\r\n        if (left < 0 || left === right) {\r\n          line.style.display = 'none';\r\n          return;\r\n        }\r\n        line.style.display = null;\r\n        line.style.left = `${Math.round(100 * (left + 0.5) / value.length)}%`;\r\n        line.style.width = `${Math.round(100 * (right - left) / value.length)}%`;\r\n      }\r\n    };\r\n  }\r\n\r\n  create(col: ISetColumn, context: IRenderContext) {\r\n    const {templateRow, render} = UpSetCellRenderer.createDOMContext(col);\r\n    const width = context.colWidth(col);\r\n    const cellDimension = width / col.dataLength!;\r\n\r\n    return {\r\n      template: `<div><div></div>${templateRow}</div>`,\r\n      update: (n: HTMLElement, d: IDataRow) => {\r\n        if (renderMissingDOM(n, col, d)) {\r\n          return;\r\n        }\r\n        render(n, col.getValues(d));\r\n      },\r\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow) => {\r\n        if (renderMissingCanvas(ctx, col, d, width)) {\r\n          return;\r\n        }\r\n        // Circle\r\n        const data = col.getValues(d);\r\n\r\n        const hasTrueValues = data.some((d) => d); //some values are true?\r\n\r\n        ctx.save();\r\n        ctx.fillStyle = UPSET.circle;\r\n        ctx.strokeStyle = UPSET.stroke;\r\n        if (hasTrueValues) {\r\n          const {left, right} = UpSetCellRenderer.calculateSetPath(data, cellDimension);\r\n          ctx.beginPath();\r\n          ctx.moveTo(left, CANVAS_HEIGHT / 2);\r\n          ctx.lineTo(right, CANVAS_HEIGHT / 2);\r\n          ctx.stroke();\r\n        }\r\n\r\n        data.forEach((d, j) => {\r\n          const posx = (j * cellDimension);\r\n          ctx.beginPath();\r\n          ctx.globalAlpha = d ? 1 : UPSET.inactive;\r\n          ctx.fillRect(posx, 0, cellDimension, CANVAS_HEIGHT);\r\n          ctx.fill();\r\n        });\r\n\r\n        ctx.restore();\r\n      }\r\n    };\r\n  }\r\n\r\n  createGroup(col: ISetColumn) {\r\n    const {templateRow, render} = UpSetCellRenderer.createDOMContext(col);\r\n    return {\r\n      template: `<div><div></div>${templateRow}</div>`,\r\n      update: (n: HTMLElement, _group: IGroup, rows: IDataRow[]) => {\r\n        const value = union(col, rows);\r\n        render(n, value);\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary() {\r\n    return noRenderer;\r\n  }\r\n}\r\n\r\n\r\nexport function union(col: ISetColumn, rows: IDataRow[]) {\r\n  const values = new Set<ICategory>();\r\n  rows.forEach((d) => {\r\n    col.getSet(d).forEach((c) => values.add(c));\r\n  });\r\n  return col.categories.map((cat) => values.has(cat));\r\n}\r\n","import {IDataRow, IGroup} from '../model';\r\nimport Column from '../model/Column';\r\nimport {ISetColumn, isSetColumn} from '../model/ICategoricalColumn';\r\nimport {CANVAS_HEIGHT} from '../styles';\r\nimport {default as IRenderContext, ICellRendererFactory} from './interfaces';\r\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\r\nimport {union} from './UpSetCellRenderer';\r\nimport {noop, wideEnough, forEachChild} from './utils';\r\n\r\n/** @internal */\r\nexport default class CategoricalHeatmapCellRenderer implements ICellRendererFactory {\r\n  title = 'Heatmap';\r\n\r\n  canRender(col: Column) {\r\n    return isSetColumn(col);\r\n  }\r\n\r\n  private static createDOMContext(col: ISetColumn) {\r\n    const categories = col.categories;\r\n    let templateRows = '';\r\n    for (const cat of categories) {\r\n      templateRows += `<div title=\"${cat.label}\" style=\"background-color: ${cat.color}\"></div>`;\r\n    }\r\n    return {\r\n      templateRow: templateRows,\r\n      render: (n: HTMLElement, value: boolean[]) => {\r\n        forEachChild(n, (d: HTMLElement, i) => {\r\n          const v = value[i];\r\n          d.style.visibility = v ? null : 'hidden';\r\n        });\r\n      }\r\n    };\r\n  }\r\n\r\n  create(col: ISetColumn, context: IRenderContext) {\r\n    const {templateRow, render} = CategoricalHeatmapCellRenderer.createDOMContext(col);\r\n    const width = context.colWidth(col);\r\n    const cellDimension = width / col.dataLength!;\r\n    const cats = col.categories;\r\n\r\n    return {\r\n      template: `<div>${templateRow}</div>`,\r\n      update: (n: HTMLElement, d: IDataRow) => {\r\n        if (renderMissingDOM(n, col, d)) {\r\n          return;\r\n        }\r\n        render(n, col.getValues(d));\r\n      },\r\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow) => {\r\n        if (renderMissingCanvas(ctx, col, d, width)) {\r\n          return;\r\n        }\r\n        // Circle\r\n        const data = col.getValues(d);\r\n\r\n        ctx.save();\r\n        cats.forEach((d, j) => {\r\n          if (!data[j]) {\r\n            return;\r\n          }\r\n          const posx = (j * cellDimension);\r\n          ctx.fillStyle = d.color;\r\n          ctx.fillRect(posx, 0, cellDimension, CANVAS_HEIGHT);\r\n        });\r\n\r\n        ctx.restore();\r\n      }\r\n    };\r\n  }\r\n\r\n  createGroup(col: ISetColumn) {\r\n    const {templateRow, render} = CategoricalHeatmapCellRenderer.createDOMContext(col);\r\n    return {\r\n      template: `<div>${templateRow}</div>`,\r\n      update: (n: HTMLElement, _group: IGroup, rows: IDataRow[]) => {\r\n        const value = union(col, rows);\r\n        render(n, value);\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary(col: ISetColumn) {\r\n    const categories = col.categories;\r\n    let templateRows = '<div>';\r\n    const labels = wideEnough(col);\r\n    for (const cat of categories) {\r\n      templateRows += `<div title=\"${cat.label}\"${labels ? ` data-title=\"${cat.label}\"` : ''} style=\"background-color: ${cat.color}\"></div>`;\r\n    }\r\n    templateRows += '</div>';\r\n    return {\r\n      template: templateRows,\r\n      update: noop\r\n    };\r\n  }\r\n}\r\n","import {computeHist, ICategoricalBin, ICategoricalStatistics} from '../internal/math';\r\nimport {ICategoricalColumn, IDataRow, IGroup, isCategoricalColumn} from '../model';\r\nimport CategoricalColumn from '../model/CategoricalColumn';\r\nimport Column from '../model/Column';\r\nimport OrdinalColumn from '../model/OrdinalColumn';\r\nimport {filterMissingNumberMarkup} from '../ui/missing';\r\nimport {interactiveHist} from './CategoricalCellRenderer';\r\nimport {default as IRenderContext, ERenderMode, ICellRendererFactory} from './interfaces';\r\nimport {forEachChild, noRenderer, adaptTextColorToBgColor} from './utils';\r\n\r\n/** @internal */\r\nexport default class CategoricalStackedDistributionlCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Distribution Bar';\r\n\r\n  canRender(col: Column, mode: ERenderMode) {\r\n    return isCategoricalColumn(col) && mode !== ERenderMode.CELL;\r\n  }\r\n\r\n  create() {\r\n    return noRenderer;\r\n  }\r\n\r\n\r\n  createGroup(col: ICategoricalColumn) {\r\n    const { template, update } = stackedBar(col);\r\n    return {\r\n      template: `${template}</div>`,\r\n      update: (n: HTMLElement, _group: IGroup, rows: IDataRow[]) => {\r\n        const { hist, missing } = computeHist(rows, (r: IDataRow) => col.getCategory(r), col.categories);\r\n        update(n, hist, missing);\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary(col: ICategoricalColumn, ctx: IRenderContext, interactive: boolean) {\r\n    return (col instanceof CategoricalColumn || col instanceof OrdinalColumn) ? interactiveSummary(col, interactive, ctx.idPrefix) : staticSummary(col);\r\n  }\r\n}\r\n\r\nfunction staticSummary(col: ICategoricalColumn) {\r\n  const { template, update } = stackedBar(col);\r\n  return {\r\n    template: `${template}</div>`,\r\n    update: (n: HTMLElement, hist: ICategoricalStatistics | null) => {\r\n      n.classList.toggle('lu-missing', !hist);\r\n      if (!hist) {\r\n        return;\r\n      }\r\n      update(n, hist.hist, hist.missing);\r\n    }\r\n  };\r\n}\r\n\r\nfunction interactiveSummary(col: CategoricalColumn | OrdinalColumn, interactive: boolean, idPrefix: string) {\r\n  const { template, update } = stackedBar(col);\r\n  let filterUpdate: (missing: number, col: CategoricalColumn | OrdinalColumn) => void;\r\n  return {\r\n    template: `${template}${interactive ? filterMissingNumberMarkup(false, 0, idPrefix) : ''}</div>`,\r\n    update: (n: HTMLElement, hist: ICategoricalStatistics | null) => {\r\n      if (!filterUpdate) {\r\n        filterUpdate = interactiveHist(col, n);\r\n      }\r\n      filterUpdate(hist ? hist.missing : 0, col);\r\n\r\n      n.classList.toggle('lu-missing', !hist);\r\n      if (!hist) {\r\n        return;\r\n      }\r\n      update(n, hist.hist, hist.missing);\r\n    }\r\n  };\r\n}\r\n\r\nfunction stackedBar(col: ICategoricalColumn) {\r\n  const cats = col.categories;\r\n  const bins = cats.map((c) => `<div style=\"background-color: ${c.color}; color: ${adaptTextColorToBgColor(c.color)}\" title=\"${c.label}: 0\" data-cat=\"${c.name}\"><span>${c.label}</span></div>`).join('');\r\n\r\n  return {\r\n    template: `<div>${bins}<div title=\"Missing Values\"></div>`, // no closing div to be able to append things\r\n    update: (n: HTMLElement, hist: ICategoricalBin[], missing: number) => {\r\n      const total = hist.reduce((acc, { y }) => acc + y, missing);\r\n      forEachChild(n, (d: HTMLElement, i) => {\r\n        let y: number;\r\n        let label: string;\r\n        if (i >= hist.length) {\r\n          y = missing;\r\n          label = 'Missing Values';\r\n        } else {\r\n          y = hist[i].y;\r\n          label = cats[i].label;\r\n        }\r\n        d.style.flexGrow = `${Math.round(total === 0 ? 0 : y)}`;\r\n        d.title = `${label}: ${y}`;\r\n      });\r\n    }\r\n  };\r\n}\r\n","import {ICategoricalStatistics, IStatistics} from '../internal/math';\r\nimport {IDataRow, INumberColumn, isNumberColumn} from '../model';\r\nimport Column from '../model/Column';\r\nimport {isNumbersColumn} from '../model/INumberColumn';\r\nimport {colorOf} from './impose';\r\nimport {default as IRenderContext, ERenderMode, ICellRendererFactory, IImposer} from './interfaces';\r\nimport {renderMissingDOM} from './missing';\r\nimport {attr, noop, noRenderer, setText} from './utils';\r\n\r\n/** @internal */\r\nexport default class CircleCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Proportional Symbol';\r\n\r\n  canRender(col: Column, mode: ERenderMode) {\r\n    return isNumberColumn(col) && mode === ERenderMode.CELL && !isNumbersColumn(col);\r\n  }\r\n\r\n  create(col: INumberColumn, _context: IRenderContext, _hist: IStatistics | ICategoricalStatistics | null, imposer?: IImposer) {\r\n    return {\r\n      template: `<div style=\"background: radial-gradient(circle closest-side, red 100%, transparent 100%)\" title=\"\">\r\n              <div class=\"lu-hover-only\"></div>\r\n          </div>`,\r\n      update: (n: HTMLElement, d: IDataRow) => {\r\n        const v = col.getNumber(d);\r\n        const p = Math.round(v * 100);\r\n        const missing = renderMissingDOM(n, col, d);\r\n        attr(<HTMLElement>n, {}, {\r\n          background: missing ? null : `radial-gradient(circle closest-side, ${colorOf(col, d, imposer)} ${p}%, transparent ${p}%)`\r\n        },);\r\n        setText(n.firstElementChild!, col.getLabel(d));\r\n      },\r\n      render: noop\r\n    };\r\n  }\r\n\r\n  createGroup() {\r\n    return noRenderer;\r\n  }\r\n\r\n  createSummary() {\r\n    return noRenderer;\r\n  }\r\n}\r\n","import {ICategoricalStatistics, IStatistics} from '../internal';\r\nimport {INumberColumn, IDataRow, IGroup, isMissingValue, isNumberColumn} from '../model';\r\n/**\r\n * a renderer rendering a bar for numerical columns\r\n */\r\nimport Column from '../model/Column';\r\nimport {DEFAULT_FORMATTER, isNumbersColumn} from '../model/INumberColumn';\r\nimport {CANVAS_HEIGHT, DOT} from '../styles';\r\nimport {colorOf} from './impose';\r\nimport {default as IRenderContext, ERenderMode, ICellRendererFactory, IImposer} from './interfaces';\r\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\r\nimport {attr, forEachChild, noRenderer} from './utils';\r\n\r\n/** @internal */\r\nexport default class DotCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Dot';\r\n  readonly groupTitle = 'Dots';\r\n\r\n  canRender(col: Column, mode: ERenderMode) {\r\n    return isNumberColumn(col) && mode !== ERenderMode.SUMMARY;\r\n  }\r\n\r\n  private static getDOMRenderer(col: INumberColumn) {\r\n    const dots = isNumbersColumn(col) ? col.dataLength! : 1;\r\n    let tmp = '';\r\n    for (let i = 0; i < dots; ++i) {\r\n      tmp += `<div style='background-color: ${col.color}' title=''></div>`;\r\n    }\r\n\r\n    const update = (n: HTMLElement, vs: number[], labels: string[], colors: (string | null)[]) => {\r\n      //adapt the number of children\r\n      if (n.children.length !== vs.length) {\r\n        let tmp = '';\r\n        for (let i = 0; i < vs.length; ++i) {\r\n          tmp += `<div style='background-color: ${colors[i]}' title='${labels[i]}'></div>`;\r\n        }\r\n        n.innerHTML = tmp;\r\n      }\r\n      forEachChild(n, (d: HTMLElement, i) => {\r\n        const v = vs[i];\r\n        attr(<HTMLElement>d, {\r\n          title: labels[i]\r\n        }, {\r\n          display: isMissingValue(v) ? 'none' : null,\r\n          left: `${Math.round(v * 100)}%`,\r\n          // jitter\r\n          top: vs.length > 1 ? `${Math.round(Math.random() * 80 + 10)}%` : null,\r\n          'background-color': colors[i]\r\n        });\r\n      });\r\n    };\r\n\r\n    const render = (ctx: CanvasRenderingContext2D, vs: number[], colors: (string | null)[], width: number) => {\r\n      ctx.save();\r\n      ctx.globalAlpha = DOT.opacity;\r\n      vs.forEach((v, i) => {\r\n        ctx.fillStyle = colors[i] || DOT.color;\r\n        ctx.fillRect(Math.max(0, v * width - DOT.size / 2), 0, DOT.size, CANVAS_HEIGHT);\r\n      });\r\n      ctx.restore();\r\n    };\r\n\r\n    return {template: `<div>${tmp}</div>`, update, render};\r\n  }\r\n\r\n  create(col: INumberColumn, context: IRenderContext, _hist: IStatistics | ICategoricalStatistics | null, imposer?: IImposer) {\r\n    const {template, render, update} = DotCellRenderer.getDOMRenderer(col);\r\n    const width = context.colWidth(col);\r\n    return {\r\n      template,\r\n      update: (n: HTMLElement, d: IDataRow) => {\r\n        if (renderMissingDOM(n, col, d)) {\r\n          return;\r\n        }\r\n        const color = colorOf(col, d, imposer);\r\n        const v = col.getValue(d);\r\n        if (!isNumbersColumn(col)) {\r\n          return update(n, [v], [col.getLabel(d)], [color]);\r\n        }\r\n        const vs: number[] = v.filter((vi: number) => !isMissingValue(vi));\r\n        return update(n, vs, vs.map(DEFAULT_FORMATTER), vs.map((_: any) => color));\r\n      },\r\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow) => {\r\n        if (renderMissingCanvas(ctx, col, d, width)) {\r\n          return;\r\n        }\r\n        const color = colorOf(col, d, imposer);\r\n        const v = col.getValue(d);\r\n        if (!isNumbersColumn(col)) {\r\n          return render(ctx, [v], [color], width);\r\n        }\r\n        const vs: number[] = v.filter((vi: number) => !isMissingValue(vi));\r\n        return render(ctx, vs, vs.map((_: any) => color), width);\r\n      }\r\n    };\r\n  }\r\n\r\n  createGroup(col: INumberColumn, _context: IRenderContext, _hist: IStatistics | ICategoricalStatistics | null, imposer?: IImposer) {\r\n    const {template, update} = DotCellRenderer.getDOMRenderer(col);\r\n    return {\r\n      template,\r\n      update: (n: HTMLElement, _group: IGroup, rows: IDataRow[]) => {\r\n        const vs = rows.map((r) => col.getValue(r));\r\n        const colors = rows.map((r) => colorOf(col, r, imposer));\r\n\r\n        if (!isNumbersColumn(col)) {\r\n          return update(n, vs, rows.map((r) => col.getLabel(r)), colors);\r\n        }\r\n        // concatenate all columns\r\n        const all = (<number[]>[]).concat(...vs.filter((vi: number) => !isMissingValue(vi)));\r\n        return update(n, all, all.map(DEFAULT_FORMATTER), vs.map((_v: number[], i) => colors[i]));\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary() {\r\n    return noRenderer;\r\n  }\r\n}\r\n","import {IDataRow, IGroup} from '../model';\r\nimport Column from '../model/Column';\r\nimport GroupColumn from '../model/GroupColumn';\r\nimport {ICellRendererFactory} from './interfaces';\r\nimport {noop, noRenderer} from './utils';\r\n\r\n/** @internal */\r\nexport default class GroupCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Default';\r\n\r\n  canRender(col: Column) {\r\n    return col instanceof GroupColumn;\r\n  }\r\n\r\n  create() {\r\n    return {\r\n      template: `<div><div></div></div>`,\r\n      update(node: HTMLElement, _row: IDataRow, i: number, group: IGroup) {\r\n        const p = (<HTMLElement>node.firstElementChild!);\r\n        if (i !== 0) {\r\n          p.innerText = '';\r\n        } else if (Array.isArray((<any>group).order)) {\r\n          p.innerText = `${group.name} (${(<any>group).order.length})`;\r\n        } else {\r\n          p.innerText = group.name;\r\n        }\r\n      },\r\n      render: noop\r\n    };\r\n  }\r\n\r\n  createGroup() {\r\n    return {\r\n      template: `<div><div></div></div>`,\r\n      update(node: HTMLElement, group: IGroup, rows: IDataRow[]) {\r\n        (<HTMLElement>node.firstElementChild!).innerText = `${group.name} (${rows.length})`;\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary() {\r\n    return noRenderer;\r\n  }\r\n}\r\n","import {LazyBoxPlotData} from '../internal';\r\nimport {IDataRow, IGroup, isMissingValue} from '../model';\r\nimport {INumbersColumn} from '../model/INumberColumn';\r\nimport {default as IRenderContext, IImposer} from './interfaces';\r\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\r\n\r\n/** @internal */\r\nexport abstract class ANumbersCellRenderer {\r\n  abstract readonly title: string;\r\n\r\n  protected abstract createContext(col: INumbersColumn, context: IRenderContext, imposer?: IImposer): {\r\n    templateRow: string,\r\n    update: (row: HTMLElement, data: number[], raw: number[], d: IDataRow) => void,\r\n    render: (ctx: CanvasRenderingContext2D, data: number[], d: IDataRow) => void,\r\n  };\r\n\r\n  private static choose(col: INumbersColumn, rows: IDataRow[]) {\r\n    const data = rows.map((r) => ({n: col.getNumbers(r), raw: col.getRawNumbers(r)}));\r\n    const cols = col.dataLength!;\r\n    const normalized = <number[]>[];\r\n    const raw = <number[]>[];\r\n    // mean column)\r\n    for (let i = 0; i < cols; ++i) {\r\n      const vs = data.map((d) => ({n: d.n[i], raw: d.raw[i]})).filter((d) => !isMissingValue(d.n));\r\n      if (vs.length === 0) {\r\n        normalized.push(NaN);\r\n        raw.push(NaN);\r\n      } else {\r\n        const box = <any>new LazyBoxPlotData(vs.map((d) => d.n));\r\n        const boxRaw = <any>new LazyBoxPlotData(vs.map((d) => d.raw));\r\n        normalized.push(box[col.getSortMethod()]);\r\n        raw.push(boxRaw[col.getSortMethod()]);\r\n      }\r\n    }\r\n    return {normalized, raw};\r\n  }\r\n\r\n  create(col: INumbersColumn, context: IRenderContext, _hist: any, imposer?: IImposer) {\r\n    const width = context.colWidth(col);\r\n    const {templateRow, render, update} = this.createContext(col, context, imposer);\r\n    return {\r\n      template: `<div>${templateRow}</div>`,\r\n      update: (n: HTMLElement, d: IDataRow) => {\r\n        if (renderMissingDOM(n, col, d)) {\r\n          return;\r\n        }\r\n        update(n, col.getNumbers(d), col.getRawNumbers(d), d);\r\n      },\r\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow) => {\r\n        if (renderMissingCanvas(ctx, col, d, width)) {\r\n          return;\r\n        }\r\n        render(ctx, col.getNumbers(d), d);\r\n      },\r\n    };\r\n  }\r\n\r\n  createGroup(col: INumbersColumn, context: IRenderContext, _hist: any, imposer?: IImposer) {\r\n    const {templateRow, update} = this.createContext(col, context, imposer);\r\n    return {\r\n      template: `<div>${templateRow}</div>`,\r\n      update: (n: HTMLDivElement, _group: IGroup, rows: IDataRow[]) => {\r\n        // render a heatmap\r\n        const {normalized, raw} = ANumbersCellRenderer.choose(col, rows);\r\n        update(n, normalized, raw, rows[0]);\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\n\r\nexport function matchRows(n: HTMLElement | SVGElement, rows: IDataRow[], template: string) {\r\n  // first match the number of rows\r\n  const children = <(HTMLElement | SVGElement)[]>Array.from(n.children);\r\n  if (children.length > rows.length) {\r\n    children.slice(rows.length).forEach((c) => c.remove());\r\n  } else if (rows.length > children.length) {\r\n    n.insertAdjacentHTML('beforeend', template.repeat(rows.length - children.length));\r\n  }\r\n}\r\n","import {IDataRow, isMissingValue} from '../model';\r\nimport Column from '../model/Column';\r\nimport {DEFAULT_FORMATTER, INumbersColumn, isNumbersColumn} from '../model/INumberColumn';\r\nimport {CANVAS_HEIGHT} from '../styles';\r\nimport {ANumbersCellRenderer} from './ANumbersCellRenderer';\r\nimport {toHeatMapColor} from './BrightnessCellRenderer';\r\nimport IRenderContext, {ICellRendererFactory, IImposer} from './interfaces';\r\nimport {renderMissingValue} from './missing';\r\nimport {attr, forEachChild, noop, wideEnough} from './utils';\r\n\r\n/** @internal */\r\nexport default class HeatmapCellRenderer extends ANumbersCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Heatmap';\r\n\r\n  canRender(col: Column) {\r\n    return isNumbersColumn(col) && Boolean(col.dataLength);\r\n  }\r\n\r\n  protected createContext(col: INumbersColumn, context: IRenderContext, imposer?: IImposer) {\r\n    const cellDimension = context.colWidth(col) / col.dataLength!;\r\n    const labels = col.labels;\r\n    let templateRows = '';\r\n    for (let i = 0; i < col.dataLength!; ++i) {\r\n      templateRows += `<div style=\"background-color: white\" title=\"\"></div>`;\r\n    }\r\n    return {\r\n      templateRow: templateRows,\r\n      update: (row: HTMLElement, data: number[], raw: number[], item: IDataRow) => {\r\n        forEachChild(row, (d, i) => {\r\n          const v = data[i];\r\n          attr(<HTMLDivElement>d, {\r\n            title: `${labels[i]}: ${DEFAULT_FORMATTER(raw[i])}`,\r\n            'class': isMissingValue(v) ? 'lu-missing' : ''\r\n          }, {\r\n            'background-color': isMissingValue(v) ? null : toHeatMapColor(v, item, col, imposer)\r\n          });\r\n        });\r\n      },\r\n      render: (ctx: CanvasRenderingContext2D, data: number[], item: IDataRow) => {\r\n        data.forEach((d: number, j: number) => {\r\n          const x = j * cellDimension;\r\n          if (isMissingValue(d)) {\r\n            renderMissingValue(ctx, cellDimension, CANVAS_HEIGHT, x, 0);\r\n            return;\r\n          }\r\n          ctx.beginPath();\r\n          ctx.fillStyle = toHeatMapColor(d, item, col, imposer);\r\n          ctx.fillRect(x, 0, cellDimension, CANVAS_HEIGHT);\r\n        });\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary(col: INumbersColumn) {\r\n    let labels = col.labels.slice();\r\n    while (labels.length > 0 && !wideEnough(col, labels.length)) {\r\n      labels = labels.filter((_, i) => i % 2 === 0); // even\r\n    }\r\n    let templateRows = '<div>';\r\n    for (const label of labels) {\r\n      templateRows += `<div title=\"${label}\" data-title=\"${label}\"></div>`;\r\n    }\r\n    templateRows += '</div>';\r\n    return {\r\n      template: templateRows,\r\n      update: noop\r\n    };\r\n  }\r\n}\r\n","import ADialog, {IDialogContext} from './ADialog';\r\n\r\n/** @internal */\r\nexport interface IInputNumberOptions {\r\n  min: number;\r\n  max: number;\r\n  step: number | 'any';\r\n  value: number;\r\n  label: string | null;\r\n}\r\n\r\n/** @internal */\r\nexport default class InputNumberDialog extends ADialog {\r\n\r\n  private readonly ioptions: Readonly<IInputNumberOptions> = {\r\n    min: NaN,\r\n    max: NaN,\r\n    step: 'any',\r\n    value: NaN,\r\n    label: null\r\n  };\r\n\r\n  constructor(dialog: IDialogContext, private readonly callback: (value: number) => void, options: Partial<IInputNumberOptions> = {}) {\r\n    super(dialog);\r\n    Object.assign(this.ioptions, options);\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    const o = this.ioptions;\r\n    node.insertAdjacentHTML('beforeend', `\r\n     <input type=\"number\" value=\"${isNaN(o.value) ? '' : String(o.value)}\" required autofocus placeholder=\"${o.label ? o.label : 'enter number'}\" ${isNaN(o.min) ? '' : ` min=\"${o.min}\"`} ${isNaN(o.max) ? '' : ` max=\"${o.max}\"`} step=\"${o.step}\">\r\n    `);\r\n  }\r\n\r\n  submit() {\r\n    this.callback(parseFloat(this.findInput('input[type=number]').value));\r\n    return true;\r\n  }\r\n}\r\n","import {D3DragEvent, drag} from 'd3-drag';\r\nimport {event as d3event, selectAll} from 'd3-selection';\r\nimport {DENSE_HISTOGRAM} from '../config';\r\nimport {computeStats, getNumberOfBins, INumberBin, IStatistics, round} from '../internal/math';\r\nimport {IDataRow, IGroup, isMissingValue} from '../model';\r\nimport Column from '../model/Column';\r\nimport {\r\n  DEFAULT_FORMATTER, INumberColumn, INumbersColumn, isNumberColumn,\r\n  isNumbersColumn\r\n} from '../model/INumberColumn';\r\nimport {IMapAbleColumn, isMapAbleColumn} from '../model/MappingFunction';\r\nimport InputNumberDialog from '../ui/dialogs/InputNumberDialog';\r\nimport {filterMissingNumberMarkup, updateFilterMissingNumberMarkup} from '../ui/missing';\r\nimport {colorOf} from './impose';\r\nimport {default as IRenderContext, ERenderMode, ICellRendererFactory, IImposer} from './interfaces';\r\nimport {renderMissingDOM} from './missing';\r\nimport {noop} from './utils';\r\n\r\n/** @internal */\r\nexport default class HistogramCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Histogram';\r\n\r\n  canRender(col: Column, mode: ERenderMode) {\r\n    return (isNumberColumn(col) && mode !== ERenderMode.CELL) || (isNumbersColumn(col) && mode === ERenderMode.CELL);\r\n  }\r\n\r\n  create(col: INumbersColumn, context: IRenderContext, hist: IStatistics | null, imposer?: IImposer) {\r\n    const {template, render, guessedBins} = getHistDOMRenderer(context.totalNumberOfRows, col, imposer);\r\n    return {\r\n      template: `${template}</div>`,\r\n      update: (n: HTMLElement, row: IDataRow) => {\r\n        if (renderMissingDOM(n, col, row)) {\r\n          return;\r\n        }\r\n        render(n, createHist(hist, guessedBins, [row], col));\r\n      },\r\n      render: noop\r\n    };\r\n  }\r\n\r\n  createGroup(col: INumberColumn, context: IRenderContext, hist: IStatistics | null, imposer?: IImposer) {\r\n    const {template, render, guessedBins} = getHistDOMRenderer(context.totalNumberOfRows, col, imposer);\r\n    return {\r\n      template: `${template}</div>`,\r\n      update: (n: HTMLElement, _group: IGroup, rows: IDataRow[]) => {\r\n        render(n, createHist(hist, guessedBins, rows, col));\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary(col: INumberColumn, context: IRenderContext, interactive: boolean, imposer?: IImposer) {\r\n    const r = getHistDOMRenderer(context.totalNumberOfRows, col, imposer);\r\n\r\n    const staticHist = !interactive || !isMapAbleColumn(col);\r\n    return staticHist ? staticSummary(col, r.template, r.render) : interactiveSummary(<IMapAbleColumn>col, context, r.template, r.render);\r\n  }\r\n}\r\n\r\n\r\nfunction staticSummary(col: INumberColumn, template: string, render: (n: HTMLElement, stats: {bins: number, max: number, hist: INumberBin[]}) => void) {\r\n  if (isMapAbleColumn(col)) {\r\n    const range = col.getRange();\r\n    template += `<span>${range[0]}</span><span>${range[1]}</span>`;\r\n  }\r\n  return {\r\n    template: `${template}</div>`,\r\n    update: (node: HTMLElement, hist: IStatistics | null) => {\r\n      if (isMapAbleColumn(col)) {\r\n        const range = col.getRange();\r\n        Array.from(node.querySelectorAll('span')).forEach((d: HTMLElement, i) => d.textContent = range[i]);\r\n      }\r\n\r\n      node.classList.toggle('lu-missing', !hist);\r\n      if (!hist) {\r\n        return;\r\n      }\r\n      render(node, {bins: hist.hist.length, max: hist.maxBin, hist: hist.hist});\r\n    }\r\n  };\r\n}\r\n\r\nfunction interactiveSummary(col: IMapAbleColumn, context: IRenderContext, template: string, render: (n: HTMLElement, stats: {bins: number, max: number, hist: INumberBin[]}) => void) {\r\n  const f = filter(col);\r\n  template += `\r\n      <div data-handle=\"min-hint\" style=\"width: ${f.percent(f.filterMin)}%\"></div>\r\n      <div data-handle=\"max-hint\" style=\"width: ${100 - f.percent(f.filterMax)}%\"></div>\r\n      <div data-handle=\"min\" data-value=\"${round(f.filterMin, 2)}\" style=\"left: ${f.percent(f.filterMin)}%\" title=\"min filter, drag or shift click to change\"></div>\r\n      <div data-handle='max' data-value=\"${round(f.filterMax, 2)}\" style=\"right: ${100 - f.percent(f.filterMax)}%\" title=\"max filter, drag or shift click to change\"></div>\r\n      ${filterMissingNumberMarkup(f.filterMissing, 0, context.idPrefix)}\r\n    `;\r\n\r\n  let updateFilter: (missing: number, col: IMapAbleColumn) => void;\r\n\r\n  return {\r\n    template: `${template}</div>`,\r\n    update: (node: HTMLElement, hist: IStatistics | null) => {\r\n      if (!updateFilter) {\r\n        updateFilter = initFilter(node, col, context);\r\n      }\r\n      updateFilter(hist ? hist.missing : 0, col);\r\n\r\n      node.classList.toggle('lu-missing', !hist);\r\n      if (!hist) {\r\n        return;\r\n      }\r\n      render(node, {bins: hist.hist.length, max: hist.maxBin, hist: hist.hist});\r\n    }\r\n  };\r\n}\r\n\r\nfunction initFilter(node: HTMLElement, col: IMapAbleColumn, context: IRenderContext) {\r\n  const min = <HTMLElement>node.querySelector('[data-handle=min]');\r\n  const max = <HTMLElement>node.querySelector('[data-handle=max]');\r\n  const minHint = <HTMLElement>node.querySelector('[data-handle=min-hint]');\r\n  const maxHint = <HTMLElement>node.querySelector('[data-handle=max-hint]');\r\n  const filterMissing = <HTMLInputElement>node.querySelector('input');\r\n\r\n  const setFilter = () => {\r\n    const f = filter(col);\r\n    const minValue = f.unpercent(parseFloat(min.style.left!));\r\n    const maxValue = f.unpercent(100 - parseFloat(max.style.right!));\r\n    col.setFilter({\r\n      filterMissing: filterMissing.checked,\r\n      min: Math.abs(minValue - f.domain[0]) < 0.001 ? NaN : minValue,\r\n      max: Math.abs(maxValue - f.domain[1]) < 0.001 ? NaN : maxValue\r\n    });\r\n  };\r\n\r\n  min.onclick = (evt) => {\r\n    if (!evt.shiftKey) {\r\n      return;\r\n    }\r\n    evt.preventDefault();\r\n    evt.stopPropagation();\r\n\r\n    const f = filter(col);\r\n    const value = f.unpercent(parseFloat(min.style.left!));\r\n\r\n    const dialogCtx = {\r\n      attachment: min,\r\n      manager: context.dialogManager,\r\n      level: 1,\r\n      idPrefix: context.idPrefix\r\n    };\r\n\r\n    const dialog = new InputNumberDialog(dialogCtx, (newValue) => {\r\n      minHint.style.width = `${f.percent(newValue)}%`;\r\n      min.dataset.value = round(newValue, 2).toString();\r\n      min.style.left = `${f.percent(newValue)}%`;\r\n      setFilter();\r\n    }, {\r\n        value, min: f.domain[0], max: f.domain[1]\r\n      });\r\n    dialog.open();\r\n  };\r\n\r\n  max.onclick = (evt) => {\r\n    if (!evt.shiftKey) {\r\n      return;\r\n    }\r\n    evt.preventDefault();\r\n    evt.stopPropagation();\r\n\r\n    const f = filter(col);\r\n    const value = f.unpercent(100 - parseFloat(max.style.right!));\r\n\r\n    const dialogCtx = {\r\n      attachment: max,\r\n      manager: context.dialogManager,\r\n      level: 1,\r\n      idPrefix: context.idPrefix\r\n    };\r\n\r\n    const dialog = new InputNumberDialog(dialogCtx, (newValue) => {\r\n      maxHint.style.width = `${100 - f.percent(newValue)}%`;\r\n      max.dataset.value = round(newValue, 2).toString();\r\n      max.style.right = `${100 - f.percent(newValue)}%`;\r\n      setFilter();\r\n    }, {\r\n        value, min: f.domain[0], max: f.domain[1]\r\n      });\r\n    dialog.open();\r\n  };\r\n\r\n  filterMissing.onchange = () => setFilter();\r\n\r\n  selectAll([min, max]).call(drag<HTMLElement, {}>()\r\n    .filter(() => d3event.button === 0 && !d3event.shiftKey)\r\n    .on('start', function (this: HTMLElement) {\r\n      this.classList.add('lu-dragging');\r\n    })\r\n    .on('drag', function (this: HTMLElement) {\r\n      const evt = (<D3DragEvent<any, any, any>>d3event);\r\n      const total = node.clientWidth;\r\n      const px = Math.max(0, Math.min(evt.x, total));\r\n      const percent = Math.round(100 * px / total);\r\n      const domain = col.getMapping().domain;\r\n      this.dataset.value = round(((percent / 100) * (domain[1] - domain[0]) + domain[0]), 2).toString();\r\n\r\n      if (this.dataset.handle === 'min') {\r\n        this.style.left = `${percent}%`;\r\n        minHint.style.width = `${percent}%`;\r\n        return;\r\n      }\r\n      this.style.right = `${100 - percent}%`;\r\n      maxHint.style.width = `${100 - percent}%`;\r\n    })\r\n    .on('end', function (this: HTMLElement) {\r\n      this.classList.remove('lu-dragging');\r\n      setFilter();\r\n    }));\r\n\r\n  return (missing: number, actCol: IMapAbleColumn) => {\r\n    col = actCol;\r\n    const f = filter(col);\r\n    minHint.style.width = `${f.percent(f.filterMin)}%`;\r\n    maxHint.style.width = `${100 - f.percent(f.filterMax)}%`;\r\n    min.dataset.value = round(f.filterMin, 2).toString();\r\n    max.dataset.value = round(f.filterMax, 2).toString();\r\n    min.style.left = `${f.percent(f.filterMin)}%`;\r\n    max.style.right = `${100 - f.percent(f.filterMax)}%`;\r\n    filterMissing.checked = f.filterMissing;\r\n    updateFilterMissingNumberMarkup(<HTMLElement>filterMissing.parentElement, missing);\r\n  };\r\n}\r\n\r\nfunction createHist(globalHist: IStatistics | null, guessedBins: number, rows: IDataRow[], col: INumberColumn) {\r\n  const bins = globalHist ? globalHist.hist.length : guessedBins;\r\n  let stats: IStatistics;\r\n  if (isNumbersColumn(col)) {\r\n    //multiple values\r\n    const values = (<number[]>[]).concat(...rows.map((r) => col.getNumbers(r)));\r\n    stats = computeStats(values, (v: number) => v, isMissingValue, [0, 1], bins);\r\n  } else {\r\n    stats = computeStats(rows, (r: IDataRow) => col.getNumber(r), (r: IDataRow) => col.isMissing(r), [0, 1], bins);\r\n  }\r\n\r\n  const max = Math.max(stats.maxBin, globalHist ? globalHist.maxBin : 0);\r\n  return {bins, max, hist: stats.hist};\r\n}\r\n\r\nexport function getHistDOMRenderer(totalNumberOfRows: number, col: INumberColumn, imposer?: IImposer) {\r\n  const guessedBins = getNumberOfBins(totalNumberOfRows);\r\n  let bins = '';\r\n  for (let i = 0; i < guessedBins; ++i) {\r\n    bins += `<div title=\"Bin ${i}: 0\" data-x=\"\"><div style=\"height: 0\" ></div></div>`;\r\n  }\r\n\r\n  const render = (n: HTMLElement, stats: {bins: number, max: number, hist: INumberBin[]}) => {\r\n    const {bins, max, hist} = stats;\r\n    //adapt the number of children\r\n    let nodes = <HTMLElement[]>Array.from(n.querySelectorAll('[data-x]'));\r\n    if (nodes.length > bins) {\r\n      nodes.splice(bins, nodes.length - bins).forEach((d) => d.remove());\r\n    } else if (nodes.length < bins) {\r\n      for (let i = nodes.length; i < bins; ++i) {\r\n        n.insertAdjacentHTML('afterbegin', `<div title=\"Bin ${i}: 0\" data-x=\"\"><div style=\"height: 0\" ></div></div>`);\r\n      }\r\n      nodes = Array.from(n.querySelectorAll('[data-x]'));\r\n    }\r\n    n.classList.toggle('lu-dense', bins > DENSE_HISTOGRAM);\r\n    nodes.forEach((d: HTMLElement, i) => {\r\n      const {x0, x1, length} = hist[i];\r\n      const inner = <HTMLElement>d.firstElementChild!;\r\n      d.title = `${DEFAULT_FORMATTER(x0)} - ${DEFAULT_FORMATTER(x1)} (${length})`;\r\n      d.dataset.x = DEFAULT_FORMATTER(x0);\r\n      inner.style.height = `${Math.round(length * 100 / max)}%`;\r\n      inner.style.backgroundColor = colorOf(col, null, imposer, (x1 + x0) / 2);\r\n    });\r\n  };\r\n  return {\r\n    template: `<div${guessedBins > DENSE_HISTOGRAM ? ' class=\"lu-dense' : ''}>${bins}`, // no closing div to be able to append things\r\n    render,\r\n    guessedBins\r\n  };\r\n}\r\n\r\n\r\nfunction filter(col: IMapAbleColumn) {\r\n  const filter = col.getFilter();\r\n  const domain = col.getMapping().domain;\r\n  const percent = (v: number) => Math.round(100 * (v - domain[0]) / (domain[1] - domain[0]));\r\n  const unpercent = (v: number) => ((v / 100) * (domain[1] - domain[0]) + domain[0]);\r\n  const filterMin = isFinite(filter.min) ? filter.min : domain[0];\r\n  const filterMax = isFinite(filter.max) ? filter.max : domain[1];\r\n  return {\r\n    filterMissing: filter.filterMissing,\r\n    domain,\r\n    percent,\r\n    unpercent,\r\n    filterMin,\r\n    filterMax\r\n  };\r\n}\r\n","import {IDataRow} from '../model';\r\nimport Column from '../model/Column';\r\nimport StringColumn from '../model/StringColumn';\r\nimport {ERenderMode, ICellRendererFactory} from './interfaces';\r\nimport {renderMissingDOM} from './missing';\r\nimport {noop, noRenderer} from './utils';\r\n\r\n/** @internal */\r\nexport default class ImageCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Image';\r\n\r\n  canRender(col: Column, mode: ERenderMode) {\r\n    return col instanceof StringColumn && mode === ERenderMode.CELL;\r\n  }\r\n\r\n  create(col: StringColumn) {\r\n    return {\r\n      template: `<div></div>`,\r\n      update: (n: HTMLElement, d: IDataRow) => {\r\n        const missing = renderMissingDOM(n, col, d);\r\n        n.title = col.getLabel(d);\r\n        n.style.backgroundImage = missing ? null : `url('${col.getValue(d)}')`;\r\n      },\r\n      render: noop\r\n    };\r\n  }\r\n\r\n  createGroup() {\r\n    return noRenderer;\r\n  }\r\n\r\n  createSummary() {\r\n    return noRenderer;\r\n  }\r\n}\r\n","import {INumberBin, IStatistics} from '../internal';\r\nimport {IDataRow, IGroup} from '../model';\r\nimport Column from '../model/Column';\r\nimport CompositeNumberColumn from '../model/CompositeNumberColumn';\r\nimport {CANVAS_HEIGHT} from '../styles';\r\nimport {getHistDOMRenderer} from './HistogramCellRenderer';\r\nimport {default as IRenderContext, ERenderMode, ICellRendererFactory} from './interfaces';\r\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\r\nimport {createData} from './MultiLevelCellRenderer';\r\nimport {matchColumns, forEachChild} from './utils';\r\n\r\n\r\n/** @internal */\r\nexport default class InterleavingCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Interleaved';\r\n\r\n  canRender(col: Column) {\r\n    return col instanceof CompositeNumberColumn;\r\n  }\r\n\r\n  create(col: CompositeNumberColumn, context: IRenderContext) {\r\n    const {cols} = createData(col, context, false, ERenderMode.CELL);\r\n    const width = context.colWidth(col);\r\n    return {\r\n      template: `<div>${cols.map((r) => r.template).join('')}</div>`,\r\n      update: (n: HTMLDivElement, d: IDataRow, i: number, group: IGroup) => {\r\n        const missing = renderMissingDOM(n, col, d);\r\n        if (missing) {\r\n          return;\r\n        }\r\n        matchColumns(n, cols);\r\n        forEachChild(n, (ni: HTMLElement, j) => {\r\n          cols[j].renderer!.update(ni, d, i, group);\r\n        });\r\n      },\r\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow, _i: number, group: IGroup) => {\r\n        if (renderMissingCanvas(ctx, col, d, width)) {\r\n          return;\r\n        }\r\n\r\n        ctx.save();\r\n        ctx.scale(1, 1 / cols.length); // scale since internal use the height, too\r\n        cols.forEach((r, i) => {\r\n          r.renderer!.render(ctx, d, i, group);\r\n          ctx.translate(0, CANVAS_HEIGHT);\r\n        });\r\n        ctx.restore();\r\n      }\r\n    };\r\n  }\r\n\r\n  createGroup(col: CompositeNumberColumn, context: IRenderContext) {\r\n    const {cols} = createData(col, context, false, ERenderMode.GROUP);\r\n    return {\r\n      template: `<div>${cols.map((r) => r.template).join('')}</div>`,\r\n      update: (n: HTMLElement, group: IGroup, rows: IDataRow[]) => {\r\n        matchColumns(n, cols);\r\n        forEachChild(n, (ni: HTMLElement, j) => {\r\n          cols[j].groupRenderer!.update(ni, group, rows);\r\n        });\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary(col: CompositeNumberColumn, context: IRenderContext) {\r\n    const cols = col.children;\r\n    let acc = 0;\r\n    const {template, render} = getHistDOMRenderer(context.totalNumberOfRows, col, {\r\n      color: () => cols[(acc++) % cols.length].color\r\n    });\r\n    return {\r\n      template,\r\n      update: (n: HTMLElement) => {\r\n        const stats = cols.map((c) => <IStatistics | null>context.statsOf(<any>c));\r\n        if (!stats.some(Boolean)) {\r\n          n.classList.add('lu-missing');\r\n          return;\r\n        }\r\n        n.classList.remove('lu-missing');\r\n        const grouped = groupedHist(stats);\r\n        render(n, grouped);\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\nconst dummyBin: INumberBin = {\r\n  length: 0,\r\n  x0: 0,\r\n  x1: 0\r\n};\r\n\r\nfunction groupedHist(stats: (IStatistics | null)[]) {\r\n  const sample = stats.find(Boolean)!;\r\n  const bins = sample.hist.length;\r\n  // assert all have the same bin size\r\n  const hist = <INumberBin[]>[];\r\n  let maxBin = 0;\r\n  for (let i = 0; i < bins; ++i) {\r\n    stats.forEach((s) => {\r\n      const bin = s ? s.hist[i] : null;\r\n      if (!bin) {\r\n        hist.push(dummyBin);\r\n        return;\r\n      }\r\n      if (bin.length > maxBin) {\r\n        maxBin = bin.length;\r\n      }\r\n      hist.push(bin);\r\n    });\r\n  }\r\n  return {bins, max: maxBin, hist};\r\n}\r\n","import {IDataRow, IGroup} from '../model';\r\nimport Column from '../model/Column';\r\nimport StringColumn from '../model/StringColumn';\r\nimport {ERenderMode, ICellRendererFactory} from './interfaces';\r\nimport {renderMissingDOM} from './missing';\r\nimport {noop, noRenderer, setText} from './utils';\r\n\r\n/** @internal */\r\nexport default class LinkCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Link';\r\n\r\n  canRender(col: Column, mode: ERenderMode) {\r\n    return col instanceof StringColumn && mode !== ERenderMode.SUMMARY;\r\n  }\r\n\r\n  create(col: StringColumn) {\r\n    const align = col.alignment || 'left';\r\n    return {\r\n      template: `<a${align !== 'left' ? ` class=\"lu-${align}\"` : ''} target=\"_blank\" href=\"\"></a>`,\r\n      update: (n: HTMLAnchorElement, d: IDataRow) => {\r\n        if (renderMissingDOM(n, col, d)) {\r\n          return;\r\n        }\r\n        n.href = col.getValue(d);\r\n        if (col.escape) {\r\n          setText(n, col.getLabel(d));\r\n        } else {\r\n          n.innerHTML = col.getLabel(d);\r\n        }\r\n      },\r\n      render: noop\r\n    };\r\n  }\r\n\r\n  private static exampleText(col: Column, rows: IDataRow[]) {\r\n    const numExampleRows = 5;\r\n    const examples = <string[]>[];\r\n    for (const row of rows) {\r\n      if (col.isMissing(row)) {\r\n        continue;\r\n      }\r\n      examples.push(`<a target=\"_blank\" href=\"${col.getValue(row)}\">${col.getLabel(row)}</a>`);\r\n      if (examples.length >= numExampleRows) {\r\n        break;\r\n      }\r\n    }\r\n    return `${examples.join(', ')}${examples.length < rows.length ? ', &hellip;' : ''}`;\r\n  }\r\n\r\n  createGroup(col: StringColumn) {\r\n    return {\r\n      template: `<div> </div>`,\r\n      update: (n: HTMLDivElement, _group: IGroup, rows: IDataRow[]) => {\r\n        n.innerHTML = `${LinkCellRenderer.exampleText(col, rows)}`;\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary() {\r\n    return noRenderer;\r\n  }\r\n}\r\n","import {IDataRow, IGroup, isMissingValue} from '../model';\r\nimport Column from '../model/Column';\r\nimport {IArrayColumn, IKeyValue, IMapColumn, isArrayColumn, isMapColumn} from '../model/IArrayColumn';\r\nimport {ICellRendererFactory} from './interfaces';\r\nimport {renderMissingDOM} from './missing';\r\nimport {forEach, noop} from './utils';\r\n\r\n/** @internal */\r\nexport default class TableCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Table';\r\n\r\n  canRender(col: Column) {\r\n    return isMapColumn(col);\r\n  }\r\n\r\n  create(col: IMapColumn<any>) {\r\n    if (isArrayColumn(col) && col.dataLength) {\r\n      // fixed length optimized rendering\r\n      return this.createFixed(col);\r\n    }\r\n    return {\r\n      template: `<div></div>`,\r\n      update: (node: HTMLElement, d: IDataRow) => {\r\n        if (renderMissingDOM(node, col, d)) {\r\n          return;\r\n        }\r\n        node.innerHTML = col.getMapLabel(d).map(({key, value}) => `<div>${key}</div><div>${value}</div>`).join('');\r\n      },\r\n      render: noop\r\n    };\r\n  }\r\n\r\n  private static template(col: IArrayColumn<any>) {\r\n    const labels = col.labels;\r\n    return `<div>${labels.map((l) => `<div>${l}</div><div data-v></div>`).join('\\n')}</div>`;\r\n  }\r\n\r\n  private createFixed(col: IArrayColumn<any>) {\r\n    return {\r\n      template: TableCellRenderer.template(col),\r\n      update: (node: HTMLElement, d: IDataRow) => {\r\n        if (renderMissingDOM(node, col, d)) {\r\n          return;\r\n        }\r\n        const value = col.getLabels(d);\r\n        forEach(node, '[data-v]', (n: HTMLElement, i) => {\r\n          n.innerHTML = value[i];\r\n        });\r\n      },\r\n      render: noop\r\n    };\r\n  }\r\n\r\n  private static example(arr: IKeyValue<string>[]) {\r\n    const numExampleRows = 5;\r\n    return `${arr.slice(0, numExampleRows).map((d) => d.value).join(', ')}${numExampleRows < arr.length ? ', &hellip;' : ''}`;\r\n  }\r\n\r\n  createGroup(col: IMapColumn<any>) {\r\n    if (isArrayColumn(col) && col.dataLength) {\r\n      // fixed length optimized rendering\r\n      return this.createFixedGroup(col);\r\n    }\r\n    return {\r\n      template: `<div></div>`,\r\n      update: (node: HTMLElement, _group: IGroup, rows: IDataRow[]) => {\r\n        const vs = rows.filter((d) => !col.isMissing(d)).map((d) => col.getMapLabel(d));\r\n\r\n        const entries = groupByKey(vs);\r\n\r\n        node.innerHTML = entries.map(({key, values}) => `<div>${key}</div><div>${TableCellRenderer.example(values)}</div>`).join('');\r\n      }\r\n    };\r\n  }\r\n\r\n  private createFixedGroup(col: IArrayColumn<any>) {\r\n    return {\r\n      template: TableCellRenderer.template(col),\r\n      update: (node: HTMLElement, _group: IGroup, rows: IDataRow[]) => {\r\n        const numExampleRows = 5;\r\n        const vs = rows.filter((d) => !col.isMissing(d)).map((d) => col.getLabels(d));\r\n        forEach(node, '[data-v]', (n: HTMLElement, i) => {\r\n          const values = <string[]>[];\r\n          for (const v of vs) {\r\n            const vi = v[i];\r\n            if (isMissingValue(vi)) {\r\n              continue;\r\n            }\r\n            values.push(vi);\r\n            if (values.length >= numExampleRows) {\r\n              break;\r\n            }\r\n          }\r\n          n.innerHTML = `${values.join(', ')}${numExampleRows < vs.length ? ', &hellip;' : ''}`;\r\n        });\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary() {\r\n    return {\r\n      template: `<div><div>Key</div><div>Value</div></div>`,\r\n      update: noop\r\n    };\r\n  }\r\n\r\n}\r\n\r\nexport function groupByKey<T extends { key: string }>(arr: T[][]) {\r\n  const m = new Map<string, T[]>();\r\n  arr.forEach((a) => a.forEach((d) => {\r\n    if (!m.has(d.key)) {\r\n      m.set(d.key, [d]);\r\n    } else {\r\n      m.get(d.key)!.push(d);\r\n    }\r\n  }));\r\n  return Array.from(m).sort((a, b) => a[0].localeCompare(b[0])).map(([key, values]) => ({key, values}));\r\n}\r\n","import {IDataRow, IGroup} from '../model';\r\nimport Column from '../model/Column';\r\nimport StringMapColumn from '../model/StringMapColumn';\r\nimport {ERenderMode, ICellRendererFactory} from './interfaces';\r\nimport {renderMissingDOM} from './missing';\r\nimport {groupByKey} from './TableCellRenderer';\r\nimport {noop, noRenderer} from './utils';\r\n\r\n/** @internal */\r\nexport default class LinkMapCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Table with Links';\r\n\r\n  canRender(col: Column, mode: ERenderMode) {\r\n    return col instanceof StringMapColumn && mode !== ERenderMode.SUMMARY;\r\n  }\r\n\r\n  create(col: StringMapColumn) {\r\n    const align = col.alignment || 'left';\r\n    return {\r\n      template: `<div></div>`,\r\n      update: (node: HTMLElement, d: IDataRow) => {\r\n        if (renderMissingDOM(node, col, d)) {\r\n          return;\r\n        }\r\n        const values = col.getValue(d);\r\n        node.innerHTML = col.getLabels(d).map(({key, value}, i) => `<div>${key}</div><div${align !== 'left' ? ` class=\"lu-${align}\"` : ''}><a href=\"${values[i].value}\" target=\"_blank\">${value}</a></div>`).join('');\r\n      },\r\n      render: noop\r\n    };\r\n  }\r\n\r\n  private static example(arr: { value: string, link: string }[]) {\r\n    const numExampleRows = 5;\r\n    const examples = <string[]>[];\r\n    for (const row of arr) {\r\n      examples.push(`<a target=\"_blank\" href=\"${row.link}\">${row.value}</a>`);\r\n      if (examples.length >= numExampleRows) {\r\n        break;\r\n      }\r\n    }\r\n    return `${examples.join(', ')}${examples.length < arr.length} ? ', &hellip;': ''}`;\r\n  }\r\n\r\n  createGroup(col: StringMapColumn) {\r\n    const align = col.alignment || 'left';\r\n    return {\r\n      template: `<div></div>`,\r\n      update: (node: HTMLElement, _group: IGroup, rows: IDataRow[]) => {\r\n        const vs = rows.filter((d) => !col.isMissing(d)).map((d) => {\r\n          const labels = col.getLabels(d);\r\n          const values = col.getValue(d);\r\n          return labels.map(({key, value}, i) => ({key, value, link: values[i].value}));\r\n        });\r\n\r\n        const entries = groupByKey(vs);\r\n\r\n        node.innerHTML = entries.map(({key, values}) => `<div>${key}</div><div${align !== 'left' ? ` class=\"lu-${align}\"` : ''}>${LinkMapCellRenderer.example(values)}</div>`).join('');\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary() {\r\n    return noRenderer;\r\n  }\r\n}\r\n","import {ICellRendererFactory} from './interfaces';\r\nimport {noop} from './utils';\r\n\r\n/** @internal */\r\nexport default class LoadingCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Loading';\r\n\r\n  canRender() {\r\n    return false; // just direct selection\r\n  }\r\n\r\n  create() {\r\n    return {\r\n      template: `<div>Loading…</div>`,\r\n      update: noop,\r\n      render: noop\r\n    };\r\n  }\r\n\r\n  createGroup() {\r\n    return this.create();\r\n  }\r\n\r\n  createSummary() {\r\n    return this.create();\r\n  }\r\n}\r\n","import {ICategoricalStatistics, IStatistics} from '../internal/math';\r\nimport {IDataRow, isMissingValue, isNumberColumn} from '../model';\r\nimport Column from '../model/Column';\r\nimport {IMapColumn, isMapColumn} from '../model/IArrayColumn';\r\nimport {DEFAULT_FORMATTER} from '../model/INumberColumn';\r\nimport {IMapAbleColumn, isMapAbleColumn} from '../model/MappingFunction';\r\nimport {colorOf} from './impose';\r\nimport {ICellRendererFactory, IImposer, default as IRenderContext, ERenderMode} from './interfaces';\r\nimport {renderMissingDOM} from './missing';\r\nimport {noop, noRenderer} from './utils';\r\n\r\n/** @internal */\r\nexport default class MapBarCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Bar Table';\r\n\r\n  canRender(col: Column, mode: ERenderMode) {\r\n    return isMapColumn(col) && isNumberColumn(col) && (mode === ERenderMode.CELL || (mode === ERenderMode.SUMMARY && isMapAbleColumn(col)));\r\n  }\r\n\r\n  create(col: IMapColumn<number>, _context: IRenderContext, _hist: IStatistics | ICategoricalStatistics | null, imposer?: IImposer) {\r\n    return {\r\n      template: `<div></div>`,\r\n      update: (node: HTMLElement, d: IDataRow) => {\r\n        if (renderMissingDOM(node, col, d)) {\r\n          return;\r\n        }\r\n        node.innerHTML = col.getMap(d).map(({key, value}) => {\r\n          if (isMissingValue(value)) {\r\n            return `<div>${key}</div><div class=\"lu-missing\"></div>`;\r\n          }\r\n          const w = isNaN(value) ? 0 : Math.round(value * 100 * 100) / 100;\r\n          return `<div>${key}</div><div title=\"${DEFAULT_FORMATTER(value)}\"><div style=\"width: ${w}%; background-color: ${colorOf(col, d, imposer)}\"><span class=\"lu-hover-only\">${value}</span></div></div>`;\r\n        }).join('');\r\n      },\r\n      render: noop\r\n    };\r\n  }\r\n\r\n  createGroup() {\r\n    return noRenderer;\r\n  }\r\n\r\n  createSummary(col: IMapColumn<number> & IMapAbleColumn) {\r\n    return {\r\n      template: `<div><div>Key</div><div><span></span><span></span>Value</div></div>`,\r\n      update: (node: HTMLElement) => {\r\n        const range = col.getRange();\r\n        const value = <HTMLElement>node.lastElementChild!;\r\n        value.firstElementChild!.textContent = range[0];\r\n        value.children[1]!.textContent = range[1];\r\n      }\r\n    };\r\n  }\r\n}\r\n","import {IDataRow, IGroup} from '../model';\r\nimport Column from '../model/Column';\r\nimport RankColumn from '../model/RankColumn';\r\nimport {ICellRendererFactory} from './interfaces';\r\nimport {renderMissingDOM} from './missing';\r\nimport {noop, noRenderer, setText} from './utils';\r\n\r\n/** @internal */\r\nexport default class RankCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Default';\r\n\r\n  canRender(col: Column) {\r\n    return col instanceof RankColumn;\r\n  }\r\n\r\n  create(col: Column) {\r\n    return {\r\n      template: `<div class=\"lu-right\"> </div>`,\r\n      update: (n: HTMLDivElement, d: IDataRow) => {\r\n        renderMissingDOM(n, col, d);\r\n        setText(n, col.getLabel(d));\r\n      },\r\n      render: noop\r\n    };\r\n  }\r\n\r\n  createGroup(col: Column) {\r\n    return {\r\n      template: `<div><div></div><div></div></div>`,\r\n      update: (n: HTMLElement, _group: IGroup, rows: IDataRow[]) => {\r\n        const fromTSpan = <HTMLElement>n.firstElementChild!;\r\n        const toTSpan = <HTMLElement>n.lastElementChild!;\r\n        if (rows.length === 0) {\r\n          fromTSpan.textContent = '';\r\n          toTSpan.textContent = '';\r\n          return;\r\n        }\r\n        fromTSpan.textContent = col.getLabel(rows[0]);\r\n        toTSpan.textContent = col.getLabel(rows[rows.length - 1],);\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary() {\r\n    return noRenderer;\r\n  }\r\n}\r\n","import {IDataRow, IGroup, isMissingValue} from '../model';\r\nimport Column from '../model/Column';\r\nimport {INumbersColumn, isNumbersColumn} from '../model/INumberColumn';\r\nimport NumbersColumn from '../model/NumbersColumn';\r\nimport {matchRows} from './ANumbersCellRenderer';\r\nimport {ERenderMode, ICellRendererFactory} from './interfaces';\r\nimport {renderMissingDOM} from './missing';\r\nimport {forEachChild, noop, noRenderer} from './utils';\r\n\r\n/** @internal */\r\nexport function line(data: number[]) {\r\n  if (data.length === 0) {\r\n    return '';\r\n  }\r\n  let p = '';\r\n  let moveNext = true;\r\n\r\n  data.forEach((d, i) => {\r\n    if (isMissingValue(d)) {\r\n      moveNext = true;\r\n    } else if (moveNext) {\r\n      p += `M${i},${1 - d} `;\r\n      moveNext = false;\r\n    } else {\r\n      p += `L${i},${1 - d} `;\r\n    }\r\n  });\r\n  return p;\r\n}\r\n\r\n/** @internal */\r\nexport default class SparklineCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Sparkline';\r\n\r\n  canRender(col: Column, mode: ERenderMode) {\r\n    return isNumbersColumn(col) && mode !== ERenderMode.SUMMARY;\r\n  }\r\n\r\n  create(col: INumbersColumn) {\r\n    const dataLength = col.dataLength!;\r\n    const yPos = 1 - col.getMapping().apply(NumbersColumn.CENTER);\r\n    return {\r\n      template: `<svg viewBox=\"0 0 ${dataLength - 1} 1\" preserveAspectRatio=\"none meet\"><line x1=\"0\" x2=\"${dataLength - 1}\" y1=\"${yPos}\" y2=\"${yPos}\"></line><path></path></svg>`,\r\n      update: (n: HTMLElement, d: IDataRow) => {\r\n        if (renderMissingDOM(n, col, d)) {\r\n          return;\r\n        }\r\n        const data = col.getNumbers(d);\r\n        n.querySelector('path')!.setAttribute('d', line(data));\r\n      },\r\n      render: noop\r\n    };\r\n  }\r\n\r\n  createGroup(col: INumbersColumn) {\r\n    const dataLength = col.dataLength!;\r\n    const yPos = 1 - col.getMapping().apply(NumbersColumn.CENTER);\r\n    return {\r\n      template: `<svg viewBox=\"0 0 ${dataLength} 1\" preserveAspectRatio=\"none meet\"><line x1=\"0\" x2=\"${dataLength - 1}\" y1=\"${yPos}\" y2=\"${yPos}\"></line><path></path></svg>`,\r\n      update: (n: HTMLElement, _group: IGroup, rows: IDataRow[]) => {\r\n        //overlapping ones\r\n        matchRows(n, rows, `<path></path>`);\r\n        forEachChild(n, ((row, i) => {\r\n          const d = rows[i];\r\n          row.setAttribute('d', line(col.getNumbers(d)));\r\n        }));\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary() {\r\n    return noRenderer;\r\n  }\r\n\r\n}\r\n","import {IDataRow} from '../model';\r\nimport Column from '../model/Column';\r\nimport {DEFAULT_FORMATTER, INumbersColumn, isNumbersColumn} from '../model/INumberColumn';\r\nimport NumbersColumn from '../model/NumbersColumn';\r\nimport {CANVAS_HEIGHT} from '../styles';\r\nimport {ANumbersCellRenderer} from './ANumbersCellRenderer';\r\nimport {toHeatMapColor} from './BrightnessCellRenderer';\r\nimport IRenderContext, {ERenderMode, ICellRendererFactory, IImposer} from './interfaces';\r\nimport {attr, forEachChild, noRenderer} from './utils';\r\n\r\n/** @internal */\r\nexport default class VerticalBarCellRenderer extends ANumbersCellRenderer implements ICellRendererFactory {\r\n  readonly title = 'Bar Chart';\r\n\r\n  canRender(col: Column, mode: ERenderMode) {\r\n    return isNumbersColumn(col) && Boolean(col.dataLength) && mode === ERenderMode.CELL;\r\n  }\r\n\r\n  private static compute(v: number, threshold: number, domain: number[]) {\r\n    if (v < threshold) {\r\n      //threshold to down\r\n      return {height: (threshold - v), bottom: (v - domain[0])};\r\n    }\r\n    //from top to down\r\n    return {height: (v - threshold), bottom: (threshold - domain[0])};\r\n  }\r\n\r\n  protected createContext(col: INumbersColumn, context: IRenderContext, imposer?: IImposer) {\r\n    const cellDimension = context.colWidth(col) / col.dataLength!;\r\n    const threshold = col.getMapping().apply(NumbersColumn.CENTER);\r\n    const range = 1;\r\n    let templateRows = '';\r\n    for (let i = 0; i < col.dataLength!; ++i) {\r\n      templateRows += `<div style=\"background-color: white\" title=\"\"></div>`;\r\n    }\r\n    return {\r\n      templateRow: templateRows,\r\n      update: (row: HTMLElement, data: number[], raw: number[], item: IDataRow) => {\r\n        const zero = toHeatMapColor(0, item, col, imposer);\r\n        const one = toHeatMapColor(1, item, col, imposer);\r\n\r\n        forEachChild(row, (d, i) => {\r\n          const v = data[i];\r\n          const {bottom, height} = VerticalBarCellRenderer.compute(v, threshold, [0, 1]);\r\n          attr(<HTMLElement>d, {\r\n            title: DEFAULT_FORMATTER(raw[i])\r\n          }, {\r\n            'background-color': v < threshold ? zero : one,\r\n            bottom: `${Math.round((100 * bottom) / range)}%`,\r\n            height: `${Math.round((100 * height) / range)}%`\r\n          });\r\n        });\r\n      },\r\n      render: (ctx: CanvasRenderingContext2D, data: number[], item: IDataRow) => {\r\n        const zero = toHeatMapColor(0, item, col, imposer);\r\n        const one = toHeatMapColor(1, item, col, imposer);\r\n        const scale = CANVAS_HEIGHT / range;\r\n        data.forEach((v, j) => {\r\n          ctx.fillStyle = v < threshold ? zero : one;\r\n          const xpos = (j * cellDimension);\r\n          const {bottom, height} = VerticalBarCellRenderer.compute(v, threshold, [0, 1]);\r\n          ctx.fillRect(xpos, (range - height - bottom) * scale, cellDimension, height * scale);\r\n        });\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary() {\r\n    return noRenderer;\r\n  }\r\n}\r\n","import Column from '../model/Column';\r\nimport ActionRenderer from './ActionRenderer';\r\nimport AggregateGroupRenderer from './AggregateGroupRenderer';\r\nimport AnnotationRenderer from './AnnotationRenderer';\r\nimport BarCellRenderer from './BarCellRenderer';\r\nimport BooleanCellRenderer from './BooleanCellRenderer';\r\nimport BoxplotCellRenderer from './BoxplotCellRenderer';\r\nimport BrightnessCellRenderer from './BrightnessCellRenderer';\r\nimport CategoricalCellRenderer from './CategoricalCellRenderer';\r\nimport CategoricalHeatmapCellRenderer from './CategoricalHeatmapCellRenderer';\r\nimport CategoricalStackedDistributionlCellRenderer from './CategoricalStackedDistributionlCellRenderer';\r\nimport CircleCellRenderer from './CircleCellRenderer';\r\nimport {DefaultCellRenderer} from './DefaultCellRenderer';\r\nimport DotCellRenderer from './DotCellRenderer';\r\nimport GroupCellRenderer from './GroupCellRenderer';\r\nimport HeatmapCellRenderer from './HeatmapCellRenderer';\r\nimport HistogramCellRenderer from './HistogramCellRenderer';\r\nimport ImageCellRenderer from './ImageCellRenderer';\r\nimport {ERenderMode, ICellRendererFactory} from './interfaces';\r\nimport InterleavingCellRenderer from './InterleavingCellRenderer';\r\nimport LinkCellRenderer from './LinkCellRenderer';\r\nimport LinkMapCellRenderer from './LinkMapCellRenderer';\r\nimport LoadingCellRenderer from './LoadingCellRenderer';\r\nimport MapBarCellRenderer from './MapBarCellRenderer';\r\nimport MultiLevelCellRenderer from './MultiLevelCellRenderer';\r\nimport RankCellRenderer from './RankCellRenderer';\r\nimport SelectionRenderer from './SelectionRenderer';\r\nimport SparklineCellRenderer from './SparklineCellRenderer';\r\nimport StringCellRenderer from './StringCellRenderer';\r\nimport TableCellRenderer from './TableCellRenderer';\r\nimport UpSetCellRenderer from './UpSetCellRenderer';\r\nimport VerticalBarCellRenderer from './VerticalBarCellRenderer';\r\n\r\nexport {\r\n  default as IRenderContext,\r\n  IImposer,\r\n  ERenderMode,\r\n  ISummaryRenderer,\r\n  IGroupCellRenderer,\r\n  ICellRenderer,\r\n  ICellRendererFactory\r\n} from './interfaces';\r\n\r\n\r\nconst defaultCellRenderer = new DefaultCellRenderer();\r\n/**\r\n * default render factories\r\n */\r\nexport const renderers: { [key: string]: ICellRendererFactory } = {\r\n  actions: new ActionRenderer(),\r\n  aggregate: new AggregateGroupRenderer(),\r\n  annotate: new AnnotationRenderer(),\r\n  boolean: new BooleanCellRenderer(),\r\n  boxplot: new BoxplotCellRenderer(),\r\n  brightness: new BrightnessCellRenderer(),\r\n  catdistributionbar: new CategoricalStackedDistributionlCellRenderer(),\r\n  categorical: new CategoricalCellRenderer(),\r\n  circle: new CircleCellRenderer(),\r\n  default: defaultCellRenderer,\r\n  dot: new DotCellRenderer(),\r\n  group: new GroupCellRenderer(),\r\n  heatmap: new HeatmapCellRenderer(),\r\n  catheatmap: new CategoricalHeatmapCellRenderer(),\r\n  histogram: new HistogramCellRenderer(),\r\n  image: new ImageCellRenderer(),\r\n  interleaving: new InterleavingCellRenderer(),\r\n  link: new LinkCellRenderer(),\r\n  linkMap: new LinkMapCellRenderer(),\r\n  loading: new LoadingCellRenderer(),\r\n  nested: new MultiLevelCellRenderer(false),\r\n  number: new BarCellRenderer(),\r\n  mapbars: new MapBarCellRenderer(),\r\n  rank: new RankCellRenderer(),\r\n  selection: new SelectionRenderer(),\r\n  sparkline: new SparklineCellRenderer(),\r\n  stack: new MultiLevelCellRenderer(),\r\n  string: new StringCellRenderer(),\r\n  table: new TableCellRenderer(),\r\n  upset: new UpSetCellRenderer(),\r\n  verticalbar: new VerticalBarCellRenderer()\r\n};\r\n\r\n\r\nexport function chooseRenderer(col: Column, renderers: { [key: string]: ICellRendererFactory }): ICellRendererFactory {\r\n  const r = renderers[col.getRenderer()];\r\n  return r || defaultCellRenderer;\r\n}\r\n\r\nexport function chooseGroupRenderer(col: Column, renderers: { [key: string]: ICellRendererFactory }): ICellRendererFactory {\r\n  const r = renderers[col.getGroupRenderer()];\r\n  return r || defaultCellRenderer;\r\n}\r\n\r\nexport function chooseSummaryRenderer(col: Column, renderers: { [key: string]: ICellRendererFactory }): ICellRendererFactory {\r\n  const r = renderers[col.getSummaryRenderer()];\r\n  return r || defaultCellRenderer;\r\n}\r\n\r\nexport function possibleRenderer(col: Column, renderers: { [key: string]: ICellRendererFactory }, mode: ERenderMode = ERenderMode.CELL): { type: string, label: string }[] {\r\n  const valid = Object.keys(renderers).filter((type) => {\r\n    const factory = renderers[type];\r\n    return factory.canRender(col, mode);\r\n  });\r\n  // TODO some magic to remove and order\r\n\r\n\r\n  return valid.map((type) => {\r\n    const r = renderers[type];\r\n    return {\r\n      type,\r\n      label: mode === ERenderMode.CELL ? r.title : (mode === ERenderMode.GROUP ? r.groupTitle || r.title : r.summaryTitle || r.groupTitle || r.title)\r\n    };\r\n  });\r\n}\r\n\r\nexport function possibleGroupRenderer(col: Column, renderers: { [key: string]: ICellRendererFactory }) {\r\n  return possibleRenderer(col, renderers, ERenderMode.GROUP);\r\n}\r\n\r\nexport function possibleSummaryRenderer(col: Column, renderers: { [key: string]: ICellRendererFactory }) {\r\n  return possibleRenderer(col, renderers, ERenderMode.SUMMARY);\r\n}\r\n","import {ICategoricalStatistics, IStatistics} from '../internal';\r\nimport {IDataRow, IGroup} from '../model';\r\nimport Column from '../model/Column';\r\nimport {\r\n  default as IRenderContext, ERenderMode, ICellRenderer, ICellRendererFactory, IGroupCellRenderer,\r\n  IImposer\r\n} from './interfaces';\r\nimport {noRenderer} from './utils';\r\n\r\n/**\r\n * helper class that renders a group renderer as a selected (e.g. median) single item\r\n * @internal\r\n */\r\nexport abstract class AAggregatedGroupRenderer<T extends Column> implements ICellRendererFactory {\r\n  abstract readonly title: string;\r\n\r\n  abstract canRender(col: Column, mode: ERenderMode): boolean;\r\n\r\n  abstract create(col: T, context: IRenderContext, hist: IStatistics | ICategoricalStatistics | null, imposer?: IImposer): ICellRenderer;\r\n\r\n  protected abstract aggregatedIndex(rows: IDataRow[], col: T): number;\r\n\r\n  createGroup(col: T, context: IRenderContext, hist: IStatistics | ICategoricalStatistics | null, imposer?: IImposer): IGroupCellRenderer {\r\n    const single = this.create(col, context, hist, imposer);\r\n    return {\r\n      template: `<div>${single.template}</div>`,\r\n      update: (node: HTMLElement, group: IGroup, rows: IDataRow[]) => {\r\n        const aggregate = this.aggregatedIndex(rows, col);\r\n        single.update(<HTMLElement>node.firstElementChild!, rows[aggregate], aggregate, group);\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary() {\r\n    return noRenderer;\r\n  }\r\n}\r\n\r\n/**\r\n * @internal\r\n */\r\nexport default AAggregatedGroupRenderer;\r\n","import {ICategoricalStatistics, IStatistics, round} from '../internal';\r\nimport {IDataRow, IGroup, IMultiLevelColumn, isMultiLevelColumn} from '../model';\r\nimport Column from '../model/Column';\r\nimport {medianIndex} from '../model/internal';\r\nimport {default as INumberColumn, isNumberColumn} from '../model/INumberColumn';\r\nimport {COLUMN_PADDING} from '../styles';\r\nimport {AAggregatedGroupRenderer} from './AAggregatedGroupRenderer';\r\nimport {default as IRenderContext, ERenderMode, ICellRendererFactory, IImposer} from './interfaces';\r\nimport {renderMissingCanvas, renderMissingDOM} from './missing';\r\nimport {matchColumns} from './utils';\r\n\r\n/** @internal */\r\nexport function gridClass(column: Column) {\r\n  return `lu-stacked-${column.id}`;\r\n}\r\n\r\n/** @internal */\r\nexport function createData(col: { children: Column[] } & Column, context: IRenderContext, stacked: boolean, mode: ERenderMode, imposer?: IImposer) {\r\n  const padding = COLUMN_PADDING;\r\n  let offset = 0;\r\n  const cols = col.children.map((d) => {\r\n    const shift = offset;\r\n    const width = d.getWidth();\r\n    offset += width;\r\n    offset += (!stacked ? padding : 0);\r\n\r\n    const renderer = mode === ERenderMode.CELL ? context.renderer(d, imposer) : null;\r\n    const groupRenderer = mode === ERenderMode.GROUP ? context.groupRenderer(d, imposer) : null;\r\n    const summaryRenderer = mode === ERenderMode.GROUP ? context.summaryRenderer(d, false, imposer) : null;\r\n    let template: string = '';\r\n    let rendererId: string = '';\r\n    switch (mode) {\r\n      case ERenderMode.CELL:\r\n        template = renderer!.template;\r\n        rendererId = col.getRenderer();\r\n        break;\r\n      case ERenderMode.GROUP:\r\n        template = groupRenderer!.template;\r\n        rendererId = col.getGroupRenderer();\r\n        break;\r\n      case ERenderMode.SUMMARY:\r\n        template = summaryRenderer!.template;\r\n        rendererId = col.getSummaryRenderer();\r\n        break;\r\n    }\r\n    // inject data attributes\r\n    template = template.replace(/^<([^ >]+)([ >])/, `<$1 data-column-id=\"${d.id}\" data-renderer=\"${rendererId}\"$2`);\r\n    return {\r\n      column: d,\r\n      shift,\r\n      width,\r\n      template,\r\n      rendererId,\r\n      renderer,\r\n      groupRenderer,\r\n      summaryRenderer\r\n    };\r\n  });\r\n  return {cols, stacked, padding};\r\n}\r\n\r\n/** @internal */\r\nexport default class MultiLevelCellRenderer extends AAggregatedGroupRenderer<IMultiLevelColumn & Column> implements ICellRendererFactory {\r\n  readonly title: string;\r\n\r\n  constructor(private readonly stacked: boolean = true) {\r\n    super();\r\n    this.title = this.stacked ? 'Stacked Bar' : 'Nested';\r\n  }\r\n\r\n  canRender(col: Column, mode: ERenderMode) {\r\n    return isMultiLevelColumn(col) && mode !== ERenderMode.SUMMARY;\r\n  }\r\n\r\n  create(col: IMultiLevelColumn & Column, context: IRenderContext, _hist: IStatistics | ICategoricalStatistics | null, imposer?: IImposer) {\r\n    const {cols, stacked, padding} = createData(col, context, this.stacked, ERenderMode.CELL, imposer);\r\n    const useGrid = context.option('useGridLayout', false);\r\n    const width = context.colWidth(col);\r\n    return {\r\n      template: `<div class='${useGrid ? gridClass(col) : ''}${useGrid && !stacked ? ' lu-grid-space' : ''}'>${cols.map((d) => d.template).join('')}</div>`,\r\n      update: (n: HTMLDivElement, d: IDataRow, i: number, group: IGroup) => {\r\n        if (renderMissingDOM(n, col, d)) {\r\n          return;\r\n        }\r\n        matchColumns(n, cols);\r\n\r\n        const children = <HTMLElement[]>Array.from(n.children);\r\n        const total = col.getWidth();\r\n        let missingWeight = 0;\r\n        cols.forEach((col, ci) => {\r\n          const weight = col.column.getWidth() / total;\r\n          const cnode = children[ci];\r\n          cnode.style.transform = stacked ? `translate(-${round((missingWeight / weight) * 100, 4)}%,0)` : null;\r\n          if (!useGrid) {\r\n            cnode.style.width = `${round(weight * 100, 2)}%`;\r\n            cnode.style.marginRight = stacked ? null : `${padding}px`;\r\n          } else {\r\n            (<any>cnode.style).gridColumnStart = (ci + 1).toString();\r\n          }\r\n          col.renderer!.update(cnode, d, i, group);\r\n          if (stacked) {\r\n            missingWeight += (1 - col.column.getValue(d)) * weight;\r\n          }\r\n        });\r\n      },\r\n      render: (ctx: CanvasRenderingContext2D, d: IDataRow, i: number, group: IGroup) => {\r\n        if (renderMissingCanvas(ctx, col, d, width)) {\r\n          return;\r\n        }\r\n        let stackShift = 0;\r\n        cols.forEach((col) => {\r\n          const shift = col.shift - stackShift;\r\n          ctx.translate(shift, 0);\r\n          col.renderer!.render(ctx, d, i, group);\r\n          ctx.translate(-shift, 0);\r\n          if (stacked) {\r\n            stackShift += col.width * (1 - col.column.getValue(d));\r\n          }\r\n        });\r\n      }\r\n    };\r\n  }\r\n\r\n\r\n  createGroup(col: IMultiLevelColumn & Column, context: IRenderContext, hist: IStatistics | ICategoricalStatistics | null, imposer?: IImposer) {\r\n    if (this.stacked && isNumberColumn(col)) {\r\n      return super.createGroup(col, context, hist, imposer);\r\n    }\r\n\r\n    const {cols, padding} = createData(col, context, false, ERenderMode.GROUP, imposer);\r\n    const useGrid = context.option('useGridLayout', false);\r\n    return {\r\n      template: `<div class='${useGrid ? gridClass(col) : ''}${useGrid ? ' lu-grid-space' : ''}'>${cols.map((d) => d.template).join('')}</div>`,\r\n      update: (n: HTMLElement, group: IGroup, rows: IDataRow[]) => {\r\n        matchColumns(n, cols);\r\n\r\n        const children = <HTMLElement[]>Array.from(n.children);\r\n        const total = col.getWidth();\r\n        cols.forEach((col, ci) => {\r\n          const weight = col.column.getWidth() / total;\r\n          const cnode = children[ci];\r\n          if (!useGrid) {\r\n            cnode.style.width = `${round(weight * 100, 2)}%`;\r\n            cnode.style.marginRight = `${padding}px`;\r\n          } else {\r\n            (<any>cnode.style).gridColumnStart = (ci + 1).toString();\r\n          }\r\n          col.groupRenderer!.update(cnode, group, rows);\r\n        });\r\n      }\r\n    };\r\n  }\r\n\r\n  protected aggregatedIndex(rows: IDataRow[], col: IMultiLevelColumn & Column) {\r\n    console.assert(isNumberColumn(col));\r\n    return medianIndex(rows, (<INumberColumn><any>col));\r\n  }\r\n}\r\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume it’s an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","var array = Array.prototype;\n\nexport var map = array.map;\nexport var slice = array.slice;\n","import {map} from \"d3-collection\";\nimport {slice} from \"./array\";\n\nexport var implicit = {name: \"implicit\"};\n\nexport default function ordinal(range) {\n  var index = map(),\n      domain = [],\n      unknown = implicit;\n\n  range = range == null ? [] : slice.call(range);\n\n  function scale(d) {\n    var key = d + \"\", i = index.get(key);\n    if (!i) {\n      if (unknown !== implicit) return unknown;\n      index.set(key, i = domain.push(d));\n    }\n    return range[(i - 1) % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = map();\n    var i = -1, n = _.length, d, key;\n    while (++i < n) if (!index.has(key = (d = _[i]) + \"\")) index.set(key, domain.push(d));\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return scale;\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateRound} from \"d3-interpolate\";\nimport {map, slice} from \"./array\";\nimport constant from \"./constant\";\nimport number from \"./number\";\n\nvar unit = [0, 1];\n\nexport function deinterpolateLinear(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(b);\n}\n\nfunction deinterpolateClamp(deinterpolate) {\n  return function(a, b) {\n    var d = deinterpolate(a = +a, b = +b);\n    return function(x) { return x <= a ? 0 : x >= b ? 1 : d(x); };\n  };\n}\n\nfunction reinterpolateClamp(reinterpolate) {\n  return function(a, b) {\n    var r = reinterpolate(a = +a, b = +b);\n    return function(t) { return t <= 0 ? a : t >= 1 ? b : r(t); };\n  };\n}\n\nfunction bimap(domain, range, deinterpolate, reinterpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = deinterpolate(d1, d0), r0 = reinterpolate(r1, r0);\n  else d0 = deinterpolate(d0, d1), r0 = reinterpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, deinterpolate, reinterpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = deinterpolate(domain[i], domain[i + 1]);\n    r[i] = reinterpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp());\n}\n\n// deinterpolate(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// reinterpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding domain value x in [a,b].\nexport default function continuous(deinterpolate, reinterpolate) {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      clamp = false,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return (output || (output = piecewise(domain, range, clamp ? deinterpolateClamp(deinterpolate) : deinterpolate, interpolate)))(+x);\n  }\n\n  scale.invert = function(y) {\n    return (input || (input = piecewise(range, domain, deinterpolateLinear, clamp ? reinterpolateClamp(reinterpolate) : reinterpolate)))(+y);\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = map.call(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = slice.call(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, rescale()) : clamp;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  return rescale();\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function(domain, count, specifier) {\n  var start = domain[0],\n      stop = domain[domain.length - 1],\n      step = tickStep(start, stop, count == null ? 10 : count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport {interpolateNumber as reinterpolate} from \"d3-interpolate\";\nimport {default as continuous, copy, deinterpolateLinear as deinterpolate} from \"./continuous\";\nimport tickFormat from \"./tickFormat\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return tickFormat(domain(), count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain(),\n        i0 = 0,\n        i1 = d.length - 1,\n        start = d[i0],\n        stop = d[i1],\n        step;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n\n    step = tickIncrement(start, stop, count);\n\n    if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n      step = tickIncrement(start, stop, count);\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n      step = tickIncrement(start, stop, count);\n    }\n\n    if (step > 0) {\n      d[i0] = Math.floor(start / step) * step;\n      d[i1] = Math.ceil(stop / step) * step;\n      domain(d);\n    } else if (step < 0) {\n      d[i0] = Math.ceil(start * step) / step;\n      d[i1] = Math.floor(stop * step) / step;\n      domain(d);\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous(deinterpolate, reinterpolate);\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  return linearish(scale);\n}\n","export default function(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n","import {ticks} from \"d3-array\";\nimport {format} from \"d3-format\";\nimport constant from \"./constant\";\nimport nice from \"./nice\";\nimport {default as continuous, copy} from \"./continuous\";\n\nfunction deinterpolate(a, b) {\n  return (b = Math.log(b / a))\n      ? function(x) { return Math.log(x / a) / b; }\n      : constant(b);\n}\n\nfunction reinterpolate(a, b) {\n  return a < 0\n      ? function(t) { return -Math.pow(-b, t) * Math.pow(-a, 1 - t); }\n      : function(t) { return Math.pow(b, t) * Math.pow(a, 1 - t); };\n}\n\nfunction pow10(x) {\n  return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n}\n\nfunction powp(base) {\n  return base === 10 ? pow10\n      : base === Math.E ? Math.exp\n      : function(x) { return Math.pow(base, x); };\n}\n\nfunction logp(base) {\n  return base === Math.E ? Math.log\n      : base === 10 && Math.log10\n      || base === 2 && Math.log2\n      || (base = Math.log(base), function(x) { return Math.log(x) / base; });\n}\n\nfunction reflect(f) {\n  return function(x) {\n    return -f(-x);\n  };\n}\n\nexport default function log() {\n  var scale = continuous(deinterpolate, reinterpolate).domain([1, 10]),\n      domain = scale.domain,\n      base = 10,\n      logs = logp(10),\n      pows = powp(10);\n\n  function rescale() {\n    logs = logp(base), pows = powp(base);\n    if (domain()[0] < 0) logs = reflect(logs), pows = reflect(pows);\n    return scale;\n  }\n\n  scale.base = function(_) {\n    return arguments.length ? (base = +_, rescale()) : base;\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.ticks = function(count) {\n    var d = domain(),\n        u = d[0],\n        v = d[d.length - 1],\n        r;\n\n    if (r = v < u) i = u, u = v, v = i;\n\n    var i = logs(u),\n        j = logs(v),\n        p,\n        k,\n        t,\n        n = count == null ? 10 : +count,\n        z = [];\n\n    if (!(base % 1) && j - i < n) {\n      i = Math.round(i) - 1, j = Math.round(j) + 1;\n      if (u > 0) for (; i < j; ++i) {\n        for (k = 1, p = pows(i); k < base; ++k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      } else for (; i < j; ++i) {\n        for (k = base - 1, p = pows(i); k >= 1; --k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      }\n    } else {\n      z = ticks(i, j, Math.min(j - i, n)).map(pows);\n    }\n\n    return r ? z.reverse() : z;\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    if (specifier == null) specifier = base === 10 ? \".0e\" : \",\";\n    if (typeof specifier !== \"function\") specifier = format(specifier);\n    if (count === Infinity) return specifier;\n    if (count == null) count = 10;\n    var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n    return function(d) {\n      var i = d / pows(Math.round(logs(d)));\n      if (i * base < base - 0.5) i *= base;\n      return i <= k ? specifier(d) : \"\";\n    };\n  };\n\n  scale.nice = function() {\n    return domain(nice(domain(), {\n      floor: function(x) { return pows(Math.floor(logs(x))); },\n      ceil: function(x) { return pows(Math.ceil(logs(x))); }\n    }));\n  };\n\n  scale.copy = function() {\n    return copy(scale, log().base(base));\n  };\n\n  return scale;\n}\n","import constant from \"./constant\";\nimport {linearish} from \"./linear\";\nimport {default as continuous, copy} from \"./continuous\";\n\nfunction raise(x, exponent) {\n  return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\n}\n\nexport default function pow() {\n  var exponent = 1,\n      scale = continuous(deinterpolate, reinterpolate),\n      domain = scale.domain;\n\n  function deinterpolate(a, b) {\n    return (b = raise(b, exponent) - (a = raise(a, exponent)))\n        ? function(x) { return (raise(x, exponent) - a) / b; }\n        : constant(b);\n  }\n\n  function reinterpolate(a, b) {\n    b = raise(b, exponent) - (a = raise(a, exponent));\n    return function(t) { return raise(a + b * t, 1 / exponent); };\n  }\n\n  scale.exponent = function(_) {\n    return arguments.length ? (exponent = +_, domain(domain())) : exponent;\n  };\n\n  scale.copy = function() {\n    return copy(scale, pow().exponent(exponent));\n  };\n\n  return linearish(scale);\n}\n\nexport function sqrt() {\n  return pow().exponent(0.5);\n}\n","import {Category, toolbar} from './annotations';\r\nimport CategoricalColumn from './CategoricalColumn';\r\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport ValueColumn, {IValueColumnDesc, dataLoaded} from './ValueColumn';\r\nimport {ICategoricalColumn, ICategory} from './ICategoricalColumn';\r\nimport {IDataRow} from './interfaces';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\nexport interface IBooleanDesc {\r\n  /**\r\n   * string to show for true\r\n   * @default ✓\r\n   */\r\n  trueMarker?: string;\r\n  /**\r\n   * strint to show for false\r\n   * @default (empty)\r\n   */\r\n  falseMarker?: string;\r\n}\r\n\r\nexport declare type IBooleanColumnDesc = IValueColumnDesc<boolean> & IBooleanDesc;\r\n\r\n\r\n/**\r\n * emitted when the filter property changes\r\n * @asMemberOf BooleanColumn\r\n * @event\r\n */\r\nexport declare function filterChanged(previous: boolean | null, current: boolean | null): void;\r\n\r\n/**\r\n * a string column with optional alignment\r\n */\r\n@toolbar('group', 'groupBy', 'filterBoolean')\r\n@Category('categorical')\r\nexport default class BooleanColumn extends ValueColumn<boolean> implements ICategoricalColumn {\r\n  static readonly EVENT_FILTER_CHANGED = 'filterChanged';\r\n\r\n  static readonly GROUP_TRUE = {name: 'True', color: 'black'};\r\n  static readonly GROUP_FALSE = {name: 'False', color: 'white'};\r\n\r\n  private currentFilter: boolean | null = null;\r\n  readonly categories: ICategory[];\r\n\r\n  constructor(id: string, desc: Readonly<IBooleanColumnDesc>) {\r\n    super(id, desc);\r\n    this.setWidthImpl(30);\r\n    this.categories = [\r\n      {\r\n        name: desc.trueMarker || '✓',\r\n        color: BooleanColumn.GROUP_TRUE.color,\r\n        label: BooleanColumn.GROUP_TRUE.name,\r\n        value: 0\r\n      },\r\n      {\r\n        name: desc.trueMarker || '',\r\n        color: BooleanColumn.GROUP_FALSE.color,\r\n        label: BooleanColumn.GROUP_FALSE.name,\r\n        value: 1\r\n      }\r\n    ];\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([BooleanColumn.EVENT_FILTER_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof BooleanColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\r\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(<any>type, listener);\r\n  }\r\n\r\n\r\n  get dataLength() {\r\n    return this.categories.length;\r\n  }\r\n\r\n  get labels() {\r\n    return this.categories.map((d) => d.label);\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    const v: any = super.getValue(row);\r\n    if (typeof(v) === 'undefined' || v == null) {\r\n      return false;\r\n    }\r\n    return v === true || v === 'true' || v === 'yes' || v === 'x';\r\n  }\r\n\r\n  isMissing() {\r\n    return false;\r\n  }\r\n\r\n  getCategory(row: IDataRow) {\r\n    const v = this.getValue(row);\r\n    return this.categories[v ? 0 : 1];\r\n  }\r\n\r\n  getColor(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getColor.call(this, row);\r\n  }\r\n\r\n  getLabel(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getLabel.call(this, row);\r\n  }\r\n\r\n  getLabels(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getLabels.call(this, row);\r\n  }\r\n\r\n  getValues(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getValues.call(this, row);\r\n  }\r\n\r\n  getMap(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getMap.call(this, row);\r\n  }\r\n\r\n  getMapLabel(row: IDataRow) {\r\n    return CategoricalColumn.prototype.getMapLabel.call(this, row);\r\n  }\r\n\r\n  getSet(row: IDataRow) {\r\n    const v = this.getValue(row);\r\n    const r = new Set<ICategory>();\r\n    r.add(this.categories[v ? 0 : 1]);\r\n    return r;\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any): any {\r\n    const r = super.dump(toDescRef);\r\n    if (this.currentFilter != null) {\r\n      r.filter = this.currentFilter;\r\n    }\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    super.restore(dump, factory);\r\n    if (typeof dump.filter !== 'undefined') {\r\n      this.currentFilter = dump.filter;\r\n    }\r\n  }\r\n\r\n  isFiltered() {\r\n    return this.currentFilter != null;\r\n  }\r\n\r\n  filter(row: IDataRow) {\r\n    if (!this.isFiltered()) {\r\n      return true;\r\n    }\r\n    const r = this.getValue(row);\r\n    return r === this.currentFilter;\r\n  }\r\n\r\n  getFilter() {\r\n    return this.currentFilter;\r\n  }\r\n\r\n  setFilter(filter: boolean | null) {\r\n    if (this.currentFilter === filter) {\r\n      return;\r\n    }\r\n    this.fire([BooleanColumn.EVENT_FILTER_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.currentFilter, this.currentFilter = filter);\r\n  }\r\n\r\n  compare(a: IDataRow, b: IDataRow) {\r\n    const av = this.getValue(a);\r\n    const bv = this.getValue(b);\r\n    return av === bv ? 0 : (av < bv ? -1 : +1);\r\n  }\r\n\r\n  group(row: IDataRow) {\r\n    const enabled = this.getValue(row);\r\n    return enabled ? BooleanColumn.GROUP_TRUE : BooleanColumn.GROUP_FALSE;\r\n  }\r\n}\r\n","import {toolbar} from './annotations';\r\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport ValueColumn, {dataLoaded} from './ValueColumn';\r\nimport {IDataRow} from './interfaces';\r\nimport {patternFunction} from './internal';\r\nimport MapColumn, {IMapColumnDesc} from './MapColumn';\r\nimport {default as StringColumn, EAlignment, IStringDesc, patternChanged} from './StringColumn';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\nexport declare type IStringMapColumnDesc = IStringDesc & IMapColumnDesc<string>;\r\n\r\n/**\r\n * a string column with optional alignment\r\n */\r\n@toolbar('search', 'editPattern')\r\nexport default class StringMapColumn extends MapColumn<string> {\r\n  static readonly EVENT_PATTERN_CHANGED = StringColumn.EVENT_PATTERN_CHANGED;\r\n\r\n  readonly alignment: EAlignment;\r\n  readonly escape: boolean;\r\n  private pattern: string;\r\n  private patternFunction: Function | null = null;\r\n  readonly patternTemplates: string[];\r\n\r\n  constructor(id: string, desc: Readonly<IStringMapColumnDesc>) {\r\n    super(id, desc);\r\n    this.setDefaultWidth(200); //by default 200\r\n    this.alignment = <any>desc.alignment || EAlignment.left;\r\n    this.escape = desc.escape !== false;\r\n    this.pattern = desc.pattern || '';\r\n    this.patternTemplates = desc.patternTemplates || [];\r\n    this.setDefaultRenderer('map');\r\n  }\r\n\r\n  setPattern(pattern: string) {\r\n    StringColumn.prototype.setPattern.call(this, pattern);\r\n  }\r\n\r\n  getPattern() {\r\n    return this.pattern;\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([StringColumn.EVENT_PATTERN_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof StringColumn.EVENT_PATTERN_CHANGED, listener: typeof patternChanged | null): this;\r\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(<any>type, listener);\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    return super.getValue(row).map(({key, value}) => ({\r\n      key,\r\n      value: this.replacePattern(value, key, row)\r\n    }));\r\n  }\r\n\r\n  private replacePattern(s: any, key: string, row: IDataRow) {\r\n    if (!this.pattern) {\r\n      return s == null ? '' : String(s);\r\n    }\r\n    if (!this.patternFunction) {\r\n      this.patternFunction = patternFunction(this.pattern, 'item', 'key');\r\n    }\r\n    return this.patternFunction.call(this, s, row.v, key);\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any): any {\r\n    const r = super.dump(toDescRef);\r\n    if (this.pattern !== (<any>this.desc).pattern) {\r\n      r.pattern = this.pattern;\r\n    }\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    if (dump.pattern) {\r\n      this.pattern = dump.pattern;\r\n    }\r\n    super.restore(dump, factory);\r\n  }\r\n}\r\n","import ADialog from './ADialog';\r\nimport Column from '../../model';\r\n\r\n\r\nexport default class DialogManager {\r\n\r\n  private readonly escKeyListener = (evt: KeyboardEvent) => {\r\n    if (evt.which === 27) {\r\n      this.removeLast();\r\n    }\r\n  }\r\n\r\n  private readonly openDialogs: ADialog[] = [];\r\n  readonly node: HTMLElement;\r\n\r\n  constructor(doc = document) {\r\n    this.node = doc.createElement('div');\r\n    this.node.classList.add('lu-backdrop');\r\n    this.node.innerHTML = `<div></div>`;\r\n    this.node.onclick = () => {\r\n      this.removeAll();\r\n    };\r\n  }\r\n\r\n  setHighlight(mask: { left: number, top: number, width: number, height: number }) {\r\n    const area = <HTMLElement>this.node.firstElementChild;\r\n    // @see http://bennettfeely.com/clippy/ -> select `Frame` example\r\n    area.style.clipPath = `polygon(\r\n      0% 0%,\r\n      0% 100%,\r\n      ${mask.left}px 100%,\r\n      ${mask.left}px ${mask.top}px,\r\n      ${mask.left + mask.width}px ${mask.top}px,\r\n      ${mask.left + mask.width}px ${mask.top + mask.height}px,\r\n      ${mask.left}px ${mask.top + mask.height}px,\r\n      ${mask.left}px 100%,\r\n      100% 100%,\r\n      100% 0%\r\n    )`;\r\n  }\r\n\r\n  setHighlightColumn(column: Column) {\r\n    const root = <HTMLElement>this.node.parentElement!;\r\n    if (!root) {\r\n      this.clearHighlight();\r\n      return;\r\n    }\r\n    const header = <HTMLElement>root.querySelector(`.lu-header[data-col-id=\"${column.id}\"]`);\r\n    if (!header) {\r\n      this.clearHighlight();\r\n      return;\r\n    }\r\n    const base = header.getBoundingClientRect();\r\n    const offset = root.getBoundingClientRect();\r\n    this.setHighlight({\r\n      left: base.left - offset.left,\r\n      top: base.top - offset.top,\r\n      width: base.width,\r\n      height: offset.height\r\n    });\r\n  }\r\n\r\n  clearHighlight() {\r\n    const area = <HTMLElement>this.node.firstElementChild;\r\n    area.style.clipPath = null;\r\n  }\r\n\r\n  private removeLast() {\r\n    if (this.openDialogs.length === 0) {\r\n      return;\r\n    }\r\n    this.remove(this.openDialogs[this.openDialogs.length - 1]);\r\n  }\r\n\r\n  removeAll() {\r\n    if (this.openDialogs.length === 0) {\r\n      return;\r\n    }\r\n    const all = this.openDialogs.splice(0, this.openDialogs.length);\r\n    all.forEach((d) => d.destroy());\r\n    this.takeDown();\r\n  }\r\n\r\n  remove(dialog: ADialog) {\r\n    const index = this.openDialogs.indexOf(dialog);\r\n    if (index < 0) {\r\n      return false;\r\n    }\r\n    // destroy self and all levels below that = after that\r\n    const destroyed = this.openDialogs.splice(index, this.openDialogs.length - index);\r\n    destroyed.reverse().forEach((d) => d.destroy());\r\n\r\n    if (this.openDialogs.length === 0) {\r\n      this.takeDown();\r\n    }\r\n    return true;\r\n  }\r\n\r\n  removeAboveLevel(level: number) {\r\n    // hide all dialogs which have a higher or equal level to the newly opened one\r\n    this.openDialogs.filter((d) => d.level >= level).reverse().forEach((d) => this.remove(d));\r\n  }\r\n\r\n  removeLike(dialog: ADialog) {\r\n    const similar = this.openDialogs.find((d) => dialog.equals(d));\r\n    if (!similar) {\r\n      return false;\r\n    }\r\n    this.remove(similar);\r\n    return true;\r\n  }\r\n\r\n  private setUp() {\r\n    this.node.ownerDocument.addEventListener('keyup', this.escKeyListener, {\r\n      passive: true\r\n    });\r\n    this.node.style.display = 'block';\r\n  }\r\n\r\n  private takeDown() {\r\n    this.clearHighlight();\r\n    this.node.ownerDocument.removeEventListener('keyup', this.escKeyListener);\r\n    this.node.style.display = null;\r\n  }\r\n\r\n  push(dialog: ADialog) {\r\n    this.removeAboveLevel(dialog.level);\r\n\r\n    if (this.openDialogs.length === 0) {\r\n      this.setUp();\r\n    }\r\n\r\n    this.openDialogs.push(dialog);\r\n  }\r\n}\r\n","import {nonUniformContext, MultiTableRowRenderer, GridStyleManager} from 'lineupengine';\r\nimport {ILineUpOptions} from '../interfaces';\r\nimport {findOption, ICategoricalStatistics, IStatistics, round} from '../internal';\r\nimport AEventDispatcher, {suffix, IEventListener} from '../internal/AEventDispatcher';\r\nimport {\r\n  Column, ICategoricalColumn, IDataRow, IGroupData, IGroupItem, isCategoricalColumn, isGroup,\r\n  isNumberColumn, INumberColumn\r\n} from '../model';\r\nimport Ranking from '../model/Ranking';\r\nimport ADataProvider from '../provider/ADataProvider';\r\nimport {\r\n  chooseGroupRenderer, chooseRenderer, chooseSummaryRenderer, IImposer, IRenderContext, possibleGroupRenderer,\r\n  possibleRenderer, possibleSummaryRenderer\r\n} from '../renderer';\r\nimport EngineRanking, {IEngineRankingContext} from './EngineRanking';\r\nimport {IRankingHeaderContext, IRankingHeaderContextContainer} from './interfaces';\r\nimport SlopeGraph, {EMode} from './SlopeGraph';\r\nimport DialogManager from './dialogs/DialogManager';\r\n\r\n/**\r\n * emitted when the highlight changes\r\n * @asMemberOf EngineRenderer\r\n * @param dataIndex the highlghted data index or -1 for none\r\n * @event\r\n */\r\nexport declare function highlightChanged(dataIndex: number): void;\r\n\r\nexport default class EngineRenderer extends AEventDispatcher {\r\n  static readonly EVENT_HIGHLIGHT_CHANGED = EngineRanking.EVENT_HIGHLIGHT_CHANGED;\r\n\r\n  protected readonly options: Readonly<ILineUpOptions>;\r\n\r\n  private readonly histCache = new Map<string, IStatistics | ICategoricalStatistics | null | Promise<IStatistics | ICategoricalStatistics>>();\r\n\r\n  readonly node: HTMLElement;\r\n  private readonly table: MultiTableRowRenderer;\r\n  private readonly rankings: EngineRanking[] = [];\r\n  private readonly slopeGraphs: SlopeGraph[] = [];\r\n\r\n  readonly ctx: IRankingHeaderContextContainer & IRenderContext & IEngineRankingContext;\r\n\r\n  private readonly updateAbles: ((ctx: IRankingHeaderContext) => void)[] = [];\r\n  private zoomFactor = 1;\r\n  readonly idPrefix = `lu${Math.random().toString(36).slice(-8).substr(0, 3)}`; //generate a random string with length3;\r\n\r\n  private enabledHighlightListening: boolean = false;\r\n\r\n  constructor(protected data: ADataProvider, parent: HTMLElement, options: Readonly<ILineUpOptions>) {\r\n    super();\r\n    this.options = options;\r\n    this.node = parent.ownerDocument.createElement('main');\r\n    this.node.id = this.idPrefix;\r\n    this.node.classList.toggle('lu-whole-hover', options.expandLineOnHover);\r\n    parent.appendChild(this.node);\r\n\r\n    const statsOf = (col: Column) => {\r\n      const r = this.histCache.get(col.id);\r\n      if (r == null || r instanceof Promise) {\r\n        return null;\r\n      }\r\n      return r;\r\n    };\r\n    const dialogManager = new DialogManager(parent.ownerDocument);\r\n    parent.appendChild(dialogManager.node);\r\n    this.ctx = {\r\n      idPrefix: this.idPrefix,\r\n      document: parent.ownerDocument,\r\n      provider: data,\r\n      dialogManager,\r\n      toolbar: this.options.toolbar,\r\n      option: findOption(Object.assign({useGridLayout: true}, this.options)),\r\n      statsOf,\r\n      renderer: (col: Column, imposer?: IImposer) => {\r\n        const r = chooseRenderer(col, this.options.renderers);\r\n        return r.create(col, this.ctx, statsOf(col), imposer);\r\n      },\r\n      groupRenderer: (col: Column, imposer?: IImposer) => {\r\n        const r = chooseGroupRenderer(col, this.options.renderers);\r\n        return r.createGroup(col, this.ctx, statsOf(col), imposer);\r\n      },\r\n      summaryRenderer: (col: Column, interactive: boolean, imposer?: IImposer) => {\r\n        const r = chooseSummaryRenderer(col, this.options.renderers);\r\n        return r.createSummary(col, this.ctx, interactive, imposer);\r\n      },\r\n      totalNumberOfRows: 0,\r\n      createRenderer(col: Column, imposer?: IImposer) {\r\n        const single = this.renderer(col, imposer);\r\n        const group = this.groupRenderer(col, imposer);\r\n        const summary = options.summaryHeader ? this.summaryRenderer(col, false, imposer) : null;\r\n        return {\r\n          single,\r\n          group,\r\n          summary,\r\n          singleId: col.getRenderer(),\r\n          groupId: col.getGroupRenderer(),\r\n          summaryId: col.getSummaryRenderer(),\r\n          singleTemplate: null,\r\n          groupTemplate: null,\r\n          summaryTemplate: null\r\n        };\r\n      },\r\n      getPossibleRenderer: (col: Column) => ({\r\n        item: possibleRenderer(col, this.options.renderers),\r\n        group: possibleGroupRenderer(col, this.options.renderers),\r\n        summary: possibleSummaryRenderer(col, this.options.renderers)\r\n      }),\r\n      colWidth: (col: Column) => !col.isVisible() ? 0 : col.getWidth()\r\n    };\r\n\r\n    this.table = new MultiTableRowRenderer(this.node, `#${this.idPrefix}`);\r\n\r\n    //apply rules\r\n    {\r\n      this.style.addRule('lineup_groupPadding', `\r\n       #${this.idPrefix} .lu-row[data-agg=group],\r\n       #${this.idPrefix} .lu-row[data-meta~=last] {\r\n        margin-bottom: ${options.groupPadding}px;\r\n       }`, false);\r\n\r\n      this.style.addRule('lineup_rowPadding', `\r\n       #${this.idPrefix} .lu-row[data-lod] {\r\n         padding-top: 0;\r\n       }`, false);\r\n\r\n       // padding in general and for hovered low detail rows + their afterwards\r\n       this.style.addRule('lineup_rowPadding2', `\r\n        #${this.idPrefix} .lu-row,\r\n        #${this.idPrefix} .lu-row[data-lod]:hover,\r\n        #${this.idPrefix} .lu-row[data-lod].le-highlighted,\r\n        #${this.idPrefix} .lu-row[data-lod].lu-selected,\r\n        #${this.idPrefix} .lu-row[data-lod]:hover + .lu-row,\r\n        #${this.idPrefix} .lu-row[data-lod].le-highlighted + .lu-row,\r\n        #${this.idPrefix} .lu-row[data-lod].lu-selected + .lu-row {\r\n          padding-top: ${options.rowPadding}px;\r\n        }`, false);\r\n\r\n      this.style.addRule('lineup_rotation', `\r\n       #${this.idPrefix}.lu-rotated-label .lu-label.lu-rotated {\r\n           transform: rotate(${-this.options.labelRotation}deg);\r\n       }`);\r\n    }\r\n\r\n    this.initProvider(data);\r\n  }\r\n\r\n  get style(): GridStyleManager {\r\n    return this.table.style;\r\n  }\r\n\r\n  zoomOut() {\r\n    this.zoomFactor = Math.max(this.zoomFactor - 0.1, 0.5);\r\n    this.updateZoomFactor();\r\n    this.update();\r\n  }\r\n\r\n  zoomIn() {\r\n    this.zoomFactor = Math.min(this.zoomFactor + 0.1, 2.0);\r\n    this.updateZoomFactor();\r\n    this.update();\r\n  }\r\n\r\n  private updateZoomFactor() {\r\n    const body = <HTMLElement>this.node.querySelector('main')!;\r\n    body.style.fontSize = `${this.zoomFactor * 100}%`;\r\n  }\r\n\r\n  pushUpdateAble(updateAble: (ctx: IRankingHeaderContext) => void) {\r\n    this.updateAbles.push(updateAble);\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([EngineRenderer.EVENT_HIGHLIGHT_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof EngineRenderer.EVENT_HIGHLIGHT_CHANGED, listener: typeof highlightChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(type, listener);\r\n  }\r\n\r\n\r\n  setDataProvider(data: ADataProvider) {\r\n    this.takeDownProvider();\r\n\r\n    this.data = data;\r\n    (<any>this.ctx).provider = data;\r\n\r\n    this.initProvider(data);\r\n  }\r\n\r\n  private takeDownProvider() {\r\n    this.data.on(`${ADataProvider.EVENT_SELECTION_CHANGED}.body`, null);\r\n    this.data.on(`${ADataProvider.EVENT_ADD_RANKING}.body`, null);\r\n    this.data.on(`${ADataProvider.EVENT_REMOVE_RANKING}.body`, null);\r\n    this.data.on(`${ADataProvider.EVENT_GROUP_AGGREGATION_CHANGED}.body`, null);\r\n    this.data.on(`${ADataProvider.EVENT_JUMP_TO_NEAREST}.body`, null);\r\n\r\n    this.rankings.forEach((r) => this.table.remove(r));\r\n    this.rankings.splice(0, this.rankings.length);\r\n    this.slopeGraphs.forEach((s) => this.table.remove(s));\r\n    this.slopeGraphs.splice(0, this.slopeGraphs.length);\r\n  }\r\n\r\n  private initProvider(data: ADataProvider) {\r\n    data.on(`${ADataProvider.EVENT_SELECTION_CHANGED}.body`, () => this.updateSelection(data.getSelection()));\r\n    data.on(`${ADataProvider.EVENT_ADD_RANKING}.body`, (ranking: Ranking) => {\r\n      this.addRanking(ranking);\r\n    });\r\n    data.on(`${ADataProvider.EVENT_REMOVE_RANKING}.body`, (ranking: Ranking) => {\r\n      this.removeRanking(ranking);\r\n    });\r\n    data.on(`${ADataProvider.EVENT_GROUP_AGGREGATION_CHANGED}.body`, (ranking: Ranking) => {\r\n      this.update(this.rankings.filter((r) => r.ranking === ranking));\r\n    });\r\n    data.on(`${ADataProvider.EVENT_JUMP_TO_NEAREST}.body`, (indices: number[]) => {\r\n      this.setHighlightToNearest(indices, true);\r\n    });\r\n\r\n    this.data.getRankings().forEach((r) => this.addRanking(r));\r\n  }\r\n\r\n  private updateSelection(dataIndices: number[]) {\r\n    const s = new Set(dataIndices);\r\n    this.rankings.forEach((r) => r.updateSelection(s));\r\n\r\n    this.slopeGraphs.forEach((r) => r.updateSelection(s));\r\n  }\r\n\r\n  private updateHist(ranking?: EngineRanking, col?: Column) {\r\n    if (!this.options.summaryHeader) {\r\n      return;\r\n    }\r\n    const rankings = ranking ? [ranking] : this.rankings;\r\n    rankings.forEach((r) => {\r\n      const ranking = r.ranking;\r\n      const order = ranking.getOrder();\r\n      const cols = col ? [col] : ranking.flatColumns;\r\n      const histo = order == null ? null : this.data.stats(order);\r\n      cols.filter((d) => d.isVisible() && isNumberColumn(d)).forEach((col: Column) => {\r\n        this.histCache.set(col.id, histo == null ? null : histo.stats(<INumberColumn>col));\r\n      });\r\n      cols.filter((d) => isCategoricalColumn(d) && d.isVisible()).forEach((col: Column) => {\r\n        this.histCache.set(col.id, histo == null ? null : histo.hist(<ICategoricalColumn>col));\r\n      });\r\n      if (col) {\r\n        // single update\r\n        r.updateHeaderOf(col);\r\n      } else {\r\n        r.updateHeaders();\r\n      }\r\n    });\r\n\r\n    this.updateAbles.forEach((u) => u(this.ctx));\r\n  }\r\n\r\n  private addRanking(ranking: Ranking) {\r\n    if (this.rankings.length > 0) {\r\n      // add slope graph first\r\n      const s = this.table.pushSeparator((header, body) => new SlopeGraph(header, body, `${ranking.id}S`, this.ctx, {\r\n        mode: this.options.defaultSlopeGraphMode === 'band' ? EMode.BAND : EMode.ITEM\r\n      }));\r\n      this.slopeGraphs.push(s);\r\n    }\r\n\r\n    const r = this.table.pushTable((header, body, tableId, style) => new EngineRanking(ranking, header, body, tableId, style, this.ctx, {\r\n      animation: this.options.animated,\r\n      customRowUpdate: this.options.customRowUpdate || (() => undefined),\r\n      levelOfDetail: this.options.levelOfDetail || (() => 'high'),\r\n      flags: this.options.flags\r\n    }));\r\n    r.on(EngineRanking.EVENT_WIDTH_CHANGED, () => {\r\n      this.updateRotatedHeaderState();\r\n      this.table.widthChanged();\r\n    });\r\n    r.on(EngineRanking.EVENT_UPDATE_DATA, () => this.update([r]));\r\n    r.on(EngineRanking.EVENT_UPDATE_HIST, (col: Column) => this.updateHist(r, col));\r\n    this.forward(r, EngineRanking.EVENT_HIGHLIGHT_CHANGED);\r\n    if (this.enabledHighlightListening) {\r\n      r.enableHighlightListening(true);\r\n    }\r\n\r\n    ranking.on(suffix('.renderer', Ranking.EVENT_ORDER_CHANGED), () => this.updateHist(r));\r\n\r\n    this.rankings.push(r);\r\n    this.update([r]);\r\n  }\r\n\r\n  private updateRotatedHeaderState() {\r\n    if (this.options.labelRotation === 0) {\r\n      return;\r\n    }\r\n    const l = this.node.querySelector('.lu-label.lu-rotated');\r\n    this.node.classList.toggle('lu-rotated-label', Boolean(l));\r\n  }\r\n\r\n  private removeRanking(ranking: Ranking | null) {\r\n    if (!ranking) {\r\n      // remove all\r\n      this.rankings.splice(0, this.rankings.length);\r\n      this.slopeGraphs.splice(0, this.slopeGraphs.length);\r\n      this.table.clear();\r\n      return;\r\n    }\r\n    const index = this.rankings.findIndex((r) => r.ranking === ranking);\r\n    if (index < 0) {\r\n      return; // error\r\n    }\r\n    const section = this.rankings.splice(index, 1)[0]!;\r\n    const slope = this.slopeGraphs.splice(index === 0 ? index : index - 1, 1)[0];\r\n    this.table.remove(section);\r\n    if (slope) {\r\n      this.table.remove(slope);\r\n    }\r\n  }\r\n\r\n  update(rankings: EngineRanking[] = this.rankings) {\r\n    rankings = rankings.filter((d) => !d.hidden);\r\n    if (rankings.length === 0) {\r\n      return;\r\n    }\r\n    const orders = rankings.map((r) => r.ranking.getOrder());\r\n    const data = this.data.fetch(orders);\r\n\r\n    (<any>this.ctx).totalNumberOfRows = Math.max(...data.map((d) => d.length));\r\n\r\n    // TODO support async\r\n    const localData = data.map((d) => d.map((d) => <IDataRow>d));\r\n\r\n    if (this.histCache.size === 0) {\r\n      this.updateHist();\r\n    }\r\n\r\n    const round2 = (v: number) => round(v, 2);\r\n    const rowPadding = round2(this.zoomFactor * this.options.rowPadding!);\r\n    const groupPadding = round2(this.zoomFactor * this.options.groupPadding!);\r\n\r\n    const heightsFor = (ranking: Ranking, data: (IGroupItem | IGroupData)[]) => {\r\n      if (this.options.dynamicHeight) {\r\n        const impl = this.options.dynamicHeight(data, ranking);\r\n        const f = (v: number | any, d: any) => typeof v === 'number' ? v : v(d);\r\n        if (impl) {\r\n          return {\r\n            defaultHeight: round2(this.zoomFactor * impl.defaultHeight),\r\n            height: (d: IGroupItem | IGroupData) => round2(this.zoomFactor * f(impl.height, d)),\r\n            padding: (d: IGroupItem | IGroupData) => round2(this.zoomFactor * f(impl.padding, d)),\r\n          };\r\n        }\r\n      }\r\n      const item = round2(this.zoomFactor * this.options.rowHeight!);\r\n      const group = round2(this.zoomFactor * this.options.groupHeight!);\r\n      return {\r\n        defaultHeight: item,\r\n        height: (d: IGroupItem | IGroupData) => isGroup(d) ? group : item,\r\n        padding: rowPadding\r\n      };\r\n    };\r\n\r\n    rankings.forEach((r, i) => {\r\n      const grouped = r.groupData(localData[i]);\r\n\r\n      const {height, defaultHeight, padding} = heightsFor(r.ranking, grouped);\r\n\r\n      const rowContext = nonUniformContext(grouped.map(height), defaultHeight, (index) => {\r\n        const pad = (typeof padding === 'number' ? padding : padding(grouped[index] || null));\r\n        if (index >= 0 && grouped[index] && (isGroup(grouped[index]) || (<IGroupItem>grouped[index]).meta === 'last' || (<IGroupItem>grouped[index]).meta === 'first last')) {\r\n          return groupPadding + pad;\r\n        }\r\n        return pad;\r\n      });\r\n      r.render(grouped, rowContext);\r\n    });\r\n\r\n    this.updateSlopeGraphs(rankings);\r\n\r\n    this.updateRotatedHeaderState();\r\n    this.table.widthChanged();\r\n  }\r\n\r\n  private updateSlopeGraphs(rankings: EngineRanking[] = this.rankings) {\r\n    const indices = new Set(rankings.map((d) => this.rankings.indexOf(d)));\r\n    this.slopeGraphs.forEach((s, i) => {\r\n      if (s.hidden) {\r\n        return;\r\n      }\r\n      const left = i;\r\n      const right = i + 1;\r\n      if (!indices.has(left) && !indices.has(right)) {\r\n        return;\r\n      }\r\n      const leftRanking = this.rankings[left];\r\n      const rightRanking = this.rankings[right];\r\n      s.rebuild(leftRanking.currentData, leftRanking.context, rightRanking.currentData, rightRanking.context);\r\n    });\r\n  }\r\n\r\n  setHighlight(dataIndex: number, scrollIntoView: boolean) {\r\n    const found = this.rankings.map((r) => r.setHighlight(dataIndex));\r\n    this.fire(EngineRenderer.EVENT_HIGHLIGHT_CHANGED, dataIndex);\r\n    if (this.rankings.length === 0 || dataIndex < 0) {\r\n      return false;\r\n    }\r\n    if (!scrollIntoView) {\r\n      return found[0]!;\r\n    }\r\n    return this.rankings[0].scrollIntoView(dataIndex);\r\n  }\r\n\r\n  setHighlightToNearest(dataIndices: number[], scrollIntoView: boolean) {\r\n    if (this.rankings.length === 0) {\r\n      return false;\r\n    }\r\n    const nearest = this.rankings[0].findNearest(dataIndices);\r\n    if (nearest >= 0) {\r\n      return this.setHighlight(nearest, scrollIntoView);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  getHighlight() {\r\n    for (const ranking of this.rankings) {\r\n      const h = ranking.getHighlight();\r\n      if (h >= 0) {\r\n        return h;\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  enableHighlightListening(enable: boolean) {\r\n    for (const ranking of this.rankings) {\r\n        ranking.enableHighlightListening(enable);\r\n    }\r\n    this.enabledHighlightListening = enable;\r\n  }\r\n\r\n  destroy() {\r\n    this.takeDownProvider();\r\n    this.table.destroy();\r\n    this.node.remove();\r\n  }\r\n}\r\n\r\n","import Column from '../../model/Column';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\nimport {IToolbarDialogAddon} from '../toolbar';\r\nimport {IRankingHeaderContext} from '../interfaces';\r\n\r\n/** @internal */\r\nexport default class AddonDialog extends ADialog {\r\n  constructor(private readonly column: Column, private readonly addons: IToolbarDialogAddon[], dialog: IDialogContext, private readonly ctx: IRankingHeaderContext, private readonly onClick?: ()=>void) {\r\n    super(dialog, {\r\n      fullDialog: Boolean(onClick),\r\n      resetPossible: false\r\n    });\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    for(const addon of this.addons) {\r\n      this.node.insertAdjacentHTML('beforeend', `<strong>${addon.title}</strong>`);\r\n      addon.append(this.column, node, this.dialog, this.ctx);\r\n    }\r\n  }\r\n\r\n  protected submit(): boolean {\r\n    if (this.onClick) {\r\n      this.onClick();\r\n    }\r\n    return true;\r\n  }\r\n}\r\n","import Ranking from '../../model/Ranking';\r\nimport Column from '../../model/Column';\r\nimport {ISortCriteria} from '../../model/Ranking';\r\nimport {updateHeader} from '../header';\r\nimport {IRankingHeaderContext} from '../interfaces';\r\nimport SearchBox, {ISearchBoxOptions} from './SearchBox';\r\nimport {isSupportType, categoryOf, isSortingAscByDefault} from '../../model/annotations';\r\nimport {isSortAble, isGroupAble, getToolbarDialogAddons, IToolbarDialogAddon, dialogContext} from '../toolbar';\r\nimport AddonDialog from '../dialogs/AddonDialog';\r\n\r\ninterface IColumnItem {\r\n  col: Column;\r\n  id: string;\r\n  text: string;\r\n}\r\n/**\r\n * @internal\r\n */\r\nexport default class Hierarchy {\r\n  readonly node: HTMLElement;\r\n  readonly groupAdder: SearchBox<IColumnItem>;\r\n  readonly sortAdder: SearchBox<IColumnItem>;\r\n\r\n  constructor(private readonly ctx: IRankingHeaderContext, document: Document) {\r\n    this.node = document.createElement('aside');\r\n    this.node.classList.add('lu-hierarchy');\r\n    this.node.innerHTML = `\r\n      <section>\r\n      </section>\r\n      <section>\r\n      </section>\r\n    `;\r\n    const options = <Partial<ISearchBoxOptions<IColumnItem>>>{\r\n      doc: document,\r\n      placeholder: 'Add Sort Criteria...',\r\n      formatItem: (item: IColumnItem, node: HTMLElement) => {\r\n        node.dataset.typeCat = categoryOf(item.col).name;\r\n        node.dataset.type = item.col.desc.type;\r\n        return item.text;\r\n      },\r\n\r\n    };\r\n    this.groupAdder = new SearchBox(Object.assign({}, options, {\r\n      placeholder: 'Add Grouping Criteria...'\r\n    }));\r\n    this.sortAdder = new SearchBox(options);\r\n  }\r\n\r\n  update(ranking: Ranking | null) {\r\n    if (!ranking) {\r\n      this.node.style.display = 'none';\r\n      return;\r\n    }\r\n    this.node.style.display = null;\r\n    this.renderGroups(ranking, <HTMLElement>this.node.firstElementChild!);\r\n    this.renderSorting(ranking, <HTMLElement>this.node.lastElementChild!);\r\n  }\r\n\r\n  private render<T>(node: HTMLElement, items: T[], toColumn: (item: T)=>Column, extras: (item: T, node: HTMLElement)=>void, addonKey: string, onChange: (item: T, delta: number)=>void) {\r\n    const cache = new Map((<HTMLElement[]>Array.from(node.children)).map((d) => <[string, HTMLElement]>[d.dataset.id, d]));\r\n    node.innerHTML = '';\r\n\r\n    items.forEach((d) => {\r\n      const col = toColumn(d);\r\n      const item = cache.get(col.id);\r\n      if (item) {\r\n        node.appendChild(item);\r\n        updateHeader(item, col);\r\n        return;\r\n      }\r\n      const addons = getToolbarDialogAddons(col, addonKey, this.ctx);\r\n\r\n      node.insertAdjacentHTML('beforeend', `<div data-id=\"${col.id}\" class=\"lu-toolbar\">\r\n      <div class=\"lu-label\">${col.label}</div>\r\n      ${addons.length > 0 ? `<i title=\"Customize\" class=\"lu-action\"><span aria-hidden=\"true\">Customize</span> </i>` : ''}\r\n      <i title=\"Move Up\" class=\"lu-action\"><span aria-hidden=\"true\">Move Up</span> </i>\r\n      <i title=\"Move Down\" class=\"lu-action\"><span aria-hidden=\"true\">Move Down</span> </i>\r\n      <i title=\"Remove from hierarchy\" class=\"lu-action\"><span aria-hidden=\"true\">Remove from hierarchy</span> </i>\r\n      </div>`);\r\n      const last = <HTMLElement>node.lastElementChild!;\r\n\r\n      function prevent(evt: Event) {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n      }\r\n\r\n      (<HTMLElement>last.querySelector('i[title=\"Move Down\"]')!).onclick = (evt) => {\r\n        prevent(evt);\r\n        onChange(d, + 1);\r\n      };\r\n      (<HTMLElement>last.querySelector('i[title=\"Move Up\"]')!).onclick = (evt) => {\r\n        prevent(evt);\r\n        onChange(d, -1);\r\n      };\r\n      (<HTMLElement>last.querySelector('i[title^=Remove]')!).onclick = (evt) => {\r\n        prevent(evt);\r\n        onChange(d, 0);\r\n      };\r\n\r\n      if (addons.length > 0) {\r\n        (<HTMLElement>last.querySelector('i[title=Customize]')!).onclick = (evt) => {\r\n          prevent(evt);\r\n          this.customize(col, addons, <any>evt);\r\n        };\r\n      }\r\n\r\n      extras(d, last);\r\n\r\n      updateHeader(last, col);\r\n    });\r\n  }\r\n\r\n  private renderGroups(ranking: Ranking, node: HTMLElement) {\r\n    const groups = ranking.getGroupCriteria();\r\n\r\n    if (groups.length === 0) {\r\n      node.innerHTML = '';\r\n      return;\r\n    }\r\n\r\n    const click = (col: Column, delta: number) => {\r\n      if (delta === 0) {\r\n        col.groupByMe();\r\n        return;\r\n      }\r\n      const current = col.isGroupedBy();\r\n      col.findMyRanker()!.groupBy(col, current + delta);\r\n    };\r\n\r\n    const addButton = (_: Column, last: HTMLElement) => {\r\n      last.insertAdjacentHTML('afterbegin', `<i title=\"Group\" class=\"lu-action\" data-group=\"true\"><span aria-hidden=\"true\">Group</span> </i>`);\r\n    };\r\n\r\n    this.render(node, groups, (d) => d, addButton, 'group', click);\r\n    this.addGroupAdder(ranking, groups, node);\r\n  }\r\n\r\n  private renderSorting(ranking: Ranking, node: HTMLElement) {\r\n    const sortCriterias = ranking.getSortCriteria();\r\n\r\n    if (sortCriterias.length === 0) {\r\n      node.innerHTML = '';\r\n      return;\r\n    }\r\n\r\n    const click = ({col}: ISortCriteria, delta: number) => {\r\n      const current = col.isSortedByMe();\r\n      if (!isFinite(delta)) {\r\n        col.sortByMe(current.asc === 'desc', current.priority);\r\n        return;\r\n      }\r\n      if (delta === 0) {\r\n        col.sortByMe(current.asc === 'asc', -1);\r\n        return;\r\n      }\r\n      col.sortByMe(current.asc === 'asc', current.priority! + delta);\r\n    };\r\n\r\n    const addButton = (s: ISortCriteria, last: HTMLElement) => {\r\n      last.insertAdjacentHTML('afterbegin', `\r\n      <i title=\"Sort\" class=\"lu-action\" data-sort=\"${s.asc ? 'asc' : 'desc'}\"><span aria-hidden=\"true\">Toggle Sorting</span> </i>`);\r\n      (<HTMLElement>last.querySelector('i[title=Sort]')!).onclick = (evt) => {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        click(s, Infinity);\r\n      };\r\n    };\r\n\r\n    this.render(node, sortCriterias, (d) => d.col, addButton, 'sort', click);\r\n\r\n    this.addSortAdder(ranking, sortCriterias, node);\r\n  }\r\n\r\n  private addAdder(adder: SearchBox<IColumnItem>, ranking: Ranking, addonKey: string, current: Column[], node: HTMLElement, check: (col: Column)=>boolean, onSelect: (col: Column)=>void) {\r\n    const used = new Set(current);\r\n\r\n    adder.data = ranking.children.filter((col) => !isSupportType(col) && !used.has(col) && check(col)).map((col) => ({col, id: col.id, text: col.label}));\r\n\r\n    adder.on(SearchBox.EVENT_SELECT, (item: IColumnItem) => {\r\n      const addons = getToolbarDialogAddons(item.col, addonKey, this.ctx);\r\n      if (addons.length > 0) {\r\n        this.customize(item.col, addons, { currentTarget: adder. node}, () => onSelect(item.col));\r\n      } else {\r\n        onSelect(item.col);\r\n      }\r\n    });\r\n\r\n    if (adder.data.length <= 0) {\r\n      return;\r\n    }\r\n\r\n    const wrapper = node.ownerDocument.createElement('footer');\r\n    wrapper.appendChild(adder.node);\r\n    node.appendChild(wrapper);\r\n  }\r\n\r\n  private addSortAdder(ranking: Ranking, sortCriterias: ISortCriteria[], node: HTMLElement) {\r\n    this.addAdder(this.sortAdder, ranking, 'sort', sortCriterias.map((d) => d.col), node, (d) => isSortAble(d, this.ctx), (col) => {\r\n      ranking.sortBy(col, isSortingAscByDefault(col), sortCriterias.length);\r\n    });\r\n  }\r\n\r\n  private addGroupAdder(ranking: Ranking, groups: Column[], node: HTMLElement) {\r\n    this.addAdder(this.groupAdder, ranking, 'group', groups, node, (d) => isGroupAble(d, this.ctx), (col) => {\r\n      ranking.groupBy(col, groups.length);\r\n    });\r\n  }\r\n\r\n  private customize(col: Column, addons: IToolbarDialogAddon[], evt: { currentTarget: Element }, onClick?: ()=>void) {\r\n    const dialog = new AddonDialog(col, addons, dialogContext(this.ctx, 0, evt), this.ctx, onClick);\r\n    dialog.open();\r\n  }\r\n}\r\n\r\n","import Column from '../../model/Column';\r\nimport {ISummaryRenderer} from '../../renderer/interfaces';\r\nimport {createToolbar, dragAbleColumn, updateHeader} from '../header';\r\nimport {IRankingHeaderContext} from '../interfaces';\r\nimport {NumberColumn} from '../../model';\r\n\r\n/** @internal */\r\nexport default class SidePanelEntryVis {\r\n  readonly node: HTMLElement;\r\n  private readonly summary: ISummaryRenderer;\r\n\r\n  constructor(public readonly column: Column, private ctx: IRankingHeaderContext, document: Document) {\r\n    this.node = document.createElement('article');\r\n    this.node.classList.add('lu-side-panel-entry');\r\n    this.node.dataset.colId = column.id;\r\n    this.node.dataset.type = column.desc.type;\r\n\r\n    this.summary = ctx.summaryRenderer(column, true);\r\n\r\n    this.column.on([`${NumberColumn.EVENT_FILTER_CHANGED}.panel`, `${Column.EVENT_DIRTY_HEADER}.panel`], () => {\r\n      this.update();\r\n    });\r\n    this.init();\r\n    this.update();\r\n  }\r\n\r\n  private init() {\r\n    this.node.innerHTML = `\r\n      <header><div class=\"lu-label\"></div><div class=\"lu-toolbar\"></div></header>${this.summary.template}`;\r\n    createToolbar(<HTMLElement>this.node.querySelector('.lu-toolbar'), 0, this.column, this.ctx);\r\n    dragAbleColumn(<HTMLElement>this.node.querySelector('header'), this.column, this.ctx);\r\n\r\n    const summary = <HTMLElement>this.node.lastElementChild!;\r\n    summary.classList.add('lu-summary');\r\n    summary.dataset.renderer = this.column.getSummaryRenderer();\r\n    summary.dataset.interactive = '';\r\n  }\r\n\r\n  update(ctx: IRankingHeaderContext = this.ctx) {\r\n    this.ctx = ctx;\r\n    updateHeader(this.node, this.column);\r\n    this.summary.update(<HTMLElement>this.node.querySelector('.lu-summary')!, ctx.statsOf(<any>this.column));\r\n  }\r\n\r\n  destroy() {\r\n    this.column.on([`${NumberColumn.EVENT_FILTER_CHANGED}.panel`, `${Column.EVENT_DIRTY_HEADER}.panel`], null);\r\n    this.node.remove();\r\n  }\r\n}\r\n","import Ranking from '../../model/Ranking';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\n\r\n/** @internal */\r\nexport default class RenameRankingDialog extends ADialog {\r\n\r\n  private readonly before: string;\r\n\r\n  constructor(private readonly ranking: Ranking, dialog: IDialogContext) {\r\n    super(dialog, {\r\n      fullDialog: true\r\n    });\r\n    this.before = ranking.getLabel();\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    node.classList.add('lu-rename-dialog');\r\n    node.insertAdjacentHTML('beforeend', `\r\n      <input type=\"text\" value=\"${this.ranking.getLabel()}\" required autofocus placeholder=\"name\">`);\r\n  }\r\n\r\n  protected reset() {\r\n    this.findInput('input[type=\"text\"]').value = this.before;\r\n    this.ranking.setLabel(this.before);\r\n  }\r\n\r\n  protected submit() {\r\n    const newValue = this.findInput('input[type=\"text\"]').value;\r\n    this.ranking.setLabel(newValue);\r\n    return true;\r\n  }\r\n}\r\n","import Ranking from '../../model/Ranking';\r\nimport {IRankingHeaderContext} from '../interfaces';\r\nimport {dialogContext} from '../toolbar';\r\nimport ADialog, {IDialogContext} from './ADialog';\r\nimport RenameRankingDialog from './RenameRankingDialog';\r\n\r\n/** @internal */\r\nexport default class MoreRankingOptionsDialog extends ADialog {\r\n\r\n  constructor(private readonly ranking: Ranking, dialog: IDialogContext, private readonly ctx: IRankingHeaderContext) {\r\n    super(dialog);\r\n  }\r\n\r\n  private addIcon(node: HTMLElement, title: string, onClick: (evt: MouseEvent)=>void) {\r\n    node.insertAdjacentHTML('beforeend', `<i title=\"${title}\" class=\"lu-action\"><span>${title}</span> </i>`);\r\n    const i = <HTMLElement>node.lastElementChild;\r\n    i.onclick = (evt) => {\r\n      evt.stopPropagation();\r\n      onClick(evt);\r\n    };\r\n  }\r\n\r\n  protected build(node: HTMLElement) {\r\n    node.classList.add('lu-more-options');\r\n    this.addIcon(node, 'Rename', (evt) => {\r\n      const dialog = new RenameRankingDialog(this.ranking, dialogContext(this.ctx, this.level + 1, <any>evt));\r\n      dialog.open();\r\n    });\r\n    this.addIcon(node, 'Remove', () => {\r\n      this.destroy();\r\n      this.ctx.provider.removeRanking(this.ranking);\r\n    });\r\n  }\r\n}\r\n","import {suffix} from '../../internal/AEventDispatcher';\r\nimport {isSupportType} from '../../model';\r\nimport Ranking from '../../model/Ranking';\r\nimport {IRankingHeaderContext} from '../interfaces';\r\nimport Hierarchy from './Hierarchy';\r\nimport {ISidePanelOptions} from './SidePanel';\r\nimport SidePanelEntryVis from './SidePanelEntryVis';\r\nimport {dialogContext} from '../toolbar';\r\nimport MoreRankingOptionsDialog from '../dialogs/MoreRankingOptionsDialog';\r\n\r\n\r\nexport default class SidePanelRanking {\r\n\r\n  readonly header: HTMLElement;\r\n  readonly dropdown: HTMLElement;\r\n  readonly node: HTMLElement;\r\n  private readonly hierarchy: Hierarchy | null;\r\n  private readonly entries = new Map<string, SidePanelEntryVis>();\r\n\r\n  constructor(public readonly ranking: Ranking, private ctx: IRankingHeaderContext, document: Document, private readonly options: Readonly<ISidePanelOptions>) {\r\n    this.node = document.createElement('section');\r\n    this.header = document.createElement('div');\r\n    this.dropdown = document.createElement('div');\r\n\r\n    this.dropdown.innerHTML = this.header.innerHTML = `<span>${ranking.getLabel()}</span><i class=\"lu-action\" title=\"More &hellip;\"><span aria-hidden=\"true\">More &hellip;\"></span></i>`;\r\n    (<HTMLElement>this.header.lastElementChild!).onclick = (<HTMLElement>this.dropdown.lastElementChild!).onclick = (evt) => {\r\n      evt.stopPropagation();\r\n      const dialog = new MoreRankingOptionsDialog(ranking, dialogContext(ctx, 1, <any>evt), ctx);\r\n      dialog.open();\r\n    };\r\n\r\n    this.hierarchy = this.options.hierarchy ? new Hierarchy(ctx, document) : null;\r\n\r\n    this.init();\r\n  }\r\n\r\n  private init() {\r\n    this.node.innerHTML = `\r\n      <div><main></main></div>\r\n    `;\r\n    if (this.hierarchy) {\r\n      this.node.insertBefore(this.hierarchy.node, this.node.firstChild);\r\n    }\r\n\r\n    if (this.hierarchy) {\r\n      this.ranking.on(suffix('.panel', Ranking.EVENT_GROUP_CRITERIA_CHANGED, Ranking.EVENT_SORT_CRITERIA_CHANGED), () => {\r\n        this.updateHierarchy();\r\n      });\r\n    }\r\n    this.ranking.on(suffix('.panel', Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_MOVE_COLUMN), () => {\r\n      this.updateList();\r\n      this.updateHierarchy();\r\n    });\r\n    this.ranking.on(suffix('.panel', Ranking.EVENT_LABEL_CHANGED), () => {\r\n      this.dropdown.firstElementChild!.textContent = this.header.firstElementChild!.textContent = this.ranking.getLabel();\r\n    });\r\n  }\r\n\r\n  get active() {\r\n    return this.node.classList.contains('lu-active');\r\n  }\r\n\r\n  set active(value: boolean) {\r\n    this.node.classList.toggle('lu-active', value);\r\n    this.header.classList.toggle('lu-active', value);\r\n    this.dropdown.classList.toggle('lu-active', value);\r\n    if (value) {\r\n      return;\r\n    }\r\n    this.updateList();\r\n    this.updateHierarchy();\r\n  }\r\n\r\n  update(ctx: IRankingHeaderContext) {\r\n    this.ctx = ctx;\r\n    this.updateList();\r\n    this.updateHierarchy();\r\n  }\r\n\r\n  private updateHierarchy() {\r\n    if (!this.hierarchy || !this.active) {\r\n      return;\r\n    }\r\n    this.hierarchy.update(this.ranking);\r\n  }\r\n\r\n  private updateList() {\r\n    if (!this.active) {\r\n      return;\r\n    }\r\n    const node = this.node.querySelector('main')!;\r\n    const columns = this.ranking.flatColumns.filter((d) => !isSupportType(d));\r\n\r\n    if (columns.length === 0) {\r\n      node.innerHTML = '';\r\n      this.entries.forEach((d) => d.destroy());\r\n      this.entries.clear();\r\n      return;\r\n    }\r\n\r\n    node.innerHTML = ``;\r\n\r\n    const copy = new Map(this.entries);\r\n    this.entries.clear();\r\n\r\n    columns.forEach((col) => {\r\n      const existing = copy.get(col.id);\r\n      if (existing) {\r\n        existing.update(this.ctx);\r\n        node.appendChild(existing.node);\r\n        this.entries.set(col.id, existing);\r\n        copy.delete(col.id);\r\n        return;\r\n      }\r\n\r\n      const entry = new SidePanelEntryVis(col, this.ctx, node.ownerDocument);\r\n      node.appendChild(entry.node);\r\n      this.entries.set(col.id, entry);\r\n    });\r\n\r\n    copy.forEach((d) => d.destroy());\r\n  }\r\n\r\n  destroy() {\r\n    this.header.remove();\r\n    this.node.remove();\r\n    this.ranking.on(suffix('.panel', Ranking.EVENT_GROUP_CRITERIA_CHANGED, Ranking.EVENT_SORT_CRITERIA_CHANGED, Ranking.EVENT_ADD_COLUMN, Ranking.EVENT_MOVE_COLUMN, Ranking.EVENT_REMOVE_COLUMN, Ranking.EVENT_LABEL_CHANGED), null);\r\n\r\n    this.entries.forEach((d) => d.destroy());\r\n    this.entries.clear();\r\n  }\r\n}\r\n","import ADialog, {IDialogContext} from './ADialog';\r\n\r\n/** @internal */\r\nexport default class ChooseRankingDialog extends ADialog {\r\n\r\n  constructor(private readonly items: HTMLElement[], dialog: IDialogContext) {\r\n    super(dialog);\r\n  }\r\n\r\n\r\n  protected build(node: HTMLElement) {\r\n    node.classList.add('lu-more-options', 'lu-choose-options');\r\n    for (const item of this.items) {\r\n      node.appendChild(item);\r\n    }\r\n  }\r\n}\r\n","import {suffix} from '../../internal/AEventDispatcher';\r\nimport {\r\n  createImpositionDesc,\r\n  createNestedDesc,\r\n  createReduceDesc,\r\n  createScriptDesc,\r\n  createStackDesc,\r\n  createRankDesc,\r\n  createGroupDesc,\r\n  createAggregateDesc,\r\n  createSelectionDesc,\r\n  IColumnDesc\r\n} from '../../model';\r\nimport {categoryOfDesc} from '../../model/annotations';\r\nimport Ranking from '../../model/Ranking';\r\nimport DataProvider, {IDataProvider} from '../../provider/ADataProvider';\r\nimport {IRankingHeaderContext} from '../interfaces';\r\nimport SearchBox, {IGroupSearchItem, ISearchBoxOptions} from './SearchBox';\r\nimport SidePanelRanking from './SidePanelRanking';\r\nimport {dialogContext} from '../toolbar';\r\nimport ChooseRankingDialog from '../dialogs/ChooseRankingDialog';\r\n\r\n\r\ninterface IColumnDescCategory {\r\n  label: string;\r\n  name: string;\r\n  order: number;\r\n}\r\n\r\ninterface IColumnWrapper {\r\n  desc: IColumnDesc;\r\n  category: IColumnDescCategory;\r\n  id: string;\r\n  text: string;\r\n}\r\n\r\nfunction isWrapper(item: IColumnWrapper | IGroupSearchItem<IColumnWrapper>): item is IColumnWrapper {\r\n  return (<IColumnWrapper>item).desc != null;\r\n}\r\n\r\nexport interface ISidePanelOptions extends Partial<ISearchBoxOptions<IColumnWrapper>> {\r\n  additionalDescs: IColumnDesc[];\r\n  chooser: boolean;\r\n  hierarchy: boolean;\r\n  collapseable: boolean | 'collapsed';\r\n}\r\n\r\nexport default class SidePanel {\r\n\r\n  private readonly options: ISidePanelOptions = {\r\n    additionalDescs: [\r\n      createStackDesc('Weighted Sum'),\r\n      createScriptDesc('Scripted Formula'),\r\n      createNestedDesc('Nested'),\r\n      createReduceDesc(),\r\n      createImpositionDesc(),\r\n      createRankDesc(),\r\n      createSelectionDesc(),\r\n      createGroupDesc(),\r\n      createAggregateDesc(),\r\n    ],\r\n    chooser: true,\r\n    hierarchy: true,\r\n    placeholder: 'Add Column...',\r\n    formatItem: (item: IColumnWrapper | IGroupSearchItem<IColumnWrapper>, node: HTMLElement) => {\r\n      node.dataset.typeCat = isWrapper(item) ? item.category.name : (<IColumnWrapper>item.children[0]).category.name;\r\n      if (isWrapper(item)) {\r\n        node.dataset.type = item.desc.type;\r\n      }\r\n      return item.text;\r\n    },\r\n    collapseable: true\r\n  };\r\n\r\n  readonly node: HTMLElement;\r\n  private readonly search: SearchBox<IColumnWrapper> | null;\r\n  private chooser: HTMLElement | null = null;\r\n  private readonly descs: IColumnWrapper[] = [];\r\n  private data: IDataProvider;\r\n  private readonly rankings: SidePanelRanking[] = [];\r\n\r\n  constructor(private ctx: IRankingHeaderContext, document: Document, options: Partial<ISidePanelOptions> = {}) {\r\n    Object.assign(this.options, options);\r\n\r\n    this.node = document.createElement('aside');\r\n    this.node.classList.add('lu-side-panel');\r\n\r\n    this.search = this.options.chooser ? new SearchBox<IColumnWrapper>(this.options) : null;\r\n\r\n    this.data = ctx.provider;\r\n    this.init();\r\n    this.update(ctx);\r\n  }\r\n\r\n  private init() {\r\n    this.node.innerHTML = `\r\n      <aside class=\"lu-stats\"></aside>\r\n      <header>\r\n        <i class=\"lu-action\" title=\"Choose &hellip;\"><span aria-hidden=\"true\">Choose &hellip;</span></i>\r\n      </header>\r\n      <main></main>\r\n    `;\r\n\r\n    {\r\n      const choose = <HTMLElement>this.node.querySelector('header > i');\r\n      choose.onclick = (evt) => {\r\n        evt.stopPropagation();\r\n        const dialog = new ChooseRankingDialog(this.rankings.map((d) => d.dropdown), dialogContext(this.ctx, 1, <any>evt));\r\n        dialog.open();\r\n      };\r\n    }\r\n\r\n    if (this.options.collapseable) {\r\n      this.node.insertAdjacentHTML('beforeend', `<div class=\"lu-collapser\" title=\"Collapse Panel\"></div>`);\r\n      const last = <HTMLElement>this.node.lastElementChild;\r\n      last.onclick = () => this.collapsed = !this.collapsed;\r\n      this.collapsed = this.options.collapseable === 'collapsed';\r\n    }\r\n    this.initChooser();\r\n    this.changeDataStorage(null, this.data);\r\n  }\r\n\r\n  private initChooser() {\r\n    if (!this.search) {\r\n      return;\r\n    }\r\n    this.chooser = this.node.ownerDocument.createElement('header');\r\n    this.chooser.innerHTML = '<form></form>';\r\n    this.chooser.firstElementChild!.appendChild(this.search.node);\r\n    this.search.on(SearchBox.EVENT_SELECT, (panel: IColumnWrapper) => {\r\n      const col = this.data.create(panel.desc);\r\n      if (!col) {\r\n        return;\r\n      }\r\n      const a = this.active;\r\n      if (a) {\r\n        a.ranking.push(col);\r\n      }\r\n    });\r\n  }\r\n\r\n  private get active() {\r\n    return this.rankings.find((d) => d.active);\r\n  }\r\n\r\n  private changeDataStorage(old: IDataProvider | null, data: IDataProvider) {\r\n    if (old) {\r\n      old.on(suffix('.panel', DataProvider.EVENT_ADD_RANKING, DataProvider.EVENT_REMOVE_RANKING,\r\n        DataProvider.EVENT_ADD_DESC, DataProvider.EVENT_CLEAR_DESC, DataProvider.EVENT_ORDER_CHANGED, DataProvider.EVENT_SELECTION_CHANGED), null);\r\n    }\r\n    this.data = data;\r\n\r\n    const wrapDesc = (desc: IColumnDesc) => ({\r\n        desc,\r\n        category: categoryOfDesc(desc, data.columnTypes),\r\n        id: `${desc.type}@${desc.label}`,\r\n        text: desc.label\r\n      });\r\n    this.descs.splice(0, this.descs.length, ...data.getColumns().concat(this.options.additionalDescs).map(wrapDesc));\r\n\r\n    data.on(`${DataProvider.EVENT_ADD_DESC}.panel`, (desc) => {\r\n      this.descs.push(wrapDesc(desc));\r\n      this.updateChooser();\r\n    });\r\n\r\n    data.on(`${DataProvider.EVENT_CLEAR_DESC}.panel`, () => {\r\n      this.descs.splice(0, this.descs.length);\r\n      this.updateChooser();\r\n    });\r\n\r\n    data.on(suffix('.panel', DataProvider.EVENT_SELECTION_CHANGED, DataProvider.EVENT_ORDER_CHANGED), () => {\r\n      this.updateStats();\r\n    });\r\n\r\n    data.on(suffix('.panel', DataProvider.EVENT_ADD_RANKING), (ranking: Ranking, index: number) => {\r\n      this.createEntry(ranking, index);\r\n      this.makeActive(index);\r\n    });\r\n\r\n    data.on(suffix('.panel', DataProvider.EVENT_REMOVE_RANKING), (_: Ranking, index: number) => {\r\n      if (index < 0) {\r\n        // remove all\r\n        this.rankings.splice(0, this.rankings.length).forEach((d) => d.destroy());\r\n        this.node.querySelector('header')!.dataset.count = '0';\r\n        this.makeActive(-1);\r\n        return;\r\n      }\r\n      const r = this.rankings.splice(index, 1)[0];\r\n      this.node.querySelector('header')!.dataset.count = String(this.rankings.length);\r\n      r.destroy();\r\n      if (r.active) {\r\n        this.makeActive(this.rankings.length === 0 ? -1 : Math.max(index - 1, 0));\r\n      }\r\n    });\r\n\r\n    this.rankings.splice(0, this.rankings.length).forEach((d) => d.destroy());\r\n    data.getRankings().forEach((d, i) => {\r\n      this.createEntry(d, i);\r\n    });\r\n    if (this.rankings.length > 0) {\r\n      this.makeActive(0);\r\n    }\r\n\r\n    this.updateStats();\r\n  }\r\n\r\n  private createEntry(ranking: Ranking, index: number) {\r\n    const entry = new SidePanelRanking(ranking, this.ctx, this.node.ownerDocument, this.options);\r\n\r\n    const header = this.node.querySelector('header')!;\r\n    const main = this.node.querySelector('main')!;\r\n\r\n    header.insertBefore(entry.header, header.children[index + 1]); // for the action\r\n    header.dataset.count = String(this.rankings.length + 1);\r\n\r\n    entry.header.onclick = (evt) => {\r\n      evt.preventDefault();\r\n      evt.stopPropagation();\r\n      this.makeActive(this.rankings.indexOf(entry));\r\n    };\r\n    entry.dropdown.onclick = entry.header.onclick = (evt) => {\r\n      evt.preventDefault();\r\n      evt.stopPropagation();\r\n      this.ctx.dialogManager.removeAboveLevel(0);\r\n      this.makeActive(this.rankings.indexOf(entry));\r\n    };\r\n\r\n    main.insertBefore(entry.node, main.children[index]);\r\n\r\n    this.rankings.splice(index, 0, entry);\r\n  }\r\n\r\n  get collapsed() {\r\n    return this.node.classList.contains('lu-collapsed');\r\n  }\r\n\r\n  set collapsed(value: boolean) {\r\n    this.node.classList.toggle('lu-collapsed', value);\r\n    if (value) {\r\n      return;\r\n    }\r\n    this.updateChooser();\r\n    this.updateStats();\r\n    this.updateRanking();\r\n  }\r\n\r\n  private makeActive(index: number) {\r\n    this.rankings.forEach((d, i) => d.active = index === i);\r\n\r\n    const active = this.active;\r\n    if (active && this.chooser) {\r\n      active.node.insertAdjacentElement('afterbegin', this.chooser);\r\n      // scroll to body\r\n      const parent = <HTMLElement>this.node.closest('.lu')!;\r\n      const body = parent ? parent.querySelector(`article[data-ranking=\"${active.ranking.id}\"]`) : null;\r\n      if (body) {\r\n        body.scrollIntoView();\r\n      }\r\n    }\r\n    this.updateRanking();\r\n  }\r\n\r\n  private updateRanking() {\r\n    const active = this.active;\r\n    if (active && !this.collapsed) {\r\n      active.update(this.ctx);\r\n    }\r\n  }\r\n\r\n  update(ctx: IRankingHeaderContext) {\r\n    const bak = this.data;\r\n    this.ctx = ctx;\r\n    if (ctx.provider !== bak) {\r\n      this.changeDataStorage(bak, ctx.provider);\r\n    }\r\n    this.updateChooser();\r\n    this.updateStats();\r\n\r\n    const active = this.active;\r\n    if (active) {\r\n      active.update(ctx);\r\n    }\r\n  }\r\n\r\n  private updateStats() {\r\n    if (this.collapsed) {\r\n      return;\r\n    }\r\n    const stats = <HTMLElement>this.node.querySelector('aside.lu-stats');\r\n    const s = this.data.getSelection();\r\n    const r = this.data.getFirstRanking();\r\n    const visible = r ? r.getGroups().reduce((a, b) => a + b.order.length, 0) : 0;\r\n    stats.innerHTML = `Showing <strong>${visible}</strong> of ${this.data.getTotalNumberOfRows()} items${s.length > 0 ? `; <span>${s.length} selected</span>` : ''}`;\r\n  }\r\n\r\n  destroy() {\r\n    this.node.remove();\r\n    if (!this.data) {\r\n      return;\r\n    }\r\n    this.rankings.forEach((d) => d.destroy());\r\n    this.rankings.length = 0;\r\n    this.data.on(suffix('.panel', DataProvider.EVENT_ADD_RANKING, DataProvider.EVENT_REMOVE_RANKING,\r\n      DataProvider.EVENT_ADD_DESC), null);\r\n  }\r\n\r\n  private static groupByType(entries: IColumnWrapper[]): { text: string, children: IColumnWrapper[] }[] {\r\n    const map = new Map<IColumnDescCategory, IColumnWrapper[]>();\r\n    entries.forEach((entry) => {\r\n      if (!map.has(entry.category)) {\r\n        map.set(entry.category, [entry]);\r\n      } else {\r\n        map.get(entry.category)!.push(entry);\r\n      }\r\n    });\r\n    return Array.from(map).map(([key, value]) => {\r\n      return {\r\n        text: key.label,\r\n        order: key.order,\r\n        children: value.sort((a, b) => a.text.localeCompare(b.text))\r\n      };\r\n    }).sort((a, b) => a.order - b.order);\r\n  }\r\n\r\n  private updateChooser() {\r\n    if (!this.search || this.collapsed) {\r\n      return;\r\n    }\r\n    this.search.data = SidePanel.groupByType(this.descs);\r\n  }\r\n}\r\n","import {IExceptionContext, range, ITableSection} from 'lineupengine';\r\nimport {IDataRow, IGroup, IGroupData, IGroupItem, isGroup} from '../model';\r\nimport {SLOPEGRAPH_WIDTH} from '../styles';\r\nimport {IRankingHeaderContextContainer} from './interfaces';\r\n\r\ninterface ISlope {\r\n  isSelected(selection: {has(dataIndex: number): boolean}): boolean;\r\n\r\n  update(path: SVGPathElement, width: number): void;\r\n\r\n  readonly dataIndices: number[];\r\n}\r\n\r\nclass ItemSlope implements ISlope {\r\n  constructor(private readonly left: number, private readonly right: number, public readonly dataIndices: number[]) {\r\n\r\n  }\r\n\r\n  isSelected(selection: {has(dataIndex: number): boolean}) {\r\n    return this.dataIndices.length === 1 ? selection.has(this.dataIndices[0]) : this.dataIndices.some((s) => selection.has(s));\r\n  }\r\n\r\n  update(path: SVGPathElement, width: number) {\r\n    path.setAttribute('data-i', String(this.dataIndices[0]));\r\n    path.setAttribute('class', 'lu-slope');\r\n    path.setAttribute('d', `M0,${this.left}L${width},${this.right}`);\r\n  }\r\n}\r\n\r\nclass GroupSlope implements ISlope {\r\n  constructor(private readonly left: [number, number], private readonly right: [number, number], public readonly dataIndices: number[]) {\r\n\r\n  }\r\n\r\n  isSelected(selection: {has(dataIndex: number): boolean}) {\r\n    return this.dataIndices.some((s) => selection.has(s));\r\n  }\r\n\r\n  update(path: SVGPathElement, width: number) {\r\n    path.setAttribute('class', 'lu-group-slope');\r\n    path.setAttribute('d', `M0,${this.left[0]}L${width},${this.right[0]}L${width},${this.right[1]}L0,${this.left[1]}Z`);\r\n  }\r\n}\r\n\r\ninterface IPos {\r\n  start: number;\r\n  heightPerRow: number;\r\n  rows: number[]; // data indices\r\n  offset: number;\r\n  ref: number[];\r\n  group: IGroup;\r\n}\r\n\r\nexport enum EMode {\r\n  ITEM = 'item',\r\n  BAND = 'band'\r\n}\r\n\r\nexport interface ISlopeGraphOptions {\r\n  mode: EMode;\r\n}\r\n\r\nexport default class SlopeGraph implements ITableSection {\r\n  readonly node: SVGSVGElement;\r\n\r\n  private leftSlopes: ISlope[][] = [];\r\n  // rendered row to one ore multiple slopes\r\n  private rightSlopes: ISlope[][] = [];\r\n  private readonly pool: SVGPathElement[] = [];\r\n\r\n  private scrollListener: ((act: { top: number, height: number}) => void) | null = null;\r\n\r\n  readonly width = SLOPEGRAPH_WIDTH;\r\n  readonly height = 0;\r\n\r\n  private current: {\r\n    left: (IGroupItem | IGroupData)[];\r\n    leftContext: IExceptionContext;\r\n    right: (IGroupItem | IGroupData)[];\r\n    rightContext: IExceptionContext;\r\n  } | null = null;\r\n  private _mode: EMode = EMode.ITEM;\r\n\r\n  constructor(public readonly header: HTMLElement, public readonly body: HTMLElement, public readonly id: string, private readonly ctx: IRankingHeaderContextContainer, options: Partial<ISlopeGraphOptions> = {}) {\r\n    this.node = header.ownerDocument.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n    this.node.innerHTML = `<g transform=\"translate(0,0)\"></g>`;\r\n    header.classList.add('lu-slopegraph-header');\r\n    this._mode = options.mode === EMode.BAND ? EMode.BAND : EMode.ITEM;\r\n    this.initHeader(header);\r\n    body.classList.add('lu-slopegraph');\r\n    this.body.style.height = `1px`;\r\n    body.appendChild(this.node);\r\n  }\r\n\r\n  init() {\r\n    this.hide(); // hide by default\r\n\r\n    const scroller = <any>this.body.parentElement!;\r\n\r\n    //sync scrolling of header and body\r\n    // use internals from lineup engine\r\n    const scroll = (<any>scroller).__le_scroller__;\r\n    let old: { top: number, height: number} = scroll.asInfo();\r\n    scroll.push('animation', this.scrollListener = (act: { top: number, height: number}) => {\r\n      if (Math.abs(old.top - act.top) < 5) {\r\n        return;\r\n      }\r\n      old = act;\r\n      this.onScrolledVertically(act.top, act.height);\r\n    });\r\n  }\r\n\r\n  private initHeader(header: HTMLElement) {\r\n    header.innerHTML = `<i title=\"Item\" class=\"${this._mode === EMode.ITEM ? 'active' : ''}\"><span aria-hidden=\"true\">Item</span></i>\r\n        <i title=\"Band\" class=\"${this._mode === EMode.BAND ? 'active' : ''}\"><span aria-hidden=\"true\">Band</span></i>`;\r\n\r\n    const icons = <HTMLElement[]>Array.from(header.children);\r\n    icons.forEach((n: HTMLElement, i) => {\r\n      n.onclick = (evt) => {\r\n        evt.preventDefault();\r\n        evt.stopPropagation();\r\n        if (n.classList.contains('active')) {\r\n          return;\r\n        }\r\n        this.mode = i === 0 ? EMode.ITEM : EMode.BAND;\r\n        icons.forEach((d, j) => d.classList.toggle('active', j === i));\r\n      };\r\n    });\r\n  }\r\n\r\n  get mode() {\r\n    return this._mode;\r\n  }\r\n\r\n  set mode(value: EMode) {\r\n    if (value === this._mode) {\r\n      return;\r\n    }\r\n    this._mode = value;\r\n    if (this.current) {\r\n      this.rebuild(this.current.left, this.current.leftContext, this.current.right, this.current.rightContext);\r\n    }\r\n  }\r\n\r\n  get hidden() {\r\n    return this.header.classList.contains('loading');\r\n  }\r\n\r\n  set hidden(value: boolean) {\r\n    this.header.classList.toggle('loading', value);\r\n    this.body.classList.toggle('loading', value);\r\n  }\r\n\r\n  hide() {\r\n    this.hidden = true;\r\n  }\r\n\r\n  show() {\r\n    const was = this.hidden;\r\n    this.hidden = false;\r\n    if (was) {\r\n      this.revalidate();\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this.header.remove();\r\n    if (this.scrollListener) {\r\n      //sync scrolling of header and body\r\n      // use internals from lineup engine\r\n      const scroll = (<any>this.body.parentElement!).__le_scroller__;\r\n      scroll.remove(this.scrollListener);\r\n    }\r\n    this.body.remove();\r\n  }\r\n\r\n  rebuild(left: (IGroupItem | IGroupData)[], leftContext: IExceptionContext, right: (IGroupItem | IGroupData)[], rightContext: IExceptionContext) {\r\n    this.current = {left, leftContext, right, rightContext};\r\n\r\n    const lookup: Map<number, IPos> = this.prepareRightSlopes(right, rightContext);\r\n    this.computeSlopes(left, leftContext, lookup);\r\n\r\n    this.revalidate();\r\n  }\r\n\r\n  private computeSlopes(left: (IGroupItem | IGroupData)[], leftContext: IExceptionContext, lookup: Map<number, IPos>) {\r\n    const mode = this.mode;\r\n    const fakeGroups = new Map<IGroup, ISlope[]>();\r\n\r\n    const createFakeGroup = (first: number, group: IGroup) => {\r\n      let count = 0;\r\n      let height = 0;\r\n      const rows: IDataRow[] = [];\r\n      // find all items in this group, assuming that they are in order\r\n      for (let i = first; i < left.length; ++i) {\r\n        const item = left[i];\r\n        if (isGroup(item) || (<IGroupItem>item).group !== group) {\r\n          break;\r\n        }\r\n        count++;\r\n        height += (leftContext.exceptionsLookup.get(i) || leftContext.defaultRowHeight);\r\n        rows.push(item);\r\n      }\r\n\r\n      const padded = height - leftContext.padding(first + count - 1);\r\n\r\n      const gr = <IGroupData>Object.assign({\r\n        rows\r\n      }, group);\r\n\r\n      return {gr, padded, height};\r\n    };\r\n\r\n    let acc = 0;\r\n    this.leftSlopes = left.map((r, i) => {\r\n\r\n      let height = (leftContext.exceptionsLookup.get(i) || leftContext.defaultRowHeight);\r\n      let padded = height - 0; //leftContext.padding(i);\r\n      const slopes = <ISlope[]>[];\r\n      const start = acc;\r\n\r\n      // shift by item height\r\n      acc += height;\r\n\r\n      let offset = 0;\r\n\r\n      const push = (s: ISlope, right: IPos, common = 1, heightPerRow = 0) => {\r\n        // store slope in both\r\n        slopes.push(s);\r\n        right.ref.forEach((r) => this.rightSlopes[r].push(s));\r\n\r\n        // update the offset of myself and of the right side\r\n        right.offset += common * right.heightPerRow;\r\n        offset += common * heightPerRow;\r\n      };\r\n\r\n      let gr: IGroupData;\r\n\r\n      if (isGroup(r)) {\r\n        gr = r;\r\n      } else {\r\n        const item = (<IGroupItem>r);\r\n        const dataIndex = item.i;\r\n        const right = lookup.get(dataIndex);\r\n\r\n        if (!right) { // no match\r\n          return slopes;\r\n        }\r\n        if (mode === EMode.ITEM) {\r\n          const s = new ItemSlope(start + padded / 2, right.start + right.offset + right.heightPerRow / 2, [dataIndex]);\r\n          push(s, right);\r\n          return slopes;\r\n        }\r\n\r\n        if (fakeGroups.has(item.group)) {\r\n          // already handled by the first one, take the fake slopes\r\n          return fakeGroups.get(item.group)!;\r\n        }\r\n\r\n        const fakeGroup = createFakeGroup(i, item.group);\r\n        gr = fakeGroup.gr;\r\n        height = fakeGroup.height;\r\n        padded = fakeGroup.padded;\r\n        fakeGroups.set(item.group, slopes);\r\n      }\r\n\r\n      // free group items to share\r\n      const free = new Set(gr.rows.map((d) => d.i));\r\n\r\n      const heightPerRow = padded / gr.rows.length;\r\n\r\n      gr.rows.forEach((d) => {\r\n        if (!free.has(d.i)) {\r\n          return; // already handled\r\n        }\r\n        free.delete(d.i);\r\n        const right = lookup.get(d.i);\r\n        if (!right) {\r\n          return; // no matching\r\n        }\r\n        // find all of this group\r\n        const intersection = right.rows.filter((r) => free.delete(r));\r\n        intersection.push(d.i); //self\r\n\r\n        const common = intersection.length;\r\n        let s: ISlope;\r\n        if (common === 1) {\r\n          s = new ItemSlope(start + offset + heightPerRow / 2, right.start + right.offset + right.heightPerRow / 2, [d.i]);\r\n        } else if (mode === EMode.ITEM) {\r\n          // fake item\r\n          s = new ItemSlope(start + offset + heightPerRow * common / 2, right.start + right.offset + right.heightPerRow * common / 2, intersection);\r\n        } else {\r\n          s = new GroupSlope([start + offset, start + offset + heightPerRow * common], [right.start + right.offset, right.start + right.offset + right.heightPerRow * common], intersection);\r\n        }\r\n        push(s, right, common, heightPerRow);\r\n      });\r\n      return slopes;\r\n    });\r\n  }\r\n\r\n  private prepareRightSlopes(right: (IGroupItem | IGroupData)[], rightContext: IExceptionContext) {\r\n    const lookup = new Map<number, IPos>();\r\n    const mode = this.mode;\r\n\r\n    const fakeGroups = new Map<IGroup, IPos>();\r\n    let acc = 0;\r\n\r\n    this.rightSlopes = right.map((r, i) => {\r\n      const height = (rightContext.exceptionsLookup.get(i) || rightContext.defaultRowHeight);\r\n      const padded = height - 0; //rightContext.padding(i);\r\n      const start = acc;\r\n      acc += height;\r\n      const slopes = <ISlope[]>[];\r\n\r\n      const base = {\r\n        start,\r\n        offset: 0,\r\n        ref: [i]\r\n      };\r\n      if (isGroup(r)) {\r\n        const p = Object.assign(base, {\r\n          rows: r.rows.map((d) => d.i),\r\n          heightPerRow: padded / r.rows.length,\r\n          group: r\r\n        });\r\n\r\n        r.rows.forEach((ri) => lookup.set(ri.i, p));\r\n        return slopes;\r\n      }\r\n      // item\r\n      const item = (<IGroupItem>r);\r\n      const dataIndex = r.i;\r\n\r\n      let p = Object.assign(base, {\r\n        rows: [dataIndex],\r\n        heightPerRow: padded,\r\n        group: item.group\r\n      });\r\n\r\n      if (mode === EMode.ITEM) {\r\n        lookup.set(dataIndex, p);\r\n        return slopes;\r\n      }\r\n      // forced band mode\r\n      // merge with the 'ueber' band\r\n      if (!fakeGroups.has(item.group)) {\r\n        p.heightPerRow = height; // include padding\r\n        // TODO just support uniform item height\r\n        fakeGroups.set(item.group, p);\r\n      } else { // reuse old\r\n        p = fakeGroups.get(item.group)!;\r\n        p.rows.push(dataIndex);\r\n        p.ref.push(i);\r\n      }\r\n      lookup.set(dataIndex, p);\r\n      return slopes;\r\n    });\r\n\r\n    return lookup;\r\n  }\r\n\r\n  private revalidate() {\r\n    if (!this.current || this.hidden) {\r\n      return;\r\n    }\r\n    const p = this.body.parentElement!;\r\n    this.onScrolledVertically(p.scrollTop, p.clientHeight);\r\n  }\r\n\r\n\r\n  highlight(dataIndex: number) {\r\n    const old = this.body.querySelector(`[data-i].le-highlighted`);\r\n    if (old) {\r\n      old.classList.remove('le-highlighted');\r\n    }\r\n    if (dataIndex < 0) {\r\n      return;\r\n    }\r\n    const item = this.body.querySelector(`[data-i=\"${dataIndex}\"]`);\r\n    if (item) {\r\n      item.classList.add('le-highlighted');\r\n    }\r\n    return item != null;\r\n  }\r\n\r\n  private onScrolledVertically(scrollTop: number, clientHeight: number) {\r\n    if (!this.current) {\r\n      return;\r\n    }\r\n\r\n    // which lines are currently shown\r\n    const {leftContext, rightContext} = this.current;\r\n    const left = range(scrollTop, clientHeight, leftContext.defaultRowHeight, leftContext.exceptions, leftContext.numberOfRows);\r\n    const right = range(scrollTop, clientHeight, rightContext.defaultRowHeight, rightContext.exceptions, rightContext.numberOfRows);\r\n\r\n    const start = Math.min(left.firstRowPos, right.firstRowPos);\r\n    const end = Math.max(left.endPos, right.endPos);\r\n\r\n    // move to right position\r\n    this.body.style.transform = `translate(0, ${start.toFixed(0)}px)`;\r\n    this.body.style.height = `${(end - start).toFixed(0)}px`;\r\n    (this.node.firstElementChild!).setAttribute('transform', `translate(0,-${start.toFixed(0)})`);\r\n\r\n    this.choose(left.first, left.last, right.first, right.last);\r\n  }\r\n\r\n  private choose(leftVisibleFirst: number, leftVisibleLast: number, rightVisibleFirst: number, rightVisibleLast: number) {\r\n    // assume no separate scrolling\r\n\r\n    const slopes = new Set<ISlope>();\r\n    for (let i = leftVisibleFirst; i <= leftVisibleLast; ++i) {\r\n      this.leftSlopes[i].forEach((s) => slopes.add(s));\r\n    }\r\n    for (let i = rightVisibleFirst; i <= rightVisibleLast; ++i) {\r\n      this.rightSlopes[i].forEach((s) => slopes.add(s));\r\n    }\r\n    this.render(slopes);\r\n  }\r\n\r\n  private render(slopes: Set<ISlope>) {\r\n    const g = <SVGGElement>this.node.firstElementChild!;\r\n    const width = g.ownerSVGElement!.getBoundingClientRect()!.width;\r\n    const paths = this.matchLength(slopes, g);\r\n\r\n    const p = this.ctx.provider;\r\n    const selectionLookup = {has: (dataIndex: number) => p.isSelected(dataIndex)};\r\n\r\n    // update paths\r\n    let i = 0;\r\n    slopes.forEach((s) => {\r\n      const p = paths[i++]; // since a set\r\n      s.update(p, width);\r\n      (<any>p).__data__ = s; // data binding\r\n      const selected = s.isSelected(selectionLookup);\r\n      p.classList.toggle('lu-selected', selected);\r\n      if (selected) {\r\n        g.appendChild(p); // to put it on top\r\n      }\r\n    });\r\n  }\r\n\r\n  private matchLength(slopes: Set<ISlope>, g: SVGGElement) {\r\n    const paths = <SVGPathElement[]>Array.from(g.children);\r\n    for (let i = slopes.size; i < paths.length; ++i) {\r\n      const elem = paths[i];\r\n      this.pool.push(elem);\r\n      elem.remove();\r\n    }\r\n\r\n    for (let i = paths.length; i < slopes.size; ++i) {\r\n      const elem = this.pool.pop();\r\n      if (elem) {\r\n        g.appendChild(elem);\r\n        paths.push(elem);\r\n      } else {\r\n        const path = g.ownerDocument.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n        path.onclick = (evt) => {\r\n          // d3 style\r\n          const s: ISlope = (<any>path).__data__;\r\n          const p = this.ctx.provider;\r\n          const ids = s.dataIndices;\r\n          if (evt.ctrlKey) {\r\n            ids.forEach((id) => p.toggleSelection(id, true));\r\n          } else {\r\n            // either unset or set depending on the first state\r\n            const isSelected = p.isSelected(ids[0]!);\r\n            p.setSelection(isSelected ? [] : ids);\r\n          }\r\n        };\r\n        g.appendChild(path);\r\n        paths.push(path);\r\n      }\r\n    }\r\n    return paths;\r\n  }\r\n\r\n  updateSelection(selectedDataIndices: Set<number>) {\r\n    const g = this.node.firstElementChild!;\r\n    const paths = <SVGPathElement[]>Array.from(g.children);\r\n\r\n    paths.forEach((p) => {\r\n      const s: ISlope = (<any>p).__data__;\r\n      const selected = s.isSelected(selectedDataIndices);\r\n      p.classList.toggle('lu-selected', selected);\r\n      if (selected) {\r\n        g.appendChild(p); // to put it on top\r\n      }\r\n    });\r\n  }\r\n}\r\n","import Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport {IDataRow} from './interfaces';\r\nimport StringColumn, {patternChanged, filterChanged} from './StringColumn';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\nimport ValueColumn, {dataLoaded} from './ValueColumn';\r\n\r\n\r\n/**\r\n * emitted when the value of a row changes\r\n * @asMemberOf AnnotateColumn\r\n * @event\r\n */\r\nexport declare function valueChanged(dataIndex: number, previous: string, current: string): void;\r\n\r\n/**\r\n * a string column in which the values can be edited locally\r\n */\r\nexport default class AnnotateColumn extends StringColumn {\r\n  static readonly EVENT_VALUE_CHANGED = 'valueChanged';\r\n\r\n  private readonly annotations = new Map<number, string>();\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([AnnotateColumn.EVENT_VALUE_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof AnnotateColumn.EVENT_VALUE_CHANGED, listener: typeof valueChanged | null): this;\r\n  on(type: typeof StringColumn.EVENT_PATTERN_CHANGED, listener: typeof patternChanged | null): this;\r\n  on(type: typeof StringColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\r\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(<any>type, listener);\r\n  }\r\n\r\n  getValue(row: IDataRow) {\r\n    if (this.annotations.has(row.i)) {\r\n      return this.annotations.get(row.i)!;\r\n    }\r\n    return super.getValue(row);\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any): any {\r\n    const r = super.dump(toDescRef);\r\n    r.annotations = {};\r\n    this.annotations.forEach((v, k) => {\r\n      r.annotations[k] = v;\r\n    });\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    super.restore(dump, factory);\r\n    if (!dump.annotations) {\r\n      return;\r\n    }\r\n    Object.keys(dump.annotations).forEach((k) => {\r\n      this.annotations.set(Number(k), dump.annotations[k]);\r\n    });\r\n  }\r\n\r\n  setValue(row: IDataRow, value: string) {\r\n    const old = this.getValue(row);\r\n    if (old === value) {\r\n      return true;\r\n    }\r\n    if (value === '' || value == null) {\r\n      this.annotations.delete(row.i);\r\n    } else {\r\n      this.annotations.set(row.i, value);\r\n    }\r\n    this.fire([AnnotateColumn.EVENT_VALUE_CHANGED, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], row.i, old, value);\r\n    return true;\r\n  }\r\n}\r\n","import {defaultOptions} from '../../config';\r\nimport {ITaggleOptions} from '../../interfaces';\r\nimport merge from '../../internal/merge';\r\nimport DataProvider from '../../provider/ADataProvider';\r\nimport {ALineUp} from '../ALineUp';\r\nimport SidePanel from '../panel/SidePanel';\r\nimport spaceFillingRule from './spaceFillingRule';\r\nimport TaggleRenderer from './TaggleRenderer';\r\n\r\nexport {ITaggleOptions} from '../../interfaces';\r\n\r\nexport default class Taggle extends ALineUp {\r\n  private readonly spaceFilling: HTMLElement | null;\r\n  private readonly renderer: TaggleRenderer | null;\r\n  private readonly panel: SidePanel | null;\r\n\r\n  private readonly options = defaultOptions();\r\n\r\n\r\n  constructor(node: HTMLElement, data: DataProvider, options: Partial<ITaggleOptions> = {}) {\r\n    super(node, data, options && options.ignoreUnsupportedBrowser === true);\r\n    merge(this.options, options, {\r\n      violationChanged: (_rule: any, violation?: string) => this.setViolation(violation)\r\n    });\r\n\r\n    if (!this.isBrowserSupported) {\r\n      this.spaceFilling = null;\r\n      this.renderer = null;\r\n      this.panel = null;\r\n      return;\r\n    }\r\n\r\n    this.node.classList.add('lu-taggle', 'lu');\r\n\r\n    this.renderer = new TaggleRenderer(data, this.node, this.options);\r\n    this.panel = new SidePanel(this.renderer.ctx, this.node.ownerDocument, {\r\n      collapseable: this.options.sidePanelCollapsed ? 'collapsed' : true,\r\n      hierarchy: this.options.hierarchyIndicator\r\n    });\r\n    this.renderer.pushUpdateAble((ctx) => this.panel!.update(ctx));\r\n    this.node.insertBefore(this.panel.node, this.node.firstChild);\r\n    {\r\n      this.panel.node.insertAdjacentHTML('afterbegin', `<div class=\"lu-rule-button-chooser\"><label>\r\n            <input type=\"checkbox\">\r\n            <span>Overview</span>\r\n            <div></div>\r\n          </label></div>`);\r\n      const spaceFilling = spaceFillingRule(this.options);\r\n      this.spaceFilling = <HTMLElement>this.node.querySelector('.lu-rule-button-chooser')!;\r\n      const input = <HTMLInputElement>this.spaceFilling.querySelector('input');\r\n      input.onchange = () => {\r\n        const selected = this.spaceFilling!.classList.toggle('chosen');\r\n        self.setTimeout(() => this.renderer!.switchRule(selected ? spaceFilling : null));\r\n      };\r\n      if (this.options.overviewMode) {\r\n        input.checked = true;\r\n        this.spaceFilling.classList.toggle('chosen');\r\n        this.renderer.switchRule(spaceFilling);\r\n      }\r\n    }\r\n    this.forward(this.renderer, `${ALineUp.EVENT_HIGHLIGHT_CHANGED}.main`);\r\n  }\r\n\r\n  private setViolation(violation?: string) {\r\n    violation = violation || '';\r\n    if (this.spaceFilling) {\r\n      this.spaceFilling.classList.toggle('violated', Boolean(violation));\r\n      this.spaceFilling.lastElementChild!.innerHTML = violation.replace(/\\n/g, '<br>');\r\n    }\r\n  }\r\n\r\n  destroy() {\r\n    this.node.classList.remove('lu-taggle', 'lu');\r\n    if (this.renderer) {\r\n      this.renderer.destroy();\r\n    }\r\n    if (this.panel) {\r\n      this.panel.destroy();\r\n    }\r\n    super.destroy();\r\n  }\r\n\r\n  update() {\r\n    if (this.renderer) {\r\n      this.renderer.update();\r\n    }\r\n  }\r\n\r\n  setHighlight(dataIndex: number, scrollIntoView: boolean = true) {\r\n    return this.renderer != null && this.renderer.setHighlight(dataIndex, scrollIntoView);\r\n  }\r\n\r\n  getHighlight() {\r\n    return this.renderer ? this.renderer.getHighlight() : -1;\r\n  }\r\n\r\n  protected enableHighlightListening(enable: boolean) {\r\n    if (this.renderer) {\r\n      this.renderer.enableHighlightListening(enable);\r\n    }\r\n  }\r\n\r\n  setDataProvider(data: DataProvider, dump?: any) {\r\n    super.setDataProvider(data, dump);\r\n    if (!this.renderer) {\r\n      return;\r\n    }\r\n    this.renderer.setDataProvider(data);\r\n    this.update();\r\n    this.panel!.update(this.renderer.ctx);\r\n  }\r\n}\r\n","const TYPE_OBJECT = '[object Object]';\r\n\r\n//credits to https://github.com/vladmiller/dextend/blob/master/lib/dextend.js\r\n/**\r\n * @internal\r\n * @param args\r\n * @returns {any}\r\n */\r\nexport default function merge(...args: any[]) {\r\n  let result = null;\r\n\r\n  for (const toMerge of args) {\r\n    const keys = Object.keys(toMerge);\r\n\r\n    if (result == null) {\r\n      result = toMerge;\r\n      continue;\r\n    }\r\n\r\n    for (const keyName of keys) {\r\n      const value = toMerge[keyName];\r\n\r\n      //merge just POJOs\r\n      if (Object.prototype.toString.call(value) === TYPE_OBJECT && (Object.getPrototypeOf(value) === Object.prototype)) { //pojo\r\n        if (result[keyName] === undefined) {\r\n          result[keyName] = {};\r\n        }\r\n        result[keyName] = merge(result[keyName], value);\r\n      } else if (Array.isArray(value)) {\r\n        if (result[keyName] === undefined) {\r\n          result[keyName] = [];\r\n        }\r\n        result[keyName] = value.concat(result[keyName]);\r\n      } else {\r\n        result[keyName] = value;\r\n      }\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n","import {detect} from 'detect-browser';\r\n\r\nexport const SUPPORTED_FIREFOX_VERSION = 57;\r\nexport const SUPPORTED_CHROME_VERSION = 64;\r\nexport const SUPPORTED_EDGE_VERSION = 16;\r\n\r\n/**\r\n * @internal\r\n */\r\nexport function getUnsupportedBrowserError() {\r\n  const info = detect();\r\n  if (!info) {\r\n    return 'browser cannot be detected';\r\n  }\r\n  const prefix = `unsupported browser detected:`;\r\n  switch(info.name) {\r\n    case 'firefox':\r\n      const fVersion = parseInt(info.version.slice(0, info.version.indexOf('.')), 10);\r\n      if(fVersion <= SUPPORTED_FIREFOX_VERSION && fVersion !== 52) { // ESR\r\n        return `${prefix} Firefox ${info.version} (&lt; ${SUPPORTED_FIREFOX_VERSION})`;\r\n      }\r\n      return null;\r\n    case 'edge':\r\n      const eVersion = parseInt(info.version.slice(0, info.version.indexOf('.')), 10);\r\n      if(eVersion <= SUPPORTED_EDGE_VERSION) {\r\n        return `${prefix} Edge ${info.version} (&lt; ${SUPPORTED_EDGE_VERSION})`;\r\n      }\r\n      return null;\r\n    case 'chrome':\r\n      const cVersion = parseInt(info.version.slice(0, info.version.indexOf('.')), 10);\r\n      if(cVersion <= SUPPORTED_CHROME_VERSION) {\r\n        return `${prefix} Chrome ${info.version} (&lt; ${SUPPORTED_CHROME_VERSION})`;\r\n      }\r\n      return null;\r\n    case 'ie':\r\n      return `${prefix} Internet Explorer`;\r\n  }\r\n  console.warn('unknown browser detected', info, 'assuming fine...');\r\n  return null;\r\n}\r\n/**\r\n * checks whether the current browser is compatible with lineupjs\r\n * @return boolean\r\n */\r\nexport function isBrowserSupported() {\r\n  return getUnsupportedBrowserError() == null;\r\n}\r\n\r\n","import {ILineUpLike} from '../interfaces';\r\nimport AEventDispatcher from '../internal/AEventDispatcher';\r\nimport Column from '../model/Column';\r\nimport DataProvider from '../provider/ADataProvider';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\nimport {getUnsupportedBrowserError, SUPPORTED_FIREFOX_VERSION, SUPPORTED_CHROME_VERSION, SUPPORTED_EDGE_VERSION} from '../browser';\r\n\r\n/**\r\n * emitted when the highlight changes\r\n * @asMemberOf ALineUp\r\n * @param dataIndex the highlghted data index or -1 for none\r\n * @event\r\n */\r\nexport declare function highlightChanged(dataIndex: number): void;\r\n\r\n/**\r\n * emitted when the selection changes\r\n * @asMemberOf ALineUp\r\n * @param dataIndices the selected data indices\r\n * @event\r\n */\r\nexport declare function selectionChanged(dataIndices: number[]): void;\r\n\r\nexport abstract class ALineUp extends AEventDispatcher implements ILineUpLike {\r\n  static readonly EVENT_SELECTION_CHANGED = DataProvider.EVENT_SELECTION_CHANGED;\r\n  static readonly EVENT_HIGHLIGHT_CHANGED = 'highlightChanged';\r\n\r\n  private highlightListeners = 0;\r\n\r\n  public readonly isBrowserSupported: boolean;\r\n\r\n  constructor(public readonly node: HTMLElement, public data: DataProvider, ignoreIncompatibleBrowser: boolean) {\r\n    super();\r\n\r\n    const error = getUnsupportedBrowserError();\r\n    this.isBrowserSupported = ignoreIncompatibleBrowser || !error;\r\n\r\n    if (!this.isBrowserSupported) {\r\n      this.node.classList.add('lu-unsupported-browser');\r\n      this.node.innerHTML = `<span>${error}</span>\r\n      <div class=\"lu-unsupported-browser-hint\">\r\n        <a href=\"https://www.mozilla.org/en-US/firefox/\" rel=\"noopener\" target=\"_blank\" data-browser=\"firefox\" data-version=\"${SUPPORTED_FIREFOX_VERSION}\"></a>\r\n        <a href=\"https://www.google.com/chrome/index.html\" rel=\"noopener\" target=\"_blank\" data-browser=\"chrome\" data-version=\"${SUPPORTED_CHROME_VERSION}\" title=\"best support\"></a>\r\n        <a href=\"https://www.microsoft.com/en-us/windows/microsoft-edge\" rel=\"noopener\" target=\"_blank\" data-browser=\"edge\" data-version=\"${SUPPORTED_EDGE_VERSION}\"></a>\r\n      </div><span>use the <code>ignoreUnsupportedBrowser=true</code> option to ignore this error at your own risk</span>`;\r\n    }\r\n\r\n    this.forward(this.data, `${DataProvider.EVENT_SELECTION_CHANGED}.main`);\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([ALineUp.EVENT_HIGHLIGHT_CHANGED, ALineUp.EVENT_SELECTION_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof ALineUp.EVENT_HIGHLIGHT_CHANGED, listener: typeof highlightChanged | null): this;\r\n  on(type: typeof ALineUp.EVENT_SELECTION_CHANGED, listener: typeof selectionChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(type, listener);\r\n  }\r\n\r\n  destroy() {\r\n    // just clear since we hand in the node itself\r\n    this.node.innerHTML = '';\r\n  }\r\n\r\n  dump() {\r\n    return this.data.dump();\r\n  }\r\n\r\n  abstract update(): void;\r\n\r\n  setDataProvider(data: DataProvider, dump?: any) {\r\n    if (this.data) {\r\n      this.unforward(this.data, `${DataProvider.EVENT_SELECTION_CHANGED}.taggle`);\r\n    }\r\n    this.data = data;\r\n    if (dump) {\r\n      this.data.restore(dump);\r\n    }\r\n    this.forward(this.data, `${DataProvider.EVENT_SELECTION_CHANGED}.taggle`);\r\n  }\r\n\r\n  getSelection() {\r\n    return this.data.getSelection();\r\n  }\r\n\r\n  setSelection(dataIndices: number[]) {\r\n    this.data.setSelection(dataIndices);\r\n  }\r\n\r\n  /**\r\n   * sorts LineUp by he given column\r\n   * @param column callback function finding the column to sort\r\n   * @param ascending\r\n   * @returns {boolean}\r\n   */\r\n  sortBy(column: string | ((col: Column) => boolean), ascending = false) {\r\n    const col = this.data.find(column);\r\n    if (col) {\r\n      col.sortByMe(ascending);\r\n    }\r\n    return col != null;\r\n  }\r\n\r\n  abstract setHighlight(dataIndex: number, scrollIntoView: boolean): boolean;\r\n\r\n  abstract getHighlight(): number;\r\n\r\n  protected listenersChanged(type: string, enabled: boolean) {\r\n    super.listenersChanged(type, enabled);\r\n    if (!type.startsWith(ALineUp.EVENT_HIGHLIGHT_CHANGED)) {\r\n      return;\r\n    }\r\n    if (enabled) {\r\n      this.highlightListeners += 1;\r\n      if (this.highlightListeners === 1) { // first\r\n        this.enableHighlightListening(true);\r\n      }\r\n    } else {\r\n      this.highlightListeners -= 1;\r\n      if (this.highlightListeners === 0) { // last\r\n        this.enableHighlightListening(false);\r\n      }\r\n    }\r\n  }\r\n\r\n  protected enableHighlightListening(_enable: boolean) {\r\n    // hook\r\n  }\r\n}\r\n\r\nexport default ALineUp;\r\n","import Column, {IColumnDesc, IDataRow} from '../model';\r\nimport {defaultGroup, IOrderedGroup} from '../model/Group';\r\nimport Ranking from '../model/Ranking';\r\nimport ACommonDataProvider from './ACommonDataProvider';\r\nimport {IDataProviderOptions, IStatsBuilder} from './ADataProvider';\r\n\r\n/**\r\n * interface what the server side has to provide\r\n */\r\nexport interface IServerData {\r\n  /**\r\n   * sort the dataset by the given description\r\n   * @param ranking\r\n   */\r\n  sort(ranking: Ranking): Promise<number[]>;\r\n\r\n  /**\r\n   * returns a slice of the data array identified by a list of indices\r\n   * @param indices\r\n   */\r\n  view(indices: number[]): Promise<any[]>;\r\n\r\n  /**\r\n   * returns a sample of the values for a given column\r\n   * @param column\r\n   */\r\n  mappingSample(column: any): Promise<number[]>;\r\n\r\n  /**\r\n   * return the matching indices matching the given arguments\r\n   * @param search\r\n   * @param column\r\n   */\r\n  search(search: string | RegExp, column: any): Promise<number[]>;\r\n\r\n  stats(indices: number[]): IStatsBuilder;\r\n}\r\n\r\n\r\nexport interface IRemoteDataProviderOptions {\r\n  /**\r\n   * maximal cache size (unused at the moment)\r\n   */\r\n  maxCacheSize: number;\r\n}\r\n\r\n/**\r\n * a remote implementation of the data provider\r\n */\r\nexport default class RemoteDataProvider extends ACommonDataProvider {\r\n  private readonly options: IRemoteDataProviderOptions = {\r\n    maxCacheSize: 1000\r\n  };\r\n\r\n  private readonly cache = new Map<number, Promise<IDataRow>>();\r\n\r\n\r\n  constructor(private server: IServerData, columns: IColumnDesc[] = [], options: Partial<IRemoteDataProviderOptions & IDataProviderOptions> = {}) {\r\n    super(columns, options);\r\n    Object.assign(this.options, options);\r\n  }\r\n\r\n  getTotalNumberOfRows() {\r\n    // TODO not correct\r\n    return this.cache.size;\r\n  }\r\n\r\n  sortImpl(ranking: Ranking): Promise<IOrderedGroup[]> {\r\n    //use the server side to sort\r\n    return this.server.sort(ranking).then((order) => [Object.assign({order}, defaultGroup)]);\r\n  }\r\n\r\n  private loadFromServer(indices: number[]) {\r\n    return this.server.view(indices).then((view) => {\r\n      //enhance with the data index\r\n      return view.map((v, i) => {\r\n        const dataIndex = indices[i];\r\n        return {v, dataIndex};\r\n      });\r\n    });\r\n  }\r\n\r\n  view(indices: number[]): Promise<any[]> {\r\n    if (indices.length === 0) {\r\n      return Promise.resolve([]);\r\n    }\r\n    const base = this.fetch([indices])[0];\r\n    return Promise.all(base).then((rows) => rows.map((d) => d.v));\r\n  }\r\n\r\n\r\n  private computeMissing(orders: number[][]): number[] {\r\n    const union = new Set<number>();\r\n    const unionAdd = union.add.bind(union);\r\n    orders.forEach((order) => order.forEach(unionAdd));\r\n\r\n    // removed cached\r\n    this.cache.forEach((_v, k) => union.delete(k));\r\n\r\n    if ((this.cache.size + union.size) > this.options.maxCacheSize) {\r\n      // clean up cache\r\n    }\r\n    // const maxLength = Math.max(...orders.map((o) => o.length));\r\n    return Array.from(union);\r\n  }\r\n\r\n  private loadInCache(missing: number[]) {\r\n    if (missing.length === 0) {\r\n      return;\r\n    }\r\n    // load data and map to rows;\r\n    const v = this.loadFromServer(missing);\r\n    missing.forEach((_m, i) => {\r\n      const dataIndex = missing[i];\r\n      this.cache.set(dataIndex, v.then((loaded) => ({v: loaded[i], i: dataIndex})));\r\n    });\r\n  }\r\n\r\n  fetch(orders: number[][]): Promise<IDataRow>[][] {\r\n    const toLoad = this.computeMissing(orders);\r\n    this.loadInCache(toLoad);\r\n\r\n    return orders.map((order) =>\r\n      order.map((i) => this.cache.get(i)!));\r\n  }\r\n\r\n\r\n  mappingSample(col: Column): Promise<number[]> {\r\n    return this.server.mappingSample((<any>col.desc).column);\r\n  }\r\n\r\n  searchAndJump(search: string | RegExp, col: Column) {\r\n    this.server.search(search, (<any>col.desc).column).then((indices) => {\r\n      this.jumpToNearest(indices);\r\n    });\r\n  }\r\n\r\n  stats(indices: number[]) {\r\n    return this.server.stats(indices);\r\n  }\r\n}\r\n","import {similar} from '../internal/math';\r\nimport {toolbar} from './annotations';\r\nimport Column, {IColumnDesc, IFlatColumn, widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport CompositeColumn, {IMultiLevelColumn, isMultiLevelColumn, addColumn, filterChanged, moveColumn, removeColumn} from './CompositeColumn';\r\nimport {IDataRow} from './interfaces';\r\nimport {isNumberColumn} from './INumberColumn';\r\nimport StackColumn from './StackColumn';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\n\r\n/**\r\n * emitted when the collapse property changes\r\n * @asMemberOf MultiLevelCompositeColumn\r\n * @event\r\n */\r\nexport declare function collapseChanged(previous: boolean, current: boolean): void;\r\n\r\n/**\r\n * emitted when the ratios between the children changes\r\n * @asMemberOf MultiLevelCompositeColumn\r\n * @event\r\n */\r\nexport declare function nestedChildRatio(previous: number, current: number): void;\r\n\r\n\r\n@toolbar('collapse')\r\nexport default class MultiLevelCompositeColumn extends CompositeColumn implements IMultiLevelColumn {\r\n  static readonly EVENT_COLLAPSE_CHANGED = StackColumn.EVENT_COLLAPSE_CHANGED;\r\n  static readonly EVENT_MULTI_LEVEL_CHANGED = StackColumn.EVENT_MULTI_LEVEL_CHANGED;\r\n\r\n  private readonly adaptChange: (old: number, newValue: number) => void;\r\n\r\n  /**\r\n   * whether this stack column is collapsed i.e. just looks like an ordinary number column\r\n   * @type {boolean}\r\n   * @private\r\n   */\r\n  private collapsed = false;\r\n\r\n  constructor(id: string, desc: Readonly<IColumnDesc>) {\r\n    super(id, desc);\r\n    const that = this;\r\n    this.adaptChange = function (old, newValue) {\r\n      that.adaptWidthChange(old, newValue);\r\n    };\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([MultiLevelCompositeColumn.EVENT_COLLAPSE_CHANGED, MultiLevelCompositeColumn.EVENT_MULTI_LEVEL_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof MultiLevelCompositeColumn.EVENT_COLLAPSE_CHANGED, listener: typeof collapseChanged | null): this;\r\n  on(type: typeof MultiLevelCompositeColumn.EVENT_MULTI_LEVEL_CHANGED, listener: typeof nestedChildRatio | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_FILTER_CHANGED, listener: typeof filterChanged | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_ADD_COLUMN, listener: typeof addColumn | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_MOVE_COLUMN, listener: typeof moveColumn | null): this;\r\n  on(type: typeof CompositeColumn.EVENT_REMOVE_COLUMN, listener: typeof removeColumn | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(type, listener);\r\n  }\r\n\r\n  setCollapsed(value: boolean) {\r\n    if (this.collapsed === value) {\r\n      return;\r\n    }\r\n    this.fire([StackColumn.EVENT_COLLAPSE_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY_VALUES, Column.EVENT_DIRTY], this.collapsed, this.collapsed = value);\r\n  }\r\n\r\n  getCollapsed() {\r\n    return this.collapsed;\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any) {\r\n    const r = super.dump(toDescRef);\r\n    r.collapsed = this.collapsed;\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    this.collapsed = dump.collapsed === true;\r\n    super.restore(dump, factory);\r\n  }\r\n\r\n  flatten(r: IFlatColumn[], offset: number, levelsToGo = 0, padding = 0) {\r\n    return StackColumn.prototype.flatten.call(this, r, offset, levelsToGo, padding);\r\n  }\r\n\r\n  /**\r\n   * inserts a column at a the given position\r\n   * @param col\r\n   * @param index\r\n   */\r\n  insert(col: Column, index: number) {\r\n    col.on(`${Column.EVENT_WIDTH_CHANGED}.stack`, this.adaptChange);\r\n    //increase my width\r\n    super.setWidth(this.length === 0 ? col.getWidth() : (this.getWidth() + col.getWidth()));\r\n\r\n    return super.insert(col, index);\r\n  }\r\n\r\n  /**\r\n   * adapts weights according to an own width change\r\n   * @param oldValue\r\n   * @param newValue\r\n   */\r\n  private adaptWidthChange(oldValue: number, newValue: number) {\r\n    if (similar(oldValue, newValue, 0.5)) {\r\n      return;\r\n    }\r\n    const act = this.getWidth();\r\n    const next = act + (newValue - oldValue);\r\n    this.fire([MultiLevelCompositeColumn.EVENT_MULTI_LEVEL_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], act, next);\r\n    super.setWidth(next);\r\n  }\r\n\r\n  removeImpl(child: Column, index: number) {\r\n    child.on(`${Column.EVENT_WIDTH_CHANGED}.stack`, null);\r\n    super.setWidth(this.length === 0 ? 100 : this.getWidth() - child.getWidth());\r\n    return super.removeImpl(child, index);\r\n  }\r\n\r\n  setWidth(value: number) {\r\n    const act = this.getWidth();\r\n    const factor = value / act;\r\n    this._children.forEach((child) => {\r\n      //disable since we change it\r\n      child.setWidthImpl(child.getWidth() * factor);\r\n    });\r\n    if (!similar(act, value, 0.5)) {\r\n      this.fire([MultiLevelCompositeColumn.EVENT_MULTI_LEVEL_CHANGED, Column.EVENT_DIRTY_HEADER, Column.EVENT_DIRTY], act, value);\r\n    }\r\n    super.setWidth(value);\r\n  }\r\n\r\n  getRenderer() {\r\n    if (this.getCollapsed()) {\r\n      return MultiLevelCompositeColumn.EVENT_COLLAPSE_CHANGED;\r\n    }\r\n    return super.getRenderer();\r\n  }\r\n\r\n  isMissing(row: IDataRow) {\r\n    if (this.getCollapsed()) {\r\n      return this._children.some((c) => (isNumberColumn(c) || isMultiLevelColumn(c)) && c.isMissing(row));\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","import {ILineUpOptions} from '../../interfaces';\r\nimport AEventDispatcher, {IEventListener} from '../../internal/AEventDispatcher';\r\nimport debounce from '../../internal/debounce';\r\nimport {IGroupData, IGroupItem, isGroup} from '../../model';\r\nimport Ranking from '../../model/Ranking';\r\nimport DataProvider from '../../provider/ADataProvider';\r\nimport {IRenderContext} from '../../renderer';\r\nimport {IEngineRankingContext} from '../EngineRanking';\r\nimport EngineRenderer from '../EngineRenderer';\r\nimport {IRankingHeaderContext, IRankingHeaderContextContainer} from '../interfaces';\r\nimport {IRule} from './interfaces';\r\n\r\n/**\r\n * emitted when the highlight changes\r\n * @asMemberOf TaggleRenderer\r\n * @param dataIndex the highlghted data index or -1 for none\r\n * @event\r\n */\r\nexport declare function highlightChanged(dataIndex: number): void;\r\n\r\nexport interface ITaggleOptions {\r\n  violationChanged(rule: IRule, violation: string): void;\r\n\r\n  rowPadding: number;\r\n}\r\n\r\nexport default class TaggleRenderer extends AEventDispatcher {\r\n  static readonly EVENT_HIGHLIGHT_CHANGED = EngineRenderer.EVENT_HIGHLIGHT_CHANGED;\r\n\r\n  private isDynamicLeafHeight: boolean = false;\r\n\r\n  private rule: IRule | null = null;\r\n  private levelOfDetail: ((rowIndex: number) => 'high' | 'low') | null = null;\r\n  private readonly resizeListener = () => debounce(() => this.update(), 100);\r\n  private readonly renderer: EngineRenderer;\r\n\r\n  private readonly options: Readonly<ITaggleOptions> = {\r\n    violationChanged: () => undefined,\r\n    rowPadding: 2\r\n  };\r\n\r\n  constructor(public data: DataProvider, parent: HTMLElement, options: (Partial<ITaggleOptions> & Readonly<ILineUpOptions>)) {\r\n    super();\r\n\r\n\r\n    this.renderer = new EngineRenderer(data, parent, Object.assign({}, options, {\r\n      dynamicHeight: (data: (IGroupData | IGroupItem)[], ranking: Ranking) => {\r\n        const r = this.dynamicHeight(data);\r\n        if (r) {\r\n          return r;\r\n        }\r\n        return options.dynamicHeight ? options.dynamicHeight(data, ranking) : null;\r\n      },\r\n      levelOfDetail: (rowIndex: number) => this.levelOfDetail ? this.levelOfDetail(rowIndex) : 'high'\r\n    }));\r\n\r\n    //\r\n    this.renderer.style.addRule('taggle_lod_rule', `\r\n      #${this.renderer.idPrefix} [data-lod=low][data-agg=detail]:hover {\r\n        /* show regular height for hovered rows in low + medium LOD */\r\n        height: ${options.rowHeight}px !important;\r\n      }\r\n    `);\r\n\r\n\r\n    this.data.on(`${DataProvider.EVENT_SELECTION_CHANGED}.rule`, () => {\r\n      if (this.isDynamicLeafHeight) {\r\n        this.update();\r\n      }\r\n    });\r\n    this.forward(this.renderer, `${TaggleRenderer.EVENT_HIGHLIGHT_CHANGED}.main`);\r\n\r\n    window.addEventListener('resize', this.resizeListener, {\r\n      passive: true\r\n    });\r\n  }\r\n\r\n  get ctx(): IRankingHeaderContextContainer & IRenderContext & IEngineRankingContext {\r\n    return this.renderer.ctx;\r\n  }\r\n\r\n  pushUpdateAble(updateAble: (ctx: IRankingHeaderContext) => void) {\r\n    this.renderer.pushUpdateAble(updateAble);\r\n  }\r\n\r\n  private dynamicHeight(data: (IGroupData | IGroupItem)[]) {\r\n    if (!this.rule) {\r\n      this.levelOfDetail = null;\r\n      return null;\r\n    }\r\n\r\n    const availableHeight = this.renderer ? this.renderer.node.querySelector('main')!.clientHeight : 100;\r\n    const instance = this.rule.apply(data, availableHeight, new Set(this.data.getSelection()));\r\n    this.isDynamicLeafHeight = typeof instance.item === 'function';\r\n\r\n    this.options.violationChanged(this.rule, instance.violation || '');\r\n\r\n    const height = (item: IGroupItem | IGroupData) => {\r\n      if (isGroup(item)) {\r\n        return typeof instance.group === 'number' ? instance.group : instance.group(item);\r\n      }\r\n      return typeof instance.item === 'number' ? instance.item : instance.item(item);\r\n    };\r\n\r\n    this.levelOfDetail = (rowIndex: number) => {\r\n      const item = data[rowIndex];\r\n      return this.rule ? this.rule.levelOfDetail(item, height(item)) : 'high';\r\n    };\r\n\r\n    // padding is always 0 since included in height\r\n    // const padding = (item: IGroupData | IGroupItem | null) => {\r\n    //   if (!item) {\r\n    //     item = data[0];\r\n    //   }\r\n    //   const lod = this.rule ? this.rule.levelOfDetail(item, height(item)) : 'high';\r\n    //   return lod === 'high' ? 0 : 0; // always 0 since\r\n    // };\r\n\r\n    return {\r\n      defaultHeight: typeof instance.item === 'number' ? instance.item : NaN,\r\n      height,\r\n      padding: 0\r\n    };\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([TaggleRenderer.EVENT_HIGHLIGHT_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof TaggleRenderer.EVENT_HIGHLIGHT_CHANGED, listener: typeof highlightChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(type, listener);\r\n  }\r\n\r\n\r\n  zoomOut() {\r\n    this.renderer.zoomOut();\r\n  }\r\n\r\n  zoomIn() {\r\n    this.renderer.zoomIn();\r\n  }\r\n\r\n  switchRule(rule: IRule | null) {\r\n    if (this.rule === rule) {\r\n      return;\r\n    }\r\n    this.rule = rule;\r\n    this.update();\r\n  }\r\n\r\n  destroy() {\r\n    this.renderer.destroy();\r\n    window.removeEventListener('resize', this.resizeListener);\r\n  }\r\n\r\n  update() {\r\n    this.renderer.update();\r\n  }\r\n\r\n  setDataProvider(data: DataProvider) {\r\n    if (this.data) {\r\n      this.data.on(`${DataProvider.EVENT_SELECTION_CHANGED}.rule`, null);\r\n    }\r\n    this.data = data;\r\n    this.data.on(`${DataProvider.EVENT_SELECTION_CHANGED}.rule`, () => {\r\n      if (this.isDynamicLeafHeight) {\r\n        this.update();\r\n      }\r\n    });\r\n    this.renderer.setDataProvider(data);\r\n    this.update();\r\n  }\r\n\r\n  setHighlight(dataIndex: number, scrollIntoView: boolean) {\r\n    return this.renderer.setHighlight(dataIndex, scrollIntoView);\r\n  }\r\n\r\n  getHighlight() {\r\n    return this.renderer.getHighlight();\r\n  }\r\n\r\n  enableHighlightListening(enable: boolean) {\r\n    this.renderer.enableHighlightListening(enable);\r\n  }\r\n}\r\n","import {IGroupData, IGroupItem, isGroup} from '../../model';\r\nimport {IRule} from './interfaces';\r\n\r\nexport default function spaceFillingRule(config: { groupHeight: number, rowHeight: number, groupPadding: number }) {\r\n  function levelOfDetail(item: IGroupData | IGroupItem, height: number): 'high' | 'low' {\r\n    const group = isGroup(item);\r\n    const maxHeight = group ? config.groupHeight : config.rowHeight;\r\n    if (height >= maxHeight * 0.9) {\r\n      return 'high';\r\n    }\r\n    return 'low';\r\n  }\r\n\r\n  function itemHeight(data: (IGroupData | IGroupItem)[], availableHeight: number, selection: Set<number>) {\r\n    const visibleHeight = availableHeight - config.rowHeight - 5; // some padding for hover\r\n    const items = <IGroupItem[]>data.filter((d) => !isGroup(d));\r\n    const groups = data.length - items.length;\r\n    const lastItems = items.reduce((a, d) => a + (d.meta === 'last' || d.meta === 'first last' ? 1 : 0), 0);\r\n    const selected = items.reduce((a, d) => a + (selection.has(d.i) ? 1 : 0), 0);\r\n    const unselected = items.length - selected;\r\n    const groupSeparators = groups + lastItems;\r\n\r\n    if (unselected <= 0) {\r\n      // doesn't matter since all are selected anyhow\r\n      return {height: config.rowHeight, violation: ''};\r\n    }\r\n    const available = visibleHeight - groups * config.groupHeight - groupSeparators * config.groupPadding - selected * config.rowHeight;\r\n\r\n    const height = available / unselected;\r\n    if (height < 1) {\r\n      return {\r\n        height: 1,\r\n        violation: `Not possible to fit all rows on the screen. Set filters or aggregate groups to make it fit again.`\r\n      };\r\n    }\r\n    // clamp to max height\r\n    if (height > config.rowHeight) {\r\n      return {\r\n        height: config.rowHeight,\r\n        violation: ``\r\n      };\r\n    }\r\n    return {height, violation: ''};\r\n  }\r\n\r\n  return <IRule>{\r\n    apply: (data: (IGroupData | IGroupItem)[], availableHeight: number, selection: Set<number>) => {\r\n\r\n      const {violation, height} = itemHeight(data, availableHeight, selection);\r\n\r\n      const item = (item: IGroupItem) => {\r\n        if (selection.has(item.i)) {\r\n          return config.rowHeight;\r\n        }\r\n        return height;\r\n      };\r\n      return {item, group: config.groupHeight, violation};\r\n    },\r\n    levelOfDetail\r\n  };\r\n}\r\n","/**\r\n * a set that preserves the insertion order\r\n */\r\nexport default class OrderedSet<T> implements Iterable<T> {\r\n  readonly [Symbol.toStringTag] = Symbol('OrderedSet');\r\n  private readonly set = new Set<T>();\r\n  private readonly list = <T[]>[];\r\n\r\n  constructor(values: T[] = []) {\r\n    this.addAll(values);\r\n  }\r\n\r\n  get size() {\r\n    return this.set.size;\r\n  }\r\n\r\n  clear() {\r\n    this.set.clear();\r\n    this.list.splice(0, this.list.length);\r\n  }\r\n\r\n  addAll(values: T[]) {\r\n    values.forEach((v) => this.add(v));\r\n    return this;\r\n  }\r\n\r\n  add(value: T) {\r\n    if (this.set.has(value)) {\r\n      return this;\r\n    }\r\n    this.set.add(value);\r\n    this.list.push(value);\r\n    return this;\r\n  }\r\n\r\n  has(value: T) {\r\n    return this.set.has(value);\r\n  }\r\n\r\n  delete(value: T) {\r\n    const r = this.set.delete(value);\r\n    if (!r) {\r\n      return false;\r\n    }\r\n    const index = this.list.indexOf(value);\r\n    console.assert(index >= 0);\r\n    this.list.splice(index, 1);\r\n    return true;\r\n  }\r\n\r\n  deleteAll(values: T[]) {\r\n    return values.reduce((acc, act) => this.delete(act) && acc, true);\r\n  }\r\n\r\n  forEach(callbackfn: (value: T, value2: T, set: Set<T>) => void, thisArg?: any) {\r\n    this.list.forEach(function (this: any, v: T) {\r\n      callbackfn.call(this, v, v, <any>this);\r\n    }, thisArg);\r\n  }\r\n\r\n  [Symbol.iterator]() {\r\n    return this.list[Symbol.iterator]();\r\n  }\r\n}\r\n","import {timeFormat, timeParse} from 'd3-time-format';\r\nimport {median, min, max} from 'd3-array';\r\nimport {dialogAddons} from './annotations';\r\nimport ArrayColumn, {IArrayColumnDesc, spliceChanged} from './ArrayColumn';\r\nimport Column, {widthChanged, labelChanged, metaDataChanged, dirty, dirtyHeader, dirtyValues, rendererTypeChanged, groupRendererChanged, summaryRendererChanged, visibilityChanged} from './Column';\r\nimport ValueColumn, {dataLoaded} from './ValueColumn';\r\nimport {IDateDesc} from './DateColumn';\r\nimport {IDataRow} from './interfaces';\r\nimport {FIRST_IS_MISSING, isMissingValue} from './missing';\r\nimport {IEventListener} from '../internal/AEventDispatcher';\r\n\r\nexport enum EDateSort {\r\n  min = 'min',\r\n  max = 'max',\r\n  median = 'median'\r\n}\r\n\r\nexport interface IDatesDesc extends IDateDesc {\r\n  sort?: EDateSort;\r\n}\r\n\r\nexport declare type IDatesColumnDesc = IDatesDesc & IArrayColumnDesc<Date>;\r\n\r\n/**\r\n * emitted when the sort method property changes\r\n * @asMemberOf Column\r\n * @event\r\n */\r\nexport declare function sortMethodChanged(previous: EDateSort, current: EDateSort): void;\r\n\r\n@dialogAddons('sort', 'sortDates')\r\nexport default class DatesColumn extends ArrayColumn<Date | null> {\r\n  static readonly EVENT_SORTMETHOD_CHANGED = 'sortMethodChanged';\r\n\r\n  private readonly format: (date: Date) => string;\r\n  private readonly parse: (date: string) => Date | null;\r\n  private sort: EDateSort;\r\n\r\n  constructor(id: string, desc: Readonly<IDatesColumnDesc>) {\r\n    super(id, desc);\r\n    this.format = timeFormat(desc.dateFormat || '%x');\r\n    this.parse = desc.dateParse ? timeParse(desc.dateParse) : timeParse(desc.dateFormat || '%x');\r\n    this.sort = desc.sort || EDateSort.median;\r\n    this.setDefaultRenderer('default');\r\n  }\r\n\r\n  protected createEventList() {\r\n    return super.createEventList().concat([ArrayColumn.EVENT_SPLICE_CHANGED]);\r\n  }\r\n\r\n  on(type: typeof DatesColumn.EVENT_SORTMETHOD_CHANGED, listener: typeof sortMethodChanged | null): this;\r\n  on(type: typeof ArrayColumn.EVENT_SPLICE_CHANGED, listener: typeof spliceChanged | null): this;\r\n  on(type: typeof ValueColumn.EVENT_DATA_LOADED, listener: typeof dataLoaded | null): this;\r\n  on(type: typeof Column.EVENT_WIDTH_CHANGED, listener: typeof widthChanged | null): this;\r\n  on(type: typeof Column.EVENT_LABEL_CHANGED, listener: typeof labelChanged | null): this;\r\n  on(type: typeof Column.EVENT_METADATA_CHANGED, listener: typeof metaDataChanged | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY, listener: typeof dirty | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_HEADER, listener: typeof dirtyHeader | null): this;\r\n  on(type: typeof Column.EVENT_DIRTY_VALUES, listener: typeof dirtyValues | null): this;\r\n  on(type: typeof Column.EVENT_RENDERER_TYPE_CHANGED, listener: typeof rendererTypeChanged | null): this;\r\n  on(type: typeof Column.EVENT_GROUP_RENDERER_TYPE_CHANGED, listener: typeof groupRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_SUMMARY_RENDERER_TYPE_CHANGED, listener: typeof summaryRendererChanged | null): this;\r\n  on(type: typeof Column.EVENT_VISIBILITY_CHANGED, listener: typeof visibilityChanged | null): this;\r\n  on(type: string | string[], listener: IEventListener | null): this {\r\n    return super.on(<any>type, listener);\r\n  }\r\n\r\n  getValue(row: IDataRow): (Date | null)[] {\r\n    return super.getValue(row).map((v) => {\r\n      if (isMissingValue(v)) {\r\n        return null;\r\n      }\r\n      if (v instanceof Date) {\r\n        return v;\r\n      }\r\n      return this.parse(String(v));\r\n    });\r\n  }\r\n\r\n  getLabels(row: IDataRow) {\r\n    return this.getValue(row).map((v) => (v instanceof Date) ? this.format(v) : '');\r\n  }\r\n\r\n  getSortMethod() {\r\n    return this.sort;\r\n  }\r\n\r\n  setSortMethod(sort: EDateSort) {\r\n    if (this.sort === sort) {\r\n      return;\r\n    }\r\n    this.fire([DatesColumn.EVENT_SORTMETHOD_CHANGED], this.sort, this.sort = sort);\r\n    // sort by me if not already sorted by me\r\n    if (!this.isSortedByMe().asc) {\r\n      this.sortByMe();\r\n    }\r\n  }\r\n\r\n  dump(toDescRef: (desc: any) => any): any {\r\n    const r = super.dump(toDescRef);\r\n    r.sortMethod = this.getSortMethod();\r\n    return r;\r\n  }\r\n\r\n  restore(dump: any, factory: (dump: any) => Column | null) {\r\n    super.restore(dump, factory);\r\n    if (dump.sortMethod) {\r\n      this.sort = dump.sortMethod;\r\n    }\r\n  }\r\n\r\n  compare(a: IDataRow, b: IDataRow) {\r\n    const av = <Date[]>this.getValue(a).filter(Boolean);\r\n    const bv = <Date[]>this.getValue(b).filter(Boolean);\r\n    if (av === bv) {\r\n      return 0;\r\n    }\r\n    if (av.length === 0) {\r\n      return bv.length === 0 ? 0 : FIRST_IS_MISSING;\r\n    }\r\n    if (bv.length === 0) {\r\n      return -FIRST_IS_MISSING;\r\n    }\r\n    const as = compute(av, this.sort);\r\n    const bs = compute(bv, this.sort);\r\n    return as - bs;\r\n  }\r\n}\r\n\r\nfunction compute(arr: Date[], sort: EDateSort) {\r\n  switch (sort) {\r\n    case EDateSort.min:\r\n      return min(arr, (d) => d.getTime())!;\r\n    case EDateSort.max:\r\n      return max(arr, (d) => d.getTime())!;\r\n    case EDateSort.median:\r\n      return median(arr, (d) => d.getTime())!;\r\n  }\r\n}\r\n","import {createAggregateDesc, createRankDesc, createSelectionDesc, IColumnDesc, IDataRow, isSupportType} from '../model';\r\nimport {IOrderedGroup} from '../model/Group';\r\nimport Ranking from '../model/Ranking';\r\nimport ADataProvider, {IDataProviderOptions} from './ADataProvider';\r\n\r\n\r\nfunction isComplexAccessor(column: any) {\r\n  // something like a.b or a[4]\r\n  return typeof column === 'string' && column.indexOf('.') >= 0;\r\n}\r\n\r\nfunction resolveComplex(column: string, row: any) {\r\n  if (row.hasOwnProperty(column)) { // well complex but a direct hit\r\n    return row[column];\r\n  }\r\n  const resolve = (obj: any, col: string) => {\r\n    if (obj === undefined) {\r\n      return obj; // propagate invalid values\r\n    }\r\n    if (/\\d+/.test(col)) { // index\r\n      return obj[+col];\r\n    }\r\n    return obj[col];\r\n  };\r\n  return column.split('.').reduce(resolve, row);\r\n}\r\n\r\nfunction rowGetter(row: IDataRow, _id: string, desc: any) {\r\n  const column = desc.column;\r\n  if (isComplexAccessor(column)) {\r\n    return resolveComplex(<string>column, row.v);\r\n  }\r\n  return row.v[column];\r\n}\r\n\r\n/**\r\n * common base implementation of a DataProvider with a fixed list of column descriptions\r\n */\r\nabstract class ACommonDataProvider extends ADataProvider {\r\n\r\n  private rankingIndex = 0;\r\n\r\n  /**\r\n   * the local ranking orders\r\n   */\r\n  private readonly ranks = new Map<string, IOrderedGroup[]>();\r\n\r\n  constructor(private columns: IColumnDesc[] = [], options: Partial<IDataProviderOptions> = {}) {\r\n    super(options);\r\n    //generate the accessor\r\n    columns.forEach((d: any) => {\r\n      d.accessor = d.accessor || rowGetter;\r\n      d.label = d.label || d.column;\r\n    });\r\n  }\r\n\r\n  protected rankAccessor(row: IDataRow, _id: string, _desc: IColumnDesc, ranking: Ranking) {\r\n    const groups = this.ranks.get(ranking.id) || [];\r\n    let acc = 0;\r\n    for (const group of groups) {\r\n      const rank = group.order.indexOf(row.i);\r\n      if (rank >= 0) {\r\n        return acc + rank + 1; // starting with 1\r\n      }\r\n      acc += group.order.length;\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  /**\r\n   * returns the maximal number of nested/hierarchical sorting criteria\r\n   * @return {number}\r\n   */\r\n  protected getMaxNestedSortingCriteria() {\r\n    return 1;\r\n  }\r\n\r\n  protected getMaxGroupColumns() {\r\n    return 1;\r\n  }\r\n\r\n  cloneRanking(existing?: Ranking) {\r\n    const id = this.nextRankingId();\r\n    const clone = new Ranking(id, this.getMaxNestedSortingCriteria(), this.getMaxGroupColumns());\r\n\r\n    if (existing) { //copy the ranking of the other one\r\n      //copy the ranking\r\n      this.ranks.set(id, this.ranks.get(existing.id)!);\r\n      //TODO better cloning\r\n      existing.children.forEach((child) => {\r\n        this.push(clone, child.desc);\r\n      });\r\n    }\r\n\r\n    return clone;\r\n  }\r\n\r\n  cleanUpRanking(ranking: Ranking) {\r\n    //delete all stored information\r\n    this.ranks.delete(ranking.id);\r\n  }\r\n\r\n  sort(ranking: Ranking): Promise<IOrderedGroup[]> | IOrderedGroup[] {\r\n    //use the server side to sort\r\n    const r = this.sortImpl(ranking);\r\n    if (Array.isArray(r)) {\r\n      //store the result\r\n      this.ranks.set(ranking.id, r);\r\n      return r;\r\n    }\r\n    return r.then((r) => {\r\n      this.ranks.set(ranking.id, r);\r\n      return r;\r\n    });\r\n  }\r\n\r\n  protected abstract sortImpl(ranking: Ranking): Promise<IOrderedGroup[]> | IOrderedGroup[];\r\n\r\n  /**\r\n   * adds another column description to this data provider\r\n   * @param column\r\n   */\r\n  pushDesc(column: IColumnDesc) {\r\n    const d: any = column;\r\n    d.accessor = d.accessor || rowGetter;\r\n    d.label = column.label || d.column;\r\n    this.columns.push(column);\r\n    this.fire(ADataProvider.EVENT_ADD_DESC, d);\r\n  }\r\n\r\n  clearColumns() {\r\n    this.clearRankings();\r\n    this.columns.splice(0, this.columns.length);\r\n    this.fire(ADataProvider.EVENT_CLEAR_DESC);\r\n  }\r\n\r\n  getColumns(): IColumnDesc[] {\r\n    return this.columns.slice();\r\n  }\r\n\r\n  findDesc(ref: string) {\r\n    return this.columns.filter((c) => (<any>c).column === ref)[0];\r\n  }\r\n\r\n  /**\r\n   * identify by the tuple type@columnname\r\n   * @param desc\r\n   * @returns {string}\r\n   */\r\n  toDescRef(desc: any): any {\r\n    return typeof desc.column !== 'undefined' ? `${desc.type}@${desc.column}` : desc;\r\n  }\r\n\r\n  /**\r\n   * generates a default ranking by using all column descriptions ones\r\n   */\r\n  deriveDefault(addSupportType: boolean = true) {\r\n    const r = this.pushRanking();\r\n    if (addSupportType) {\r\n      if (this.getMaxGroupColumns() > 0) {\r\n        r.push(this.create(createAggregateDesc())!);\r\n      }\r\n      r.push(this.create(createRankDesc())!);\r\n      if (this.multiSelections) {\r\n        r.push(this.create(createSelectionDesc())!);\r\n      }\r\n    }\r\n    this.getColumns().forEach((col) => {\r\n      const c = this.create(col);\r\n      if (!c || isSupportType(c)) {\r\n        return;\r\n      }\r\n      r.push(c);\r\n    });\r\n    return r;\r\n  }\r\n\r\n  fromDescRef(descRef: any): any {\r\n    if (typeof (descRef) === 'string') {\r\n      return this.columns.find((d: any) => `${d.type}@${d.column}` === descRef);\r\n    }\r\n    const existing = this.columns.find((d) => descRef.column === (<any>d).column && descRef.label === d.label && descRef.type === d.type);\r\n    if (existing) {\r\n      return existing;\r\n    }\r\n    return descRef;\r\n  }\r\n\r\n  restore(dump: any) {\r\n    super.restore(dump);\r\n    this.rankingIndex = 1 + Math.max(...this.getRankings().map((r) => +r.id.substring(4)));\r\n  }\r\n\r\n  nextRankingId() {\r\n    return `rank${this.rankingIndex++}`;\r\n  }\r\n}\r\n\r\nexport default ACommonDataProvider;\r\n","import {IDataRow, IGroup} from '../model';\r\nimport Column from '../model/Column';\r\nimport SelectionColumn from '../model/SelectionColumn';\r\nimport {default as IRenderContext, ICellRendererFactory} from './interfaces';\r\nimport {noop} from './utils';\r\nimport {IDataProvider} from '../provider/ADataProvider';\r\n\r\n/** @internal */\r\nexport default class SelectionRenderer implements ICellRendererFactory {\r\n  readonly title = 'Default';\r\n\r\n  canRender(col: Column) {\r\n    return col instanceof SelectionColumn;\r\n  }\r\n\r\n  create(col: SelectionColumn, ctx: IRenderContext) {\r\n    return {\r\n      template: `<div></div>`,\r\n      update: (n: HTMLElement, d: IDataRow, i: number) => {\r\n        n.onclick = function (event) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          if (event.shiftKey) {\r\n            const ranking = col.findMyRanker()!.id;\r\n            if (rangeSelection(ctx.provider, ranking, d.i, i, event.ctrlKey)) {\r\n              return;\r\n            }\r\n          }\r\n\r\n          col.toggleValue(d);\r\n        };\r\n      },\r\n      render: noop\r\n    };\r\n  }\r\n\r\n  createGroup(col: SelectionColumn) {\r\n    return {\r\n      template: `<div></div>`,\r\n      update: (n: HTMLElement, _group: IGroup, rows: IDataRow[]) => {\r\n        const selected = rows.reduce((act, r) => col.getValue(r) ? act + 1 : act, 0);\r\n        const all = selected >= rows.length / 2;\r\n        if (all) {\r\n          n.classList.add('lu-group-selected');\r\n        } else {\r\n          n.classList.remove('lu-group-selected');\r\n        }\r\n        n.onclick = function (event) {\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          const value = n.classList.toggle('lu-group-selected');\r\n          col.setValues(rows, value);\r\n        };\r\n      }\r\n    };\r\n  }\r\n\r\n  createSummary(col: SelectionColumn, context: IRenderContext) {\r\n    return {\r\n      template: `<div title=\"(Un)Select All\" data-icon=\"unchecked\"></div>`,\r\n      update: (node: HTMLElement) => {\r\n        node.onclick = (evt) => {\r\n          evt.stopPropagation();\r\n          const icon = node.dataset.icon;\r\n          if (icon === 'unchecked') {\r\n            context.provider.selectAllOf(col.findMyRanker()!);\r\n            node.dataset.icon = 'checked';\r\n          } else {\r\n            context.provider.setSelection([]);\r\n            node.dataset.icon = 'unchecked';\r\n          }\r\n        };\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\n/** @internal */\r\nexport function rangeSelection(provider: IDataProvider, rankingId: string, dataIndex: number, relIndex: number, ctrlKey: boolean) {\r\n  const ranking = provider.getRankings().find((d) => d.id === rankingId);\r\n  if (!ranking) { // no known reference\r\n    return false;\r\n  }\r\n  const selection = provider.getSelection();\r\n  if (selection.length === 0 || selection.includes(dataIndex)) {\r\n    return false; // no other or deselect\r\n  }\r\n  const order = ranking.getOrder();\r\n  const lookup = new Map(ranking.getOrder().map((d, i) => <[number, number]>[d, i]));\r\n  const distances = selection.map((d) => {\r\n    const index = (lookup.has(d) ? lookup.get(d)! : Infinity);\r\n    return {s: d, index, distance: Math.abs(relIndex - index)};\r\n  });\r\n  const nearest = distances.sort((a, b) => a.distance - b.distance)[0]!;\r\n  if (!isFinite(nearest.distance)) {\r\n    return false; // all outside\r\n  }\r\n  if (!ctrlKey) {\r\n    selection.splice(0, selection.length);\r\n    selection.push(nearest.s);\r\n  }\r\n  if (nearest.index < relIndex) {\r\n    for(let i = nearest.index + 1; i <= relIndex; ++i) {\r\n      selection.push(order[i]);\r\n    }\r\n  } else {\r\n    for(let i = relIndex; i <= nearest.index; ++i) {\r\n      selection.push(order[i]);\r\n    }\r\n  }\r\n  provider.setSelection(selection);\r\n  return true;\r\n}\r\n","import {event} from \"d3-selection\";\n\nexport function nopropagation() {\n  event.stopImmediatePropagation();\n}\n\nexport default function() {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent from \"./noevent\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, true);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, true);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, true);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function DragEvent(target, type, subject, id, active, x, y, dx, dy, dispatch) {\n  this.target = target;\n  this.type = type;\n  this.subject = subject;\n  this.identifier = id;\n  this.active = active;\n  this.x = x;\n  this.y = y;\n  this.dx = dx;\n  this.dy = dy;\n  this._ = dispatch;\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {event, customEvent, select, mouse, touch} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag\";\nimport noevent, {nopropagation} from \"./noevent\";\nimport constant from \"./constant\";\nimport DragEvent from \"./event\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter() {\n  return !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return \"ontouchstart\" in this;\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned() {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var gesture = beforestart(\"mouse\", container.apply(this, arguments), mouse, this, arguments);\n    if (!gesture) return;\n    select(event.view).on(\"mousemove.drag\", mousemoved, true).on(\"mouseup.drag\", mouseupped, true);\n    nodrag(event.view);\n    nopropagation();\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\");\n  }\n\n  function mousemoved() {\n    noevent();\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\");\n  }\n\n  function mouseupped() {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent();\n    gestures.mouse(\"end\");\n  }\n\n  function touchstarted() {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.changedTouches,\n        c = container.apply(this, arguments),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(touches[i].identifier, c, touch, this, arguments)) {\n        nopropagation();\n        gesture(\"start\");\n      }\n    }\n  }\n\n  function touchmoved() {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent();\n        gesture(\"drag\");\n      }\n    }\n  }\n\n  function touchended() {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation();\n        gesture(\"end\");\n      }\n    }\n  }\n\n  function beforestart(id, container, point, that, args) {\n    var p = point(container, id), s, dx, dy,\n        sublisteners = listeners.copy();\n\n    if (!customEvent(new DragEvent(drag, \"beforestart\", s, id, active, p[0], p[1], 0, 0, sublisteners), function() {\n      if ((event.subject = s = subject.apply(that, args)) == null) return false;\n      dx = s.x - p[0] || 0;\n      dy = s.y - p[1] || 0;\n      return true;\n    })) return;\n\n    return function gesture(type) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[id] = gesture, n = active++; break;\n        case \"end\": delete gestures[id], --active; // nobreak\n        case \"drag\": p = point(container, id), n = active; break;\n      }\n      customEvent(new DragEvent(drag, type, s, id, n, p[0] + dx, p[1] + dy, p[0] - p0[0], p[1] - p0[1], sublisteners), sublisteners.apply, sublisteners, [type, that, args]);\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","var noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","import {IArrayDesc, IColumnDesc} from '../../model';\r\n\r\nexport default class ColumnBuilder<T extends IColumnDesc = IColumnDesc> {\r\n  protected readonly desc: T;\r\n\r\n  constructor(type: string, column: string) {\r\n    this.desc = <any>{column, type, label: column ? column[0].toUpperCase() + column.slice(1): type};\r\n  }\r\n\r\n  /**\r\n   * column label\r\n   */\r\n  label(label: string) {\r\n    this.desc.label = label;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * column description\r\n   */\r\n  description(description: string) {\r\n    this.desc.description = description;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * sets the frozen state of this column, i.e is sticky to the left side when scrolling horizontally\r\n   */\r\n  frozen() {\r\n    this.desc.frozen = true;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * specify the renderer to used for this column\r\n   * @param {string} renderer within a cell\r\n   * @param {string} groupRenderer within an aggregated cell\r\n   * @param {string} summaryRenderer within the summary in the header and side panel\r\n   */\r\n  renderer(renderer?: string, groupRenderer?: string, summaryRenderer?: string) {\r\n    if (renderer) {\r\n      this.desc.renderer = renderer;\r\n    }\r\n    if (groupRenderer) {\r\n      this.desc.groupRenderer = groupRenderer;\r\n    }\r\n    if (summaryRenderer) {\r\n      this.desc.summaryRenderer = summaryRenderer;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * specify a custom additional attribute for the description\r\n   * @param {string} key the property key\r\n   * @param value its value\r\n   */\r\n  custom(key: string, value: any) {\r\n    (<any>this.desc)[key] = value;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * sets the default width of the column\r\n   */\r\n  width(width: number) {\r\n    this.desc.width = width;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * sets the column color in case of numerical columns\r\n   */\r\n  color(color: string) {\r\n    this.desc.color = color;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * converts the column type to be an array type, supports only base types: boolean, categorical, date, number, and string\r\n   * @param {string[] | number} labels labels to use for each array item or the expected length of an value\r\n   */\r\n  asArray(labels?: string[] | number) {\r\n    console.assert(['boolean', 'categorical', 'date', 'number', 'string'].includes(this.desc.type!));\r\n    this.desc.type += 's';\r\n    const a = <IArrayDesc>this.desc;\r\n    if (Array.isArray(labels)) {\r\n      a.labels = labels;\r\n      a.dataLength = labels.length;\r\n    } else if (typeof labels === 'number') {\r\n      a.dataLength = labels;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * converts the column type to be a map type, supports only base types: categorical, date, number, and string\r\n   */\r\n  asMap() {\r\n    console.assert(['categorical', 'date', 'number', 'string'].includes(this.desc.type!));\r\n    this.desc.type += 'Map';\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * build the column description\r\n   */\r\n  build(_data: any[]): T {\r\n    return <any>this.desc;\r\n  }\r\n}\r\n\r\n/**\r\n * build a column of a given type\r\n * @param {string} type column type\r\n * @param {string} column column which contains the associated data\r\n * @returns {ColumnBuilder<IColumnDesc>}\r\n */\r\nexport function buildColumn(type: string, column: string) {\r\n  return new ColumnBuilder(type, column);\r\n}\r\n","import {IDynamicHeight, ITaggleOptions} from '../interfaces';\r\nimport {IGroupData, IGroupItem} from '../model';\r\nimport Ranking from '../model/Ranking';\r\nimport {ICellRendererFactory} from '../renderer';\r\nimport {IToolbarAction, IToolbarDialogAddon} from '../ui';\r\n\r\n/**\r\n * builder for LineUp/Taggle instance\r\n */\r\nexport default class LineUpBuilder {\r\n  protected readonly options: Partial<ITaggleOptions> = {\r\n    renderers: {},\r\n    toolbar: {}\r\n  };\r\n\r\n  /**\r\n   * option to enable/disable animated transitions\r\n   * @default true\r\n   */\r\n  animated(enable: boolean) {\r\n    this.options.animated = enable;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * option to rotate labels on demand in narrow columns\r\n   * @param rotation rotation in degrees\r\n   * @default 0 - disabled\r\n   */\r\n  labelRotation(rotation: number) {\r\n    this.options.labelRotation = rotation;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * option to enable/disable the side panel\r\n   * @param {boolean} enable enable flag\r\n   * @param {boolean} collapsed whether collapsed by default\r\n   */\r\n  sidePanel(enable: boolean, collapsed: boolean = false) {\r\n    this.options.sidePanel = enable;\r\n    this.options.sidePanelCollapsed = collapsed;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * show the sorting and grouping hierarchy indicator in the side panel\r\n   * @param {boolean} enable enable flag\r\n   */\r\n  hierarchyIndicator(enable: boolean) {\r\n    this.options.hierarchyIndicator = enable;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * option to specify the default slope graph mode\r\n   * @default 'item'\r\n   */\r\n  defaultSlopeGraphMode(mode: 'item' | 'band') {\r\n    this.options.defaultSlopeGraphMode = mode;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * option to enable/disable showing a summary (histogram, ...) in the header\r\n   * @default true\r\n   */\r\n  summaryHeader(enable: boolean) {\r\n    this.options.summaryHeader = enable;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * option to enforce that the whole row is shown upon hover without overflow hidden\r\n   * @default false\r\n   */\r\n  expandLineOnHover(enable: boolean) {\r\n    this.options.expandLineOnHover = enable;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * option to enable overview mode by default, just valid when building a Taggle instance\r\n   * @returns {this}\r\n   */\r\n  overviewMode() {\r\n    this.options.overviewMode = true;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * option to ignore unsupported browser check - at own risk\r\n   * @returns {this}\r\n   */\r\n  ignoreUnsupportedBrowser() {\r\n    this.options.ignoreUnsupportedBrowser = true;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * register a new renderer factory function\r\n   * @param id the rederer id\r\n   * @param factory factory class implementing the renderer\r\n   */\r\n  registerRenderer(id: string, factory: ICellRendererFactory) {\r\n    this.options.renderers![id] = factory;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * register another toolbar action which can be used within a model class\r\n   * @param id toolbar id\r\n   * @param action\r\n   */\r\n  registerToolbarAction(id: string, action: IToolbarAction) {\r\n    this.options.toolbar![id] = action;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * register another toolbar action which can be sued within a model class\r\n   * @param id  dialog id\r\n   * @param addon addon description\r\n   */\r\n  registerToolbarDialogAddon(id: string, addon: IToolbarDialogAddon) {\r\n    this.options.toolbar![id] = addon;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * height and padding of a row\r\n   * @default 18 and 2\r\n   */\r\n  rowHeight(rowHeight: number, rowPadding: number) {\r\n    this.options.rowHeight = rowHeight;\r\n    this.options.rowPadding = rowPadding;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * height and padding of an aggregated group in pixel\r\n   * @default 40 and 5\r\n   */\r\n  groupRowHeight(groupHeight: number, groupPadding: number) {\r\n    this.options.groupHeight = groupHeight;\r\n    this.options.groupPadding = groupPadding;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * custom function to compute the height of a row (group or item)\r\n   * @param {(data: (IGroupItem | IGroupData)[], ranking: Ranking) => (IDynamicHeight | null)} callback\r\n   */\r\n  dynamicHeight(callback: (data: (IGroupItem | IGroupData)[], ranking: Ranking) => (IDynamicHeight | null)) {\r\n    this.options.dynamicHeight = callback;\r\n    return this;\r\n  }\r\n}\r\n","import {\r\n  createAggregateDesc, createGroupDesc, createImpositionBoxPlotDesc, createImpositionDesc, createImpositionsDesc,\r\n  createNestedDesc, createRankDesc, createReduceDesc, createScriptDesc, createSelectionDesc, createStackDesc,\r\n  EAdvancedSortMethod, IColumnDesc, ISortCriteria\r\n} from '../model';\r\nimport Column from '../model/Column';\r\nimport CompositeColumn from '../model/CompositeColumn';\r\nimport Ranking from '../model/Ranking';\r\nimport ReduceColumn from '../model/ReduceColumn';\r\nimport ScriptColumn from '../model/ScriptColumn';\r\nimport StackColumn from '../model/StackColumn';\r\nimport ADataProvider from '../provider/ADataProvider';\r\n\r\nexport interface IImposeColumnBuilder {\r\n  type: 'impose';\r\n  column: string;\r\n  label?: string;\r\n  categoricalColumn: string;\r\n}\r\n\r\nexport interface INestedBuilder {\r\n  type: 'nested';\r\n  label?: string;\r\n  columns: string[];\r\n}\r\n\r\nexport interface IWeightedSumBuilder {\r\n  type: 'weightedSum';\r\n  columns: string[];\r\n  label?: string;\r\n  weights: number[];\r\n}\r\n\r\nexport interface IReduceBuilder {\r\n  type: 'min' | 'max' | 'mean' | 'median';\r\n  columns: string[];\r\n  label?: string;\r\n}\r\n\r\nexport interface IScriptedBuilder {\r\n  type: 'script';\r\n  code: string;\r\n  columns: string[];\r\n  label?: string;\r\n}\r\n\r\n/**\r\n * builder for a ranking\r\n */\r\nexport default class RankingBuilder {\r\n  private static readonly ALL_MAGIC_FLAG = '*';\r\n\r\n  private readonly columns: (string | { desc: IColumnDesc | ((data: ADataProvider) => IColumnDesc), columns: string[], post?: (col: Column) => void })[] = [];\r\n  private readonly sort: { column: string, asc: boolean }[] = [];\r\n  private readonly groups: string[] = [];\r\n\r\n  /**\r\n   * specify another sorting criteria\r\n   * @param {string} column the column name optionally with encoded sorting separated by colon, e.g. a:desc\r\n   * @param {boolean | \"asc\" | \"desc\"} asc ascending or descending order\r\n   */\r\n  sortBy(column: string, asc: boolean | 'asc' | 'desc' = true) {\r\n    if (column.includes(':')) {\r\n      // encoded sorting order\r\n      const index = column.indexOf(':');\r\n      asc = <'asc' | 'desc'>column.slice(index + 1);\r\n      column = column.slice(0, index);\r\n    }\r\n    this.sort.push({column, asc: asc === true || String(asc)[0] === 'a'});\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * specify grouping criteria\r\n   * @returns {this}\r\n   */\r\n  groupBy(...columns: string[]) {\r\n    this.groups.push(...columns);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * add another column to this ranking, identified by column name or label. magic names are used for special columns:\r\n   * <ul>\r\n   *     <li>'*' = all columns</li>\r\n   *     <li>'_*' = all support columns</li>\r\n   *     <li>'_aggregate' = aggregate column</li>\r\n   *     <li>'_selection' = selection column</li>\r\n   *     <li>'_group' = group column</li>\r\n   *     <li>'_rank' = rank column</li>\r\n   * </ul>\r\n   * In addition build objects for combined columns are supported.\r\n   * @param {string | IImposeColumnBuilder | INestedBuilder | IWeightedSumBuilder | IReduceBuilder | IScriptedBuilder} column\r\n   */\r\n  column(column: string | IImposeColumnBuilder | INestedBuilder | IWeightedSumBuilder | IReduceBuilder | IScriptedBuilder) {\r\n    if (typeof column === 'string') {\r\n      switch (column) {\r\n        case '_aggregate':\r\n          return this.aggregate();\r\n        case '_selection':\r\n          return this.selection();\r\n        case '_group':\r\n          return this.group();\r\n        case '_rank':\r\n          return this.rank();\r\n        case '_*':\r\n          return this.supportTypes();\r\n        case '*':\r\n          return this.allColumns();\r\n      }\r\n      this.columns.push(column);\r\n      return this;\r\n    }\r\n    const label = column.label || null;\r\n    // builder ish\r\n    switch (column.type) {\r\n      case 'impose':\r\n        return this.impose(label, column.column, column.categoricalColumn);\r\n      case 'min':\r\n      case 'max':\r\n      case 'median':\r\n      case 'mean':\r\n        console.assert(column.columns.length >= 2);\r\n        return this.reduce(label, <any>column.type, column.columns[0], column.columns[1], ...column.columns.slice(2));\r\n      case 'nested':\r\n        console.assert(column.columns.length >= 1);\r\n        return this.nested(label, column.columns[0], ... column.columns.slice(1));\r\n      case 'script':\r\n        console.assert(column.columns.length >= 2);\r\n        return this.scripted(label, column.code, column.columns[0], column.columns[1], ...column.columns.slice(2));\r\n      case 'weightedSum':\r\n        console.assert(column.columns.length >= 2);\r\n        console.assert(column.columns.length === column.weights.length);\r\n        const mixed: (string | number)[] = [];\r\n        column.columns.slice(2).forEach((c, i) => {\r\n          mixed.push(c);\r\n          mixed.push(column.weights[i + 2]);\r\n        });\r\n        return this.weightedSum(label, column.columns[0], column.weights[0], column.columns[1], column.weights[1], ...mixed);\r\n    }\r\n    console.error('invalid column type: ', column);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * add an imposed column (numerical column colored by categorical column) to this ranking\r\n   * @param {string | null} label optional label\r\n   * @param {string} numberColumn numerical column reference\r\n   * @param {string} categoricalColumn categorical column reference\r\n   */\r\n  impose(label: string | null, numberColumn: string, categoricalColumn: string) {\r\n    this.columns.push({\r\n      desc: (data) => {\r\n        const base = data.getColumns().find((d) => d.label === numberColumn || (<any>d).column === numberColumn);\r\n        switch (base ? base.type : '') {\r\n          case 'boxplot':\r\n            return createImpositionBoxPlotDesc(label ? label : undefined);\r\n          case 'numbers':\r\n            return createImpositionsDesc(label ? label : undefined);\r\n          default:\r\n            return createImpositionDesc(label ? label : undefined);\r\n        }\r\n      },\r\n      columns: [numberColumn, categoricalColumn]\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * add a nested / group composite column\r\n   * @param {string | null} label optional label\r\n   * @param {string} column first element of the group enforcing not empty ones\r\n   * @param {string} columns additional columns\r\n   */\r\n  nested(label: string | null, column: string, ...columns: string[]) {\r\n    this.columns.push({\r\n      desc: createNestedDesc(label ? label : undefined),\r\n      columns: [column].concat(columns)\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * add a weighted sum / stack column\r\n   * @param {string | null} label optional label\r\n   * @param {string} numberColumn1 the first numerical column\r\n   * @param {number} weight1 its weight (0..1)\r\n   * @param {string} numberColumn2 the second numerical column\r\n   * @param {number} weight2 its weight (0..1)\r\n   * @param {string | number} numberColumnAndWeights alternating column weight references\r\n   */\r\n  weightedSum(label: string | null, numberColumn1: string, weight1: number, numberColumn2: string, weight2: number, ...numberColumnAndWeights: (string | number)[]) {\r\n    const weights = [weight1, weight2].concat(<number[]>numberColumnAndWeights.filter((_, i) => i % 2 === 1));\r\n    this.columns.push({\r\n      desc: createStackDesc(label ? label : undefined),\r\n      columns: [numberColumn1, numberColumn2].concat(<string[]>numberColumnAndWeights.filter((_, i) => i % 2 === 0)),\r\n      post: (col) => {\r\n        (<StackColumn>col).setWeights(weights);\r\n      }\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * add reducing column (min, max, median, mean, ...)\r\n   * @param {string | null} label optional label\r\n   * @param {EAdvancedSortMethod} operation operation to apply (min, max, median, mean, ...)\r\n   * @param {string} numberColumn1 first numerical column\r\n   * @param {string} numberColumn2 second numerical column\r\n   * @param {string} numberColumns additional numerical columns\r\n   */\r\n  reduce(label: string | null, operation: EAdvancedSortMethod, numberColumn1: string, numberColumn2: string, ...numberColumns: string[]) {\r\n    this.columns.push({\r\n      desc: createReduceDesc(label ? label : undefined),\r\n      columns: [numberColumn1, numberColumn2].concat(numberColumns),\r\n      post: (col) => {\r\n        (<ReduceColumn>col).setReduce(operation);\r\n      }\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * add a scripted / formula column\r\n   * @param {string | null} label optional label\r\n   * @param {string} code the JS code see ScriptColumn for details\r\n   * @param {string} numberColumn1 first numerical column\r\n   * @param {string} numberColumn2 second numerical column\r\n   * @param {string} numberColumns additional numerical columns\r\n   */\r\n  scripted(label: string | null, code: string, numberColumn1: string, numberColumn2: string, ...numberColumns: string[]) {\r\n    this.columns.push({\r\n      desc: createScriptDesc(label ? label : undefined),\r\n      columns: [numberColumn1, numberColumn2].concat(numberColumns),\r\n      post: (col) => {\r\n        (<ScriptColumn>col).setScript(code);\r\n      }\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * add a selection column for easier multi selections\r\n   */\r\n  selection() {\r\n    this.columns.push({\r\n      desc: createSelectionDesc(),\r\n      columns: []\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * add a group column to show the current group name\r\n   */\r\n  group() {\r\n    this.columns.push({\r\n      desc: createGroupDesc(),\r\n      columns: []\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * add an aggregate column to this ranking to collapse/expand groups\r\n   */\r\n  aggregate() {\r\n    this.columns.push({\r\n      desc: createAggregateDesc(),\r\n      columns: []\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * add a ranking column\r\n   */\r\n  rank() {\r\n    this.columns.push({\r\n      desc: createRankDesc(),\r\n      columns: []\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * add suporttypes (aggregate, rank, selection) to the ranking\r\n   */\r\n  supportTypes() {\r\n    return this.aggregate().rank().selection();\r\n  }\r\n\r\n  /**\r\n   * add all columns to this ranking\r\n   */\r\n  allColumns() {\r\n    this.columns.push(RankingBuilder.ALL_MAGIC_FLAG);\r\n    return this;\r\n  }\r\n\r\n  build(data: ADataProvider): Ranking {\r\n    const r = data.pushRanking();\r\n    const cols = data.getColumns();\r\n\r\n    const findDesc = (c: string) => cols.find((d) => d.label === c || (<any>d).column === c);\r\n\r\n    const addColumn = (c: string) => {\r\n      const desc = findDesc(c);\r\n      if (desc) {\r\n        return data.push(r, desc) != null;\r\n      }\r\n      console.warn('invalid column: ', c);\r\n      return false;\r\n    };\r\n\r\n    this.columns.forEach((c) => {\r\n      if (c === RankingBuilder.ALL_MAGIC_FLAG) {\r\n        cols.forEach((col) => data.push(r, col));\r\n        return;\r\n      }\r\n      if (typeof c === 'string') {\r\n        addColumn(c);\r\n        return;\r\n      }\r\n      const col = data.create(typeof c.desc === 'function' ? c.desc(data) : c.desc)!;\r\n      r.push(col);\r\n      c.columns.forEach((ci) => {\r\n        const d = findDesc(ci);\r\n        const child = d ? data.create(d) : null;\r\n        if (!child) {\r\n          console.warn('invalid column: ', ci);\r\n          return;\r\n        }\r\n        (<CompositeColumn>col).push(child);\r\n      });\r\n      if (c.post) {\r\n        c.post(col);\r\n      }\r\n    });\r\n\r\n    const children = r.children;\r\n    {\r\n      const groups: Column[] = [];\r\n      this.groups.forEach((column) => {\r\n        const col = children.find((d) => d.desc.label === column || (<any>d).desc.column === column);\r\n        if (col) {\r\n          groups.push(col);\r\n          return;\r\n        }\r\n        const desc = findDesc(column);\r\n        if (desc && data.push(r, desc)) {\r\n          return;\r\n        }\r\n        console.warn('invalid group criteria column: ', column);\r\n      });\r\n      if (groups.length > 0) {\r\n        r.setGroupCriteria(groups);\r\n      }\r\n    }\r\n    {\r\n      const sorts: ISortCriteria[] = [];\r\n      this.sort.forEach(({column, asc}) => {\r\n        const col = children.find((d) => d.desc.label === column || (<any>d).desc.column === column);\r\n        if (col) {\r\n          sorts.push({col, asc});\r\n          return;\r\n        }\r\n        const desc = findDesc(column);\r\n        if (desc && data.push(r, desc)) {\r\n          return;\r\n        }\r\n        console.warn('invalid sort criteria column: ', column);\r\n      });\r\n      if (sorts.length > 0) {\r\n        r.setSortCriteria(sorts);\r\n      }\r\n    }\r\n    return r;\r\n  }\r\n}\r\n\r\n/**\r\n * creates a new instance of a ranking builder\r\n * @returns {RankingBuilder}\r\n */\r\nexport function buildRanking() {\r\n  return new RankingBuilder();\r\n}\r\n","import {IColumnDesc} from '../model';\r\nimport Column from '../model/Column';\r\nimport {deriveColors, deriveColumnDescriptions, IDataProviderOptions, ILocalDataProviderOptions} from '../provider';\r\nimport ADataProvider from '../provider/ADataProvider';\r\nimport LocalDataProvider from '../provider/LocalDataProvider';\r\nimport LineUp from '../ui/LineUp';\r\nimport Taggle from '../ui/taggle/Taggle';\r\nimport ColumnBuilder from './column/ColumnBuilder';\r\nimport LineUpBuilder from './LineUpBuilder';\r\nimport RankingBuilder from './RankingBuilder';\r\n\r\n/**\r\n * builder for a LocalDataProvider along with LineUp configuration options\r\n */\r\nexport default class DataBuilder extends LineUpBuilder {\r\n  private readonly columns: (IColumnDesc | ((data: any[]) => IColumnDesc))[] = [];\r\n  private readonly providerOptions: Partial<ILocalDataProviderOptions & IDataProviderOptions> = {\r\n    columnTypes: {}\r\n  };\r\n\r\n  private readonly rankBuilders: ((data: ADataProvider) => void)[] = [];\r\n  private _deriveColors: boolean = false;\r\n\r\n  constructor(private readonly data: object[]) {\r\n    super();\r\n  }\r\n\r\n  /**\r\n   * allow just a single selection\r\n   */\r\n  singleSelection() {\r\n    this.providerOptions.multiSelection = false;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * filter all rankings by all filters in LineUp\r\n   */\r\n  filterGlobally() {\r\n    this.providerOptions.filterGlobally = true;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * no limits for the number of sorting and grouping criteria\r\n   */\r\n  noCriteriaLimits() {\r\n    this.providerOptions.maxGroupColumns = Infinity;\r\n    this.providerOptions.maxNestedSortingCriteria = Infinity;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * limit the number of sort and grouping criterias i.e the nesting level\r\n   * @param {number} sortingCritera\r\n   * @param {number} groupingCriteria\r\n   * @returns {this}\r\n   */\r\n  limitCriteria(sortingCritera: number, groupingCriteria: number) {\r\n    this.providerOptions.maxGroupColumns = sortingCritera;\r\n    this.providerOptions.maxNestedSortingCriteria = groupingCriteria;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * triggers to derive the column descriptions for the given data\r\n   * @param {string} columns optional enforced order of columns\r\n   */\r\n  deriveColumns(...columns: string[]) {\r\n    this.columns.push(...deriveColumnDescriptions(this.data, {columns}));\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * tirggers to assign colors for the given descriptions\r\n   */\r\n  deriveColors() {\r\n    this._deriveColors = true;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * register another column type to this data provider\r\n   * @param {string} type unique type id\r\n   * @param {typeof Column} clazz column class\r\n   */\r\n  registerColumnType(type: string, clazz: typeof Column) {\r\n    this.providerOptions.columnTypes![type] = clazz;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * push another column description to this data provider\r\n   * @param {IColumnDesc | ColumnBuilder} column column description or builder instance\r\n   */\r\n  column(column: IColumnDesc | ColumnBuilder) {\r\n    this.columns.push(column instanceof ColumnBuilder ? column.build.bind(column) : column);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * restores a given ranking dump\r\n   * @param dump dump as created using '.dump()'\r\n   */\r\n  restore(dump: any) {\r\n    this.rankBuilders.push((data) => data.restore(dump));\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * add the default ranking (all columns) to this data provider\r\n   * @param {boolean} addSupportTypes add support types, too, default: true\r\n   */\r\n  defaultRanking(addSupportTypes: boolean = true) {\r\n    this.rankBuilders.push((data) => data.deriveDefault(addSupportTypes));\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * add another ranking to this data provider\r\n   * @param {((data: ADataProvider) => void) | RankingBuilder} builder ranking builder\r\n   */\r\n  ranking(builder: ((data: ADataProvider) => void) | RankingBuilder) {\r\n    this.rankBuilders.push(builder instanceof RankingBuilder ? builder.build.bind(builder) : builder);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * builds the data provider itself\r\n   * @returns {LocalDataProvider}\r\n   */\r\n  buildData() {\r\n    const columns = this.columns.map((d) => typeof d === 'function' ? d(this.data) : d);\r\n    if (this._deriveColors) {\r\n      deriveColors(columns);\r\n    }\r\n    const r = new LocalDataProvider(this.data, columns, this.providerOptions);\r\n    if (this.rankBuilders.length === 0) {\r\n      this.defaultRanking();\r\n    }\r\n    this.rankBuilders.forEach((builder) => builder(r));\r\n    return r;\r\n  }\r\n\r\n  /**\r\n   * builds LineUp at the given parent DOM node\r\n   * @param {HTMLElement} node parent DOM node to attach\r\n   * @returns {LineUp}\r\n   */\r\n  build(node: HTMLElement) {\r\n    return new LineUp(node, this.buildData(), this.options);\r\n  }\r\n\r\n  /**\r\n   * builds Taggle at the given parent DOM node\r\n   * @param {HTMLElement} node parent DOM node to attach\r\n   * @returns {Taggle}\r\n   */\r\n  buildTaggle(node: HTMLElement) {\r\n    return new Taggle(node, this.buildData(), this.options);\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * creates a new builder instance for the given data\r\n * @param {object[]} arr data to visualize\r\n * @returns {DataBuilder}\r\n */\r\nexport function builder(arr: object[]) {\r\n  return new DataBuilder(arr);\r\n}\r\n","import {ICategoricalColumnDesc, ICategory} from '../../model';\r\nimport ColumnBuilder from './ColumnBuilder';\r\n\r\nexport default class CategoricalColumnBuilder extends ColumnBuilder<ICategoricalColumnDesc> {\r\n\r\n  constructor(column: string) {\r\n    super('categorical', column);\r\n  }\r\n\r\n  /**\r\n   * converts this type to an ordinal column type, such that categories are mapped to numbers\r\n   */\r\n  asOrdinal() {\r\n    this.desc.type = 'ordinal';\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * specify the categories of this categorical column\r\n   * @param {(string | Partial<ICategory>)[]} categories\r\n   */\r\n  categories(categories: (string | Partial<ICategory>)[]) {\r\n    this.desc.categories = categories;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * define the category to use in case of missing or null values\r\n   * @param {string | Partial<ICategory>} missingCategory\r\n   */\r\n  missingCategory(missingCategory: (string | Partial<ICategory>)) {\r\n    this.desc.missingCategory = missingCategory;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * converts this type to a set column, i.e. multiple unique category in a value\r\n   * @param {string} separator optional separator separating a string value\r\n   */\r\n  asSet(separator?: string) {\r\n    if (separator) {\r\n      (<any>this.desc).separator = separator;\r\n    }\r\n    this.desc.type = 'set';\r\n    return this;\r\n  }\r\n\r\n  private derive(data: any[]) {\r\n    // derive categories\r\n    const categories = new Set<string>();\r\n    const isSet = this.desc.type === 'set';\r\n    const separator = (<any>this.desc).separator || ';';\r\n    const val = (vi: any) => {\r\n      if (typeof vi === 'string' && vi !== '') {\r\n        return vi;\r\n      }\r\n      if (vi != null && typeof vi.value === 'string' && vi.value !== '') {\r\n        return vi.value;\r\n      }\r\n      return null;\r\n    };\r\n    data.forEach((d) => {\r\n      const v = d[(<any>this.desc).column];\r\n      if (Array.isArray(v)) {\r\n        v.forEach((vi) => categories.add(val(vi)));\r\n      } else if (v != null && v !== '') {\r\n        const vs: string[] = isSet ? [v.toString()] : v.toString().split(separator);\r\n        vs.forEach((vi) => categories.add(val(vi)));\r\n      }\r\n    });\r\n    // remove missing values\r\n    categories.delete(<any>null);\r\n    categories.delete(<any>undefined);\r\n    categories.delete('');\r\n    categories.delete('NA');\r\n    categories.delete('NaN');\r\n    categories.delete('na');\r\n    this.categories(Array.from(categories).sort());\r\n  }\r\n\r\n  build(data: any[]): ICategoricalColumnDesc {\r\n    if (!this.desc.categories) {\r\n      this.derive(data);\r\n    }\r\n    return super.build(data);\r\n  }\r\n}\r\n\r\n/**\r\n * build a categorical column type\r\n * @param {string} column column which contains the associated data\r\n * @param {(string | Partial<ICategory>)[]} categories optional category definition\r\n * @returns {CategoricalColumnBuilder}\r\n */\r\nexport function buildCategoricalColumn(column: string, categories?: (string | Partial<ICategory>)[]) {\r\n  const r = new CategoricalColumnBuilder(column);\r\n  if (categories) {\r\n    r.categories(categories);\r\n  }\r\n  return r;\r\n}\r\n","import {min, max} from 'd3-array';\r\nimport {EAdvancedSortMethod, ESortMethod, INumberColumnDesc, IMapAbleDesc} from '../../model';\r\nimport ColumnBuilder from './ColumnBuilder';\r\n\r\nexport default class NumberColumnBuilder extends ColumnBuilder<INumberColumnDesc> {\r\n\r\n  constructor(column: string) {\r\n    super('number', column);\r\n  }\r\n\r\n  /**\r\n   * defines the mapping for this number column to normalize the data\r\n   * @param {\"linear\" | \"sqrt\" | \"pow1.1\" | \"pow2\" | \"pow3\"} type mapping type\r\n   * @param {[number , number]} domain input data domain [min, max]\r\n   * @param {[number , number]} range optional output domain [0, 1]\r\n   */\r\n  mapping(type: 'linear' | 'sqrt' | 'pow1.1' | 'pow2' | 'pow3', domain: [number, number], range?: [number, number]) {\r\n    if (type === 'linear') {\r\n      this.desc.domain = domain;\r\n      if (range) {\r\n        this.desc.range = range;\r\n      }\r\n      return;\r\n    }\r\n    this.desc.map = {\r\n      type, domain, range: range || [0, 1]\r\n    };\r\n    return this;\r\n  }\r\n\r\n  colorMapping(type: string | ((v: number)=>string) | any) {\r\n    (<IMapAbleDesc>this.desc).colorMapping = type;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * defines a script to normalize the data, see ScriptedMappingFunction for details\r\n   * @param {string} code the code to execute\r\n   * @param {[number , number]} domain the input data domain [min, max]\r\n   */\r\n  scripted(code: string, domain: [number, number]) {\r\n    this.desc.map = {domain, code, type: 'script'};\r\n    return this;\r\n  }\r\n\r\n\r\n  /**\r\n   * @inheritDoc\r\n   * @param {string[] | number} labels labels to use for each array item or the expected length of an value\r\n   * @param {EAdvancedSortMethod} sort sorting criteria when sorting by this column\r\n   */\r\n  asArray(labels?: string[] | number, sort?: EAdvancedSortMethod) {\r\n    if (sort) {\r\n      (<any>this.desc).sort = sort;\r\n    }\r\n    return super.asArray(labels);\r\n  }\r\n\r\n  /**\r\n   * @inheritDoc\r\n   * @param {EAdvancedSortMethod} sort sorting criteria when sorting by this column\r\n   */\r\n  asMap(sort?: EAdvancedSortMethod) {\r\n    if (sort) {\r\n      (<any>this.desc).sort = sort;\r\n    }\r\n    return super.asMap();\r\n  }\r\n\r\n  /**\r\n   * converts type to a boxplot column type\r\n   * @param {ESortMethod} sort sorting criteria when sorting by this column\r\n   */\r\n  asBoxPlot(sort?: ESortMethod) {\r\n    if (sort) {\r\n      (<any>this.desc).sort = sort;\r\n    }\r\n    this.desc.type = 'boxplot';\r\n    return this;\r\n  }\r\n\r\n  private derive(data: any[]) {\r\n    const col = (<any>this.desc).column;\r\n\r\n    const asArray = (v: any, extra: string) => {\r\n      const vs: number[] = [];\r\n      (Array.isArray(v) ? v : [v]).forEach((vi) => {\r\n        if (typeof vi === 'number' && !isNaN(vi)) {\r\n          vs.push(vi);\r\n        }\r\n        if (vi != null && typeof vi.value === 'number' && !isNaN(vi.value)) {\r\n          vs.push(vi.value);\r\n        }\r\n        if (vi != null && typeof vi[extra] === 'number' && !isNaN(vi[extra])) {\r\n          vs.push(vi[extra]);\r\n        }\r\n      });\r\n      return vs;\r\n    };\r\n\r\n    const minv = min(data, (d) => {\r\n      const v = d[col];\r\n      const vs: number[] = asArray(v, 'min');\r\n      return vs.length === 0 ? Infinity : min(vs);\r\n    });\r\n    const maxv = max(data, (d) => {\r\n      const v = d[col];\r\n      const vs: number[] = asArray(v, 'max');\r\n      return vs.length === 0 ? -Infinity : max(vs);\r\n    });\r\n    return <[number, number]>[minv, maxv];\r\n  }\r\n\r\n\r\n  build(data: any[]): INumberColumnDesc {\r\n    if (!this.desc.map && !this.desc.domain) {\r\n      // derive domain\r\n      this.mapping('linear', this.derive(data));\r\n    } else {\r\n      const d = this.desc.domain || this.desc.map!.domain;\r\n      if (isNaN(d[0]) || isNaN(d[1])) {\r\n        const ext = this.derive(data);\r\n        if (isNaN(d[0])) {\r\n          d[0] = ext[0];\r\n        }\r\n        if (isNaN(d[1])) {\r\n          d[1] = ext[1];\r\n        }\r\n      }\r\n    }\r\n    return super.build(data);\r\n  }\r\n}\r\n\r\n/**\r\n * builds numerical column builder\r\n * @param {string} column column which contains the associated data\r\n * @param {[number , number]} domain domain (min, max) of this column\r\n * @returns {NumberColumnBuilder}\r\n */\r\nexport function buildNumberColumn(column: string, domain?: [number, number]) {\r\n  const r = new NumberColumnBuilder(column);\r\n  if (domain) {\r\n    r.mapping('linear', domain);\r\n  }\r\n  return r;\r\n}\r\n","import {IStringColumnDesc} from '../../model';\r\nimport ColumnBuilder from './ColumnBuilder';\r\n\r\nexport default class StringColumnBuilder extends ColumnBuilder<IStringColumnDesc> {\r\n\r\n  constructor(column: string) {\r\n    super('string', column);\r\n  }\r\n\r\n  /**\r\n   * makes the text editable within a cell and switches to the annotate type\r\n   */\r\n  editable() {\r\n    this.desc.type = 'annotate';\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * allow html text as values\r\n   */\r\n  html() {\r\n    this.desc.escape = false;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * provide a pattern with which the value will be wrapped, use <code>${value}</code> for the current and and <code>${item}</code> for the whole item\r\n   * @param {string} pattern pattern to apply\r\n   * @param {string[]} templates optional templates for patterns to provide in the edit pattern dialog\r\n   */\r\n  pattern(pattern: string, templates?: string[]) {\r\n    this.desc.pattern = pattern;\r\n    if (templates) {\r\n      this.desc.patternTemplates = templates;\r\n    }\r\n    return this;\r\n  }\r\n}\r\n\r\n/**\r\n * builds a string column builder\r\n * @param {string} column column which contains the associated data\r\n * @returns {StringColumnBuilder}\r\n */\r\nexport function buildStringColumn(column: string) {\r\n  return new StringColumnBuilder(column);\r\n}\r\n","import {IDateColumnDesc} from '../../model';\r\nimport ColumnBuilder from './ColumnBuilder';\r\n\r\nexport default class DateColumnBuilder extends ColumnBuilder<IDateColumnDesc> {\r\n\r\n  constructor(column: string) {\r\n    super('date', column);\r\n  }\r\n\r\n  /**\r\n   * specify the format and parsing d3-time pattern to convert Date to strings and vise versa\r\n   * @param {string} format d3-time-format pattern\r\n   * @param {string} parse optional different parsing pattern\r\n   */\r\n  format(format: string, parse?: string) {\r\n    this.desc.dateFormat = format;\r\n    if (parse) {\r\n      this.desc.dateParse = parse;\r\n    }\r\n    return this;\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * builds a date column builder\r\n * @param {string} column column which contains the associated data\r\n * @returns {DateColumnBuilder}\r\n */\r\nexport function buildDateColumn(column: string) {\r\n  return new DateColumnBuilder(column);\r\n}\r\n","import {IHierarchyColumnDesc, IPartialCategoryNode} from '../../model';\r\nimport ColumnBuilder from './ColumnBuilder';\r\n\r\nexport default class HierarchyColumnBuilder extends ColumnBuilder<IHierarchyColumnDesc> {\r\n\r\n  constructor(column: string) {\r\n    super('hierarchy', column);\r\n  }\r\n\r\n  /**\r\n   * specify the underlying hierarchy of this column\r\n   * @param {IPartialCategoryNode} hierarchy\r\n   * @param {string} hierarchySeparator specify the character to separate levels (default dot)\r\n   */\r\n  hierarchy(hierarchy: IPartialCategoryNode, hierarchySeparator?: string) {\r\n    this.desc.hierarchy = hierarchy;\r\n    if (hierarchySeparator) {\r\n      this.desc.hierarchySeparator = hierarchySeparator;\r\n    }\r\n    return this;\r\n  }\r\n\r\n  build(data: any[]): IHierarchyColumnDesc {\r\n    console.assert(Boolean(this.desc.hierarchy));\r\n    return super.build(data);\r\n  }\r\n}\r\n\r\n/**\r\n * build a hierarchical column builder\r\n * @param {string} column column which contains the associated data\r\n * @param {IPartialCategoryNode} hierarchy\r\n * @returns {HierarchyColumnBuilder}\r\n */\r\nexport function buildHierarchicalColumn(column: string, hierarchy?: IPartialCategoryNode) {\r\n  const r = new HierarchyColumnBuilder(column);\r\n  if (hierarchy) {\r\n    r.hierarchy(hierarchy);\r\n  }\r\n  return r;\r\n}\r\n","import {IActionColumnDesc, IAction, IGroupAction} from '../../model';\r\nimport ColumnBuilder from './ColumnBuilder';\r\n\r\nexport default class ActionsColumnBuilder extends ColumnBuilder<IActionColumnDesc> {\r\n\r\n  constructor() {\r\n    super('actions', '');\r\n  }\r\n\r\n  /**\r\n   * adds another action\r\n   * @param action the action\r\n   */\r\n  action(action: IAction) {\r\n    return this.actions([action]);\r\n  }\r\n\r\n  /**\r\n   * adds multiple actions\r\n   * @param actions list of actions\r\n   */\r\n  actions(actions: IAction[]) {\r\n    if (!this.desc.actions) {\r\n      this.desc.actions = [];\r\n    }\r\n    this.desc.actions!.push(...actions);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * adds another action that is shown in group rows\r\n   * @param action the action\r\n   */\r\n  groupAction(action: IGroupAction) {\r\n    return this.groupActions([action]);\r\n  }\r\n\r\n  /**\r\n   * add multiple group actions that are shown in group rows\r\n   * @param actions list of actions\r\n   */\r\n  groupActions(actions: IGroupAction[]) {\r\n    if (!this.desc.groupActions) {\r\n      this.desc.groupActions = [];\r\n    }\r\n    this.desc.groupActions!.push(...actions);\r\n    return this;\r\n  }\r\n}\r\n\r\n/**\r\n * builds a actions column builder\r\n * @returns {ActionsColumnBuilder}\r\n */\r\nexport function buildActionsColumn() {\r\n  return new ActionsColumnBuilder();\r\n}\r\n","import {extent} from 'd3-array';\r\nimport {\r\n  EAdvancedSortMethod,\r\n  IAction,\r\n  IGroupAction,\r\n  IArrayDesc,\r\n  ICategoricalColumnDesc,\r\n  ICategory,\r\n  IColumnDesc,\r\n  IDateColumnDesc,\r\n  IHierarchyColumnDesc,\r\n  INumberColumnDesc,\r\n  IPartialCategoryNode,\r\n  IStringColumnDesc,\r\n  IActionColumnDesc\r\n} from '../../model';\r\n\r\nexport interface IBuilderAdapterColumnDescProps extends Partial<IColumnDesc> {\r\n  column: string;\r\n  asMap?: boolean;\r\n  asArray?: string[] | number | boolean;\r\n  custom?: { [key: string]: any };\r\n}\r\n\r\nexport function build<T extends IBuilderAdapterColumnDescProps>(props: T, _data?: any[]): IColumnDesc {\r\n  const {column} = props;\r\n  const desc = <any>{column, type: props.type, label: column ? column[0].toUpperCase() + column.slice(1) : props.type};\r\n\r\n  (<(keyof IBuilderAdapterColumnDescProps)[]>['label', 'description', 'frozen', 'color', 'width', 'renderer', 'groupRenderer', 'summaryRenderer', 'visible', 'fixed']).forEach((key) => {\r\n    if (props.hasOwnProperty(key)) {\r\n      desc[key] = props[key];\r\n    }\r\n  });\r\n\r\n  if (props.custom) { // merge custom attributes\r\n    Object.assign(desc, props.custom);\r\n  }\r\n\r\n  if (props.asMap) {\r\n    console.assert(['categorical', 'date', 'number', 'string'].includes(desc.type!));\r\n    desc.type += 'Map';\r\n  }\r\n\r\n  if (props.asArray != null) {\r\n    console.assert(['boolean', 'categorical', 'date', 'number', 'string'].includes(desc.type!));\r\n    desc.type += 's';\r\n    const a = <IArrayDesc>desc;\r\n    const labels = props.asArray;\r\n    if (Array.isArray(labels)) {\r\n      a.labels = labels;\r\n      a.dataLength = labels.length;\r\n    } else if (typeof labels === 'number') {\r\n      a.dataLength = labels;\r\n    }\r\n  }\r\n\r\n  return <any>desc;\r\n}\r\n\r\n\r\nexport interface IBuilderAdapterCategoricalColumnDescProps extends IBuilderAdapterColumnDescProps {\r\n  asOrdinal?: boolean;\r\n  categories?: (string | Partial<ICategory>)[];\r\n  missingCategory?: (string | Partial<ICategory>);\r\n  asSet?: boolean | string;\r\n}\r\n\r\nexport function buildCategorical(props: IBuilderAdapterCategoricalColumnDescProps, data: any[]): ICategoricalColumnDesc {\r\n  const desc: any = build({...props, type: 'categorical'});\r\n\r\n  if (props.asOrdinal) {\r\n    desc.type = 'ordinal';\r\n  }\r\n  if (props.missingCategory) {\r\n    desc.missingCategory = props.missingCategory;\r\n  }\r\n  if (props.asSet) {\r\n    if (typeof props.asSet === 'string') {\r\n      (<any>desc).separator = props.asSet;\r\n    }\r\n    desc.type = 'set';\r\n  }\r\n\r\n\r\n  if (!props.categories) {\r\n    // derive categories\r\n    const categories = new Set(data.map((d) => <string>d[(<any>desc).column]));\r\n    desc.categories = Array.from(categories).sort();\r\n  } else {\r\n    desc.categories = props.categories;\r\n  }\r\n  return desc;\r\n}\r\n\r\nexport interface IBuilderAdapterDateColumnDescProps extends IBuilderAdapterColumnDescProps {\r\n  dateFormat?: string;\r\n  dateParse?: string;\r\n}\r\n\r\nexport function buildDate(props: IBuilderAdapterDateColumnDescProps): IDateColumnDesc {\r\n  const desc: any = build({...props, type: 'date'});\r\n\r\n  (<(keyof IBuilderAdapterDateColumnDescProps)[]>['dateFormat', 'dateParse']).forEach((key) => {\r\n    if (props.hasOwnProperty(key)) {\r\n      desc[key] = props[key];\r\n    }\r\n  });\r\n  return desc;\r\n}\r\n\r\nexport interface IBuilderAdapterHierarchyColumnDescProps extends IBuilderAdapterColumnDescProps {\r\n  hierarchy: IPartialCategoryNode;\r\n  hierarchySeparator?: string;\r\n}\r\n\r\nexport function buildHierarchy(props: Partial<IBuilderAdapterHierarchyColumnDescProps>): IHierarchyColumnDesc {\r\n  const desc: any = build({...(<any>props), type: 'hierarchy'});\r\n\r\n  (<(keyof IBuilderAdapterHierarchyColumnDescProps)[]>['hierarchy', 'hierarchySeparator']).forEach((key) => {\r\n    if (props.hasOwnProperty(key)) {\r\n      desc[key] = props[key];\r\n    }\r\n  });\r\n  return desc;\r\n}\r\n\r\nexport interface IBuilderAdapterNumberColumnDescProps extends IBuilderAdapterColumnDescProps {\r\n  domain?: [number, number];\r\n  range?: [number, number];\r\n  mapping?: 'linear' | 'sqrt' | 'pow1.1' | 'pow2' | 'pow3';\r\n  scripted?: string;\r\n  sort?: EAdvancedSortMethod;\r\n  colorMapping?: string;\r\n}\r\n\r\nexport function buildNumber(props: IBuilderAdapterNumberColumnDescProps, data: any[]): INumberColumnDesc {\r\n  const desc: any = build({...props, type: 'number'});\r\n\r\n  const domain = props.domain ? props.domain : <[number, number]>extent(data, (d) => <number>d[(<any>desc).column]);\r\n\r\n  (<(keyof IBuilderAdapterNumberColumnDescProps)[]>['sort', 'colorMapping']).forEach((key) => {\r\n    if (props.hasOwnProperty(key)) {\r\n      desc[key] = props[key];\r\n    }\r\n  });\r\n  if (props.scripted) {\r\n    desc.map = {domain, code: props.scripted, type: 'script'};\r\n  } else if (!props.mapping || props.mapping === 'linear') {\r\n    desc.domain = domain;\r\n    if (props.range) {\r\n      desc.range = props.range;\r\n    }\r\n  } else {\r\n    desc.map = {\r\n      type: props.mapping,\r\n      domain,\r\n      range: props.range || [0, 1]\r\n    };\r\n  }\r\n  return desc;\r\n}\r\n\r\nexport interface IBuilderAdapterStringColumnDescProps extends IBuilderAdapterColumnDescProps {\r\n  editable?: boolean;\r\n  html?: boolean;\r\n  pattern?: string;\r\n  patternTemplates?: string[];\r\n}\r\n\r\nexport function buildString(props: IBuilderAdapterStringColumnDescProps): IStringColumnDesc {\r\n  const desc: any = build({...props, type: 'string'});\r\n\r\n  (<(keyof IBuilderAdapterStringColumnDescProps)[]>['pattern', 'patternTemplate']).forEach((key) => {\r\n    if (props.hasOwnProperty(key)) {\r\n      desc[key] = props[key];\r\n    }\r\n  });\r\n  if (props.editable) {\r\n    desc.type = 'annotate';\r\n  }\r\n  if (props.html) {\r\n    desc.escape = false;\r\n  }\r\n  return desc;\r\n}\r\n\r\nexport interface IBuilderAdapterActionsColumnDescProps extends IBuilderAdapterColumnDescProps {\r\n  actions?: IAction[];\r\n  groupActions?: IGroupAction[];\r\n}\r\n\r\nexport function buildActions(props: IBuilderAdapterActionsColumnDescProps): IActionColumnDesc {\r\n  const desc: any = build({...props, type: 'actions'});\r\n\r\n  (<(keyof IBuilderAdapterActionsColumnDescProps)[]>['actions', 'groupActions']).forEach((key) => {\r\n    if (props.hasOwnProperty(key)) {\r\n      desc[key] = props[key];\r\n    }\r\n  });\r\n  return desc;\r\n}\r\n\r\n","import {\r\n  buildRanking as buildRankingImpl,\r\n  IImposeColumnBuilder,\r\n  INestedBuilder,\r\n  IReduceBuilder,\r\n  IScriptedBuilder,\r\n  IWeightedSumBuilder\r\n} from '..';\r\nimport {Ranking} from '../../model';\r\nimport {LocalDataProvider} from '../../provider';\r\n\r\nexport interface IBuilderAdapterRankingProps {\r\n  sortBy?: (string | { column: string, asc: 'asc' | 'desc' | boolean }) | ((string | { column: string, asc: 'asc' | 'desc' | boolean })[]);\r\n  groupBy?: string[] | string;\r\n  columns?: (string | IImposeColumnBuilder | INestedBuilder | IWeightedSumBuilder | IReduceBuilder | IScriptedBuilder)[];\r\n}\r\n\r\n/*\r\n * build the column description\r\n */\r\nexport function buildRanking(props: IBuilderAdapterRankingProps, data: LocalDataProvider): Ranking {\r\n  const r = buildRankingImpl();\r\n\r\n  if (props.sortBy) {\r\n    const s = Array.isArray(props.sortBy) ? props.sortBy : [props.sortBy];\r\n    s.forEach((si) => {\r\n      if (typeof si === 'string') {\r\n        r.sortBy(si);\r\n      } else {\r\n        r.sortBy(si.column, si.asc);\r\n      }\r\n    });\r\n  }\r\n  if (props.groupBy) {\r\n    const s = Array.isArray(props.groupBy) ? props.groupBy : [props.groupBy];\r\n    r.groupBy(...s);\r\n  }\r\n  if (props.columns) {\r\n    props.columns.forEach((c) => r.column(c));\r\n  }\r\n  return r.build(data);\r\n}\r\n\r\nexport function buildGeneric(props: { column: '*' | string }) {\r\n  return props.column;\r\n}\r\n\r\nexport interface IBuilderAdapterImposeColumnProps {\r\n  label?: string;\r\n  column: string;\r\n  categoricalColumn: string;\r\n}\r\n\r\nexport function buildImposeRanking(props: IBuilderAdapterImposeColumnProps) {\r\n  return <any>Object.assign({\r\n    type: 'impose'\r\n  }, props);\r\n}\r\n\r\n\r\nexport interface IBuilderAdapterNestedColumnProps {\r\n  label?: string;\r\n}\r\n\r\nexport function buildNestedRanking(props: IBuilderAdapterNestedColumnProps, children: string[]) {\r\n  const r: INestedBuilder = {\r\n    type: 'nested',\r\n    columns: children\r\n  };\r\n  if (props.label) {\r\n    r.label = props.label;\r\n  }\r\n  return r;\r\n}\r\n\r\nexport interface IBuilderAdapterWeightedSumColumnProps {\r\n  label?: string;\r\n}\r\n\r\nexport function buildWeightedSumRanking(props: IBuilderAdapterWeightedSumColumnProps, children: { column: string, weight: number }[]) {\r\n  const r: IWeightedSumBuilder = {\r\n    type: 'weightedSum',\r\n    columns: children.map((d) => d.column),\r\n    weights: children.map((d) => d.weight)\r\n  };\r\n  if (props.label) {\r\n    r.label = props.label;\r\n  }\r\n  return r;\r\n}\r\n\r\nexport interface IBuilderAdapterReduceColumnProps {\r\n  type: 'min' | 'max' | 'mean' | 'median';\r\n  label?: string;\r\n}\r\n\r\nexport function buildReduceRanking(props: IBuilderAdapterReduceColumnProps, children: string[]) {\r\n  const r: IReduceBuilder = {\r\n    type: props.type,\r\n    columns: children\r\n  };\r\n  if (props.label) {\r\n    r.label = props.label;\r\n  }\r\n  return r;\r\n}\r\n\r\nexport interface IBuilderAdapterScriptColumnProps {\r\n  code: string;\r\n  label?: string;\r\n}\r\n\r\nexport function buildScriptRanking(props: IBuilderAdapterScriptColumnProps, children: string[]) {\r\n  const r: IScriptedBuilder = {\r\n    type: 'script',\r\n    code: props.code,\r\n    columns: children\r\n  };\r\n  if (props.label) {\r\n    r.label = props.label;\r\n  }\r\n  return r;\r\n}\r\n\r\nexport interface IBuilderAdapterSupportColumnProps {\r\n  type: 'rank' | 'selection' | 'group' | 'aggregate' | '*';\r\n}\r\n\r\nexport function buildSupportRanking(props: IBuilderAdapterSupportColumnProps) {\r\n  return `_${props.type}`;\r\n}\r\n\r\nexport function buildAllColumnsRanking() {\r\n  return '*';\r\n}\r\n","export {equal} from '../../internal/utils';\r\n\r\nexport function isTypeInstance(clazz: any, superClass: any) {\r\n  let c = clazz;\r\n  while (c && c !== superClass) {\r\n    c = c.__proto__;\r\n  }\r\n  return c === superClass;\r\n}\r\n\r\nexport function pick<T>(obj: T, keys: (keyof T)[]): Pick<T, keyof T> {\r\n  const r: Pick<T, keyof T> = <any>{};\r\n  keys.forEach((k) => {\r\n    if (obj.hasOwnProperty(k)) {\r\n      r[k] = obj[k];\r\n    }\r\n  });\r\n  return r;\r\n}\r\n\r\nexport function isSame<T>(current: T, changed: (prop: keyof T) => boolean, props: (keyof T)[]) {\r\n  if (props.every((p) => !changed(p))) {\r\n    return null;\r\n  }\r\n  return pick(current, props);\r\n}\r\n","import {Column, IColumnDesc} from '../../model';\r\nimport {Taggle, LineUp} from '../../ui';\r\nimport {ILineUpOptions, ITaggleOptions} from '../../interfaces';\r\nimport {IBuilderAdapterRankingProps, buildRanking} from './ranking';\r\nimport {pick, isSame, equal} from './utils';\r\nimport {LocalDataProvider, deriveColumnDescriptions, deriveColors} from '../../provider';\r\n\r\n\r\nexport interface IBuilderAdapterDataProps {\r\n  data: any[];\r\n  selection?: number[] | null;\r\n  highlight?: number | null;\r\n\r\n  onSelectionChanged?(selection: number[]): void;\r\n  onHighlightChanged?(highlight: number): void;\r\n\r\n  singleSelection?: boolean;\r\n  filterGlobally?: boolean;\r\n  noCriteriaLimits?: boolean;\r\n  maxGroupColumns?: number;\r\n  maxNestedSortingCriteria?: number;\r\n  columnTypes?: {[type: string]: typeof Column};\r\n\r\n  deriveColumns?: boolean | string[];\r\n  deriveColors?: boolean;\r\n\r\n  restore?: any;\r\n  defaultRanking?: boolean | 'noSupportTypes';\r\n}\r\n\r\n\r\nexport declare type IBuilderAdapterProps = Partial<ITaggleOptions> & IBuilderAdapterDataProps;\r\n\r\nconst providerOptions: (keyof IBuilderAdapterDataProps)[] = ['singleSelection', 'filterGlobally', 'noCriteriaLimits', 'maxGroupColumns', 'maxNestedSortingCriteria', 'columnTypes'];\r\nconst lineupOptions: (keyof IBuilderAdapterProps)[] = ['animated', 'sidePanel', 'sidePanelCollapsed', 'hierarchyIndicator', 'defaultSlopeGraphMode', 'summaryHeader', 'expandLineOnHover', 'overviewMode', 'renderers', 'toolbar', 'rowHeight', 'rowPadding', 'groupHeight', 'groupPadding', 'dynamicHeight', 'labelRotation', 'ignoreUnsupportedBrowser'];\r\n\r\ninterface IRankingContext {\r\n  builders: IBuilderAdapterRankingProps[];\r\n  restore: any;\r\n  derive: boolean;\r\n  supportTypes: boolean;\r\n}\r\n\r\ninterface IColumnContext {\r\n  columns: IColumnDesc[];\r\n  deriveColumns: boolean;\r\n  deriveColumnNames: string[];\r\n  deriveColors: boolean;\r\n}\r\n\r\nexport interface IChangeDetecter {\r\n  (prop: (keyof IBuilderAdapterProps)): boolean;\r\n}\r\n\r\nexport interface IBuilderAdapter {\r\n  props(): Readonly<IBuilderAdapterProps>;\r\n  createInstance(data: LocalDataProvider, options: Partial<ILineUpOptions>): LineUp | Taggle;\r\n  rankingBuilders(): IBuilderAdapterRankingProps[];\r\n  columnDescs(data: any[]): IColumnDesc[];\r\n}\r\n\r\nexport class Adapter {\r\n  private data: LocalDataProvider | null = null;\r\n  private instance: LineUp | Taggle | null = null;\r\n\r\n  private prevRankings: IRankingContext | null = null;\r\n  private prevColumns: IColumnContext | null = null;\r\n  private prevHighlight: number | null = null;\r\n\r\n  private readonly onSelectionChanged = (indices: number[]) => {\r\n    if (this.props.onSelectionChanged && !equal(this.props.selection, indices)) {\r\n      this.props.onSelectionChanged(indices);\r\n    }\r\n  }\r\n\r\n  private readonly onHighlightChanged = (highlight: number) => {\r\n    const prev = this.prevHighlight != null ? this.prevHighlight : -1;\r\n    if (prev === highlight) {\r\n      return;\r\n    }\r\n    this.prevHighlight = highlight;\r\n    if (this.props.onHighlightChanged) {\r\n      this.props.onHighlightChanged(highlight);\r\n    }\r\n  }\r\n\r\n  constructor(private readonly adapter: IBuilderAdapter) {\r\n\r\n  }\r\n\r\n  private get props() {\r\n    return this.adapter.props();\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.data = this.buildProvider();\r\n    this.instance = this.adapter.createInstance(this.data, pick(this.props, lineupOptions));\r\n    this.instance.on(LineUp.EVENT_HIGHLIGHT_CHANGED, this.onHighlightChanged);\r\n  }\r\n\r\n  private resolveColumnDescs(data: any[]): IColumnContext {\r\n    const columns = this.adapter.columnDescs(data);\r\n    const deriveColumns = columns.length === 0 || Boolean(this.props.deriveColumns);\r\n    const deriveColumnNames = Array.isArray(this.props.deriveColumns) ? this.props.deriveColumns : [];\r\n    const deriveColors = Boolean(this.props.deriveColors);\r\n    return {\r\n      columns,\r\n      deriveColors,\r\n      deriveColumns,\r\n      deriveColumnNames\r\n    };\r\n  }\r\n\r\n  private resolveRankings(): IRankingContext {\r\n    const builders = this.adapter.rankingBuilders();\r\n\r\n    return {\r\n      builders,\r\n      restore: this.props.restore,\r\n      derive: (builders.length === 0 && !this.props.restore) || Boolean(this.props.defaultRanking),\r\n      supportTypes: this.props.defaultRanking !== 'noSupportTypes'\r\n    };\r\n  }\r\n\r\n  private buildColumns(data: any[], ctx: IColumnContext) {\r\n    this.prevColumns = ctx;\r\n    const columns = ctx.columns.map((d) => Object.assign({}, d)); // work on copy\r\n    if (ctx.deriveColumns) {\r\n      columns.push(...deriveColumnDescriptions(data, {columns: ctx.deriveColumnNames}));\r\n    }\r\n    if (ctx.deriveColors) {\r\n      deriveColors(columns);\r\n    }\r\n    return columns;\r\n  }\r\n\r\n  private buildRankings(data: LocalDataProvider, rankings: IRankingContext) {\r\n    data.clearRankings();\r\n    this.prevRankings = rankings;\r\n    if (rankings.derive) {\r\n      data.deriveDefault(rankings.supportTypes);\r\n    }\r\n    if (rankings.restore) {\r\n      data.restore(rankings.restore);\r\n    }\r\n    rankings.builders.forEach((b) => buildRanking(b, data!));\r\n  }\r\n\r\n  private buildProvider() {\r\n    const columns = this.buildColumns(this.props.data, this.resolveColumnDescs(this.props.data));\r\n    const data = new LocalDataProvider(this.props.data, columns, pick(this.props, providerOptions));\r\n\r\n    this.buildRankings(data, this.resolveRankings());\r\n\r\n    data.setSelection(this.props.selection || []);\r\n    data.on(LocalDataProvider.EVENT_SELECTION_CHANGED, this.onSelectionChanged);\r\n\r\n    return data;\r\n  }\r\n\r\n  private updateLineUp(changeDetector: IChangeDetecter, providerChanged: boolean) {\r\n    // check lineup instance properties\r\n    const changedLineUpOptions = isSame(this.props, changeDetector, lineupOptions);\r\n    if (!changedLineUpOptions) {\r\n      if (providerChanged) {\r\n        this.instance!.setDataProvider(this.data!);\r\n      }\r\n\r\n      if (providerChanged || (this.props.highlight != null && this.prevHighlight !== this.props.highlight)) {\r\n        this.prevHighlight = this.props.highlight == null ? -1 : this.props.highlight;\r\n        this.instance!.on(LineUp.EVENT_HIGHLIGHT_CHANGED, null);\r\n        this.instance!.setHighlight(this.prevHighlight);\r\n        this.instance!.on(LineUp.EVENT_HIGHLIGHT_CHANGED, this.onHighlightChanged);\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n    // recreate lineup\r\n    if (this.instance) {\r\n      this.instance.destroy();\r\n    }\r\n    this.instance = this.adapter.createInstance(this.data!, changedLineUpOptions);\r\n\r\n    this.prevHighlight = this.props.highlight == null ? -1 : this.props.highlight;\r\n    this.instance!.setHighlight(this.prevHighlight);\r\n    this.instance!.on(LineUp.EVENT_HIGHLIGHT_CHANGED, this.onHighlightChanged);\r\n    return true;\r\n  }\r\n\r\n  private updateProvider(changeDetector: IChangeDetecter) {\r\n    const changedProviderOptions = isSame(this.props, changeDetector, providerOptions);\r\n    if (changedProviderOptions || !this.data || changeDetector('data')) {\r\n      // big change start from scratch\r\n      this.data = this.buildProvider();\r\n      return true;\r\n    }\r\n\r\n    const rankings = this.resolveRankings();\r\n    const columns = this.resolveColumnDescs(this.props.data);\r\n    const columnsChanged = !equal(this.prevColumns, columns);\r\n    if (columnsChanged) {\r\n      const descs = this.buildColumns(this.props.data, columns);\r\n      this.data.clearColumns();\r\n      descs.forEach((d) => this.data!.pushDesc(d));\r\n    }\r\n\r\n    if (columnsChanged || !equal(rankings, this.prevRankings)) {\r\n      this.buildRankings(this.data, rankings);\r\n    }\r\n\r\n    this.data.on(LocalDataProvider.EVENT_SELECTION_CHANGED, null);\r\n    this.data.setSelection(this.props.selection || []);\r\n    this.data.on(LocalDataProvider.EVENT_SELECTION_CHANGED, this.onSelectionChanged);\r\n    return false;\r\n  }\r\n\r\n  componentDidUpdate(changeDetector: IChangeDetecter) {\r\n    const providerChanged = this.updateProvider(changeDetector);\r\n    this.updateLineUp(changeDetector, providerChanged);\r\n    // this.instance!.update();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.instance) {\r\n      this.instance.destroy();\r\n      this.instance = null;\r\n    }\r\n    this.data = null;\r\n  }\r\n}\r\n","export {\r\n  IBuilderAdapterCategoricalColumnDescProps,\r\n  IBuilderAdapterColumnDescProps,\r\n  IBuilderAdapterDateColumnDescProps,\r\n  IBuilderAdapterHierarchyColumnDescProps,\r\n  IBuilderAdapterNumberColumnDescProps,\r\n  IBuilderAdapterStringColumnDescProps,\r\n  IBuilderAdapterActionsColumnDescProps\r\n} from './column';\r\nexport {IChangeDetecter, IBuilderAdapter, IBuilderAdapterDataProps, IBuilderAdapterProps} from './lineup';\r\nexport {\r\n  IBuilderAdapterImposeColumnProps,\r\n  IBuilderAdapterNestedColumnProps,\r\n  IBuilderAdapterRankingProps,\r\n  IBuilderAdapterReduceColumnProps,\r\n  IBuilderAdapterScriptColumnProps,\r\n  IBuilderAdapterSupportColumnProps,\r\n  IBuilderAdapterWeightedSumColumnProps\r\n} from './ranking';\r\n\r\nimport {build, buildCategorical, buildDate, buildHierarchy, buildNumber, buildString, buildActions} from './column';\r\nimport {Adapter} from './lineup';\r\nimport {\r\n  buildAllColumnsRanking,\r\n  buildGeneric,\r\n  buildImposeRanking,\r\n  buildNestedRanking,\r\n  buildRanking,\r\n  buildReduceRanking,\r\n  buildScriptRanking,\r\n  buildSupportRanking,\r\n  buildWeightedSumRanking\r\n} from './ranking';\r\nimport {equal, isSame, isTypeInstance} from './utils';\r\n\r\nexport const builderAdapter = {\r\n  buildString,\r\n  buildNumber,\r\n  buildHierarchy,\r\n  buildDate,\r\n  buildCategorical,\r\n  buildActions,\r\n  build,\r\n  buildGeneric,\r\n  buildWeightedSumRanking,\r\n  buildSupportRanking,\r\n  buildScriptRanking,\r\n  buildReduceRanking,\r\n  buildRanking,\r\n  buildNestedRanking,\r\n  buildImposeRanking,\r\n  buildAllColumnsRanking,\r\n  equal,\r\n  isSame,\r\n  isTypeInstance,\r\n  Adapter\r\n};\r\n","import LineUp from '../ui/LineUp';\r\nimport Taggle from '../ui/taggle/Taggle';\r\nimport {builder} from './DataBuilder';\r\n\r\nexport * from './DataBuilder';\r\nexport * from './column';\r\nexport * from './RankingBuilder';\r\nexport * from './adapter';\r\n\r\n/**\r\n * build a new Taggle instance in the given node for the given data\r\n * @param {HTMLElement} node DOM node to attach to\r\n * @param {any[]} data data to visualize\r\n * @param {string[]} columns optional enforced column order\r\n * @returns {Taggle}\r\n */\r\nexport function asTaggle(node: HTMLElement, data: any[], ...columns: string[]): Taggle {\r\n  return builder(data)\r\n    .deriveColumns(...columns)\r\n    .deriveColors()\r\n    .defaultRanking()\r\n    .buildTaggle(node);\r\n}\r\n\r\n/**\r\n * build a new LineUp instance in the given node for the given data\r\n * @param {HTMLElement} node DOM node to attach to\r\n * @param {any[]} data data to visualize\r\n * @param {string[]} columns optional enforced column order\r\n * @returns {LineUp}\r\n */\r\nexport function asLineUp(node: HTMLElement, data: any[], ...columns: string[]): LineUp {\r\n  return builder(data)\r\n    .deriveColumns(...columns)\r\n    .deriveColors()\r\n    .defaultRanking()\r\n    .build(node);\r\n}\r\n","'use strict';\n\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var arrA = isArray(a)\n      , arrB = isArray(b)\n      , i\n      , length\n      , key;\n\n    if (arrA && arrB) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    if (arrA != arrB) return false;\n\n    var dateA = a instanceof Date\n      , dateB = b instanceof Date;\n    if (dateA != dateB) return false;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n\n    var regexpA = a instanceof RegExp\n      , regexpB = b instanceof RegExp;\n    if (regexpA != regexpB) return false;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n\n    var keys = keyList(a);\n    length = keys.length;\n\n    if (length !== keyList(b).length)\n      return false;\n\n    for (i = length; i-- !== 0;)\n      if (!hasProp.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      key = keys[i];\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  return a!==a && b!==b;\n};\n","function detect() {\n  if (typeof navigator !== 'undefined') {\n    return parseUserAgent(navigator.userAgent);\n  }\n\n  return getNodeVersion();\n}\n\nfunction detectOS(userAgentString) {\n  var rules = getOperatingSystemRules();\n  var detected = rules.filter(function (os) {\n    return os.rule && os.rule.test(userAgentString);\n  })[0];\n\n  return detected ? detected.name : null;\n}\n\nfunction getNodeVersion() {\n  var isNode = typeof process !== 'undefined' && process.version;\n  return isNode && {\n    name: 'node',\n    version: process.version.slice(1),\n    os: process.platform\n  };\n}\n\nfunction parseUserAgent(userAgentString) {\n  var browsers = getBrowserRules();\n  if (!userAgentString) {\n    return null;\n  }\n\n  var detected = browsers.map(function(browser) {\n    var match = browser.rule.exec(userAgentString);\n    var version = match && match[1].split(/[._]/).slice(0,3);\n\n    if (version && version.length < 3) {\n      version = version.concat(version.length == 1 ? [0, 0] : [0]);\n    }\n\n    return match && {\n      name: browser.name,\n      version: version.join('.')\n    };\n  }).filter(Boolean)[0] || null;\n\n  if (detected) {\n    detected.os = detectOS(userAgentString);\n  }\n\n  if (/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/i.test(userAgentString)) {\n    detected = detected || {};\n    detected.bot = true;\n  }\n\n  return detected;\n}\n\nfunction getBrowserRules() {\n  return buildRules([\n    [ 'aol', /AOLShield\\/([0-9\\._]+)/ ],\n    [ 'edge', /Edge\\/([0-9\\._]+)/ ],\n    [ 'yandexbrowser', /YaBrowser\\/([0-9\\._]+)/ ],\n    [ 'vivaldi', /Vivaldi\\/([0-9\\.]+)/ ],\n    [ 'kakaotalk', /KAKAOTALK\\s([0-9\\.]+)/ ],\n    [ 'samsung', /SamsungBrowser\\/([0-9\\.]+)/ ],\n    [ 'chrome', /(?!Chrom.*OPR)Chrom(?:e|ium)\\/([0-9\\.]+)(:?\\s|$)/ ],\n    [ 'phantomjs', /PhantomJS\\/([0-9\\.]+)(:?\\s|$)/ ],\n    [ 'crios', /CriOS\\/([0-9\\.]+)(:?\\s|$)/ ],\n    [ 'firefox', /Firefox\\/([0-9\\.]+)(?:\\s|$)/ ],\n    [ 'fxios', /FxiOS\\/([0-9\\.]+)/ ],\n    [ 'opera', /Opera\\/([0-9\\.]+)(?:\\s|$)/ ],\n    [ 'opera', /OPR\\/([0-9\\.]+)(:?\\s|$)$/ ],\n    [ 'ie', /Trident\\/7\\.0.*rv\\:([0-9\\.]+).*\\).*Gecko$/ ],\n    [ 'ie', /MSIE\\s([0-9\\.]+);.*Trident\\/[4-7].0/ ],\n    [ 'ie', /MSIE\\s(7\\.0)/ ],\n    [ 'bb10', /BB10;\\sTouch.*Version\\/([0-9\\.]+)/ ],\n    [ 'android', /Android\\s([0-9\\.]+)/ ],\n    [ 'ios', /Version\\/([0-9\\._]+).*Mobile.*Safari.*/ ],\n    [ 'safari', /Version\\/([0-9\\._]+).*Safari/ ],\n    [ 'facebook', /FBAV\\/([0-9\\.]+)/],\n    [ 'instagram', /Instagram\\ ([0-9\\.]+)/],\n    [ 'ios-webview', /AppleWebKit\\/([0-9\\.]+).*Mobile/]\n  ]);\n}\n\nfunction getOperatingSystemRules() {\n  return buildRules([\n    [ 'iOS', /iP(hone|od|ad)/ ],\n    [ 'Android OS', /Android/ ],\n    [ 'BlackBerry OS', /BlackBerry|BB10/ ],\n    [ 'Windows Mobile', /IEMobile/ ],\n    [ 'Amazon OS', /Kindle/ ],\n    [ 'Windows 3.11', /Win16/ ],\n    [ 'Windows 95', /(Windows 95)|(Win95)|(Windows_95)/ ],\n    [ 'Windows 98', /(Windows 98)|(Win98)/ ],\n    [ 'Windows 2000', /(Windows NT 5.0)|(Windows 2000)/ ],\n    [ 'Windows XP', /(Windows NT 5.1)|(Windows XP)/ ],\n    [ 'Windows Server 2003', /(Windows NT 5.2)/ ],\n    [ 'Windows Vista', /(Windows NT 6.0)/ ],\n    [ 'Windows 7', /(Windows NT 6.1)/ ],\n    [ 'Windows 8', /(Windows NT 6.2)/ ],\n    [ 'Windows 8.1', /(Windows NT 6.3)/ ],\n    [ 'Windows 10', /(Windows NT 10.0)/ ],\n    [ 'Windows ME', /Windows ME/ ],\n    [ 'Open BSD', /OpenBSD/ ],\n    [ 'Sun OS', /SunOS/ ],\n    [ 'Linux', /(Linux)|(X11)/ ],\n    [ 'Mac OS', /(Mac_PowerPC)|(Macintosh)/ ],\n    [ 'QNX', /QNX/ ],\n    [ 'BeOS', /BeOS/ ],\n    [ 'OS/2', /OS\\/2/ ],\n    [ 'Search Bot', /(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\\/Teoma)|(ia_archiver)/ ]\n  ]);\n}\n\nfunction buildRules(ruleTuples) {\n  return ruleTuples.map(function(tuple) {\n    return {\n      name: tuple[0],\n      rule: tuple[1]\n    };\n  });\n}\n\nmodule.exports = {\n  detect: detect,\n  detectOS: detectOS,\n  getNodeVersion: getNodeVersion,\n  parseUserAgent: parseUserAgent\n};\n","/**\r\n * main module of LineUp.js containing the main class and exposes all other modules\r\n */\r\n\r\nimport './style.scss';\r\nimport {IColumnDesc} from './model';\r\nimport {ILocalDataProviderOptions} from './provider';\r\nimport ADataProvider from './provider/ADataProvider';\r\nimport LocalDataProvider from './provider/LocalDataProvider';\r\nimport LineUp, {ILineUpOptions} from './ui/LineUp';\r\nimport Taggle, {ITaggleOptions} from './ui/taggle';\r\n\r\nexport * from './provider';\r\nexport * from './renderer';\r\nexport * from './model';\r\nexport * from './builder';\r\nexport * from './ui';\r\nexport * from './interfaces';\r\nexport * from './config';\r\nexport {default} from './ui/LineUp';\r\nexport {IBoxPlotData, IAdvancedBoxPlotData, IStatistics, ICategoricalBin, ICategoricalStatistics, INumberBin} from './internal/math';\r\n\r\n\r\ndeclare const __VERSION__: string;\r\ndeclare const __BUILD_ID__: string;\r\ndeclare const __LICENSE__: string;\r\n/**\r\n * LineUp version\r\n * @type {string}\r\n */\r\nexport const version = __VERSION__;\r\n/**\r\n * LineUp unique build id\r\n * @type {string}\r\n */\r\nexport const buildId = __BUILD_ID__;\r\n/**\r\n * LineUp license type\r\n * @type {string}\r\n */\r\nexport const license = __LICENSE__;\r\n\r\n\r\nexport function createLocalDataProvider(data: any[], columns: IColumnDesc[], options: Partial<ILocalDataProviderOptions> = {}) {\r\n  return new LocalDataProvider(data, columns, options);\r\n}\r\n\r\n/**\r\n *\r\n * @param container the html element lineup should be built in\r\n * @param data {ADataProvider} the data providier\r\n * @param config {Partial<ILineUpOptions>} lineup configuration overrides\r\n * @returns {LineUp} the created lineup instance\r\n */\r\nexport function createLineUp(container: HTMLElement, data: ADataProvider, config: Partial<ILineUpOptions> = {}) {\r\n  return new LineUp(container, data, config);\r\n}\r\n\r\nexport function createTaggle(container: HTMLElement, data: ADataProvider, config: Partial<ITaggleOptions> = {}) {\r\n  return new Taggle(container, data, config);\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (C) Microsoft. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\nvar Reflect;\r\n(function (Reflect) {\r\n    // Metadata Proposal\r\n    // https://rbuckton.github.io/reflect-metadata/\r\n    (function (factory) {\r\n        var root = typeof global === \"object\" ? global :\r\n            typeof self === \"object\" ? self :\r\n                typeof this === \"object\" ? this :\r\n                    Function(\"return this;\")();\r\n        var exporter = makeExporter(Reflect);\r\n        if (typeof root.Reflect === \"undefined\") {\r\n            root.Reflect = Reflect;\r\n        }\r\n        else {\r\n            exporter = makeExporter(root.Reflect, exporter);\r\n        }\r\n        factory(exporter);\r\n        function makeExporter(target, previous) {\r\n            return function (key, value) {\r\n                if (typeof target[key] !== \"function\") {\r\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\r\n                }\r\n                if (previous)\r\n                    previous(key, value);\r\n            };\r\n        }\r\n    })(function (exporter) {\r\n        var hasOwn = Object.prototype.hasOwnProperty;\r\n        // feature test for Symbol support\r\n        var supportsSymbol = typeof Symbol === \"function\";\r\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\r\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\r\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\r\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\r\n        var downLevel = !supportsCreate && !supportsProto;\r\n        var HashMap = {\r\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\r\n            create: supportsCreate\r\n                ? function () { return MakeDictionary(Object.create(null)); }\r\n                : supportsProto\r\n                    ? function () { return MakeDictionary({ __proto__: null }); }\r\n                    : function () { return MakeDictionary({}); },\r\n            has: downLevel\r\n                ? function (map, key) { return hasOwn.call(map, key); }\r\n                : function (map, key) { return key in map; },\r\n            get: downLevel\r\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\r\n                : function (map, key) { return map[key]; },\r\n        };\r\n        // Load global or shim versions of Map, Set, and WeakMap\r\n        var functionPrototype = Object.getPrototypeOf(Function);\r\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\r\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\r\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\r\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\r\n        // [[Metadata]] internal slot\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\r\n        var Metadata = new _WeakMap();\r\n        /**\r\n         * Applies a set of decorators to a property of a target object.\r\n         * @param decorators An array of decorators.\r\n         * @param target The target object.\r\n         * @param propertyKey (Optional) The property key to decorate.\r\n         * @param attributes (Optional) The property descriptor for the target key.\r\n         * @remarks Decorators are applied in reverse order.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     Example = Reflect.decorate(decoratorsArray, Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     Object.defineProperty(Example, \"staticMethod\",\r\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\r\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\r\n         *\r\n         *     // method (on prototype)\r\n         *     Object.defineProperty(Example.prototype, \"method\",\r\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\r\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\r\n         *\r\n         */\r\n        function decorate(decorators, target, propertyKey, attributes) {\r\n            if (!IsUndefined(propertyKey)) {\r\n                if (!IsArray(decorators))\r\n                    throw new TypeError();\r\n                if (!IsObject(target))\r\n                    throw new TypeError();\r\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\r\n                    throw new TypeError();\r\n                if (IsNull(attributes))\r\n                    attributes = undefined;\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n                return DecorateProperty(decorators, target, propertyKey, attributes);\r\n            }\r\n            else {\r\n                if (!IsArray(decorators))\r\n                    throw new TypeError();\r\n                if (!IsConstructor(target))\r\n                    throw new TypeError();\r\n                return DecorateConstructor(decorators, target);\r\n            }\r\n        }\r\n        exporter(\"decorate\", decorate);\r\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\r\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\r\n        /**\r\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\r\n         * @param metadataKey The key for the metadata entry.\r\n         * @param metadataValue The value for the metadata entry.\r\n         * @returns A decorator function.\r\n         * @remarks\r\n         * If `metadataKey` is already defined for the target and target key, the\r\n         * metadataValue for that key will be overwritten.\r\n         * @example\r\n         *\r\n         *     // constructor\r\n         *     @Reflect.metadata(key, value)\r\n         *     class Example {\r\n         *     }\r\n         *\r\n         *     // property (on constructor, TypeScript only)\r\n         *     class Example {\r\n         *         @Reflect.metadata(key, value)\r\n         *         static staticProperty;\r\n         *     }\r\n         *\r\n         *     // property (on prototype, TypeScript only)\r\n         *     class Example {\r\n         *         @Reflect.metadata(key, value)\r\n         *         property;\r\n         *     }\r\n         *\r\n         *     // method (on constructor)\r\n         *     class Example {\r\n         *         @Reflect.metadata(key, value)\r\n         *         static staticMethod() { }\r\n         *     }\r\n         *\r\n         *     // method (on prototype)\r\n         *     class Example {\r\n         *         @Reflect.metadata(key, value)\r\n         *         method() { }\r\n         *     }\r\n         *\r\n         */\r\n        function metadata(metadataKey, metadataValue) {\r\n            function decorator(target, propertyKey) {\r\n                if (!IsObject(target))\r\n                    throw new TypeError();\r\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\r\n                    throw new TypeError();\r\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\r\n            }\r\n            return decorator;\r\n        }\r\n        exporter(\"metadata\", metadata);\r\n        /**\r\n         * Define a unique metadata entry on the target.\r\n         * @param metadataKey A key used to store and retrieve metadata.\r\n         * @param metadataValue A value that contains attached metadata.\r\n         * @param target The target object on which to define metadata.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\r\n         *\r\n         *     // decorator factory as metadata-producing annotation.\r\n         *     function MyAnnotation(options): Decorator {\r\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\r\n         *     }\r\n         *\r\n         */\r\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\r\n        }\r\n        exporter(\"defineMetadata\", defineMetadata);\r\n        /**\r\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\r\n         * @param metadataKey A key used to store and retrieve metadata.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function hasMetadata(metadataKey, target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\r\n        }\r\n        exporter(\"hasMetadata\", hasMetadata);\r\n        /**\r\n         * Gets a value indicating whether the target object has the provided metadata key defined.\r\n         * @param metadataKey A key used to store and retrieve metadata.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\r\n        }\r\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\r\n        /**\r\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\r\n         * @param metadataKey A key used to store and retrieve metadata.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function getMetadata(metadataKey, target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\r\n        }\r\n        exporter(\"getMetadata\", getMetadata);\r\n        /**\r\n         * Gets the metadata value for the provided metadata key on the target object.\r\n         * @param metadataKey A key used to store and retrieve metadata.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function getOwnMetadata(metadataKey, target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\r\n        }\r\n        exporter(\"getOwnMetadata\", getOwnMetadata);\r\n        /**\r\n         * Gets the metadata keys defined on the target object or its prototype chain.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns An array of unique metadata keys.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.getMetadataKeys(Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function getMetadataKeys(target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryMetadataKeys(target, propertyKey);\r\n        }\r\n        exporter(\"getMetadataKeys\", getMetadataKeys);\r\n        /**\r\n         * Gets the unique metadata keys defined on the target object.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns An array of unique metadata keys.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.getOwnMetadataKeys(Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function getOwnMetadataKeys(target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\r\n        }\r\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\r\n        /**\r\n         * Deletes the metadata entry from the target object with the provided key.\r\n         * @param metadataKey A key used to store and retrieve metadata.\r\n         * @param target The target object on which the metadata is defined.\r\n         * @param propertyKey (Optional) The property key for the target.\r\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\r\n         * @example\r\n         *\r\n         *     class Example {\r\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\r\n         *         // static staticProperty;\r\n         *         // property;\r\n         *\r\n         *         constructor(p) { }\r\n         *         static staticMethod(p) { }\r\n         *         method(p) { }\r\n         *     }\r\n         *\r\n         *     // constructor\r\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\r\n         *\r\n         *     // property (on constructor)\r\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\r\n         *\r\n         *     // property (on prototype)\r\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\r\n         *\r\n         *     // method (on constructor)\r\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\r\n         *\r\n         *     // method (on prototype)\r\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\r\n         *\r\n         */\r\n        function deleteMetadata(metadataKey, target, propertyKey) {\r\n            if (!IsObject(target))\r\n                throw new TypeError();\r\n            if (!IsUndefined(propertyKey))\r\n                propertyKey = ToPropertyKey(propertyKey);\r\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\r\n            if (IsUndefined(metadataMap))\r\n                return false;\r\n            if (!metadataMap.delete(metadataKey))\r\n                return false;\r\n            if (metadataMap.size > 0)\r\n                return true;\r\n            var targetMetadata = Metadata.get(target);\r\n            targetMetadata.delete(propertyKey);\r\n            if (targetMetadata.size > 0)\r\n                return true;\r\n            Metadata.delete(target);\r\n            return true;\r\n        }\r\n        exporter(\"deleteMetadata\", deleteMetadata);\r\n        function DecorateConstructor(decorators, target) {\r\n            for (var i = decorators.length - 1; i >= 0; --i) {\r\n                var decorator = decorators[i];\r\n                var decorated = decorator(target);\r\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\r\n                    if (!IsConstructor(decorated))\r\n                        throw new TypeError();\r\n                    target = decorated;\r\n                }\r\n            }\r\n            return target;\r\n        }\r\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\r\n            for (var i = decorators.length - 1; i >= 0; --i) {\r\n                var decorator = decorators[i];\r\n                var decorated = decorator(target, propertyKey, descriptor);\r\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\r\n                    if (!IsObject(decorated))\r\n                        throw new TypeError();\r\n                    descriptor = decorated;\r\n                }\r\n            }\r\n            return descriptor;\r\n        }\r\n        function GetOrCreateMetadataMap(O, P, Create) {\r\n            var targetMetadata = Metadata.get(O);\r\n            if (IsUndefined(targetMetadata)) {\r\n                if (!Create)\r\n                    return undefined;\r\n                targetMetadata = new _Map();\r\n                Metadata.set(O, targetMetadata);\r\n            }\r\n            var metadataMap = targetMetadata.get(P);\r\n            if (IsUndefined(metadataMap)) {\r\n                if (!Create)\r\n                    return undefined;\r\n                metadataMap = new _Map();\r\n                targetMetadata.set(P, metadataMap);\r\n            }\r\n            return metadataMap;\r\n        }\r\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\r\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\r\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\r\n            if (hasOwn)\r\n                return true;\r\n            var parent = OrdinaryGetPrototypeOf(O);\r\n            if (!IsNull(parent))\r\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\r\n            return false;\r\n        }\r\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\r\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\r\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\r\n            if (IsUndefined(metadataMap))\r\n                return false;\r\n            return ToBoolean(metadataMap.has(MetadataKey));\r\n        }\r\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\r\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\r\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\r\n            if (hasOwn)\r\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\r\n            var parent = OrdinaryGetPrototypeOf(O);\r\n            if (!IsNull(parent))\r\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\r\n            return undefined;\r\n        }\r\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\r\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\r\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\r\n            if (IsUndefined(metadataMap))\r\n                return undefined;\r\n            return metadataMap.get(MetadataKey);\r\n        }\r\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\r\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\r\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\r\n            metadataMap.set(MetadataKey, MetadataValue);\r\n        }\r\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\r\n        function OrdinaryMetadataKeys(O, P) {\r\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\r\n            var parent = OrdinaryGetPrototypeOf(O);\r\n            if (parent === null)\r\n                return ownKeys;\r\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\r\n            if (parentKeys.length <= 0)\r\n                return ownKeys;\r\n            if (ownKeys.length <= 0)\r\n                return parentKeys;\r\n            var set = new _Set();\r\n            var keys = [];\r\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\r\n                var key = ownKeys_1[_i];\r\n                var hasKey = set.has(key);\r\n                if (!hasKey) {\r\n                    set.add(key);\r\n                    keys.push(key);\r\n                }\r\n            }\r\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\r\n                var key = parentKeys_1[_a];\r\n                var hasKey = set.has(key);\r\n                if (!hasKey) {\r\n                    set.add(key);\r\n                    keys.push(key);\r\n                }\r\n            }\r\n            return keys;\r\n        }\r\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\r\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\r\n        function OrdinaryOwnMetadataKeys(O, P) {\r\n            var keys = [];\r\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\r\n            if (IsUndefined(metadataMap))\r\n                return keys;\r\n            var keysObj = metadataMap.keys();\r\n            var iterator = GetIterator(keysObj);\r\n            var k = 0;\r\n            while (true) {\r\n                var next = IteratorStep(iterator);\r\n                if (!next) {\r\n                    keys.length = k;\r\n                    return keys;\r\n                }\r\n                var nextValue = IteratorValue(next);\r\n                try {\r\n                    keys[k] = nextValue;\r\n                }\r\n                catch (e) {\r\n                    try {\r\n                        IteratorClose(iterator);\r\n                    }\r\n                    finally {\r\n                        throw e;\r\n                    }\r\n                }\r\n                k++;\r\n            }\r\n        }\r\n        // 6 ECMAScript Data Typ0es and Values\r\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\r\n        function Type(x) {\r\n            if (x === null)\r\n                return 1 /* Null */;\r\n            switch (typeof x) {\r\n                case \"undefined\": return 0 /* Undefined */;\r\n                case \"boolean\": return 2 /* Boolean */;\r\n                case \"string\": return 3 /* String */;\r\n                case \"symbol\": return 4 /* Symbol */;\r\n                case \"number\": return 5 /* Number */;\r\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\r\n                default: return 6 /* Object */;\r\n            }\r\n        }\r\n        // 6.1.1 The Undefined Type\r\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\r\n        function IsUndefined(x) {\r\n            return x === undefined;\r\n        }\r\n        // 6.1.2 The Null Type\r\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\r\n        function IsNull(x) {\r\n            return x === null;\r\n        }\r\n        // 6.1.5 The Symbol Type\r\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\r\n        function IsSymbol(x) {\r\n            return typeof x === \"symbol\";\r\n        }\r\n        // 6.1.7 The Object Type\r\n        // https://tc39.github.io/ecma262/#sec-object-type\r\n        function IsObject(x) {\r\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\r\n        }\r\n        // 7.1 Type Conversion\r\n        // https://tc39.github.io/ecma262/#sec-type-conversion\r\n        // 7.1.1 ToPrimitive(input [, PreferredType])\r\n        // https://tc39.github.io/ecma262/#sec-toprimitive\r\n        function ToPrimitive(input, PreferredType) {\r\n            switch (Type(input)) {\r\n                case 0 /* Undefined */: return input;\r\n                case 1 /* Null */: return input;\r\n                case 2 /* Boolean */: return input;\r\n                case 3 /* String */: return input;\r\n                case 4 /* Symbol */: return input;\r\n                case 5 /* Number */: return input;\r\n            }\r\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\r\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\r\n            if (exoticToPrim !== undefined) {\r\n                var result = exoticToPrim.call(input, hint);\r\n                if (IsObject(result))\r\n                    throw new TypeError();\r\n                return result;\r\n            }\r\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\r\n        }\r\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\r\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\r\n        function OrdinaryToPrimitive(O, hint) {\r\n            if (hint === \"string\") {\r\n                var toString_1 = O.toString;\r\n                if (IsCallable(toString_1)) {\r\n                    var result = toString_1.call(O);\r\n                    if (!IsObject(result))\r\n                        return result;\r\n                }\r\n                var valueOf = O.valueOf;\r\n                if (IsCallable(valueOf)) {\r\n                    var result = valueOf.call(O);\r\n                    if (!IsObject(result))\r\n                        return result;\r\n                }\r\n            }\r\n            else {\r\n                var valueOf = O.valueOf;\r\n                if (IsCallable(valueOf)) {\r\n                    var result = valueOf.call(O);\r\n                    if (!IsObject(result))\r\n                        return result;\r\n                }\r\n                var toString_2 = O.toString;\r\n                if (IsCallable(toString_2)) {\r\n                    var result = toString_2.call(O);\r\n                    if (!IsObject(result))\r\n                        return result;\r\n                }\r\n            }\r\n            throw new TypeError();\r\n        }\r\n        // 7.1.2 ToBoolean(argument)\r\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\r\n        function ToBoolean(argument) {\r\n            return !!argument;\r\n        }\r\n        // 7.1.12 ToString(argument)\r\n        // https://tc39.github.io/ecma262/#sec-tostring\r\n        function ToString(argument) {\r\n            return \"\" + argument;\r\n        }\r\n        // 7.1.14 ToPropertyKey(argument)\r\n        // https://tc39.github.io/ecma262/#sec-topropertykey\r\n        function ToPropertyKey(argument) {\r\n            var key = ToPrimitive(argument, 3 /* String */);\r\n            if (IsSymbol(key))\r\n                return key;\r\n            return ToString(key);\r\n        }\r\n        // 7.2 Testing and Comparison Operations\r\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\r\n        // 7.2.2 IsArray(argument)\r\n        // https://tc39.github.io/ecma262/#sec-isarray\r\n        function IsArray(argument) {\r\n            return Array.isArray\r\n                ? Array.isArray(argument)\r\n                : argument instanceof Object\r\n                    ? argument instanceof Array\r\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\r\n        }\r\n        // 7.2.3 IsCallable(argument)\r\n        // https://tc39.github.io/ecma262/#sec-iscallable\r\n        function IsCallable(argument) {\r\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\r\n            return typeof argument === \"function\";\r\n        }\r\n        // 7.2.4 IsConstructor(argument)\r\n        // https://tc39.github.io/ecma262/#sec-isconstructor\r\n        function IsConstructor(argument) {\r\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\r\n            return typeof argument === \"function\";\r\n        }\r\n        // 7.2.7 IsPropertyKey(argument)\r\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\r\n        function IsPropertyKey(argument) {\r\n            switch (Type(argument)) {\r\n                case 3 /* String */: return true;\r\n                case 4 /* Symbol */: return true;\r\n                default: return false;\r\n            }\r\n        }\r\n        // 7.3 Operations on Objects\r\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\r\n        // 7.3.9 GetMethod(V, P)\r\n        // https://tc39.github.io/ecma262/#sec-getmethod\r\n        function GetMethod(V, P) {\r\n            var func = V[P];\r\n            if (func === undefined || func === null)\r\n                return undefined;\r\n            if (!IsCallable(func))\r\n                throw new TypeError();\r\n            return func;\r\n        }\r\n        // 7.4 Operations on Iterator Objects\r\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\r\n        function GetIterator(obj) {\r\n            var method = GetMethod(obj, iteratorSymbol);\r\n            if (!IsCallable(method))\r\n                throw new TypeError(); // from Call\r\n            var iterator = method.call(obj);\r\n            if (!IsObject(iterator))\r\n                throw new TypeError();\r\n            return iterator;\r\n        }\r\n        // 7.4.4 IteratorValue(iterResult)\r\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\r\n        function IteratorValue(iterResult) {\r\n            return iterResult.value;\r\n        }\r\n        // 7.4.5 IteratorStep(iterator)\r\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\r\n        function IteratorStep(iterator) {\r\n            var result = iterator.next();\r\n            return result.done ? false : result;\r\n        }\r\n        // 7.4.6 IteratorClose(iterator, completion)\r\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\r\n        function IteratorClose(iterator) {\r\n            var f = iterator[\"return\"];\r\n            if (f)\r\n                f.call(iterator);\r\n        }\r\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\r\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\r\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\r\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\r\n        function OrdinaryGetPrototypeOf(O) {\r\n            var proto = Object.getPrototypeOf(O);\r\n            if (typeof O !== \"function\" || O === functionPrototype)\r\n                return proto;\r\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\r\n            // Try to determine the superclass constructor. Compatible implementations\r\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\r\n            // or ensure each class has a valid `constructor` property on its prototype that\r\n            // points back to the constructor.\r\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\r\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\r\n            if (proto !== functionPrototype)\r\n                return proto;\r\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\r\n            var prototype = O.prototype;\r\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\r\n            if (prototypeProto == null || prototypeProto === Object.prototype)\r\n                return proto;\r\n            // If the constructor was not a function, then we cannot determine the heritage.\r\n            var constructor = prototypeProto.constructor;\r\n            if (typeof constructor !== \"function\")\r\n                return proto;\r\n            // If we have some kind of self-reference, then we cannot determine the heritage.\r\n            if (constructor === O)\r\n                return proto;\r\n            // we have a pretty good guess at the heritage.\r\n            return constructor;\r\n        }\r\n        // naive Map shim\r\n        function CreateMapPolyfill() {\r\n            var cacheSentinel = {};\r\n            var arraySentinel = [];\r\n            var MapIterator = (function () {\r\n                function MapIterator(keys, values, selector) {\r\n                    this._index = 0;\r\n                    this._keys = keys;\r\n                    this._values = values;\r\n                    this._selector = selector;\r\n                }\r\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\r\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\r\n                MapIterator.prototype.next = function () {\r\n                    var index = this._index;\r\n                    if (index >= 0 && index < this._keys.length) {\r\n                        var result = this._selector(this._keys[index], this._values[index]);\r\n                        if (index + 1 >= this._keys.length) {\r\n                            this._index = -1;\r\n                            this._keys = arraySentinel;\r\n                            this._values = arraySentinel;\r\n                        }\r\n                        else {\r\n                            this._index++;\r\n                        }\r\n                        return { value: result, done: false };\r\n                    }\r\n                    return { value: undefined, done: true };\r\n                };\r\n                MapIterator.prototype.throw = function (error) {\r\n                    if (this._index >= 0) {\r\n                        this._index = -1;\r\n                        this._keys = arraySentinel;\r\n                        this._values = arraySentinel;\r\n                    }\r\n                    throw error;\r\n                };\r\n                MapIterator.prototype.return = function (value) {\r\n                    if (this._index >= 0) {\r\n                        this._index = -1;\r\n                        this._keys = arraySentinel;\r\n                        this._values = arraySentinel;\r\n                    }\r\n                    return { value: value, done: true };\r\n                };\r\n                return MapIterator;\r\n            }());\r\n            return (function () {\r\n                function Map() {\r\n                    this._keys = [];\r\n                    this._values = [];\r\n                    this._cacheKey = cacheSentinel;\r\n                    this._cacheIndex = -2;\r\n                }\r\n                Object.defineProperty(Map.prototype, \"size\", {\r\n                    get: function () { return this._keys.length; },\r\n                    enumerable: true,\r\n                    configurable: true\r\n                });\r\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\r\n                Map.prototype.get = function (key) {\r\n                    var index = this._find(key, /*insert*/ false);\r\n                    return index >= 0 ? this._values[index] : undefined;\r\n                };\r\n                Map.prototype.set = function (key, value) {\r\n                    var index = this._find(key, /*insert*/ true);\r\n                    this._values[index] = value;\r\n                    return this;\r\n                };\r\n                Map.prototype.delete = function (key) {\r\n                    var index = this._find(key, /*insert*/ false);\r\n                    if (index >= 0) {\r\n                        var size = this._keys.length;\r\n                        for (var i = index + 1; i < size; i++) {\r\n                            this._keys[i - 1] = this._keys[i];\r\n                            this._values[i - 1] = this._values[i];\r\n                        }\r\n                        this._keys.length--;\r\n                        this._values.length--;\r\n                        if (key === this._cacheKey) {\r\n                            this._cacheKey = cacheSentinel;\r\n                            this._cacheIndex = -2;\r\n                        }\r\n                        return true;\r\n                    }\r\n                    return false;\r\n                };\r\n                Map.prototype.clear = function () {\r\n                    this._keys.length = 0;\r\n                    this._values.length = 0;\r\n                    this._cacheKey = cacheSentinel;\r\n                    this._cacheIndex = -2;\r\n                };\r\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\r\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\r\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\r\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\r\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\r\n                Map.prototype._find = function (key, insert) {\r\n                    if (this._cacheKey !== key) {\r\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\r\n                    }\r\n                    if (this._cacheIndex < 0 && insert) {\r\n                        this._cacheIndex = this._keys.length;\r\n                        this._keys.push(key);\r\n                        this._values.push(undefined);\r\n                    }\r\n                    return this._cacheIndex;\r\n                };\r\n                return Map;\r\n            }());\r\n            function getKey(key, _) {\r\n                return key;\r\n            }\r\n            function getValue(_, value) {\r\n                return value;\r\n            }\r\n            function getEntry(key, value) {\r\n                return [key, value];\r\n            }\r\n        }\r\n        // naive Set shim\r\n        function CreateSetPolyfill() {\r\n            return (function () {\r\n                function Set() {\r\n                    this._map = new _Map();\r\n                }\r\n                Object.defineProperty(Set.prototype, \"size\", {\r\n                    get: function () { return this._map.size; },\r\n                    enumerable: true,\r\n                    configurable: true\r\n                });\r\n                Set.prototype.has = function (value) { return this._map.has(value); };\r\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\r\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\r\n                Set.prototype.clear = function () { this._map.clear(); };\r\n                Set.prototype.keys = function () { return this._map.keys(); };\r\n                Set.prototype.values = function () { return this._map.values(); };\r\n                Set.prototype.entries = function () { return this._map.entries(); };\r\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\r\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\r\n                return Set;\r\n            }());\r\n        }\r\n        // naive WeakMap shim\r\n        function CreateWeakMapPolyfill() {\r\n            var UUID_SIZE = 16;\r\n            var keys = HashMap.create();\r\n            var rootKey = CreateUniqueKey();\r\n            return (function () {\r\n                function WeakMap() {\r\n                    this._key = CreateUniqueKey();\r\n                }\r\n                WeakMap.prototype.has = function (target) {\r\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\r\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\r\n                };\r\n                WeakMap.prototype.get = function (target) {\r\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\r\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\r\n                };\r\n                WeakMap.prototype.set = function (target, value) {\r\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\r\n                    table[this._key] = value;\r\n                    return this;\r\n                };\r\n                WeakMap.prototype.delete = function (target) {\r\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\r\n                    return table !== undefined ? delete table[this._key] : false;\r\n                };\r\n                WeakMap.prototype.clear = function () {\r\n                    // NOTE: not a real clear, just makes the previous data unreachable\r\n                    this._key = CreateUniqueKey();\r\n                };\r\n                return WeakMap;\r\n            }());\r\n            function CreateUniqueKey() {\r\n                var key;\r\n                do\r\n                    key = \"@@WeakMap@@\" + CreateUUID();\r\n                while (HashMap.has(keys, key));\r\n                keys[key] = true;\r\n                return key;\r\n            }\r\n            function GetOrCreateWeakMapTable(target, create) {\r\n                if (!hasOwn.call(target, rootKey)) {\r\n                    if (!create)\r\n                        return undefined;\r\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\r\n                }\r\n                return target[rootKey];\r\n            }\r\n            function FillRandomBytes(buffer, size) {\r\n                for (var i = 0; i < size; ++i)\r\n                    buffer[i] = Math.random() * 0xff | 0;\r\n                return buffer;\r\n            }\r\n            function GenRandomBytes(size) {\r\n                if (typeof Uint8Array === \"function\") {\r\n                    if (typeof crypto !== \"undefined\")\r\n                        return crypto.getRandomValues(new Uint8Array(size));\r\n                    if (typeof msCrypto !== \"undefined\")\r\n                        return msCrypto.getRandomValues(new Uint8Array(size));\r\n                    return FillRandomBytes(new Uint8Array(size), size);\r\n                }\r\n                return FillRandomBytes(new Array(size), size);\r\n            }\r\n            function CreateUUID() {\r\n                var data = GenRandomBytes(UUID_SIZE);\r\n                // mark as random - RFC 4122 § 4.4\r\n                data[6] = data[6] & 0x4f | 0x40;\r\n                data[8] = data[8] & 0xbf | 0x80;\r\n                var result = \"\";\r\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\r\n                    var byte = data[offset];\r\n                    if (offset === 4 || offset === 6 || offset === 8)\r\n                        result += \"-\";\r\n                    if (byte < 16)\r\n                        result += \"0\";\r\n                    result += byte.toString(16).toLowerCase();\r\n                }\r\n                return result;\r\n            }\r\n        }\r\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\r\n        function MakeDictionary(obj) {\r\n            obj.__ = undefined;\r\n            delete obj.__;\r\n            return obj;\r\n        }\r\n    });\r\n})(Reflect || (Reflect = {}));\r\n//# sourceMappingURL=Reflect.js.map","export default \"// removed by extract-text-webpack-plugin\""],"sourceRoot":""}